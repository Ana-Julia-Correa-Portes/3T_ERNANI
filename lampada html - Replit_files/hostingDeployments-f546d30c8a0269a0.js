!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8c0344f2-ea50-42ac-a321-2ae5be6f57e7",e._sentryDebugIdIdentifier="sentry-dbid-8c0344f2-ea50-42ac-a321-2ae5be6f57e7")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2a1b3354"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5013],{73966:function(e,n,t){var r,o,i=1/0,l=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u="\ud800-\udfff",s="\\u2700-\\u27bf",c="a-z\\xdf-\\xf6\\xf8-\\xff",d="A-Z\\xc0-\\xd6\\xd8-\\xde",p="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['’]",h="["+p+"]",m="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",g="["+c+"]",v="[^"+u+p+"\\d+"+s+c+d+"]",y="(?:\ud83c[\udde6-\uddff]){2}",x="[\ud800-\udbff][\udc00-\udfff]",R="["+d+"]",Z="(?:"+g+"|"+v+")",b="(?:"+f+"(?:d|ll|m|re|s|t|ve))?",C="(?:"+f+"(?:D|LL|M|RE|S|T|VE))?",w="(?:"+m+"|\ud83c[\udffb-\udfff])?",E="[\\ufe0e\\ufe0f]?",D="(?:\\u200d(?:"+["[^"+u+"]",y,x].join("|")+")"+E+w+")*",T="(?:"+["["+s+"]",y,x].join("|")+")"+(E+w+D),_=RegExp(f,"g"),G=RegExp(m,"g"),S=RegExp([R+"?"+g+"+"+b+"(?="+[h,R,"$"].join("|")+")","(?:"+R+"|"+v+")+"+C+"(?="+[h,R+Z,"$"].join("|")+")",R+"?"+Z+"+"+b,R+"+"+C,"\\d+",T].join("|"),"g"),N=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,U="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,A="object"==typeof self&&self&&self.Object===Object&&self,B=U||A||Function("return this")(),k=(r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==r?void 0:r[e]}),P=Object.prototype.toString,I=B.Symbol,M=I?I.prototype:void 0,O=M?M.toString:void 0;function L(e){return null==e?"":function(e){if("string"==typeof e)return e;if("symbol"==typeof(n=e)||n&&"object"==typeof n&&"[object Symbol]"==P.call(n))return O?O.call(e):"";var n,t=e+"";return"0"==t&&1/e==-i?"-0":t}(e)}var H=(o=function(e,n,t){return e+(t?"-":"")+n.toLowerCase()},function(e){var n;return function(e,n,t,r){for(var o=-1,i=e?e.length:0;++o<i;)t=n(t,e[o],o,e);return t}(function(e,n,t){if(e=L(e),void 0===n){var r;return(r=e,N.test(r))?e.match(S)||[]:e.match(l)||[]}return e.match(n)||[]}(((n=L(n=e))&&n.replace(a,k).replace(G,"")).replace(_,"")),o,"")});e.exports=H},97168:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hostingDeployments",function(){return t(55942)}])},42960:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var r=t(66626),o=t(74985),i=t(82230),l=t(94778),a=t(49224),u=t(73789),s=t(72093),c=t(24605),d=t(98250),p=t(50959),f=t(85763),h=t(64318);function m(){var e=(0,r._)((0,p.useState)(!1),2),n=e[0],t=e[1],a=(0,d.Z)("announcement","incident-20240219-action-required-banner"),s=a.shouldDisplay,m=a.dismiss,v=a.register;return((0,p.useEffect)(function(){v()},[v]),!s||n)?null:(0,o.BX)(l.G,{css:g.actionRequiredMessage,children:[(0,o.BX)(l.G,{css:g.actionRequiredHeader,children:[(0,o.BX)(l.G,{css:g.actionRequiredTitle,children:[(0,o.tZ)(u.Z,{color:c.TV.accentPrimaryDefault}),(0,o.tZ)(i.xv,{multiline:!0,css:g.actionRequiredTitleText,children:"Verify Your Reserved VM Deployments"})]}),(0,o.tZ)(f.hU,{css:g.actionRequiredDismiss,alt:"Dismiss",onClick:function(){m(),t(!0)},children:(0,o.tZ)(h.Z,{})})]}),(0,o.BX)(i.xv,{color:"dimmer",children:["Due to a recent incident, your Reserved VM Deployments might be affected. Please check your Deployments for any disruptions and manually redeploy if needed. For help, contact"," ",(0,o.tZ)("a",{href:"mailto:support@repl.it?subject=2024-02-19%20Reserved%20VM%20Deployments%20Incident",children:"support@repl.it"}),". Expect an email from Replit with more details."]})]})}var g=(0,a.X)({actionRequiredMessage:[s.l0.colWithGap(4),s.l0.px(12),s.l0.py(8),s.l0.border({color:c.TV.accentPrimaryStronger}),s.l0.borderRadius(4)],actionRequiredHeader:[s.l0.rowWithGap(4),s.l0.align.start],actionRequiredTitle:[s.l0.rowWithGap(6),s.l0.align.center,s.l0.flex.growAndShrink(1)],actionRequiredTitleText:[s.l0.flex.growAndShrink(1)],actionRequiredDismiss:[{marginLeft:"auto"}]})},6161:function(e,n,t){"use strict";t.d(n,{l:function(){return y}});var r=t(74985),o=t(80760),i=t(84175),l=t(20375),a=t(5887),u=t(45844),s=t(10495),c=t(72333),d=t(19068),p=t(64479),f=t(82230),h=t(94778),m=t(49224),g=t(72093),v=(0,m.X)({container:[{":first-of-type":{borderTopLeftRadius:4,borderTopRightRadius:4},":last-of-type":{borderBottomLeftRadius:4,borderBottomRightRadius:4}}],item:[g.l0.flex.growAndShrink(1),g.l0.color.foregroundDefault,g.l0.px(8),g.l0.py(12),d.gU.listItem,g.l0.flex.row,g.l0.position.relative,{borderRadius:"inherit",gap:8}],left:[g.l0.flex.growAndShrink(1),g.l0.rowWithGap(4),{flex:1}],right:[g.l0.rowWithGap(8),g.l0.align.center],header:[g.l0.flex.growAndShrink(1),g.l0.align.center,g.l0.flex.row],title:[g.l0.flex.growAndShrink(1),g.l0.maxWidth("max-content"),g.l0.ml(8)],titleRow:[g.l0.rowWithGap(4),g.l0.flex.growAndShrink(1)],lastDeployedText:[g.l0.flex.growAndShrink(1)],externalLinkButton:[g.l0.zIndex(1),{background:"transparent"}]});function y(e){var n=e.hostingDeployment,t=n.repl;return(0,r.tZ)(p.Tg,{elevated:!0,css:v.container,children:(0,r.BX)(h.G,{css:v.item,children:[(0,r.tZ)(h.G,{css:v.left,children:(0,r.BX)(h.G,{css:v.header,children:[(0,r.tZ)(c.ZP,{alt:t.title,size:20,iconUrl:t.iconUrl}),(0,r.BX)(h.G,{css:v.title,children:[(0,r.tZ)(u.U,{variant:"card-link",deployment:n}),(0,r.BX)(h.G,{css:v.titleRow,children:[(0,r.tZ)(o.b,{provider:n.currentBuild.provider}),(0,r.BX)(f.xv,{multiline:!1,maxLines:1,variant:"small",color:"dimmest",css:v.lastDeployedText,children:["last deployed ",(0,s.F)(n.currentBuild.timeCreated)]})]})]})]})}),(0,r.BX)(h.G,{css:v.right,children:[(0,r.tZ)(a.i,{deployment:n}),(0,r.tZ)(l.c,{status:n.currentBuild.status}),(0,r.tZ)(p.Tg,{elevated:!0,css:v.externalLinkButton,"data-deployment-page-buttons":!0,children:(0,r.tZ)(i.X,{deployment:n})})]})]})})}},55942:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ej}});var r=t(66626),o=t(74985),i=t(89288),l=t(42960),a=t(61967),u=t(72333),s=t(85638),c=t(64479),d=t(82230),p=t(94778),f=t(49224),h=t(77361),m=t(72093),g=t(29318),v=t(85438),y=t(85421),x=t(27387),R=t(96583),Z=t(32622),b=t(28341),C=t(15235),w=t(45271),E=t(99236),D=t(64432),T=t(43983),_=t(73789),G=t(87128),S=t(42182),N=t(74977),U=t(50959),A=t(96955),B=t(4762),k=t(41733),P=t(21262),I=t(71440),M=t(74203),O=t(95420),L=t(23409),H=t(58995),W=t(99165);function X(){var e=(0,P._)(["\n  fragment HostingDeploymentTemplateCurrentUser on CurrentUser {\n    id\n    usageBasedBilling {\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n    }\n    ...UserPlanStateCurrentUser\n    ...CrosisContextCurrentUser\n  }\n  ","\n  ","\n"]);return X=function(){return e},e}function z(){var e=(0,P._)(["\n  fragment HostingDeploymentTemplateRepl on Repl {\n    id\n    title\n    iconUrl\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n  }\n"]);return z=function(){return e},e}function F(){var e=(0,P._)(["\n  fragment HostingDeploymentTemplatesMachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    memory\n    vcpu\n  }\n"]);return F=function(){return e},e}function q(){var e=(0,P._)(["\n  fragment HostingDeploymentTemplateCreatedRepl on Repl {\n    id\n    ...CrosisContextRepl\n    ...ReplLinkRepl\n  }\n  ","\n  ","\n"]);return q=function(){return e},e}function Y(){var e=(0,P._)(["\n  query HostingDeploymentTemplates {\n    currentUser {\n      id\n      ...HostingDeploymentTemplateCurrentUser\n    }\n    hostingDeploymentTemplates(input: { count: 4 }) {\n      results {\n        repl {\n          id\n          ...HostingDeploymentTemplateRepl\n        }\n        provider\n      }\n    }\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      ... on HostingMachineConfigurationsResults {\n        results {\n          id\n          ...HostingDeploymentTemplatesMachineConfiguration\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Y=function(){return e},e}function V(){var e=(0,P._)(["\n  mutation HostingDeploymentTemplatesCreateRepl(\n    $input: CreateReplInput!\n    $isTitleAutoGenerated: Boolean!\n  ) {\n    createRepl(input: $input, isTitleAutoGenerated: $isTitleAutoGenerated) {\n      ... on Repl {\n        id\n        ...HostingDeploymentTemplateCreatedRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return V=function(){return e},e}function j(){var e=(0,P._)(["\n  mutation HostingDeploymentTemplatesCreateDeployment(\n    $input: DeployHostingBuild2Input!\n  ) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          id\n          repl {\n            id\n            ...ReplLinkRepl\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var $={},J=(0,I.Ps)(X(),M.$,O.D),K=(0,I.Ps)(z()),Q=(0,I.Ps)(F()),ee=(0,I.Ps)(q(),O.C,L.Y),en=(0,I.Ps)(Y(),J,K,Q),et=(0,I.Ps)(V(),ee),er=(0,I.Ps)(j(),L.Y),eo=t(43182),ei=t(2993),el=t(45098),ea=t(36632),eu=t(38938),es=t(88736),ec=t(33318),ed=t(81031);function ep(){return(ep=(0,x._)(function(e){var n,t,o,i,l,a,u,s;return(0,R.Jh)(this,function(c){switch(c.label){case 0:return n=e.repl,t=e.currentUser,(o=(0,ei.ZP)({onUnrecoverableError:function(e){eo.$e(function(t){t.setTag("templateDeploy",!0),t.setExtra("replid",n.id),eo.Tb(e)})}})).connect({context:(0,el.U)({repl:n,currentUser:t}),getMinimumRetryDelayMs:function(){return 0}}),i=(0,eu.Z)({container:o}),l=(0,ed.Z)({container:o}),a=(0,ea.Z)({container:o,fs:i}),[4,Promise.all([(0,ec.$f)(a),(0,ec.MC)(l)])];case 1:return s=(u=r._.apply(void 0,[c.sent(),2]))[0],[2,{envVars:u[1],commands:{build:s.buildCommand||void 0,run:s.runCommand||""}}]}})})).apply(this,arguments)}var ef=(0,f.X)({item:[m.l0.colWithGap(8),m.l0.borderRadius("container"),m.l0.pb(8),{overflow:"hidden"},m.l0.height("100%")],itemTop:[m.l0.py(16),m.l0.px(8),m.l0.center,m.l0.height(120)],itemInfo:[m.l0.colWithGap(8)],loadingItemTop:[m.l0.py(16),m.l0.px(8),m.l0.center,m.l0.height(120),m.l0.width(200)],loadingInfo:[m.l0.colWithGap(8),m.l0.width("100%"),m.l0.height(64)],itemBottom:[m.l0.pb(8),m.l0.px(12),m.l0.colWithGap(8),m.l0.flex.growAndShrink(1)],replTitle:m.l0.flex.growAndShrink(1),cta:[m.l0.flex.column,m.l0.justify.end,m.l0.flex.growAndShrink(1)],autoscaleInfo:[m.l0.rowWithGap(4),m.l0.align.center]});function eh(e){var n=e.provider,t=e.machineConfiguration,r=e.currentUser,i=Number(t.memory),l=Number(t.vcpu),a=(0,N.d)({user:r}),u="Free"===a.plan.name,s="Free"!==a.plan.name&&!!a.plan.trial,c=i*B.v7+l*B.hU;switch(n){case v.r4.Static:return(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xv,{multiline:!1,variant:"small",color:"dimmest",children:"Type"}),(0,o.tZ)(d.xv,{color:"dimmer",children:"Static"}),(0,o.tZ)(d.xv,{variant:"small",color:"dimmer",children:u?"No cost with a plan":s?"No cost with your trial":"No cost with your plan"})]});case v.r4.CloudRun:return(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xv,{variant:"small",color:"dimmest",children:"Type"}),(0,o.tZ)(d.xv,{color:"dimmer",children:"Autoscale"}),(0,o.BX)(p.G,{css:ef.autoscaleInfo,children:[(0,o.BX)(d.xv,{variant:"small",color:"dimmer",children:[c," ",(0,Z.Z)("compute unit",c),"/sec"]}),(0,o.tZ)(D.u,{tooltip:"Your app uses compute units whenever it is processing requests. Compute units cost $1.25 per 1 million units.",children:(0,o.tZ)(_.Z,{color:m.TV.foregroundDimmer,size:12})})]})]});case v.r4.Gce:return(0,o.BX)(o.HY,{children:[(0,o.tZ)(d.xv,{variant:"small",color:"dimmest",children:"Type"}),(0,o.tZ)(d.xv,{color:"dimmer",children:"Reserved VM"}),(0,o.tZ)(d.xv,{variant:"small",color:"dimmer",children:"$7/month"})]});case v.r4.Goval:case v.r4.Cron:case v.r4.Extension:return null;default:(0,A.Z)(n)}}function em(e){var n=e.tooltip;return(0,o.tZ)(D.u,{tooltip:n,children:(0,o.tZ)(C.zx,{disabled:!0,stretch:!0,text:"Deploy",iconLeft:(0,o.tZ)(h.Z,{})})})}function eg(e){var n=e.ubbCapabilities,t=e.context,r=e.buttonText,i=e.isCreating,l=e.onPlanCheckoutComplete,a=e.onDeployClick,u=e.onAddPaymentMethodClick;if(!n)return(0,o.tZ)(em,{tooltip:"Something went wrong. Please try again later"});switch(n.explanation){case v.Fp.NeedsSubscription:case v.Fp.NeedsSubscriptionOrPaymentMethod:return(0,o.tZ)(S.Z,{context:t,text:"Upgrade plan to deploy",colorway:"blurple",onPlanCheckoutComplete:l});case v.Fp.HasPaymentMethod:case v.Fp.IncludedInSubscription:return(0,o.tZ)(C.zx,{disabled:i,stretch:!0,text:r,iconLeft:i?(0,o.tZ)(g.Z,{}):(0,o.tZ)(h.Z,{}),onClick:a});case v.Fp.NeedsPaymentMethod:return(0,o.tZ)(C.zx,{colorway:"primary",text:"Add a payment method",iconLeft:(0,o.tZ)(T.Z,{}),onClick:u});case v.Fp.InsufficientBudget:return(0,o.tZ)(em,{tooltip:"Please increase your monthly usage button to deploy"});case v.Fp.NeedsUnbanning:return(0,o.tZ)(em,{tooltip:"Please reach out to support to deploy"});case v.Fp.NeedsSmsVerification:return(0,o.tZ)(em,{tooltip:"Please verify your phone number to deploy"});default:(0,A.Z)(n.explanation)}}function ev(e){var n,t,i,l,a=e.repl,s=e.currentUser,f=e.provider,h=e.onCreatedRepl,m=e.machineConfiguration,g=e.refetch,y=e.context,Z="UserUsageBasedBillingSummary"===s.usageBasedBilling.__typename?s.usageBasedBilling.capabilities:null,C=(0,r._)((0,U.useState)(null),2),D=C[0],T=C[1],_=(0,r._)((0,U.useState)(!1),2),S=_[0],N=_[1],B=(0,r._)(function(e){var n,t=e.onCompleted,o=e.onError,i=e.currentUser,l=(0,r._)((n=(0,k._)({},$,void 0),W.D(er,n)),1)[0],a=(0,r._)((0,U.useState)(!1),2),u=a[0],s=a[1];function c(){return(c=(0,x._)(function(e,n,r){var a,u,c,d,p,f,h,m,g,y;return(0,R.Jh)(this,function(x){switch(x.label){case 0:return s(!0),[4,function(e){return ep.apply(this,arguments)}({repl:e,currentUser:i})];case 1:return d=(c=x.sent()).envVars,p=c.commands,f=n.appType,h=n.appType===v.Vp.CloudRun?n.targetMachineConfigurationId:void 0,m=(0,es.oU)(f),[4,l({variables:{input:{replId:e.id,appType:f,provider:m,commands:p,envVars:d,targetMachineConfigurationId:h,context:r}}})];case 2:if(g=x.sent(),s(!1),!(y=(null===(u=g.data)||void 0===u?void 0:null===(a=u.deployHostingBuild2)||void 0===a?void 0:a.__typename)==="DeployHostingBuild2Result"?g.data.deployHostingBuild2.build:null))return o(),[2];return t(y.repl),[2]}})})).apply(this,arguments)}return[function(e,n,t){return c.apply(this,arguments)},u]}({onCompleted:h,onError:function(){T("Something went wrong")},currentUser:s}),2),P=B[0],I=B[1],M=(0,r._)((n=(0,k._)({},$,{onError:function(){T("Something went wrong")},onCompleted:function(e){var n="Repl"===e.createRepl.__typename?e.createRepl:null;if(!n){T("Something went wrong");return}P(n,function(){switch(f){case v.r4.Static:return{appType:v.Vp.Static};case v.r4.CloudRun:return{appType:v.Vp.CloudRun,targetMachineConfigurationId:m.id};case v.r4.Gce:return{appType:v.Vp.Server};case v.r4.Goval:throw Error("Goval hosting is not supported");case v.r4.Extension:throw Error("Extension hosting is not supported");case v.r4.Cron:throw Error("Cron hosting is not supported");default:(0,A.Z)(f)}}(),y)}}),W.D(et,n)),2),O=M[0],L=M[1].loading,H=null!==(l=null===(i=a.deployment)||void 0===i?void 0:null===(t=i.activeRelease)||void 0===t?void 0:t.id)&&void 0!==l?l:null;if(!H||!(f!==v.r4.Goval))return null;var X="Deploy";return L?X="Creating Repl...":I&&(X="Deploying Repl..."),(0,o.BX)(o.HY,{children:[(0,o.BX)(c.Tg,{css:ef.item,elevated:!0,children:[(0,o.tZ)(c.Tg,{elevated:!0,css:ef.itemTop,children:(0,o.tZ)(u.ZP,{alt:a.title,size:64,iconUrl:a.iconUrl})}),(0,o.BX)(p.G,{css:ef.itemBottom,children:[(0,o.BX)(p.G,{css:ef.itemInfo,children:[(0,o.tZ)(d.xv,{multiline:!1,css:ef.replTitle,children:a.title}),(0,o.tZ)(p.G,{children:(0,o.tZ)(eh,{provider:f,machineConfiguration:m,currentUser:s})})]}),D?(0,o.tZ)(E.E,{icon:(0,o.tZ)(G.Z,{}),text:D,colorway:"warning"}):null,(0,o.tZ)(p.G,{css:ef.cta,children:(0,o.tZ)(eg,{ubbCapabilities:Z,context:y,buttonText:X,isCreating:L||I,onDeployClick:function(){O({variables:{input:{replReleaseId:H,originId:a.id},isTitleAutoGenerated:!0}})},onPlanCheckoutComplete:function(){g(),O({variables:{input:{replReleaseId:H,originId:a.id},isTitleAutoGenerated:!0}})},onAddPaymentMethodClick:function(){N(!0)}})})]})]},a.id),(0,o.tZ)(w.u,{isOpen:S,onRequestClose:function(){return N(!1)},children:(0,o.tZ)(b.q,{onSuccess:(0,x._)(function(){return(0,R.Jh)(this,function(e){return N(!1),g(),O({variables:{input:{replReleaseId:H,originId:a.id},isTitleAutoGenerated:!0}}),[2]})})})})]})}var ey=(0,f.X)({root:[m.l0.colWithGap(16)],grid:[{display:"grid",gridAutoFlow:"dense",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:m.TV.space16}]});function ex(){var e,n,t,r=(0,y.useRouter)(),i=(e=(0,k._)({},$,{ssr:!1}),H.a(en,e)),l=i.data,u=i.loading,s=i.refetch,c=null!==(t=null==l?void 0:l.hostingDeploymentTemplates.results)&&void 0!==t?t:null,f=null==l?void 0:l.currentUser,h=(null==l?void 0:l.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?null===(n=l.hostingMachineConfigurations.results)||void 0===n?void 0:n[0]:void 0;if(u)return(0,o.tZ)(g.Z,{});if(!c||!c.length||!h||!f||"UserUsageBasedBillingSummary"===f.usageBasedBilling.__typename&&f.usageBasedBilling.capabilities.explanation===v.Fp.NeedsUnbanning)return null;function m(e){var n=(0,a.aq)(e,{deploymentPane:!0}),t=n.href,o=n.as;r.push(t,o)}return(0,o.BX)(p.G,{css:ey.root,children:[(0,o.tZ)(d.xv,{variant:"subheadDefault",children:"Get started with a template"}),(0,o.tZ)(p.G,{css:ey.grid,children:c.map(function(e){var n=e.repl,t=e.provider;return(0,o.tZ)(ev,{repl:n,currentUser:f,provider:t,onCreatedRepl:m,machineConfiguration:h,refetch:s,context:"deploy_template"},n.id)})})]})}var eR=(0,f.X)({root:[m.l0.colWithGap(32)],banner:[m.l0.rowWithGap(16),m.l0.align.center,m.l0.px(16),m.l0.py(12),m.l0.borderRadius(12),{border:"1px solid "+m.TV.outlineDimmer}],bannerText:[m.l0.colWithGap(2),m.l0.flex.growAndShrink(1)],recentRepls:[{display:"grid",gridAutoFlow:"dense",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:m.TV.space16}],replItem:[m.l0.colWithGap(8),m.l0.borderRadius(12),m.l0.px(12),m.l0.pb(12),m.l0.pt(8)],replInfo:[m.l0.rowWithGap(8),m.l0.align.center,m.l0.flex.growAndShrink(1)],replTitle:m.l0.flex.growAndShrink(1),deployRecentReplsSection:[m.l0.colWithGap(8)],deployLink:{alignSelf:"start"}});function eZ(e){var n,t=e.recentRepls&&(null===(n=e.recentRepls)||void 0===n?void 0:n.length)?e.recentRepls:null;return(0,o.BX)(p.G,{css:eR.root,children:[(0,o.BX)(c.Tg,{css:eR.banner,elevated:!0,children:[(0,o.tZ)(h.Z,{size:32,color:m.TV.foregroundDimmer}),(0,o.BX)(p.G,{css:eR.bannerText,children:[(0,o.tZ)(d.xv,{variant:"subheadDefault",children:"No deployments yet"}),(0,o.tZ)(d.xv,{color:"dimmer",children:"But we have good news: you're one click away from changing that"})]})]}),t?(0,o.BX)(p.G,{css:eR.deployRecentReplsSection,children:[(0,o.tZ)(d.xv,{variant:"subheadDefault",children:"Deploy one of your Repls"}),(0,o.tZ)(p.G,{css:eR.recentRepls,children:t.map(function(e){var n=(0,a.aq)(e,{deploymentPane:!0});return(0,o.BX)(c.Tg,{css:eR.replItem,elevated:!0,children:[(0,o.BX)(p.G,{css:eR.replInfo,children:[(0,o.tZ)(u.ZP,{alt:e.title,size:20,iconUrl:e.iconUrl}),(0,o.tZ)(d.xv,{multiline:!1,css:eR.replTitle,children:e.title})]}),(0,o.tZ)(s.Z,{css:eR.deployLink,as:n.as,href:n.href,text:"Deploy",iconLeft:(0,o.tZ)(h.Z,{})})]},e.id)})})]}):null,(0,o.tZ)(ex,{})]})}var eb=t(1383),eC=t(81836),ew=t(18257),eE=t(54556),eD=t(82400),eT=t(8261),e_=t(14375),eG=t(34578),eS=(0,f.X)({root:[m.l0.align.center,m.l0.py(32)],surface:[m.l0.p(16),m.l0.colWithGap(16),m.l0.borderRadius(12),m.l0.maxWidth(680),m.l0.flex.growAndShrink(1),{border:"1px solid "+m.TV.outlineDimmer}],item:[m.l0.colWithGap(2)],list:[m.l0.colWithGap(16)],itemTitle:[m.l0.rowWithGap(8),m.l0.fontWeight.bold,m.l0.align.center],body:[m.l0.colWithGap(16)],button:[{alignSelf:"end",minWidth:120}]}),eN=[{title:"Autoscale Deployments",text:"Servers will automatically scale from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,o.tZ)(eC.Z,{size:20}),isNew:!1},{title:"Static Deployments",text:"A fast and reliable way to host static HTML sites.",icon:(0,o.tZ)(eE.Z,{size:20}),isNew:!1},{title:"Reserved VM Deployments",text:"Reserved virtual machines with 99.9% uptime. Perfect for long-running applications that don't tolerate restarts.",icon:(0,o.tZ)(ew.Z,{size:20}),isNew:!1},{title:"Scheduled Deployments",text:"An easy to use job scheduler. Configure for your Repl to run at '2pm every Thursday'.",icon:(0,o.tZ)(eD.Z,{size:20}),isNew:!1}];function eU(e){var n=(0,eG.i)().CORE_FLEXIBLE_SPEND_USD,t="Deployments make it easy to host your applications on reliable infrastructure in only a few clicks. Replit ".concat(e_.we," members have $").concat(n," in credits included in their plan.");return(0,o.tZ)(p.G,{css:eS.root,children:(0,o.BX)(c.Tg,{css:eS.surface,elevated:!0,children:[(0,o.tZ)(d.xv,{variant:"subheadDefault",children:"Deploy to Production"}),(0,o.BX)(p.G,{css:eS.body,children:[(0,o.tZ)(d.xv,{color:"dimmer",multiline:!0,children:t}),(0,o.tZ)(p.G,{tag:"ul",css:eS.list,children:eN.map(function(e){var n=e.title,t=e.text,r=e.icon,i=e.isNew;return(0,o.BX)(p.G,{css:eS.item,children:[(0,o.BX)(p.G,{css:eS.itemTitle,children:[r,(0,o.tZ)(d.xv,{children:n}),i?(0,o.tZ)(eT.D,{text:"New"}):null]}),(0,o.tZ)(d.xv,{multiline:!0,color:"dimmer",children:t})]},n)})})]}),(0,o.tZ)(C.zx,{css:eS.button,colorway:"primary",text:"Continue",onClick:function(){return e.onContinue()},iconRight:(0,o.tZ)(eb.Z,{})})]})})}var eA=t(6161),eB=t(41974),ek=t(15432);function eP(){var e=(0,P._)(["\n  fragment DeploymentsListEmptyStateRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n  }\n  ","\n"]);return eP=function(){return e},e}var eI=(0,I.Ps)(eP(),L.Y);function eM(){var e=(0,P._)(["\n  query HostingDeployments(\n    $input: CurentUserHostingDeploymentsInput\n    $tour: String!\n  ) {\n    currentUser {\n      id\n      hasSeenAnnouncement: tourSeen(name: $tour)\n      hostingDeployments(input: $input) {\n        items {\n          id\n          ...DeploymentItem\n        }\n        pageInfo {\n          nextCursor\n        }\n      }\n      requiresActionToRedeploy\n    }\n    recentRepls(count: 4, filter: own) {\n      id\n      ...DeploymentsListEmptyStateRepl\n    }\n  }\n  ","\n  ","\n"]);return eM=function(){return e},e}function eO(){var e=(0,P._)(["\n  mutation HostingDeploymentsTourSeen($tour: String!) {\n    markTourAsSeen2(input: { name: $tour }) {\n      __typename\n      ... on TourSeen {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return eO=function(){return e},e}var eL={},eH=(0,I.Ps)(eM(),ek.r5,eI),eW=(0,I.Ps)(eO());function eX(){return(0,o.tZ)(p.G,{children:"Something went wrong"})}var ez=(0,f.X)({page:[m.l0.pageContent,m.l0.colWithGap(16)],loading:[m.l0.center,m.l0.p(16)],items:m.l0.colWithGap(2),templates:m.l0.pt(16)});function eF(){return(0,o.tZ)(p.G,{css:ez.loading,children:(0,o.tZ)(g.Z,{})})}var eq="hosting-deployments-announcement-7-2023";function eY(e){var n=e.deployments,t=e.recentRepls,r=e.loading,i=e.onLoadMore,a=e.requiresActionToRedeploy;if(!n||0===n.items.length)return(0,o.tZ)(eZ,{recentRepls:t});var u=n.pageInfo.nextCursor,s=n.items.length<4;return(0,o.BX)(o.HY,{children:[a?(0,o.tZ)(l.Z,{}):null,(0,o.tZ)(p.G,{css:ez.items,children:n.items.map(function(e){return(0,o.tZ)(eA.l,{hostingDeployment:e},e.id)})}),r?(0,o.tZ)(eF,{}):null,u&&!r?(0,o.tZ)(C.zx,{text:"Load more",onClick:function(){return i({count:20,after:u})}}):null,s?(0,o.tZ)(p.G,{css:ez.templates,children:(0,o.tZ)(ex,{})}):null]})}function eV(){var e,n,t,i=(n=(0,k._)({},eL,{variables:{input:{count:20},tour:eq},notifyOnNetworkStatusChange:!0,ssr:!1,fetchPolicy:"cache-and-network"}),H.a(eH,n)),l=i.data,a=i.loading,u=i.fetchMore,s=i.error,c=i.client,d=(0,r._)((e=(0,k._)({},eL,void 0),W.D(eW,e)),1)[0],p=null==l?void 0:l.currentUser,f=null==p?void 0:p.hostingDeployments;return s?(0,o.tZ)(eX,{}):!f&&a?(0,o.tZ)(eF,{}):p&&!p.hasSeenAnnouncement?(0,o.tZ)(eU,{onContinue:function(){d({variables:{tour:eq}});var e={query:eH,data:(0,eB.Uy)(l,function(e){e.currentUser&&(e.currentUser.hasSeenAnnouncement=!0)}),variables:{input:{count:20},tour:eq}};c.writeQuery(e)}}):(0,o.tZ)(eY,{loading:a,recentRepls:null!==(t=null==l?void 0:l.recentRepls)&&void 0!==t?t:[],deployments:f,onLoadMore:function(e){return u({variables:{input:e}})},requiresActionToRedeploy:null==p?void 0:p.requiresActionToRedeploy})}function ej(){return(0,o.tZ)(i.Z,{title:"Deployments",children:(0,o.BX)(p.G,{css:ez.page,children:[(0,o.tZ)(d.h4,{"data-cy":"deployments-header",level:1,variant:"headerBig",children:"Deployments"}),(0,o.tZ)(eV,{})]})})}},36632:function(e,n,t){"use strict";t.d(n,{Z:function(){return g},l:function(){return m}});var r=t(27387),o=t(63257),i=t(96583),l=t(12663),a=t(87137),u=t(57253),s=t(73372),c=t(39171),d=t(367),p=t(77421),f=t(91620).lW,h=t(9797),m=".replit";function g(e){var n,t,g,v,y=e.container,x=e.fs,R=e.ctx,Z=(0,l.ZP)();Z.setMaxListeners(50);var b=null,C=null,w=null;function E(){return D.apply(this,arguments)}function D(){return(D=(0,r._)(function(){return(0,i.Jh)(this,function(e){return b&&"open"===b.status?[2,b]:[2,new Promise(function(e){Z.once(a.zW.CHANNEL_OPENED,function(n){e(n)})})]})})).apply(this,arguments)}(function(){_.apply(this,arguments)})(),y.openChannel({service:"dotreplit"},function(e){var n=e.channel;return b=n,Z.emit(a.zW.CHANNEL_OPENED,n),function(){b=null}});var T=!1;function _(){return(_=(0,r._)(function(){return(0,i.Jh)(this,function(e){return x.watchDir(s.Ql,{onChange:function(e){if(!e.some(function(e){return e.filename===m&&e.type===u.Tv.File})){(null==C?void 0:C.error)!==a.Yt.NotFound&&(C={error:a.Yt.NotFound,errorMessage:"",config:null},Z.emit(a.zW.CHANGE,C));return}T||(T=!0,x.watchFile(m,{onChange:function(){C=null,U.getConfig({bypassCache:!0}).then(function(e){Z.emit(a.zW.CHANGE,e)})},onMoveOrDelete:function(){T=!1},onError:function(e,n){C=null,T=!1,e.code||y.unrecoverableError(e,n)}}))},onError:function(e,n){y.unrecoverableError(e,n)}}),[2]})})).apply(this,arguments)}function G(){return(G=(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return C=null,w||(w=function(){return S.apply(this,arguments)}()),[4,w];case 1:return C=e.sent(),w=null,[2,C]}})})).apply(this,arguments)}function S(){return(S=(0,r._)(function(){return(0,i.Jh)(this,function(e){var n;return[2,(0,d.DW)(R,"dotreplit.getConfigFromServer",(n=(0,r._)(function(e,n){var t,r,o,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:var u,s,c;return null==n||n.setAttributes((u={},(null==(s=y.getConnectionMetadata())?void 0:s.token)&&(u.tokenCluster=function(e){var n=e.split(".");if(4!==n.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var t=n[2].replace(/-/g,"+").replace(/_/g,"/");t.length%4;)t+="=";var r=window.atob(t);if(r.length<64)throw Error("Invalid token: signed part is too short: "+r.length);var o=r.substring(0,r.length-64);return p.api.token.ReplToken.decode(f.from(o,"base64"))}(s.token).cluster),c=!!window.performance.getEntriesByName(h.Iy.pageNavStart,"mark").length,u.ssr=c,u)),[4,E()];case 1:if("closed"===(r=i.sent()).status)return[2,{error:a.Yt.Disconnected,errorMessage:"channel closed",config:null}];return[4,r.request({dotReplitGetRequest:{},traceInfo:e?(0,d.Rg)(e):void 0})];case 2:if((o=i.sent()).channelClosed)return[2,{error:a.Yt.Disconnected,errorMessage:"channel closed",config:null}];if(o.error){if(o.error.includes("unable to decode"))return[2,{error:a.Yt.ParseError,errorMessage:o.error,config:null}];if(o.error.includes("no such file"))return[2,{error:a.Yt.NotFound,errorMessage:o.error,config:null}];return[2,{error:a.Yt.Unknown,errorMessage:o.error,config:null}]}if(!(l=null===(t=o.dotReplitGetResponse)||void 0===t?void 0:t.dotReplit))return y.unrecoverableError(Error("Dotreplit responded with no error and no config")),[2,{error:a.Yt.Unknown,errorMessage:"Expected dotReplitGetResponse to include dotReplit",config:null}];return[2,{error:null,errorMessage:null,config:l}]}})}),function(e,t){return n.apply(this,arguments)}))]})})).apply(this,arguments)}var N=(n=(0,r._)(function(e){var n;return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,x.stat(m)];case 1:if(t.sent().exists)return[3,3];return[4,x.writeFile(m,"")];case 2:t.sent(),t.label=3;case 3:return[4,E()];case 4:return[4,t.sent().request({dotReplitUpdateRequest:{ops:e}})];case 5:if((n=t.sent()).channelClosed)return[2,{errorMessage:"Channel closed.",error:a.au.ChannelClosed,response:null}];if(n.error){if(n.error.includes("could not parse json")||n.error.includes("is not json")||n.error.includes("parsing value field")||n.error.includes("missing field"))return[2,{errorMessage:n.error,error:a.au.JSONParseError,response:null}];if(n.error.includes("could not read file"))return[2,{errorMessage:n.error,error:a.au.NotFound,response:null}];if(n.error.includes("could not parse toml"))return[2,{errorMessage:n.error,error:a.au.TOMLParseError,response:null}];if(n.error.includes("unknown variant"))return[2,{errorMessage:n.error,error:a.au.OpType,response:null}];if(n.error.includes("could not write to file"))return[2,{errorMessage:n.error,error:a.au.CouldNotWrite,response:null}];if(n.error.includes("could not read line"))return[2,{errorMessage:n.error,error:a.au.ReadLine,response:null}];return[2,{errorMessage:n.error,error:a.au.Unknown,response:null}]}if(!n.dotReplitUpdateResponse)throw Error("Expected .replit to be updated");return[2,{response:n.dotReplitUpdateResponse,error:null,errorMessage:null}]}})}),function(e){return n.apply(this,arguments)}),U={watch:function(e){var n=!1,t=!1,r=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t=!0,e.apply(void 0,(0,o._)(r))};return Z.on(a.zW.CHANGE,r),U.getConfig().then(function(e){n||t||r(e)}),function(){n=!0,Z.removeListener(a.zW.CHANGE,r)}},getConfig:function(e){return(0,r._)(function(){return(0,i.Jh)(this,function(n){return(null==e?void 0:e.bypassCache)||!C?[2,function(){return G.apply(this,arguments)}()]:[2,C]})})()},getRunConfig:function(){return(0,r._)(function(){var e,n;return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,E()];case 1:return[4,t.sent().request({runConfigGetRequest:{}})];case 2:if((e=t.sent()).channelClosed)return[2,this.getRunConfig()];if(!e.runConfigGetResponse)throw null!==(n=e.error)&&void 0!==n?n:Error("expected run config");return[2,e.runConfigGetResponse]}})}).apply(this)},updateDotReplit:(t=[],g=400,v=(0,c.Z)((0,r._)(function(){var e;return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,N(t)];case 1:return e=n.sent(),t=[],[2,e]}})}),{wait:g}),function(e,n){n&&(g=n);var r=!0,o=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)!function(){var e=l.value,n=t.findIndex(function(n){return n.path===e.path});-1!==n?t[n]=e:t.push(e)}()}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return v()})};return U}},87137:function(e,n,t){"use strict";var r,o,i,l,a,u;t.d(n,{Yt:function(){return r},au:function(){return o},zW:function(){return i}}),(l=r||(r={})).NotFound="NOT_FOUND",l.ParseError="PARSE_ERROR",l.Disconnected="DISCONNECTED",l.Unknown="UNKOWN_ERROR",(a=o||(o={})).ChannelClosed="CHANNEL_CLOSED",a.JSONParseError="JSON_PARSE_ERROR",a.NotFound="NOT_FOUND",a.TOMLParseError="TOML_PARSE_ERROR",a.OpType="OP_TYPE",a.CouldNotWrite="COULD_NOT_WRITE",a.ReadLine="COULD_NOT_READ_LINE",a.Unknown="UNKNOWN_ERROR",(u=i||(i={})).CHANGE="CHANGE",u.CHANNEL_OPENED="CHANNEL_OPENED"}},function(e){e.O(0,[8046,1604,7854,3709,6645,7372,8438,605,5752,3879,4660,3907,9774,2888,179],function(){return e(e.s=97168)}),_N_E=e.O()}]);
//# sourceMappingURL=hostingDeployments-f546d30c8a0269a0.js.map