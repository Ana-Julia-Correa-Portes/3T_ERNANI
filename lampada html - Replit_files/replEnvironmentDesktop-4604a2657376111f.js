!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ca872b3e-ea00-4722-bbf5-08d21c146e7a",e._sentryDebugIdIdentifier="sentry-dbid-ca872b3e-ea00-4722-bbf5-08d21c146e7a")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2a1b3354"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6879],{3172:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(52639)}])},22978:function(e,n,t){"use strict";t.d(n,{gC:function(){return f},LK:function(){return d},jJ:function(){return p}});var r=t(74985),i=t(75958),o=t(60305),a=t(15235),l=t(59947),c=t(39475),u=t(85421),s=["100-days-of-python","100-days-of-python-promo","add-guest-new-user","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","incident-20240219-action-required-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card"],d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r=JSON.parse(i.Z.get(d(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,s.includes(t)))return r},f=function(e){var n=e.challenge,t=s.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",i=(0,c.o)(t),d=i.isDone,p=i.isLoading,f=i.setAsDone,h=(0,u.useRouter)();return p?null:(0,r.tZ)(a.zx,{colorway:d?"primary":"positive",onClick:function(){f(),(0,o.j)(o.U3.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.tZ)(l.Z,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},77810:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(60305),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},33449:function(e,n,t){"use strict";t.d(n,{_:function(){return S}});var r=t(42516),i=t(41733),o=t(30509),a=t(66626),l=t(74985),c=t(65987),u=t(61967),s=t(58959),d=t(64432),p=t(94778),f=t(49224),h=t(72093),v=t(47336),m=t.n(v),g=t(50959),y=t(87409),b=t(72333),x=t(82230),Z=(0,f.X)({self:[h.l0.rowWithGap(8),h.l0.align.center],dot:[h.l0.width(8),h.l0.height(8),{borderRadius:"50%"}],title:[h.l0.flex.grow(1)]}),w=function(e){var n=e.title,t=e.usage,r=e.resourceUsageType,i=e.icon;return(0,l.BX)(p.G,{css:Z.self,children:["string"==typeof i?(0,l.tZ)(b.ZP,{size:16,iconUrl:i,alt:n}):i,(0,l.tZ)(x.xv,{css:Z.title,multiline:!1,children:n}),(0,l.tZ)(x.xv,{color:"dimmer",multiline:!1,children:(0,y.fZ)(t,{resourceUsageType:r,gibsDisplayAsBytes:!0})})]})},C=t(55821),_=(0,f.X)({self:[h.l0.height("100%")],empty:[h.l0.height("100%")]}),k=p.K.a,S=function(e){var n,t,p,f,h=e.color,v=e.resourceUsageType,y=e.section,b=y.grouped,x=y.percentage,Z=y.usage,S=100*x,I=b?y.count:1,R=!b&&y.repl?(0,u.aq)(y.repl):c.$I,G=(0,a._)((0,g.useState)(!1),2),E=G[0],T=G[1];return(0,l.tZ)(d.u,{tooltip:b?(0,l.tZ)(w,{title:"+".concat(I," more"),usage:Z,resourceUsageType:v}):(0,l.tZ)(w,{title:null!==(p=null===(n=y.repl)||void 0===n?void 0:n.title)&&void 0!==p?p:"Deleted Repl",usage:Z,resourceUsageType:v,icon:null!==(f=null===(t=y.repl)||void 0===t?void 0:t.iconUrl)&&void 0!==f?f:(0,l.tZ)(C.Z,{})}),placement:"top",delay:"none",isOpen:E,maxWidth:400,children:function(e,n){return(0,l.tZ)(m(),(0,o._)((0,i._)({legacyBehavior:!0},R),{passHref:!0,children:(0,l.tZ)(k,{tabIndex:-1,onMouseOver:function(){return T(!0)},onMouseLeave:function(){return T(!1)},ref:n,css:_.self,style:(0,r._)({minWidth:"calc(".concat(100*s.$,"%)"),width:"calc(".concat(S,"% - 0.9px)"),backgroundColor:h},"&:lastOfType",{width:"".concat(S,"%")})})}))}})}},58959:function(e,n,t){"use strict";t.d(n,{$:function(){return i},D:function(){return r}});var r=t(72093).tX.categorical,i=.0075},82481:function(e,n,t){"use strict";t.d(n,{b:function(){return i}});var r=t(58959),i=function(e,n,t,i){var o=[],a=0;e.forEach(function(e){var n=Math.max(e.percentage,r.$),t=n-e.percentage;0!==t&&(a+=t),o.push({percentage:n,usage:e.usage,adjusted:0!==t,grouped:!1,repl:e.repl})});var l=0===n?0:Math.max(n,r.$);if(l>0){var c=l-n;c>0&&(a+=c),o.push({percentage:l,adjusted:c>0,usage:t,grouped:!0,count:i})}if(a>0){var u=o.filter(function(e){return!e.adjusted}),s=u.length;if(s>0){var d=a/s,p=!0,f=!1,h=void 0;try{for(var v,m=u[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var g=v.value;g.percentage-=d}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}return o}},25279:function(e,n,t){"use strict";t.d(n,{_:function(){return i}});var r=t(96955),i=function(e){switch(e.__typename){case"UsageOverviewUnitPriceSku":return a(e);case"UsageOverviewMatrixPriceSku":return l(e);case"UsageOverviewStaticDeployments":return o(e);default:(0,r.Z)(e)}},o=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(c)}},a=function(e){var n=e.replUsageOverview;return{total:e.usage,limit:e.allotment,lineItems:n.map(s)}},l=function(e){var n=e.replUsageOverview,t=e.usage,r=e.tierType;return{total:t,limit:0,lineItems:n.map(function(e){return u(e,r)})}},c=function(e){var n,t,r;return{usage:e.usage,percentage:e.percentage,repl:e.repl,lastDeployedAt:(null===(t=e.repl)||void 0===t?void 0:null===(n=t.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?null===(r=e.repl)||void 0===r?void 0:r.hostingDeployment.currentBuild.timeCreated:void 0}},u=function(e,n){return{usage:e.usage,percentage:e.percentage,repl:e.repl,matrixTier:{label:e.configName,type:n}}},s=function(e){return{usage:e.usage,percentage:e.percentage,repl:e.repl}}},17791:function(e,n,t){"use strict";t.d(n,{S:function(){return P}});var r=t(66626),i=t(74985),o=t(41873),a=t(63685),l=t(94311),c=t(19068),u=t(13033),s=t(45271),d=t(53928),p=t(64479),f=t(82230),h=t(94778),v=t(49224),m=t(43449),g=t(38933),y=t(96651),b=t(15434),x=t(72093),Z=t(85438),w=t(50959),C=t(41733),_=t(21262),k=t(71440),S=t(58995);function I(){var e=(0,_._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    image\n    userSubscriptionType\n  }\n"]);return I=function(){return e},e}function R(){var e=(0,_._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var G={},E=(0,k.Ps)(I()),T=(0,k.Ps)(R(),E),D=(0,v.X)({wrapper:[x.l0.noDragRegion],button:[c.gU.nofill,x.l0.p(4),x.l0.viewStyle,x.l0.reset.button,x.l0.rowWithGap(2),x.l0.align.center,x.l0.color.foregroundDefault,x.l0.cursor.pointer,x.l0.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:x.TV.foregroundDefault}}],surface:[x.l0.borderRadius(8),x.l0.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[x.l0.ml(8)],menuItem:[x.l0.rowWithGap(8),x.l0.align.center],accountModal:[x.l0.overflow("auto"),x.l0.height("100%")],appVersionWrapper:[x.l0.py(4),x.l0.px(8),x.l0.center,x.l0.border({color:x.TV.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,c=(0,r._)((0,w.useState)(!1),2),v=c[0],_=c[1],k=(0,r._)((0,w.useState)(!1),2),I=k[0],R=k[1],E=(n=(0,C._)({},G,void 0),S.a(T,n)).data,P=null==E?void 0:E.currentUser;if(!P)return null;var B=[{label:"Home",icon:(0,i.tZ)(y.Z,{}),onAction:function(){a.X.openExternalUrl("/"),_(!1)}},{label:"Account",icon:(0,i.tZ)(b.Z,{}),onAction:function(){R(function(e){return!e}),_(!1)}},{label:"Log out",icon:(0,i.tZ)(g.Z,{}),onAction:function(){a.X.logout()}}];return(0,i.BX)(h.G,{css:D.wrapper,children:[(0,i.BX)(d.xo,{isOpen:v,onOpenChange:_,placement:"bottom start",label:"Account options",noArrow:!0,children:[(0,i.BX)("button",{onClick:function(){_(function(e){return!e})},css:D.button,"data-cy":"desktop-app-avatar-menu",children:[(0,i.tZ)(l.q,{size:24,src:(null==P?void 0:P.image)||null,username:(null==P?void 0:P.username)||"",showRoleBadge:P.userSubscriptionType===Z.HP.HackerPro}),t?(0,i.BX)(h.G,{css:D.username,className:"username",children:["@",null==P?void 0:P.username]}):null,(0,i.tZ)(m.Z,{color:x.TV.foregroundDimmest,size:12})]}),(0,i.BX)(p.Tg,{elevated:!0,css:D.surface,background:"higher",children:[(0,i.tZ)(u.v2,{label:"Account options",onAction:function(e){var n=B[parseInt(e,10)];n&&n.onAction()},children:B.map(function(e,n){return(0,i.tZ)(u.ck,{"aria-label":e.label,children:(0,i.BX)(h.G,{css:D.menuItem,children:[e.icon,(0,i.tZ)(f.xv,{children:e.label})]})},n)})}),(0,i.tZ)(h.G,{css:D.appVersionWrapper,children:(0,i.tZ)(f.xv,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(a.X.getVersion())})})]})]}),(0,i.tZ)(s.u,{isOpen:I,onRequestClose:function(){return R(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:D.accountModal,children:(0,i.tZ)(o.Z,{})})]})}},64073:function(e,n,t){"use strict";t.d(n,{Z:function(){return ev}});var r,i,o,a,l,c=t(41733),u=t(30509),s=t(66626),d=t(63257),p=t(74985),f=t(82375),h=t(80952),v=t(64393),m=t(14872),g=t(71166),y=t(69170),b=t(53399),x=t(46026),Z=t(38172),w=t(10495),C=t(72333),_=t(85763),k=t(19068),S=t(13033),I=t(45271),R=t(39667),G=t(11894),E=t(82230),T=t(94778),D=t(49224),P=t(27022),B=t(77361),U=t(55964),A=t(31892),O=t(17519),X=t(29318),L=t(18123),M=t(49580),W=t(55821),z=t(16098),N=t(24927),F=t(72093),V=t(85421),H=t(50959),j=t(96281),Y=t(26113),q=t(21262),K=t(71440),J=t(58995),$=t(99165);function Q(){var e=(0,q._)(["\n  fragment DesktopReplsListRepl on Repl {\n    id\n    title\n    iconUrl\n    url\n    description\n    isPrivate\n    timeUpdated\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n  }\n"]);return Q=function(){return e},e}function ee(){var e=(0,q._)(["\n  query DesktopReplsSearch(\n    $search: String!\n    $after: String\n    $excludeMultiplayer: Boolean\n    $excludeNotDeployed: Boolean\n    $excludePrivate: Boolean\n    $excludePublic: Boolean\n    $excludeOwned: Boolean\n  ) {\n    currentUser {\n      id\n      paginatedReplSearch(\n        search: $search\n        after: $after\n        excludeMultiplayer: $excludeMultiplayer\n        excludeNotDeployed: $excludeNotDeployed\n        excludePrivate: $excludePrivate\n        excludePublic: $excludePublic\n        excludeOwned: $excludeOwned\n      ) {\n        items {\n          id\n          ...DesktopReplsListRepl\n        }\n        pageInfo {\n          hasNextPage\n          nextCursor\n        }\n      }\n    }\n  }\n  ","\n"]);return ee=function(){return e},e}function en(){var e=(0,q._)(["\n  mutation DesktopReplsListDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return en=function(){return e},e}var et={},er=(0,K.Ps)(Q()),ei=(0,K.Ps)(ee(),er),eo=(0,K.Ps)(en()),ea=t(92468),el=t(65768),ec=(0,D.X)({rowUnfocused:{backgroundColor:"transparent"},rowFocused:{backgroundColor:k.vb.interactiveBackground}});function eu(e){var n=e.item,t=e.state,r=(0,H.useRef)(null),i=(0,j.F)({node:n},t,r),o=i.rowProps,a=i.gridCellProps,l=i.isSelected;return(0,H.useEffect)(function(){if(l){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({block:"nearest"})}},[l]),(0,p.tZ)(T.K.li,(0,u._)((0,c._)({},o),{ref:r,css:l?ec.rowFocused:ec.rowUnfocused,children:(0,p.tZ)(T.G,(0,u._)((0,c._)({},a),{children:n.rendered}))}))}function es(e){var n=(0,f.n)(e),t=(0,H.useRef)(null),r=(0,Y.c)(e,n,t).gridProps;return(0,p.tZ)(T.K.ul,(0,u._)((0,c._)({},r),{ref:(0,Z.l)(t,e.innerRef),children:(0,d._)(n.collection).map(function(e){return(0,p.tZ)(eu,{item:e,state:n},e.key)})}))}var ed=(0,D.X)({container:[F.l0.flex.shrink(1),F.l0.colWithGap(8),F.l0.height("100%")],searchBarWrapper:[F.l0.flex.shrink(0),F.l0.px(8)],replsListWrapper:[F.l0.flex.shrink(1),F.l0.overflowY("scroll")],headerRow:[F.l0.flex.row,F.l0.align.center,F.l0.justify.spaceBetween,F.l0.px(8)],filterContainer:[F.l0.rowWithGap(8),F.l0.center],replListItemWrapper:[k.gU.listItem,F.l0.px(8),F.l0.py(2),F.l0.flex.row,F.l0.align.center,F.l0.justify.spaceBetween],replListItemInner:[F.l0.rowWithGap(8),F.l0.pl(4),F.l0.align.center,F.l0.flex.shrink(1)],replListItemTexts:[F.l0.flex.shrink(1)],replListItemTitle:[F.l0.mb(0),F.l0.truncate],dropdownItem:[F.l0.rowWithGap(8),F.l0.align.center],dropdownDestructiveItem:[F.l0.rowWithGap(8),F.l0.color.accentNegativeStronger,F.l0.align.center],loadingStateWrapper:[F.l0.align.center,F.l0.pt(8),F.l0.pb(12),F.l0.mx(8),F.l0.textAlign.center]});(r=o||(o={})).Fork="Fork",r.Delete="Delete",(a||(a={})).DeleteRepl="DeleteRepl";var ep=[{value:"Fork",label:"Fork",icon:(0,p.tZ)(A.Z,{})},{value:"Delete",label:"Delete",icon:(0,p.tZ)(W.Z,{}),isDestructive:!0}];function ef(e){var n,t,r=e.repl,i=e.onClick,o=(0,v.g)().fork,a=(0,s._)((0,H.useState)(null),2),l=a[0],u=a[1],d=(0,y.Z)(),f=d.showConfirm,m=d.showError,g="/replEnvironmentDesktop"===(0,V.useRouter)().pathname,Z=(0,s._)((n={variables:{id:r.id},onCompleted:function(){f("Repl scheduled for deletion")},onError:function(e){m((0,b.Z)(e.message))},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())}},t=(0,c._)({},et,n),$.D(eo,t)),1)[0];return(0,p.BX)(p.HY,{children:[(0,p.BX)(T.G,{css:ed.replListItemWrapper,onClick:function(e){return i(r.url,(0,x.jh)(e))},children:[(0,p.BX)(T.G,{css:ed.replListItemInner,children:[(0,p.tZ)(C.ZP,{size:24,iconUrl:r.iconUrl,alt:r.title}),(0,p.BX)(T.G,{css:ed.replListItemTexts,children:[(0,p.tZ)(E.xv,{variant:"text",css:ed.replListItemTitle,multiline:!1,children:r.title}),(0,p.BX)(E.xv,{variant:"small",color:"dimmer",multiline:!1,children:[r.owner?"".concat(r.owner.username," â€¢ "):"","edited"," ",(0,w.F)(r.timeUpdated)]})]})]}),g?null:(0,p.tZ)(S.ZE,{icon:(0,p.tZ)(M.Z,{size:16}),"aria-label":"Repl Actions",placement:"bottom-end",cssProps:[{background:"transparent"}],onAction:function(e){switch(e){case"Fork":o();return;case"Delete":u("DeleteRepl");return}},children:ep.map(function(e){return(0,p.tZ)(S.ck,{textValue:e.label,children:(0,p.BX)(T.G,{css:e.isDestructive?ed.dropdownDestructiveItem:ed.dropdownItem,children:[e.icon,(0,p.tZ)(E.xv,{multiline:!1,children:e.label})]})},e.value)})})]}),(0,p.tZ)(I.u,{isOpen:"DeleteRepl"===l,onRequestClose:function(){return u(null)},centered:!0,children:(0,p.tZ)(h.Z,{delete:Z,entityType:"Repl",hideModal:function(){return u(null)}})})]})}(i=l||(l={})).All="All",i.ExcludeMultiplayer="ExcludeMultiplayer",i.ExcludeNotDeployed="ExcludeNotDeployed",i.ExcludePrivate="ExcludePrivate",i.ExcludePublic="ExcludePublic",i.ExcludeOwned="ExcludeOwned";var eh=[{value:"All",title:"All",icon:(0,p.tZ)(U.Z,{})},{value:"ExcludeMultiplayer",title:"My Repls",icon:(0,p.tZ)(z.Z,{})},{value:"ExcludeOwned",title:"Shared",icon:(0,p.tZ)(N.Z,{})},{value:"ExcludePrivate",title:"Public",icon:(0,p.tZ)(O.Z,{})},{value:"ExcludePublic",title:"Private",icon:(0,p.tZ)(L.Z,{})},{value:"ExcludeNotDeployed",title:"Deployed",icon:(0,p.tZ)(B.Z,{})}];function ev(e){var n,t,r,i=e.onClick,o=(0,s._)((0,H.useState)(""),2),a=o[0],l=o[1],f=(0,V.useRouter)(),h="/replEnvironmentDesktop"===f.pathname,y=(0,m.Z)(a,250),b=(0,H.useRef)(null),x=(0,H.useRef)(null),Z=(0,H.useRef)(null),w=(0,H.useRef)(null),C=(0,s._)((0,ea.Z)("desktop-app-repls-filter","All"),2),k=C[0],I=C[1],D=(0,s._)((0,H.useState)(null),2),B=D[0],U=D[1],A=B?new Set([B]):new Set,O=(n={variables:{search:function(e){if(!e.startsWith("http"))return null;try{var n=new URL(e),t=window.location.origin;if(n.origin!==t)return null;if(el.hD.test(n.pathname)){var r=n.pathname.split("/");if(3!==r.length)return null;return r[2]}if(el.Q7.test(n.pathname)){var i=n.pathname.split("/");if(6!==i.length)return null;return i[i.length-1]}return null}catch(e){return null}}(y)||y,excludeOwned:"ExcludeOwned"===k,excludePublic:"ExcludePublic"===k,excludePrivate:"ExcludePrivate"===k,excludeNotDeployed:"ExcludeNotDeployed"===k,excludeMultiplayer:"ExcludeMultiplayer"===k},ssr:!1,notifyOnNetworkStatusChange:!0},t=(0,c._)({},et,n),J.a(ei,t)),L=O.data,M=O.loading,W=O.refetch,z=O.fetchMore,N=null==L?void 0:null===(r=L.currentUser)||void 0===r?void 0:r.paginatedReplSearch,F=null==N?void 0:N.pageInfo,j=null==F?void 0:F.nextCursor,Y=null==F?void 0:F.hasNextPage,q=(null==N?void 0:N.items)||[];if(h){var K=f.query.replUrl;if("string"!=typeof K)throw Error("Expected Repl URL");q=q.filter(function(e){return e.url!==K})}var $=(0,H.useCallback)(function(){j&&!M&&z({variables:{search:y,after:j},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult;return(null===(t=e.currentUser)||void 0===t?void 0:t.paginatedReplSearch)&&(null===(r=i.currentUser)||void 0===r?void 0:r.paginatedReplSearch)?(0,u._)((0,c._)({},i),{currentUser:(0,u._)((0,c._)({},i.currentUser),{paginatedReplSearch:(0,u._)((0,c._)({},i.currentUser.paginatedReplSearch),{items:(0,d._)(e.currentUser.paginatedReplSearch.items).concat((0,d._)(i.currentUser.paginatedReplSearch.items)),pageInfo:(0,c._)({},i.currentUser.paginatedReplSearch.pageInfo)})})}):e}})},[z,M,j,y]),Q=(0,g.Z)({onLoadMore:$,rootMargin:"0px 0px 100px 0px"}).targetRef,ee=function(e){var n=q.find(function(n){return n.id===e});if(!n)throw Error("Expected matching Repl");i(n.url)};(0,H.useEffect)(function(){var e;null===(e=x.current)||void 0===e||e.focus()},[x]);var en=0===q.length&&M,er=0===q.length&&!M;return(0,p.BX)(T.G,{css:ed.container,children:[(0,p.tZ)(T.K.div,{css:ed.searchBarWrapper,ref:b,children:(0,p.tZ)(R.E,{placeholder:"Search Repls",value:a,inputRef:x,onChange:function(e){l(e.target.value)},onClear:function(){l("")},onKeyDown:function(e){if("Enter"===e.key&&B&&ee(B),"ArrowDown"===e.key||"ArrowUp"===e.key){var n;e.preventDefault(),null===(n=w.current)||void 0===n||n.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent))}}})}),(0,p.BX)(T.G,{css:ed.headerRow,children:[(0,p.tZ)(E.h4,{level:2,variant:h?"subheadDefault":"subheadBig",children:"Recent"}),(0,p.tZ)(T.G,{css:ed.filterContainer,children:(0,p.tZ)(G.P,{"aria-label":"repl-list-filter-select",id:"repl-list-filter-select",items:eh,selectedItem:eh.find(function(e){return e.value===k})||eh[0],onChange:function(e){I(e.value)}})})]}),(0,p.BX)(T.K.div,{style:h?void 0:{paddingLeft:8,paddingRight:8},css:ed.replsListWrapper,ref:Z,children:[(0,p.tZ)(T.G,{children:(0,p.tZ)(es,{"aria-label":"Repls",selectionMode:"single",selectionBehavior:"replace",disallowEmptySelection:!0,items:q,innerRef:w,selectedKeys:A,onSelectionChange:function(e){if("all"!==e){if(0===e.size)throw Error("Expected to have a selected key");U(Array.from(e)[0])}},onAction:function(e){ee(e)},children:function(e){var n;return(0,p.tZ)(S.ck,{textValue:e.title,children:(0,p.tZ)(v.b,{forkParams:{trackingData:{forkSource:"desktopAppReplsList"}},onFork:function(){var e;null===(e=Z.current)||void 0===e||e.scrollTo({top:0}),W()},repl:e,teamContext:null===(n=e.owner)||void 0===n?void 0:n.username,children:(0,p.tZ)(ef,{repl:e,onClick:function(e,n){i(e,n)}})})},e.id)}})}),(0,p.BX)(T.G,{css:ed.loadingStateWrapper,children:[en?(0,p.tZ)(X.Z,{}):null,er?(0,p.tZ)(E.xv,{variant:"text",color:"dimmest",children:"We couldn't find any Repls matching your search."}):null,Y?(0,p.tZ)(_.hU,{tooltipBehavior:"hidden",alt:"Load more Repls",onClick:$,ref:Q,disabled:M,children:M?(0,p.tZ)(X.Z,{}):(0,p.tZ)(P.Z,{})}):null]})]})]})}},25528:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(66626),i=t(74985),o=t(43312),a=t(63685),l=t(69815),c=t(57967),u=t(50959),s=t(95571),d=t(94778),p=t(72093),f=(0,o.iv)(p.l0.dragRegion);function h(){var e,n,t,o,h,v,m,g,y=(0,s.NJ)(),b=(0,c.Z)(),x=(e=(0,c.Z)(),t=(n=(0,r._)((0,u.useState)(!1),2))[0],o=n[1],(0,u.useEffect)(function(){if(e)return o(document.hasFocus()),a.X.onFocusChanged(o)},[e]),t),Z=(h=(0,c.Z)(),m=(v=(0,r._)((0,u.useState)(!1),2))[0],g=v[1],(0,u.useEffect)(function(){if(h)return a.X.onFullScreenChanged(g)},[h]),m);return y&&b&&!Z?(0,i.tZ)(d.G,{css:f,children:(0,i.tZ)("svg",{width:l.TY,height:l.MX-16,children:x?null:(0,i.BX)(i.HY,{children:[(0,i.tZ)("circle",{cx:15,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1}),(0,i.tZ)("circle",{cx:35,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1}),(0,i.tZ)("circle",{cx:55,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1})]})})}):null}},69815:function(e,n,t){"use strict";t.d(n,{KN:function(){return i},MX:function(){return o},TY:function(){return r}});var r=70,i=140,o=48},78330:function(e,n,t){"use strict";var r=t(74985),i=t(94778),o=t(49224),a=t(24927),l=t(72093),c=t(85438),u=t(96955),s=[l.l0.backgroundColor.outlineDimmest,l.l0.color.foregroundDefault,l.l0.borderRadius(4),l.l0.align.center,l.l0.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,o.X)({grey:[s,l.l0.backgroundColor.greyDimmest],red:[s,l.l0.backgroundColor.redDimmest],orange:[s,l.l0.backgroundColor.orangeDimmest],yellow:[s,l.l0.backgroundColor.yellowDimmest],lime:[s,l.l0.backgroundColor.limeDimmest],blue:[s,l.l0.backgroundColor.blueDimmest],purple:[s,l.l0.backgroundColor.purpleDimmest],pink:[s,l.l0.backgroundColor.pinkDimmest]});n.Z=function(e){var n,t,o=e.group,l=e.variant,s=void 0===l?"normal":l;switch(o.color){case c.nL.Grey:n=d.grey;break;case c.nL.Red:n=d.red;break;case c.nL.Orange:n=d.orange;break;case c.nL.Yellow:n=d.yellow;break;case c.nL.Lime:n=d.lime;break;case c.nL.Blue:n=d.blue;break;case c.nL.Purple:n=d.purple;break;case c.nL.Pink:n=d.pink;break;default:n=d.grey}switch(s){case"normal":t=32;break;case"compact":t=24;break;default:(0,u.Z)(s)}return(0,r.tZ)(i.G,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.tZ)(a.Z,{})})}},58039:function(e,n,t){"use strict";t.d(n,{Kl:function(){return c}});var r=t(21262),i=t(71440),o=t(10290);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var c=(0,i.Ps)(a());l(),o.ou,o.M_},78554:function(e,n,t){"use strict";t.d(n,{BB:function(){return F},Dq:function(){return z},E_:function(){return L},F$:function(){return O},_P:function(){return W},lC:function(){return I},t:function(){return U}});var r=t(41733),i=t(21262),o=t(71440),a=t(58039),l=t(94220),c=t(23409),u=t(99165),s=t(58995),d=t(78711);function p(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,i._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function Z(){var e=(0,i._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function w(){var e=(0,i._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function C(){var e=(0,i._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function _(){var e=(0,i._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}var k={},S=(0,o.Ps)(p()),I=(0,o.Ps)(f(),a.Kl,S),R=(0,o.Ps)(h()),G=(0,o.Ps)(v(),R),E=(0,o.Ps)(m(),c.Y),T=(0,o.Ps)(g(),E),D=(0,o.Ps)(y()),P=(0,o.Ps)(b(),D),B=(0,o.Ps)(x(),I);function U(e){var n=(0,r._)({},k,e);return u.D(B,n)}var A=(0,o.Ps)(Z(),a.Kl);function O(e){var n=(0,r._)({},k,e);return s.a(A,n)}var X=(0,o.Ps)(w(),G);function L(e){var n=(0,r._)({},k,e);return s.a(X,n)}var M=(0,o.Ps)(C(),l.a2,T);function W(e){var n=(0,r._)({},k,e);return s.a(M,n)}function z(e){var n=(0,r._)({},k,e);return d.t(M,n)}var N=(0,o.Ps)(_(),P);function F(e){var n=(0,r._)({},k,e);return s.a(N,n)}},10290:function(e,n,t){"use strict";t.d(n,{M_:function(){return u},ou:function(){return c}});var r=t(21262),i=t(71440);function o(){var e=(0,r._)(["\n  fragment OrgCurrentUser on CurrentUser {\n    id\n    displayName\n    username\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment OrgMetadata on Org {\n    id\n    slug\n    type\n    name\n    image\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgMetadata($orgId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}var c=(0,i.Ps)(o()),u=(0,i.Ps)(a());l()},94220:function(e,n,t){"use strict";t.d(n,{R_:function(){return E},a2:function(){return R},rt:function(){return k}});var r=t(41733),i=t(21262),o=t(71440),a=t(23409),l=t(10290),c=t(58995);function u(){var e=(0,i._)(["\n  fragment OrgReplMultiplayers on Repl {\n    multiplayers {\n      id\n      displayName\n      username\n      url\n      image\n      presenceStatus {\n        isOnline\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment OrgReplTemplateInfo on Repl {\n    templateInfo {\n      label\n      replId\n      iconUrl\n    }\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment OrgReplHostingDeployment on Repl {\n    hostingDeployment {\n      __typename\n      ... on HostingDeployment {\n        id\n        latestBuildStatus\n        currentBuild {\n          id\n          status\n          timeCreated\n          user {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment OrgReplCreator on Repl {\n    user {\n      id\n      displayName\n      username\n      image\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgReplOwner on Repl {\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgReplAuthorizations on Repl {\n    authorizations {\n      editFileContents {\n        isAuthorized\n        code\n        message\n      }\n      viewFileContents {\n        isAuthorized\n        code\n        message\n      }\n      connectToWorkspace {\n        isAuthorized\n        code\n        message\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      fork {\n        isAuthorized\n      }\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgReplListRepl on Repl {\n    __typename\n    id\n    title\n    timeCreated\n    timeUpdated\n    imageUrl\n    iconUrl\n    wasPublished\n    isOwner\n    ...ReplLinkRepl\n    ...OrgReplMultiplayers\n    ...OrgReplTemplateInfo\n    ...OrgReplHostingDeployment\n    ...OrgReplCreator\n    ...OrgReplOwner\n    ...OrgReplAuthorizations\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgReplsResult on ReplConnection {\n    items {\n      ...OrgReplListRepl\n    }\n    pageInfo {\n      hasPreviousPage\n      previousCursor\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgReplManagement on Org {\n    ...OrgMetadata\n    authorizations {\n      createPublicRepl: createRepl(private: false) {\n        isAuthorized\n        message\n      }\n      createPrivateRepl: createRepl(private: true) {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  query OrgRepls(\n    $orgId: String!\n    $replsInput: OrgReplsInput!\n    $replsCountInput: OrgReplsCountInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgReplManagement\n          replsCount(input: $replsCountInput)\n          repls(input: $replsInput) {\n            __typename\n            ... on ReplConnection {\n              ...OrgReplsResult\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}var b={},x=(0,o.Ps)(u()),Z=(0,o.Ps)(s()),w=(0,o.Ps)(d()),C=(0,o.Ps)(p()),_=(0,o.Ps)(f()),k=(0,o.Ps)(h()),S=(0,o.Ps)(v(),a.Y,x,Z,w,C,_,k),I=(0,o.Ps)(m(),S),R=(0,o.Ps)(g(),l.M_),G=(0,o.Ps)(y(),R,I);function E(e){var n=(0,r._)({},b,e);return c.a(G,n)}},49633:function(e,n,t){"use strict";var r=t(66626),i=t(74985),o=t(78554),a=t(35021),l=t(64432),c=t(94778),u=t(49224),s=t(59947),d=t(64318),p=t(77361),f=t(76575),h=t(72452),v=t(17519),m=t(29318),g=t(87128),y=t(72093),b=t(85438),x=t(50959),Z=(0,u.X)({scopeSelector:[y.l0.rowWithGap(8),y.l0.justify.end,y.l0.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[y.l0.position.absolute,y.l0.top("50%"),y.l0.left(-4),{transform:"translate(-100%, -50%)"}]}),w=function(e){switch(e){case b.SH.Owner:return{icon:(0,i.tZ)(v.Z,{}),label:"Owner",description:"Full permissions including Repl deletion"};case b.SH.Deployer:return{icon:(0,i.tZ)(p.Z,{}),label:"Deployer",description:"Can edit, deploy, and manage resources"};case b.SH.Editor:return{icon:(0,i.tZ)(f.Z,{}),label:"Editor",description:"Can edit code and view resources"};case b.SH.Viewer:return{icon:(0,i.tZ)(h.Z,{}),label:"Viewer",description:"Can only view code and fork Repls"};case b.SH.None:return{icon:(0,i.tZ)(d.Z,{}),label:"None",description:"Cannot search, view, or edit Repl"}}},C=function(e){switch(e){case b.SH.Owner:return b.E3.Owner;case b.SH.Deployer:return b.E3.Deployer;case b.SH.Editor:return b.E3.Editor;case b.SH.Viewer:return b.E3.Viewer}};n.Z=function(e){var n,t=e.group,u=e.repl,d=e.options,p=e.onScopeChange,f=e.iconSize,h=void 0===f?24:f,v=(0,r._)((0,x.useState)(!1),2),_=v[0],k=v[1],S=(0,r._)((0,x.useState)(d.find(function(e){return e.status===b.w9.Current})),2),I=S[0],R=S[1],G="".concat(u.id,"-role-").concat((0,x.useId)()),E=d.filter(function(e){return e.status===b.w9.Current||e.status===b.w9.Available}),T=I?w(I.role).label:void 0,D=t.permissions.editPermissions,P=(0,r._)((0,o.t)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(p(),k(!0),setTimeout(function(){return k(!1)},2e3))}}),2),B=P[0],U=P[1],A=U.data,O=U.loading,X=U.error,L=(null==A?void 0:A.updateOrgGroupScopes)&&"OrgGroup"!==A.updateOrgGroupScopes.__typename?A.updateOrgGroupScopes.message:null==X?void 0:X.message;return n=L?(0,i.tZ)(l.u,{tooltip:L,children:(0,i.tZ)(g.Z,{size:h,color:y.TV.accentNegativeDefault})}):O?(0,i.tZ)(m.Z,{size:h}):_?(0,i.tZ)(s.Z,{size:h,color:y.TV.accentPositiveDefault}):null,(0,i.BX)(c.G,{css:Z.scopeSelector,children:[n?(0,i.tZ)(c.G,{css:Z.icon,children:n}):null,(0,i.tZ)(l.u,{tooltip:"You cannot edit this group's permissions.",isDisabled:D,children:(0,i.tZ)(a.ZE,{id:G,label:null!=T?T:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(u.title),onAction:function(e){var n=d.find(function(n){return n.role===e});if(n&&n.role!==(null==I?void 0:I.role)){R(n);var r=n.role===b.SH.None?[]:[{resourceId:u.id,role:C(n.role)}],i=n.role===b.SH.None?[{resourceType:b.v1.Repl,resourceId:u.id}]:[];B({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:i}}})}},items:E,disallowEmptySelection:!0,isDisabled:!D,children:function(e){var n=w(e.role);return(0,i.tZ)(a.sN,{id:e.role,label:n.label,description:n.description,css:Z.selectOption,icon:n.icon},e.role)}})})]})}},42673:function(e,n,t){"use strict";t.d(n,{G:function(){return o},K:function(){return a}});var r=t(74985),i=t(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},18458:function(e,n,t){"use strict";t.d(n,{Gp:function(){return G},Oh:function(){return z},V3:function(){return A},gX:function(){return H},h2:function(){return B},on:function(){return T},q7:function(){return F},vs:function(){return I},w9:function(){return X},zp:function(){return M}});var r=t(41733),i=t(21262),o=t(71440),a=t(39562),l=t(58995),c=t(99165);function u(){var e=(0,i._)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    isPrivate\n    description\n    slug\n    timeCreated\n    url\n    iconUrl\n    nextPagePathname\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i._)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,i._)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function Z(){var e=(0,i._)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function C(){var e=(0,i._)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return C=function(){return e},e}var _={},k=(0,o.Ps)(u()),S=(0,o.Ps)(s(),k,a.Pc),I=(0,o.Ps)(d(),S),R=(0,o.Ps)(p(),I),G=(0,o.Ps)(f(),R),E=(0,o.Ps)(h(),R),T=(0,o.Ps)(v(),R),D=(0,o.Ps)(m(),S),P=(0,o.Ps)(g(),E);function B(e){var n=(0,r._)({},_,e);return l.a(P,n)}var U=(0,o.Ps)(y(),G);function A(e){var n=(0,r._)({},_,e);return l.a(U,n)}var O=(0,o.Ps)(b(),T);function X(e){var n=(0,r._)({},_,e);return c.D(O,n)}var L=(0,o.Ps)(x(),I);function M(e){var n=(0,r._)({},_,e);return c.D(L,n)}var W=(0,o.Ps)(Z(),I);function z(e){var n=(0,r._)({},_,e);return c.D(W,n)}var N=(0,o.Ps)(w(),I);function F(e){var n=(0,r._)({},_,e);return c.D(N,n)}var V=(0,o.Ps)(C(),D);function H(e){var n=(0,r._)({},_,e);return c.D(V,n)}},99098:function(e,n,t){"use strict";var r=t(41733),i=t(30509),o=t(74985),a=t(28266),l=t.n(a),c=t(21371);n.Z=function(e){var n=e.items,t=e.onClick,a=e.renderAnchorComponent,u=e.renderItemChildComponent,s=e.isMenuOpen,d=e.respectMaxWidth,p=void 0!==d&&d,f=function(e){return e?"string"==typeof e?e:"object"==typeof e&&"value"in e?"string"!=typeof e.value?f(e.value):e.value:e.toString():""},h=(0,c.L7)({items:n,itemToString:f,isOpen:s,onSelectedItemChange:function(e){var n=e.selectedItem;return t&&n&&t(n)}}),v=h.isOpen,m=h.getToggleButtonProps,g=h.getMenuProps,y=h.highlightedIndex,b=h.getItemProps;return(0,o.BX)("div",{className:l().dynamic([["d23b9418c6745e9c",[p?"max-width: 100%;":"",v?"inline-block":"none",p?"max-width: 100%;":""]]])+" anchor",children:[a(m({refKey:"innerRef"})),(0,o.tZ)("div",{className:l().dynamic([["d23b9418c6745e9c",[p?"max-width: 100%;":"",v?"inline-block":"none",p?"max-width: 100%;":""]]])+" list-wrapper",children:(0,o.tZ)("ul",(0,i._)((0,r._)({},g()),{className:l().dynamic([["d23b9418c6745e9c",[p?"max-width: 100%;":"",v?"inline-block":"none",p?"max-width: 100%;":""]]]),children:v?n.map(function(e,n){return(0,o.tZ)("li",(0,i._)((0,r._)({},b({key:n,index:n,item:e,style:{backgroundColor:y===n?"var(--background-higher)":"transparent"}})),{className:l().dynamic([["d23b9418c6745e9c",[p?"max-width: 100%;":"",v?"inline-block":"none",p?"max-width: 100%;":""]]]),children:u?u(e):f(e)}))}):null}))}),(0,o.tZ)(l(),{id:"d23b9418c6745e9c",dynamic:[p?"max-width: 100%;":"",v?"inline-block":"none",p?"max-width: 100%;":""],children:".anchor.__jsx-style-dynamic-selector{position:relative;".concat(p?"max-width: 100%;":"","\n          }ul.__jsx-style-dynamic-selector,li.__jsx-style-dynamic-selector{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}ul.__jsx-style-dynamic-selector:focus{outline:none;-webkit-box-shadow:0 0 2.5px var(--outline-dimmest)inset;-moz-box-shadow:0 0 2.5px var(--outline-dimmest)inset;box-shadow:0 0 2.5px var(--outline-dimmest)inset}.list-wrapper.__jsx-style-dynamic-selector{display:").concat(v?"inline-block":"none",";margin:0;position:absolute;min-width:100%;").concat(p?"max-width: 100%;":"","\n          }ul.__jsx-style-dynamic-selector{background-color:var(--background-default);border:1px solid var(--outline-dimmer);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-family:var(--font-family-default);margin-top:var(--space-8);-webkit-box-shadow:0px 8px 16px 0px rgba(2,2,3,.32);-moz-box-shadow:0px 8px 16px 0px rgba(2,2,3,.32);box-shadow:0px 8px 16px 0px rgba(2,2,3,.32)}li.__jsx-style-dynamic-selector{width:100%;cursor:pointer;list-style:none;color:var(--foreground-default);font-size:var(--font-size-default);padding:var(--space-4);font-weight:var(--font-weight-medium);white-space:nowrap;border:1px solid transparent}li.__jsx-style-dynamic-selector:first-child{-webkit-border-top-left-radius:var(--space-8);-moz-border-radius-topleft:var(--space-8);border-top-left-radius:var(--space-8);-webkit-border-top-right-radius:var(--space-8);-moz-border-radius-topright:var(--space-8);border-top-right-radius:var(--space-8)}li.__jsx-style-dynamic-selector:last-child{-webkit-border-bottom-left-radius:var(--space-8);-moz-border-radius-bottomleft:var(--space-8);border-bottom-left-radius:var(--space-8);-webkit-border-bottom-right-radius:var(--space-8);-moz-border-radius-bottomright:var(--space-8);border-bottom-right-radius:var(--space-8)}li.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher)}li.__jsx-style-dynamic-selector:active{border:1px solid var(--accent-primary-default)}")})]})}},85874:function(e,n,t){"use strict";t.d(n,{$f:function(){return h},GD:function(){return f},_9:function(){return p},t0:function(){return s}});var r=t(21262),i=t(71440);function o(){var e=(0,r._)(["\n  fragment UsageBreakdownCurrentUser on CurrentUser {\n    id\n    username\n    isCore: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment UsageOverviewReplBreakdown on Repl {\n    id\n    title\n    url\n    nextPagePathname\n    iconUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment UnitPriceReplUsageConnection on UnitPriceReplUsageTypeConnection {\n    items {\n      id\n      repl {\n        ...UsageOverviewReplBreakdown\n      }\n      usage\n      percentage\n    }\n    pageInfo {\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment MatrixPriceReplUsageConnection on MatrixPriceReplUsageTypeConnection {\n    items {\n      id\n      repl {\n        ...UsageOverviewReplBreakdown\n      }\n      usage\n      percentage\n      configName\n    }\n    pageInfo {\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,r._)(["\n  fragment StaticDeploymentReplUsageConnection on StaticDeploymentReplUsageTypeConnection {\n    items {\n      id\n      usage\n      percentage\n      repl {\n        ...UsageOverviewReplBreakdown\n        hostingDeployment {\n          ... on HostingDeployment {\n            currentBuild {\n              timeCreated\n            }\n          }\n        }\n      }\n    }\n    pageInfo {\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var s=(0,i.Ps)(o()),d=(0,i.Ps)(a()),p=(0,i.Ps)(l(),d),f=(0,i.Ps)(c(),d),h=(0,i.Ps)(u(),d)},14354:function(e,n,t){"use strict";t.d(n,{L:function(){return i}});var r=t(87409),i=function(e,n){var t=n.resourceUsageType,i=n.precision,o=n.truncateToMillions;return 0===e||void 0===e?"-":(0,r.fZ)(e,{resourceUsageType:t,precision:i,skipUnits:!0,truncateToMillions:o})}},70191:function(e,n,t){"use strict";t.d(n,{B:function(){return c}});var r=t(74985),i=t(43312),o=t(72093),a=t(94778),l=(0,i.iv)([o.l0.borderRadius("full"),o.l0.position.absolute,o.l0.top(-3),o.l0.right(-3)]);function c(e){var n=e.color,t=void 0===n?o.TV.redStronger:n,i=e.small,c=e.className,u=i?6:8;return(0,r.tZ)(a.G,{className:c,style:{backgroundColor:t,width:u,height:u,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.TV.backgroundDefault)},css:l})}},38868:function(e,n,t){"use strict";var r=t(11765),i=t.n(r);n.Z=i()(function(){return Promise.all([t.e(6030),t.e(2149),t.e(9908)]).then(t.bind(t,23303)).then(function(e){return e.EditReplTemplate})},{loadableGenerated:{webpack:function(){return[23303]}}})},52639:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Rz}});var r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k,S,I,R,G,E,T,D,P,B,U,A,O,X,L,M,W,z,N,F,V,H,j,Y,q,K,J=t(66626),$=t(74985),Q=t(43312),ee=t(26734),en=t(89288),et=t(50959),er=t(32317),ei=t(59786),eo=t(94778),ea=t(72093),el=t(42516),ec=t(63257),eu=t(81199),es=t(39743),ed=t(85733);function ep(e){var n=(0,eu.Z)().presence,t=(0,es.pV)(),r=(0,ed.Z)(e);return(0,et.useCallback)(function(e){var i=e.username,o=e.id,a=n.getFollowedUser();if((null==a?void 0:a.username)===i){n.unfollowUser();return}n.followUser(i);var l=n.getActiveFileForUser(o),c=t();l&&l!==c&&r.current({path:l})},[r,t,n])}var ef=t(39271),eh=t(60305),ev=t(27387),em=t(96583),eg=t(66403),ey=t(41733),eb=t(21262),ex=t(71440),eZ=t(58039),ew=t(58995);function eC(){var e=(0,eb._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...OrgGroupMetadata\n      permissions {\n        editPermissions\n        viewPermissions\n      }\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return eC=function(){return e},e}function e_(){var e=(0,eb._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...OrgGroupMetadata\n      permissions {\n        editPermissions\n        viewPermissions\n      }\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return e_=function(){return e},e}function ek(){var e=(0,eb._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return ek=function(){return e},e}function eS(){var e=(0,eb._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return eS=function(){return e},e}var eI={},eR=(0,ex.Ps)(eC(),eZ.Kl),eG=(0,ex.Ps)(e_(),eZ.Kl),eE=(0,ex.Ps)(ek(),eR,eG),eT=(0,ex.Ps)(eS(),eE),eD=t(78330),eP=t(49633),eB=t(94311),eU=t(99236),eA=t(82230),eO=t(49224),eX=t(29318),eL=(0,eO.X)({container:[ea.l0.px(12),ea.l0.colWithGap(12)],loader:[ea.l0.px(12),ea.l0.align.center,ea.l0.justify.center],section:[ea.l0.colWithGap(12)],sectionTitle:[ea.l0.fontWeight.medium],item:[ea.l0.rowWithGap(16),ea.l0.align.center,ea.l0.justify.spaceBetween],label:[ea.l0.rowWithGap(8)]}),eM=function(e){var n=e.user,t=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,l=t===n.id,c=l?r.authorizations.removeSelf.isAuthorized:r.authorizations.editPermissions.isAuthorized;return(0,$.BX)(eo.G,{css:eL.item,children:[(0,$.BX)(eo.G,{css:eL.label,children:[(0,$.tZ)(eB.q,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,$.BX)(eA.xv,{children:[n.username,l?" (you)":null]})]}),(0,$.tZ)(eo.G,{children:!l||l&&c?(0,$.tZ)(eP.Z,{repl:r,group:i,options:o,onScopeChange:a}):(0,$.tZ)(eA.xv,{variant:"small",height:"singleLine",color:"dimmer",children:"Owner"})})]})},eW=function(e){var n=e.repl,t=e.group,r=e.options,i=e.onScopeChange;return(0,$.BX)(eo.G,{css:eL.item,children:[(0,$.BX)(eo.G,{css:eL.label,children:[(0,$.tZ)(eD.Z,{group:t,variant:"compact"}),(0,$.tZ)(eA.xv,{children:t.name})]}),(0,$.tZ)(eo.G,{children:(0,$.tZ)(eP.Z,{repl:n,group:t,options:r,onScopeChange:i})})]})},ez=function(e){var n,t,r,i,o,a,l,c=e.replId,u=(0,eg.d)(),s=(n=(0,ey._)({},eI,{variables:{replId:c}}),ew.a(eT,n)),d=s.data,p=s.loading,f=s.error,h=s.refetch,v=(null==d?void 0:null===(r=d.repl)||void 0===r?void 0:r.__typename)==="Repl"?d.repl:void 0,m=null!==(a=null==v?void 0:null===(i=v.multiplayerStatus)||void 0===i?void 0:i.groups)&&void 0!==a?a:[],g=null!==(l=null==v?void 0:null===(o=v.multiplayerStatus)||void 0===o?void 0:o.individuals)&&void 0!==l?l:[],y=(t=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)});return(null==f?void 0:f.message)?(0,$.tZ)(eo.G,{css:eL.container,children:(0,$.tZ)(eU.E,{colorway:"negative",text:f.message})}):p||!v?(0,$.tZ)(eo.G,{css:eL.loader,children:(0,$.tZ)(eX.Z,{})}):(0,$.BX)(eo.G,{css:eL.container,children:[(0,$.BX)(eA.xv,{variant:"subheadDefault",children:['Share "',v.title,'"']}),(0,$.BX)(eo.G,{css:eL.section,children:[(0,$.tZ)(eA.xv,{variant:"small",css:eL.sectionTitle,children:"People with access"}),g.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,$.tZ)(eM,{currentUserId:u,repl:v,group:n,user:t,options:r,onScopeChange:y},t.id)})]}),(0,$.BX)(eo.G,{css:eL.section,children:[(0,$.tZ)(eA.xv,{variant:"small",css:eL.sectionTitle,children:"Groups with access"}),m.map(function(e){var n=e.group,t=e.options;return(0,$.tZ)(eW,{repl:v,group:n,options:t,onScopeChange:y},n.id)})]})]})},eN=t(7714),eF=t(66415),eV=t(37053),eH=t(38753),ej=t(30124),eY=t(85447),eq=t(72121),eK=(0,eO.X)({root:[ea.l0.color.foregroundDefault,ea.l0.p(24),ea.l0.display.grid,{gap:ea.TV.space24}],controls:[ea.l0.display.grid,{gap:ea.TV.space8,gridAutoFlow:"column"}],message:[ea.l0.pb(16)]});function eJ(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,$.BX)("div",{css:eK.root,children:[(0,$.tZ)(eY.Z,{level:3,align:"center",children:"Are you sure?"}),(0,$.BX)(eq.Z,{align:"center",children:[(0,$.tZ)("p",{css:eK.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,$.tZ)("p",{children:n})]}),(0,$.BX)("div",{css:eK.controls,children:[(0,$.tZ)(ej.Z,{onClick:r,children:"Cancel"}),(0,$.tZ)(ej.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]})]})}var e$=t(45271),eQ=t(18471),e0=t(64479),e1=t(24927),e2=t(52425),e4=t(85438),e8=t(85421),e3=t(24605),e5=t(14709),e6=t.n(e5),e7=t(36522),e9=t(39064);function ne(){var e=(0,eb._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ne=function(){return e},e}var nn={},nt=(0,ex.Ps)(ne(),e9.U4),nr=t(2619);function ni(e){var n,t,r,i,o,a,l,c,u,s,d,p=e.replId,f=(0,e8.useRouter)(),h=(0,eH.Gv)(f),v=(0,e2.aG)(),m=(0,J._)((0,et.useState)(null),2),g=m[0],y=m[1],b=(n=(0,ey._)({},nn,{variables:{replId:p}}),ew.a(nt,n)),x=b.data,Z=b.loading,w=(null==x?void 0:null===(t=x.currentUser)||void 0===t?void 0:t.id)||null,C=(null==x?void 0:x.repl.__typename)==="Repl"?x.repl:null,_=(0,eV.Z)({isMobileApp:h,isTeam:!0,replId:p}),k=_.addOrInviteReplMultiplayer,S=_.loadingAddMutation;if(C&&!C.owner)throw Error("Cannot manage members on anon repls");if((null==C?void 0:C.owner)&&(null==C?void 0:C.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var I=(null==C?void 0:null===(r=C.owner)||void 0===r?void 0:r.__typename)==="Team"?C.owner:null,R=!(null==I?void 0:null===(i=I.capabilities)||void 0===i?void 0:i.hasValidSubscription)&&!(null==I?void 0:null===(o=I.capabilities)||void 0===o?void 0:o.isBusinessPlan),G=(null!==(a=null==C?void 0:C.collaborators)&&void 0!==a?a:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),E=null==C?void 0:C.multiplayerInvites,T=(null!==(l=null==C?void 0:C.collaborators)&&void 0!==l?l:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),D=T.length,P=(null!==(c=null==C?void 0:C.collaborators)&&void 0!==c?c:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),B=(null!==(u=null==C?void 0:C.collaborators)&&void 0!==u?u:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),U=B.some(function(e){return e.id===w}),A=P.filter(function(e){return v.some(function(n){return n.id===e.id})}),O=P.filter(function(e){return!v.some(function(n){return n.id===e.id})}),X=null!==(s=null==C?void 0:C.authorizations.editPermissions.isAuthorized)&&void 0!==s&&s,L=null!==(d=null==C?void 0:C.authorizations.inviteGuests.isAuthorized)&&void 0!==d&&d;return Z?(0,$.tZ)(e0.Tg,{css:[eF._U.root],background:"default",children:(0,$.BX)(eo.G,{css:eF._U.loading,children:[(0,$.tZ)(eX.Z,{color:e3.TV.foregroundDimmer}),(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,$.BX)(e0.Tg,{css:eF._U.root,background:"default",children:[(0,$.tZ)(eo.G,{css:[eF._U.header,h&&eF._U.header_mobile],children:(0,$.tZ)(eo.G,{css:eF._U.titleContainer,children:(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),L?(0,$.tZ)(eo.G,{css:eF._U.searchContainer,children:(0,$.tZ)(nr.Z,{existingUsernames:G,onSubmit:function(e){if(!S){if(e6()(e)){y(e);return}k({variables:{input:{replId:p,target:{method:e4.ml.Username,value:e},level:e4.gA.Rw}}})}},isDisabled:Z})}):null,!L&&R?(0,$.tZ)(eo.G,{css:[ea.l0.px(16)],children:(0,$.tZ)(eQ.u,{iconLeft:(0,$.tZ)(e1.Z,{}),text:'You can add people to this Repl by inviting them to the "'.concat(null==I?void 0:I.displayName,'" Friends Team.'),href:"/teams/".concat(null==I?void 0:I.username),target:"_blank"})}):null,(0,$.tZ)(e$.u,{isOpen:!!g,onRequestClose:function(){return y(null)},children:g?(0,$.tZ)(eJ,{email:g,onInvite:function(){k({variables:{input:{replId:p,target:{method:e4.ml.Email,value:g},level:e4.gA.Rw}}}),y(null)},onCancel:function(){return y(null)}}):null}),(0,$.BX)(e0.Tg,{css:eF._U.userList,children:[(null==E?void 0:E.length)?(0,$.BX)(eo.G,{css:eF._U.userGroup.root,children:[(0,$.tZ)(eF.ln,{title:"Pending Invitations",color:e3.TV.outlineStrongest,count:D}),null==E?void 0:E.map(function(e){return(0,$.tZ)(e7.Z,{canEditMultiplayers:U||!1,email:e.email,isPendingInvitation:!0,replId:p},e.email)})]}):null,T.length?(0,$.BX)(eo.G,{css:eF._U.userGroup.root,children:[(0,$.tZ)(eF.ln,{title:"External Guests",color:e3.TV.outlineStrongest,count:null==T?void 0:T.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),T.map(function(e){return(0,$.tZ)(e7.Z,{canEditMultiplayers:U||!1,isPendingInvitation:!1,replId:p,user:e},e.id)})]}):null,A.length?(0,$.BX)(eo.G,{css:eF._U.userGroup.root,children:[(0,$.tZ)(eF.ln,{title:"Online Members",color:e3.TV.greenStrongest,count:null==A?void 0:A.length}),A.map(function(e){return(0,$.tZ)(e7.Z,{isPendingInvitation:!1,canEditMultiplayers:!!U,replId:p,user:e},e.id)})]}):null,O.length?(0,$.BX)(eo.G,{css:eF._U.userGroup.root,children:[(0,$.tZ)(eF.ln,{title:"Offline Members",color:e3.TV.outlineStrongest,count:null==O?void 0:O.length}),O.map(function(e){return(0,$.tZ)(e7.Z,{isPendingInvitation:!1,canEditMultiplayers:!!U,replId:p,user:e},e.id)})]}):null,B.length?(0,$.BX)(eo.G,{css:eF._U.userGroup.root,children:[(0,$.tZ)(eF.ln,{title:"Admins",color:e3.TV.accentPrimaryStronger,count:B.length}),B.map(function(e){return(0,$.tZ)(e7.Z,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:p},e.id)})]}):null,X||Z?null:(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var no=t(52092),na=t(72452),nl=t(89421),nc=function(){var e=(0,no.r)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,J._)((0,et.useState)(!1),2),i=r[0],o=r[1];return n?(0,$.BX)(eo.G,{css:nu.self,children:[(0,$.tZ)(eo.G,{tag:"button",css:nu.bannerWrapper,onClick:function(){return o(!0)},children:(0,$.tZ)(eU.E,{icon:(0,$.tZ)(na.Z,{}),colorway:"yellow",text:"This Repl is publicly visible. Upgrade for unlimited private Repls, better AI, more storage, speed, and more."})}),(0,$.tZ)(nl.Z,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){return t()},type:"purchase",contextualUpsell:(0,$.BX)($.HY,{children:[(0,$.tZ)(eA.xv,{variant:"subheadBig",children:"Upgrade for private Repls"}),(0,$.tZ)(eA.xv,{multiline:!0,children:"Keep your code secure and private"})]}),analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}}})]}):null},nu=(0,eO.X)({bannerWrapper:[ea.l0.cursor.pointer,ea.l0.borderRadius()],self:[ea.l0.px(12),ea.l0.pb(16)]}),ns=(0,eO.X)({self:[ea.l0.flex.column,ea.l0.py(16),ea.l0.borderRadius(8),ea.l0.align.stretch,ea.l0.flex.growAndShrink(1),ea.l0.maxHeight("calc(100vh - ".concat(er.Mz+12,"px)")),ea.l0.backgroundColor.backgroundDefault]}),nd=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return n=o?(0,$.tZ)(ez,{replId:t}):i?(0,$.tZ)(ni,{replId:t}):(0,$.tZ)(eF.ZP,{replId:t,handleUpgradeTriggered:r}),(0,$.BX)(eo.G,{css:ns.self,children:[n,o&&"personal"!==o.type?null:(0,$.tZ)(nc,{}),o?null:(0,$.tZ)(eN.Z,{replId:t})]})},np=t(63284),nf=t(15235),nh=t(60772),nv={owner:"Owner",editor:"Can edit"},nm=t(64586),ng=t(51973),ny=t(30509),nb=t(12933),nx=t(19068),nZ=t(27649),nw=(0,eO.X)({container:[ea.l0.pl(8),ea.l0.pr(16),ea.l0.py(4),ea.l0.flex.row,ea.l0.align.center,ea.l0.justify.start],button:[ea.l0.display.flex,ea.l0.align.center],img:[ea.l0.width(32),ea.l0.height(32),ea.l0.borderRadius("full"),ea.l0.backgroundColor.white,ea.l0.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[ea.l0.display.flex,ea.l0.flex.column,ea.l0.justify.center,ea.l0.ml(8),ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)]}),nC=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,c=e.isCurrentUser,u=e.onAvatarClick,s=function(){l&&(u({username:t,id:n}),a())};return(0,$.BX)("div",{css:[nw.container,i&&nx.gU.listItem],style:(0,ey._)({cursor:l?"pointer":"auto"},l&&nx.gU.listItem),role:"button",onClick:s,onKeyDown:s,tabIndex:0,children:[(0,$.BX)("div",{css:nw.button,children:[(0,$.tZ)(nb.Z,{src:r,alt:"",css:nw.img,style:{borderColor:o},width:32,height:32}),l?(0,$.BX)(nZ.T,{children:["Observe ",t]}):null]}),(0,$.BX)("div",{css:nw.usernameContainer,children:[(0,$.BX)(eA.xv,{multiline:!1,children:["@",t,c?" (you)":null]}),(0,$.tZ)(eA.xv,{variant:"small",color:"dimmer",multiline:!1,children:i?nv.owner:nv.editor})]})]})};function n_(){var e=(0,eb._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return n_=function(){return e},e}function nk(){var e=(0,eb._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return nk=function(){return e},e}var nS={},nI=(0,ex.Ps)(n_()),nR=(0,ex.Ps)(nk(),nI),nG=(0,eO.X)({loading:[ea.l0.flex.row,ea.l0.justify.center,ea.l0.p(32)],loaded:[ea.l0.colWithGap(8),ea.l0.py(8),ea.l0.maxHeight(330),{overflowY:"auto"}]}),nE=function(e){var n,t=e.replId,r=e.activeUsers,i=e.hideModal,o=e.onAvatarClick,a=(n=(0,ey._)({},nS,{variables:{replId:t}}),ew.a(nR,n)),l=a.data,c=a.loading,u=a.error;if(c)return(0,$.tZ)(eo.G,{css:nG.loading,children:(0,$.tZ)(eX.Z,{})});if(u)return(0,$.tZ)("div",{children:u.message});if((null==l?void 0:l.repl.__typename)==="Repl"){var s=l.repl,d=l.currentUser,p=s.user,f=p&&r.find(function(e){return e.username===p.username}),h=s.multiplayers.filter(function(e){var n;return e&&(n=e.id,r.some(function(e){return e.id===n}))}).slice(2);return(0,$.tZ)(eo.G,{css:nG.loaded,children:(0,$.BX)(eo.G,{children:[p?(0,$.tZ)(nC,(0,ny._)((0,ey._)({},p),{color:f?f.color:"transparent",isOwner:!0,hideModal:i,isCurrentUser:p.id===(null==d?void 0:d.id),canClickAvatar:!!f&&p.id!==(null==d?void 0:d.id),onAvatarClick:o})):null,h.map(function(e){if(!e)throw Error("Expected user");var n=r.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==d?void 0:d.id);return(0,$.tZ)(nC,(0,ny._)((0,ey._)({isCurrentUser:e.id===(null==d?void 0:d.id)},e),{canClickAvatar:t,color:n.color,hideModal:i,isOwner:!1,onAvatarClick:o}),"chat-user-list-".concat(e.username))})]})})}return(null==l?void 0:l.repl.__typename)==="ReplRedirect"?(0,$.BX)("div",{children:["This Repl has moved to"," ",(0,$.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):(null==l?void 0:l.repl.__typename)==="SubscriptionExpiredError"?(0,$.BX)("div",{children:["Your subscription has expired.",(0,$.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null},nT=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,ef.Z)(),a=(0,ng.aG)();return(0,$.BX)(nm.Z,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,$.tZ)(nE,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})},nD=(0,eO.X)({root:[ea.l0.flex.row,ea.l0.align.center,ea.l0.backgroundColor.backgroundDefault],userStack:[ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.px(8),(0,el._)({},ea.BC.max(nh.j.mobileMax+100),[ea.l0.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[ea.l0.borderRadius("full"),ea.l0.minWidth(24),ea.l0.height(24),ea.l0.fontSize(10),ea.l0.border({color:ea.TV.outlineDefault})]});function nP(e){var n=(0,J._)((0,et.useState)(!1),2),t=n[0],r=n[1],i=(0,e2.aG)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,$.tZ)(eo.G,{css:nD.root,children:(0,$.BX)(eo.G,{tag:"ul",css:nD.userStack,"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,$.tZ)("li",{css:nD.userStackListItem,children:(0,$.tZ)(np.Z,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,$.tZ)("li",{css:nD.userStackListItem,children:(0,$.tZ)(eo.G,{children:(0,$.tZ)(nT,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,$.tZ)(e0.Tg,{background:"root",css:nD.overflowContainer,children:(0,$.tZ)(nf.zx,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:nD.overflowButton})})})})}):null]})})}var nB=t(82031),nU=t(37058),nA=t(11407),nO=t(36647),nX=t(42650),nL=t(10422),nM=(0,nX.cn)(!1),nW=(0,nX.cn)(null,function(e,n,t){if(e(nM)){(0,nL.flushSync)(function(){n(nz,null),n(nM,!1)});return}t&&n(nz,t),n(nM,!0)}),nz=(0,nX.cn)(null),nN=(0,nX.cn)([]),nF=t(58045),nV=t(82400),nH=t(89748),nj=t(7360),nY=t(23197),nq=t(86763),nK=t.n(nq),nJ=t(74044),n$=nJ.Dy.String();nJ.Dy.String();var nQ=nJ.Dy.Object({width:nJ.Dy.Number(),height:nJ.Dy.Number()}),n0=nJ.Dy.Object({x:nJ.Dy.Number(),y:nJ.Dy.Number()}),n1=nJ.Dy.Intersect([n0,nQ]),n2=nJ.Dy.Object({top:nJ.Dy.Number(),bottom:nJ.Dy.Number(),left:nJ.Dy.Number(),right:nJ.Dy.Number()}),n4=nJ.Dy.Object({id:nJ.Dy.String(),type:nJ.Dy.Literal("paneGroup"),panes:nJ.Dy.Array(n$),percent:nJ.Dy.Number(),activeIndex:nJ.Dy.Number()}),n8=nJ.Dy.Object({id:nJ.Dy.String(),type:nJ.Dy.Literal("floatingPaneGroup"),panes:nJ.Dy.Array(n$),activeIndex:nJ.Dy.Number(),rect:n1}),n3=nJ.Dy.Recursive(function(e){return nJ.Dy.Object({type:nJ.Dy.Literal("split"),stacked:nJ.Dy.Boolean(),children:nJ.Dy.Array(nJ.Dy.Union([n4,e])),percent:nJ.Dy.Number()})});nJ.Dy.Union([n4,n3]);var n5=nJ.Dy.Object({tiling:nJ.Dy.Union([n3,n4,nJ.Dy.Null()]),floating:nJ.Dy.Array(n8)});nJ.Dy.Union([nJ.Dy.Literal("left"),nJ.Dy.Literal("right")]),nJ.Dy.Object({inset:nJ.Dy.Optional(n2),size:nQ,gap:nJ.Dy.Number(),headerHeight:nJ.Dy.Number()});var n6=nJ.Dy.Union([nJ.Dy.Literal("above"),nJ.Dy.Literal("below"),nJ.Dy.Literal("leftOf"),nJ.Dy.Literal("rightOf")]);function n7(e,n){var t,r,i,o,a={width:t=.5*n.width,height:r=.5*n.height,x:n.x+(n.width-t)/2,y:n.y+(n.height-r)/2};if(i=e.x,o=e.y,i>a.x&&i<a.x+a.width&&o>a.y&&o<a.y+a.height)return{dropLocation:"middle",previewRect:n};var l={x:n.x+n.width/2,y:n.y+n.height/2},c=.3*n.width,u=l.x-c/2;if(e.x>=u&&e.x<=u+c){var s=e.y<=l.y?"above":"below",d=n.height/2;return{dropLocation:s,previewRect:{x:n.x,y:"above"===s?n.y:n.y+d,width:n.width,height:d}}}var p=e.x<=l.x?"leftOf":"rightOf",f=n.width/2;return{dropLocation:p,previewRect:{x:"leftOf"===p?n.x:n.x+f,y:n.y,width:f,height:n.height}}}nJ.Dy.Union([n6,nJ.Dy.Literal("replace")]),nJ.Dy.Union([nJ.Dy.Literal("up"),nJ.Dy.Literal("left"),nJ.Dy.Literal("right"),nJ.Dy.Literal("down")]);var n9={height:0,width:0};function te(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function tn(e){return"floatingPaneGroup"!==e.type}var tt=t(78950),tr=t(45077);function ti(e,n){var t=(0,tt._)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!=typeof o)throw Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw Error("Expected paneGroup");return a}if("tiling"!==r)throw Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,u=i.length,s=0,d=!0,p=!1,f=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;if("paneGroup"===c.type)break;if("number"!=typeof m)throw Error("Expected number");s++,c=c.children[m]}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return u===s?c:null}function to(e,n){var t=e.floating.find(function(e){return e.panes.includes(n)});if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var u,s=o.node.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,ec._)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function ta(e,n){var t=e.tiling;return t?function e(n,t,r){if("paneGroup"===n.type)return{paneGroup:n,path:r};var i=0,o=n.children.length-1;return"topRight"!==t||n.stacked?"bottomRight"===t?i=o:"bottomLeft"===t&&n.stacked&&(i=o):i=o,e(n.children[i],t,(0,ec._)(r).concat([i]))}(t,n,["tiling"]):null}function tl(e,n){var t=e.tiling,r=e.floating,i=(0,ec._)(r);for(t&&i.push(t);i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.type)i.push.apply(i,(0,ec._)(o.children));else if(o.id===n)return o}return null}function tc(e,n){var t=e.tiling;if(null===t)return null;for(var r=[[t,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var t=(0,J._)(e,2),i=t[0],o=t[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===n})?{v:{node:i,path:o}}:void i.children.forEach(function(e,n){r.push([e,(0,ec._)(o).concat([n])])})}();if("object"===(0,tr._)(i))return i.v}return null}function tu(e,n){var t=to(e,n);if((null==t?void 0:t.paneGroup.type)==="paneGroup"){var r=tc(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function ts(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=(0,J._)(u.value,2),p=d[0],f=d[1];if(p!==n){var h=function(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}({from:i,other:f,direction:r});if(("leftOf"!==r&&"above"!==r||!(h<=0))&&("rightOf"!==r&&"below"!==r||!(h<0))){var v=function(e,n,t){var r=(0,J._)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}(i,f,"leftOf"===r||"rightOf"===r?"y":"x");!(v<=0)&&(!o||o.distance>h||o.distance===h&&o.overlap<v)&&(o={key:p,rect:f,distance:h,overlap:v})}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return(null==o?void 0:o.key)||null}var td={top:0,bottom:0,left:0,right:0};function tp(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}function tf(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating){e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});return}var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=to(e,n.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,u="rightOf"===o||"below"===o;if(!e.tiling&&1===r.length){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(!e.tiling)throw Error("Expected tiling");var s=ti(e,r);if(!s||!tn(s))throw Error("Expected tiled node");if(1===r.length&&"replace"===o){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:c,children:d},th({id:n.id,insertIndex:u?1:0,panes:a,children:d,percent:l,activeIndex:t});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!c){th({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});return}var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=u?[s,p]:[p,s];s.percent=100-p.percent,e.tiling={type:"split",stacked:c,children:f,percent:100};return}if(0===r.length)throw Error("Expected relativeTo length");var h=ti(e,te(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===o){var v=h.children.indexOf(s);h.children.splice(v,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t});return}if(!!h.stacked==!!c){var m=h.children.indexOf(s);th({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?m+1:m,children:h.children});return}if(!!h.stacked!=!!c){var g={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},y=u?[s,g]:[g,s],b=s.percent;s.percent=100-g.percent;var x=h.children.indexOf(s);h.children[x]={type:"split",stacked:c,children:y,percent:b};return}}function th(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0!==t){var l=(100-t)/100;r.forEach(function(e){e.percent=e.percent*l}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a});return}var c=r.reduce(function(e,n){return e+n.percent},0)/r.length,u=100/(100+c);r.forEach(function(e){e.percent=e.percent*u}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:c*u,activeIndex:a})}function tv(e,n){var t=tl(e,n.paneGroupId);if(!t)throw Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var a=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[a,0].concat((0,ec._)(i))),(void 0===o||o)&&(e.activeIndex=a)}(t,n)}function tm(e,n){e.panes.splice(n,1),0===e.activeIndex||n>e.activeIndex||(e.activeIndex=e.activeIndex-1)}function tg(e,n){var t=to(e,n);if(!t)throw Error("Expected pane");if(t.floating){if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");ty(e,["floating",r])}else tm(t.paneGroup,t.index);return}var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw Error("Expected paneIndex");if(!a&&1===i.panes.length){e.tiling=null;return}if(i.panes.length>1){tm(i,l);return}ty(e,o)}function ty(e,n){var t=(0,tt._)(n),r=t[0],i=t.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var o=ti(e,n);if(!o)throw Error("Expected node");if("floatingPaneGroup"===o.type){var a=e.floating.indexOf(o);if(-1===a)throw Error("Expected paneGroupIndex");e.floating.splice(a,1);return}var l=te(n),c=ti(e,l);if((null==c?void 0:c.type)!=="split")throw Error("Expected split");var u=c.children.indexOf(o);if(-1===u)throw Error("Expected paneGroupIndex");var s=c.children;if(s.splice(u,1),s.length>1){var d=100/s.reduce(function(e,n){return e+n.percent},0);s.forEach(function(e){e.percent=e.percent*d});return}var p=(0,J._)(s,1)[0],f=l.length>1?ti(e,te(l)):null;if(!f){p.percent=100,e.tiling=p;return}if("split"!==f.type)throw Error("Expected split");var h=f.children.indexOf(c);if(-1===h)throw Error("Expected parentIndex");p.percent=c.percent,f.children[h]=p}function tb(e,n){var t=n.paneGroupPath,r=n.rect,i=ti(e,t);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");ty(e,t),tf(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}function tx(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:ti(e,n.paneGroupPath);if(!t||!("panes"in t))throw Error("Expected paneGroup");tg(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}function tZ(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=ti(e,t);if(!a||!tn(a))throw Error("Expected leftNode");var l=ti(e,te(t));if((null==l?void 0:l.type)!=="split")throw Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw Error("Expected leftNodeIndex");var u=c+1,s=l.children[u];if(!s)throw Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),p=c-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce(function(e,n){return n===s?e:e+n.percent},0);s.percent=100-h;return}var v=a.percent+s.percent,m=l.children.slice(c).reduce(function(e,n){return e+n.percent},0);if(r>v-o){if(a.percent=Math.min(m,Math.max(v,r)),s.percent=0,r>v&&u<l.children.length-1)for(var g=r-v,y=u+1;g>0;){var b=l.children[y];if(b.percent>g){b.percent-=g;break}if(g-=b.percent,b.percent=0,y===l.children.length-1)break;y++}return}var x=a.percent-r;s.percent=s.percent+x,a.percent=r}var tw=t(88205),tC=(0,nX.cn)([]),t_=(0,nX.cn)([]),tk=(0,nX.cn)([]),tS={x:0,y:0,width:0,height:0},tI={type:"commands",data:{autoFocus:!1}},tR=(0,tw.xu)(function(e){return(0,nX.cn)({paneId:e,type:"tile",rectAtom:(0,nX.cn)((0,ey._)({},tS)),data:(0,nX.cn)((0,ey._)({},tI)),isHidden:!1,isCommitted:!1})}),tG=(0,nX.cn)(function(e){return e(tC).map(function(n){return e(tR(n))})}),tE=(0,nX.cn)(function(e){return e(tG).filter(function(e){return!e.isHidden})}),tT=(0,nX.cn)(function(e){return e(tG).filter(function(e){return e.isHidden})}),tD=(0,nX.cn)(function(e){return e(tk).map(function(n){return e(tB(n))})}),tP=(0,tw.xu)(function(e){return(0,nX.cn)({handleId:e,rect:tS,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),tB=(0,tw.xu)(function(e){return(0,nX.cn)({id:e,rectAtom:(0,nX.cn)((0,ey._)({},tS)),panes:[],path:["tiling"],activeIndex:0})}),tU=(0,nX.cn)(function(){return 32}),tA=(0,nX.cn)({x:0,y:0,width:0,height:0}),tO=(0,nX.cn)({width:0}),tX=t(41974),tL=(0,nX.cn)(null),tM=(0,nX.cn)(null,function(e,n,t){t!==e(tL)&&n(tL,t)}),tW=(0,nX.cn)(null,function(e,n,t){var r=tR(t);e(r).isCommitted||n(r,function(e){return(0,tX.Uy)(e,function(e){e.isCommitted=!0})})}),tz=(0,nX.cn)(function(e){var n=e(tL);if(!n)return null;var t=e(tR(n)),r=e(t.data);return"markdown"===r.type?r.data.path:(0,nF.Ur)(r)&&r.data.path||null}),tN=t(81202),tF=t.n(tN),tV=t(3212),tH=(0,nX.cn)(!0),tj=(0,nX.cn)({tiling:null,floating:[]}),tY=(0,nX.cn)(function(e){return e(tG).filter(function(n){return(0,nF.Ur)(e(n.data))})}),tq=(0,nX.cn)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(tG)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,nF.Ur)(e(a.data)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),tK=(0,nX.cn)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(tG)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!(a.isCommitted||(0,nF.Ur)(e(a.data))))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),tJ=(0,nX.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(tE)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),t$=(0,nX.cn)([]),tQ=(0,nX.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(tT)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),t0=(0,nX.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(tG)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),t1=(0,nX.cn)(function(e){return e(t0).length}),t2=(0,nX.cn)(function(e){var n=e(tA);return!!(n.width&&n.height)}),t4=(0,nX.cn)(null),t8=(0,nX.cn)(function(e){var n=e(tL);if(!n)return null;var t=e(tR(n)).rectAtom,r=e(t),i=e(tU);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}),t3=(0,nX.cn)(null,function(e,n,t){var r=e(tG).find(function(n){var r=e(n.data);return(0,nF.Ur)(r)?t===(0,nF.DQ)(r):"markdown"===r.type&&t===r.data.path});r&&(n(tM,r.paneId),n(tW,r.paneId))}),t5=(0,nX.cn)(null);function t6(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function t7(e,n){var t,r,i,o,a,l,c,u,s,d=(r=(t={point:e,rect:n}).rect,i=t.point,o=r.height>r.width?r.width/r.height:1,a=r.width>r.height?r.height/r.width:1,(s=Math.min(l=(i.x-r.x)*a,c=(r.x+r.width-i.x)*a,u=(i.y-r.y)*o,(r.y+r.height-i.y)*o))===l?"left":s===c?"right":s===u?"top":"bottom"),p={x:n.x,y:n.y,width:n.width,height:n.height},f="below";return"top"===d?(p.height=n.height/2,f="above"):"bottom"===d?(p.height=n.height/2,p.y=n.y+n.height/2,f="below"):"left"===d?(p.width=n.width/2,p.x=n.x,f="leftOf"):"right"===d&&(p.width=n.width/2,p.x=n.x+n.width/2,f="rightOf"),{placement:f,rect:p}}function t9(e){return"handle:"+e.leftPath.join(":")}function re(e){return(0,nO.Z)(function(){return(0,tw.kv)(e,function(e){return{width:e.width,height:e.height}},function(e,n){return!!(e.height===n.height&&e.width===n.width)})},[e])}function rn(e){return(0,nO.Z)(function(){return(0,tw.kv)(e,function(e){return{x:e.x,y:e.y}},function(e,n){return!!(e.x===n.x&&e.y===n.y)})},[e])}var rt=(0,nX.cn)(6),rr=(0,nX.cn)(function(e){var n=e(tU),t=e(tO),r=e(tA),i=e(rt);return{headerHeight:n,inset:6===i?{top:0,bottom:i+2,left:i+t.width,right:i+2}:{top:0,bottom:0,left:t.width,right:0},gap:i,size:{width:r.width,height:r.height}}}),ri=(0,nX.cn)(null,function(e,n,t){n(tA,t),n(ra,e(tj))});function ro(e,n){return tF()(e,n)}var ra=(0,nX.cn)(null,function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=tR(r),u=e(c);ro(e(u.rectAtom),i)||n(u.rectAtom,i);var s=(0,tX.Uy)(u,function(e){e.paneId=r,e.type=o,e.isHidden=a});ro(u,s)||n(c,s)},i=e(tC),o=e(t_),a=e(tk),l=new Set(i),c=new Set(o),u=new Set(a),s=function(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?td:o,l=[],c=[],u=[],s=[],d=null,p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},f=e.tiling;if((null==f?void 0:f.type)==="paneGroup"){var h={x:p.x,y:p.y+i,width:p.width,height:p.height-i},v={x:h.x,y:h.y-i,width:h.width,height:i};s.push({id:f.id,rect:v,panes:f.panes,activeIndex:f.activeIndex,path:["tiling"]}),c.push.apply(c,(0,ec._)(f.panes.map(function(e,n){return{paneId:e,rect:h,active:n===f.activeIndex}})))}else f&&f.children.forEach(function(n,t){return function n(t,o,a,l){var p,f,h,v=o.children.indexOf(t),m=o.children.length,g=o.stacked?a.height:a.width,y=(p=a.width,f=a.height,h=t.percent/100,o.stacked?f=(g-(r*(m-1)+i*m))*h+i:p=(g-r*(m-1))*h,{width:p,height:f}),b=y.width,x=y.height,Z=function(){var e=a.x,n=a.y;if(0===v)return{x:e,y:n};if(!d)throw Error("Expected previousRect");return o.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),w={x:Z.x,y:Z.y,height:x,width:b};if(d=w,"paneGroup"===t.type){var C={x:w.x,y:w.y+i,width:w.width,height:w.height-i},_={x:C.x,y:C.y-i,width:C.width,height:i};s.push({id:t.id,rect:_,panes:t.panes,activeIndex:t.activeIndex,path:l}),c.push.apply(c,(0,ec._)(t.panes.map(function(e,n){return{paneId:e,rect:C,active:n===t.activeIndex}})))}else t.children.forEach(function(e,r){return n(e,t,w,(0,ec._)(l).concat([r]))});if(0!==v){var k={x:w.x-(o.stacked?0:r),y:w.y-(o.stacked?r:0),width:o.stacked?w.width:r,height:o.stacked?r:w.height},S=te(l),I=(0,ec._)(S).concat([v-1]),R=ti(e,I);if(!R||!tn(R))throw Error("Expected leftNode");var G=void 0;0===R.percent?G="left":0===t.percent&&(G="right"),u.push({parentPath:S,leftPath:I,rightPath:l,stacked:o.stacked,rect:k,snapped:G})}}(n,f,p,["tiling",t])});var m={x:p.x-a.left,y:p.y-a.top,width:p.width+a.left+a.right,height:p.height+a.top+a.bottom};return e.floating.forEach(function(e,n){var t=tp(e.rect,{inside:m,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:t.x,y:t.y},o={x:t.x,y:t.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};s.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),l.push.apply(l,(0,ec._)(e.panes.map(function(n,t){return{paneId:n,rect:o,active:t===e.activeIndex}})))}),{tiles:c,gutters:u,headers:s,floating:l}}(t,e(rr)),d=s.tiles,p=s.floating,f=s.gutters,h=s.headers,v=f.map(t9);ro(o,v)||n(t_,v);var m=(0,ec._)(d).concat((0,ec._)(p)).map(function(e){return e.paneId});ro(i,m)||n(tC,(0,tV.Z)(m,{existing:i,getKey:function(e){return e}}));var g=[];h.forEach(function(t){u.delete(t.id);var r=tB(t.id),i=e(r);g.push(t.id),ro(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,tX.Uy)(i,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});ro(i,o)||n(r,o)}),ro(a,g)||n(tk,g),d.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),p.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),f.forEach(function(t){var r={handleId:t9(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=tP(r.handleId);ro(e(i),r)||n(i,r)}),l.forEach(tR.remove),c.forEach(tP.remove),u.forEach(tB.remove);var y=e(tL);y&&l.has(y)&&n(tL,null),n(tj,t)}),rl=t(24268),rc=t(33298),ru=t(30660),rs=t(39460),rd=t(37697),rp={"69c94864-596b-43ba-92af-9cf656dbf0b9":"https://docs.replit.com/getting-started/Quickstarts/webscrape-and-slack-notifications","df8410d2-7440-42e5-9fce-5850beac716f":"https://docs.replit.com/getting-started/Quickstarts/ai-slack-channel-summerizer","a647c8ae-d4af-457e-a07d-9dde04b8fee4":"https://docs.replit.com/getting-started/Quickstarts/google-sheets-integration","77d4a0b3-c936-4f73-b983-8f93bf20af23":"https://docs.replit.com/getting-started/Quickstarts/discord-bot","482b2b7d-6b3e-4b9d-863c-d51c1d5cf6f0":"https://docs.replit.com/getting-started/Quickstarts/nextjs-app","20c2d5c4-fb86-4d7b-abb5-a322d5d584f5":"https://docs.replit.com/getting-started/Quickstarts/flask-app","f3a9fc9b-dee2-4775-8ffb-ac1171880df6":"https://docs.replit.com/getting-started/Quickstarts/fastapi-service","288deef6-6d2b-4864-a916-4d0032a8fc97":"https://docs.replit.com/getting-started/Quickstarts/static-blog-astro"},rf=t(18158),rh=t(92674),rv=t.n(rh);function rm(e){var n,t,r,i,o,a,l,c,u,s,d,p=e.codeEditorPath,f=e.isHTML,h=(r=(n={isStacked:e.isStacked,isHTML:f,isExtension:e.isExtension,isInPopup:e.isInPopup,sourceReplId:e.sourceReplId,codeEditorPath:p}).isStacked,i=n.isHTML,o=n.isExtension,a=n.isInPopup,l=n.sourceReplId,u=void 0===(c=n.codeEditorPath)?"":c,s={codeEditor:{paneId:rv()(),pane:{type:u.toLowerCase().endsWith(".md")?"markdown":"codeEditor",data:{path:u}}},output:{paneId:rv()(),pane:{type:i?"webview":"runnerOutput"}},shell:{paneId:rv()(),pane:{type:"shell"}},commands:{paneId:rv()(),pane:{type:"commands",data:{autoFocus:!1}}},ghostwriter:{paneId:rv()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:rv()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:rv()(),pane:{type:"docs",data:{url:rf.TT.EXTENSIONS}}},docs:{paneId:rv()(),pane:{type:"docs",data:{url:null!==(t=rp[l])&&void 0!==t?t:rf.TT.HOME}}}},d={},Object.values(s).forEach(function(e){var n=e.paneId,t=e.pane;d[n]=t}),{layout:function(e){var n=e.codeEditorId,t=e.outputId,r=e.shellId,i=e.commandsId,o=e.extensionDevtoolsId,a=e.extensionDocsId,l=e.docsId,c=e.isStacked,u=e.isExtension,s=e.isInPopup,d=e.isGuide;if(s)return{floating:[],tiling:null};var p=c?{type:"split",stacked:!0,percent:100,children:[{id:rv()(),percent:60,type:"paneGroup",panes:[n],activeIndex:0},{id:rv()(),percent:40,type:"paneGroup",panes:[t,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:rv()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:rv()(),percent:45,type:"paneGroup",panes:[t,r],activeIndex:0}]};return u&&(p=c?{type:"split",stacked:!0,percent:100,children:[{id:rv()(),percent:40,type:"paneGroup",panes:[n],activeIndex:0},{id:rv()(),percent:60,type:"paneGroup",panes:[o,a,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:rv()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:rv()(),percent:45,type:"paneGroup",panes:[o,a,r],activeIndex:0}]}),d&&(p={type:"split",stacked:!1,percent:100,children:[{id:rv()(),percent:55,type:"paneGroup",panes:[n],activeIndex:0},{id:rv()(),percent:45,type:"paneGroup",panes:[l,i,r],activeIndex:0}]}),{floating:[],tiling:p}}({codeEditorId:s.codeEditor.paneId,outputId:s.output.paneId,shellId:s.shell.paneId,commandsId:s.commands.paneId,extensionDevtoolsId:s.extensionDevtools.paneId,extensionDocsId:s.extensionDocs.paneId,docsId:s.docs.paneId,isStacked:r,isExtension:o,isInPopup:a,isGuide:l in rp}),data:d});return{data:h.data,layout:h.layout,type:"default",sidebarPercent:15}}var rg=(0,nX.cn)(new Map),ry=t(27197),rb=t(85234),rx=t.n(rb),rZ=t(75958),rw=(0,nX.cn)(null),rC=(0,nX.cn)(null,function(e,n,t){rZ.Z.set(rI(t.popupId),Date.now()+6048e5),rZ.Z.set(rS(t.popupId),t.state);var r=!0,i=!1,o=void 0;try{for(var a,l=rZ.Z.keys().filter(function(e){return e.startsWith(rk)})[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=rZ.Z.get(c);if("number"==typeof u&&u<Date.now()){var s=c.split(":")[1];rZ.Z.remove(rI(s)),rZ.Z.remove(rS(s))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}),r_=(0,nX.cn)(function(e){return!!e(rw)}),rk="popup-id-ttl:";function rS(e){return"".concat("popup-id-data:").concat(e)}function rI(e){return"".concat(rk).concat(e)}var rR=t(99165);function rG(){var e=(0,eb._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return rG=function(){return e},e}var rE={},rT=(0,ex.Ps)(rG()),rD=(0,nX.cn)(null),rP=(0,nX.cn)(null,function(e,n,t){if("end"===t.type){n(rD,null);return}if("update"===t.type){var r=e(rD);if(!r){var i=Error("Expected tilingResize");throw n(t4,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var o=r.stacked,a=r.leftPath,l=r.startPercent,c=r.resizeDistance,u=r.initialLayout,s=r.snapPercent,d=l+(o?t.moveDelta.y:t.moveDelta.x)/c*100;n(ra,(0,tX.Uy)(u,function(e){tZ(e,{leftPath:a,percent:d,snapPercent:s})}));return}var p=e(tj),f=t.stacked?window.innerHeight:window.innerWidth,h=ti(p,t.leftPath);if(!h||!tn(h)){var v=Error("Expected left node");throw n(t4,{error:v,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),v}var m=te(t.leftPath),g=h.percent,y=null;try{y=function(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=ti(e,t);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,o=te(t);o.length;){var a=ti(e,o);if(!a)break;o=te(o),"split"===a.type&&a.stacked===r.stacked&&(i=a.percent/100*i)}return i}(n,{splitPath:t}),o=ti(n,t);if((null==o?void 0:o.type)!=="split")throw Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}({splitPath:m,layout:p,tilingOptions:e(rr)})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===y)throw Error("Expected resizeDistance");n(rD,{stacked:t.stacked,leftPath:t.leftPath,startPercent:g,resizeDistance:y,snapPercent:30/f*100,initialLayout:p})});function rB(e){return(0,nO.Z)(function(){return tP(e)},[e])}function rU(e){var n=rB(e);return(0,nO.Z)(function(){return(0,tw.kv)(n,function(e){return e.rect})},[n])}function rA(e){return(0,nO.Z)(function(){return(0,nX.cn)(function(n){var t=n(rD);return!!t&&e===t9({leftPath:t.leftPath})})},[e])}function rO(e){var n=rB(e);return(0,nO.Z)(function(){return(0,tw.kv)(n,function(e){return e.stacked})},[n])}var rX=(0,nX.cn)(null,function(e,n){0!==e(tO).width&&(n(tO,{width:0}),n(ra,e(tj)))}),rL=(0,nX.cn)(null,function(e,n){var t=e(tO).width>0?0:rJ;n(tO,{width:t}),n(ra,e(tj))}),rM=(0,nX.cn)(null),rW=(0,nX.cn)(null,function(e,n){n(rM,{sidebarWidthStart:e(tO).width})}),rz=(0,nX.cn)(null,function(e,n,t){var r=t.deltaX,i=e(rM);if(i){var o=e(tA),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,rY)))<r$&&!(r>0)){if(r$-a<rq)return;a=0}n(tO,{width:a}),n(ra,e(tj))}}),rN=(0,nX.cn)(null,function(e,n){if(e(rM)){var t=e(tO);t.width<r$&&(n(tO,{width:0===t.width?0:r$}),n(ra,e(tj))),n(rM,null)}}),rF=(0,nX.cn)(function(e){return!!e(rM)}),rV=(0,nX.cn)(function(e){return e(rF)?{width:1,height:e(rH).height}:{width:2,height:24}}),rH=(0,nX.cn)(function(e){var n=e(tA).height,t=e(tO),r=e(rt);return{x:t.width,y:0,height:n-r,width:r}}),rj=(0,nX.cn)(function(e){return e(rH).height}),rY=600,rq=80,rK=(0,nX.cn)(function(e){return e(tO).width}),rJ=280,r$=180,rQ=(0,nX.cn)(function(e){return e(rK)>0}),r0=(0,nX.cn)(!1);(r=k||(k={})).MAIN="MAIN",r.CODE_SEARCH="CODE_SEARCH";var r1=(0,nX.cn)("MAIN"),r2=(0,nX.cn)({initialQuery:"",initialReplacement:"",initialIncludeGlob:"",initialExcludeGlob:""}),r4=(0,nX.cn)({focusSearchInput:function(){}}),r8=(0,nX.cn)(function(e){return e(r4)},function(e,n,t){n(r4,{focusSearchInput:t.focusSearchInput})}),r3=(0,nX.cn)(null,function(e,n,t){var r=t.initialQuery,i=void 0===r?"":r,o=t.initialReplacement,a=void 0===o?"":o,l=t.initialIncludeGlob,c=void 0===l?"":l,u=t.initialExcludeGlob,s=void 0===u?"":u,d=e(rQ);(i||a||c||s)&&n(r2,{initialQuery:i,initialReplacement:a,initialIncludeGlob:c,initialExcludeGlob:s}),n(r1,"CODE_SEARCH"),d||(n(r0,!0),n(rL)),e(r8).focusSearchInput()}),r5=(0,nX.cn)(null,function(e,n){var t=e(rQ),r=e(r0);t&&r&&(n(r0,!1),n(rL)),n(r1,"MAIN")}),r6=(0,nX.cn)(function(e){var n,t,r=e(tA);return n=e(rK)/r.width*100,Math.min(Math.max((t={min:0,max:100}).min,n),t.max)}),r7=(0,nX.cn)(function(e){var n=e(tj),t={};return e(tG).forEach(function(n){t[n.paneId]=e(n.data)}),{layout:n,data:t,sidebarPercent:e(r6)}}),r9=(0,nX.cn)(null),ie=(0,nX.cn)(null),it=(0,nX.cn)(null);function ir(){return(ir=(0,ev._)(function(e,n){var t,r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===ry.l||void 0===ry.l?void 0:ry.l.mutate({mutation:rT,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:if((null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})).apply(this,arguments)}var ii=(0,nX.cn)(null,(i=(0,ev._)(function(e,n,t){var r,i,o,a,l,c,u;return(0,em.Jh)(this,function(s){switch(s.label){case 0:if((r=e(ie))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(t2)||(i=e(r7),o=t.replId,a=e(r9),!t.force&&tF()(a,i)))return[2];if(l=e(rw))return n(rC,{popupId:l,state:i}),n(r9,i),[2];return n(it,c=rx()()),[4,function(e,n){return ir.apply(this,arguments)}(o,i)];case 1:if(u=s.sent(),e(it)!==c)return[2];if(n(it,null),u.retry)return n(ie,{timestamp:Date.now(),retry:!0}),[2];if(!u.success)return n(ie,{timestamp:Date.now(),retry:!1}),[2];return n(r9,i),[2]}})}),function(e,n,t){return i.apply(this,arguments)})),io=(0,nX.cn)(null,function(e,n,t){var r=t.data,i=t.layout,o=t.sidebarPercent,a=t.type;Object.entries(r).forEach(function(t){var r=(0,J._)(t,2),i=r[0],o=r[1],a=tR(i);n(a,(0,tX.Uy)(e(a),function(e){e.isCommitted=!0})),n(e(a).data,o)});var l=window.innerWidth,c=Math.floor(o)>0?Math.min(o/100*l,rY):0;n(tO,{width:c>0?Math.max(rJ,c):Math.max(0,c)}),n(ra,i),n(t5,a),n(r9,e(r7))}),ia=(0,nX.cn)(!1),il=(0,nX.cn)(function(e){return e(ia)?e(tL):null}),ic=(0,nX.cn)(null,function(e,n,t){n(tM,t),n(ia,!0)}),iu=(0,nX.cn)(null,function(e,n,t){n(ia,!0);var r=tl(e(tj),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(t4,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(t4,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(tM,o)}),is=(0,nX.cn)(null,function(e,n){e(r_)||n(ia,!1)}),id=(0,nX.cn)(null,function(e,n,t){e(il)===t?n(is):n(ic,t)}),ip=(0,nX.cn)(null,function(e,n,t){var r=tl(e(tj),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(t4,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(t4,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(id,o)}),ih=(0,nX.cn)(function(e){var n=e(tA);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}}),iv=(0,nX.cn)(function(e){var n=e(tU),t=e(ih);return{x:t.x,y:t.y,width:t.width,height:n}}),im=(0,nX.cn)(function(e){var n=e(tU),t=e(ih);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}),ig=(0,nX.cn)(null,function(e,n,t){var r=tl(e(tj),t);if(!r)return null;n(tM,r.panes[r.activeIndex])}),iy=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=e(rg),o=to(r,t);if(!o)throw Error("Expected pane");var a=!o.paneGroup.panes.some(function(e){return e!==t}),l=t===e(tL),c=tu(r,t),u=e(tR(t)),s=e(u.data);if(i.get("flag-maintain-pane-layout")&&a&&u.isCommitted&&"commands"!==s.type){n(u.data,{type:"commands",data:{autoFocus:l}});return}var d=(0,tX.Uy)(r,function(e){try{tg(e,t)}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(n(ra,d),a&&e(ia)&&!e(r_)&&n(ia,!1),l&&(a||n(ig,o.paneGroup.id),a&&c)){do"split"===c.type&&(c=c.children[0]);while("paneGroup"!==c.type);n(ig,c.id)}}),ib=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=to(r,t),o=null==i?void 0:i.paneGroup.panes.filter(function(e){return e!==t});if(null==o?void 0:o.length){var a=(0,tX.Uy)(r,function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;tg(e,c)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(ra,a)}}),ix=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=to(r,t);i&&n(ra,(0,tX.Uy)(r,function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,c=i.paneGroup.panes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;n&&tg(e,u),u===t&&(n=!0)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}))}),iZ=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=tl(r,t.paneGroupId);if(!i){var o=Error("Expected pane group");throw n(t4,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,tX.Uy)(r,function(e){try{i.panes.forEach(function(n){tg(e,n)})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(ia)&&!e(r_)&&n(ia,!1),n(ra,a)}),iw=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=to(r,t.paneId);if(!i){var o=Error("Expected relativeToPane");throw n(t4,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=rx()();n(e(tR(a)).data,{type:"commands",data:{autoFocus:!!t.autoFocus}});var l=(0,tX.Uy)(r,function(e){try{tf(e,{id:rx()(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});n(ra,l),n(tM,a)}),iC=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=rx()();n(e(tR(i)).data,t.pane);var o=(0,tX.Uy)(r,function(e){try{tf(e,{id:rx()(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return n(ra,o),i}),i_=(0,nX.cn)(null,function(e,n,t){var r=e(tj);n(ra,(0,tX.Uy)(r,function(e){tZ(e,{leftPath:t.leftPath,percent:t.percent})}))}),ik=(0,nX.cn)(null,function(e,n,t){if(0===t.panes.length){var r=Error("Expect at least one pane");throw n(t4,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(tj),o=t.panes.map(function(){return rx()()}),a=(0,tX.Uy)(i,function(e){try{tf(e,{id:rx()(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});if(n(ra,a),t.panes.forEach(function(t,r){var i=o[r];n(e(tR(i)).data,t);var a=(0,nF.b)(t.type)?e(tG).find(function(n){return e(n.data).type===t.type&&n.paneId!==i}):null;a&&n(iy,a.paneId)}),t.commit){var l=!0,c=!1,u=void 0;try{for(var s,d=o[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(tW,p)}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}t.makeActive&&n(tM,o[0])}),iS={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},iI=(0,nX.cn)(null,function(e,n,t){n(iC,{pane:t.pane,relativeTo:["tiling"],placement:iS[t.edge]})}),iR=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=rx()(),o=rx()(),a=(0,tX.Uy)(r,function(e){try{tf(e,{id:o,panes:[i],isFloating:!0,rect:t.rect})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return n(ra,a),n(e(tR(i)).data,t.pane),t.makeActive&&(n(tM,i),t.makeModal&&n(es.Rq,o)),i}),iG=(0,nX.cn)(null,function(e,n,t){var r=t.paneId,i=t.activate,o=e(tj);if("tile"===e(tR(r)).type?n(ra,(0,tX.Uy)(o,function(e){try{!function(e,n){var t=to(e,n.paneId);if(t){var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map(function(e,n){return r.slice(0,n+1)}),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=ti(e,s);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==s.length){var p=s[s.length-1];if("number"!=typeof p)throw Error("Expected number");var f=ti(e,te(s));if((null==f?void 0:f.type)!=="split")throw Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var v=p===f.children.length-1,m=v?(0,ec._)(s.slice(0,-1)).concat([p-1]):s,g=v?f.children[p-1].percent-(h-d.percent):h;tZ(e,{leftPath:m,percent:g})}}}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw n(t4,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):n(ra,(0,tX.Uy)(o,function(e){try{!function(e,n){var t=to(e,n.paneId);if(t){var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}}(e,{paneId:r,minWidth:200,minHeight:140})}catch(e){throw n(t4,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),!i){var a=to(o,r),l=e(tL);if(!a)throw Error("Expected pane");if(!l)return;var c=to(o,l);if(!c)throw Error("Expected active pane");if(c.paneGroup.id!==a.paneGroup.id)return}n(tM,r)}),iE=(0,nX.cn)(null,function(e,n,t){if(0===t.panes.length)return[];var r=e(tj),i=t.panes.map(function(){return rx()()}),o=(0,tX.Uy)(r,function(e){try{tv(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return n(ra,o),t.panes.forEach(function(r,o){var a=i[o];n(e(tR(a)).data,r);var l=(0,nF.b)(r.type)?e(tG).find(function(n){return e(n.data).type===r.type&&n.paneId!==a}):null;l&&n(iy,l.paneId),t.commit&&n(tW,a)}),t.activate&&n(iG,{paneId:(0,J._)(i,1)[0],activate:!0}),i}),iT=(0,nX.cn)(null,function(e,n,t){var r=t.pane,i=t.activate,o=t.placement,a=e(tj);if(!a.tiling){var l=n(iC,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(tM,l),l}if("after"===o.type){var c=to(a,o.paneId);if(c){var u=(0,J._)(n(iE,{panes:[r],paneGroupId:c.paneGroup.id,index:c.index+1,activate:i}),1)[0];return i&&n(tM,u),u}}if("secondary"===o.type&&o.relativeTo){var s=tu(a,o.relativeTo);if(s){if("paneGroup"===s.type){var d=(0,J._)(n(iE,{panes:[r],paneGroupId:s.id,activate:i}),1)[0];return i&&n(tM,d),d}var p=n(iC,{pane:r,relativeTo:o.relativeTo,placement:"rightOf"});return i&&n(tM,p),p}var f=to(a,o.relativeTo);if((null==f?void 0:f.paneGroup.type)==="floatingPaneGroup"){var h=e(tR(o.relativeTo)),v=e(h.rectAtom);return n(iR,{rect:{x:v.x+v.width,y:v.y,width:v.width,height:v.height},pane:r,makeActive:i})}}var m=n(iC,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(tM,m),m}),iD=t(57253),iP=(0,nX.cn)(null,function(e,n,t){n(e(tR(t.paneId)).data,t.pane),t.makeActive&&n(iG,{paneId:t.paneId,activate:!0}),t.commit&&n(tW,t.paneId)}),iB=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=to(r,t);if(!i){var o=Error("Expected selectedPane");throw n(t4,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}n(tB(i.paneGroup.id),function(e){return(0,tX.Uy)(e,function(e){e.activeIndex=i.index})});var a=!0,l=!1,c=void 0;try{for(var u,s=i.paneGroup.panes[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,p=tR(d);n(p,function(e){return(0,tX.Uy)(e,function(e){e.isHidden=e.paneId!==t})})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}n(tj,(0,tX.Uy)(r,function(e){try{!function(e,n){var t=to(e,n);if(!(null==t?void 0:t.paneGroup))throw Error("Expected pane group");var r=t.paneGroup,i=r.panes.indexOf(n);if(-1===i)throw Error("Expected index");r.activeIndex=i}(e,t)}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),0===e(e(tR(t)).rectAtom).width?n(iG,{paneId:t,activate:!0}):n(tM,t)}),iU=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=ta(r,"topRight");if(!i||!r.tiling){var o=n(iC,{pane:t,relativeTo:["tiling"],placement:"replace"});n(tW,o);return}if("paneGroup"===r.tiling.type){var a=n(iC,{pane:t,relativeTo:["tiling"],placement:"rightOf"});n(tW,a);return}if("split"===r.tiling.type&&2===r.tiling.children.length&&"paneGroup"===r.tiling.children[1].type){var l=r.tiling.stacked,c=n(iC,{pane:t,relativeTo:i.path,placement:l?"rightOf":"above"});n(tW,c);return}n(iE,{panes:[t],paneGroupId:i.paneGroup.id,commit:!0})}),iA=(0,nX.cn)(null,function(e,n,t){var r=t.pane,i=t.focusIfExists,o=e(tG).find(function(n){return e(n.data).type===r.type});if(o){i&&(n(iB,o.paneId),n(tW,o.paneId));return}n(iU,r)}),iO=(0,nX.cn)(null,function(e,n,t){e(tG).find(function(n){var r,i=e(n.data);return"webview"===i.type&&(r=i&&i.data,!t&&!r||!!t&&!!r&&t.port===r.port&&t.portType===r.portType&&t.path===r.path)})||n(iU,{type:"webview",data:t})}),iX=(0,nX.cn)(null,function(e,n){var t=e(tG).find(function(n){return"threadInbox"===e(n.data).type});if(t){n(iB,t.paneId);return}var r=e(tj),i=ta(r,"bottomRight");if(!i||!r.tiling){n(iC,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"replace"});return}if("paneGroup"===r.tiling.type){n(iC,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"rightOf"});return}n(iE,{panes:[{type:"threadInbox"}],paneGroupId:i.paneGroup.id})}),iL=(0,nX.cn)(null,function(e,n,t){var r=e(tG).find(function(n){return e(n.data).type===t.type});if(r){var i=e(tj),o=(0,tX.Uy)(i,function(e){try{tg(e,r.paneId)}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),e}});n(ra,o)}}),iM=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=(0,tX.Uy)(r,function(e){var r=to(e,t.paneId);if(!r){var i=Error("Expected pane");throw n(t4,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=tl(e,t.toPaneGroupId);if(!o){var a=Error("Expected toPaneGroup");throw n(t4,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{tg(e,t.paneId),tv(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(tW,t.paneId)}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});n(ra,i)}),iW=(0,nX.cn)(null,function(e,n,t){var r=e(tL);if(r){var i=e(tj),o=to(i,r);if(o){var a=o.paneGroup,l=ts({relativeTo:r,rects:new Map(e(tG).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t}),c=l?to(i,l):null;if(c){n(iM,{paneId:r,toPaneGroupId:c.paneGroup.id});return}var u=a.panes.find(function(e){return e!==r});u&&n(ra,(0,tX.Uy)(i,function(e){tg(e,r),tf(e,{id:rx()(),relativeTo:u,panes:[r],placement:t})}))}}}),iz=(0,nX.cn)(!1),iN=(0,nX.cn)(null,function(e,n,t){var r=e(tY).map(function(n){return{paneId:n.paneId,path:(0,nF.DQ)(e(n.data))}}).filter(function(e){return t===e.path}),i=[],o=e(tj),a=(0,tX.Uy)(o,function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value.paneId,s=to(e,u);if(!s){var d=Error("Expected pane");throw n(t4,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}s.floating||1!==s.paneGroup.panes.length?tg(e,u):i.push(u)}}catch(e){o=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}}),l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(iP,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(ra,a)}),iF=(0,nX.cn)(null,function(e,n,t){var r=t.node.path;if(t.eventType===iD.kS.Delete){n(iN,r);return}var i=e(tY).filter(function(n){return(0,nF.DQ)(e(n.data))===r}),o={type:(0,nF.Dp)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value.paneId;n(iP,{paneId:d,pane:o})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}),iV=(0,nX.cn)(null,function(e,n,t){var r=e(tL),i=e(tj);if(r){var o=to(i,r);if(o){n(iE,{panes:t,paneGroupId:null==o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length});return}}var a=ta(i,"topLeft");if(a){n(iE,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});return}var l=i.floating.length?i.floating[0]:null;if(l){n(iE,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t});return}n(ik,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),iH=(0,nX.cn)(null,function(e,n){n(iV,[{type:"commands",data:{autoFocus:!0}}])}),ij=(0,nX.cn)(null,function(e,n){var t=e(tL);return!!t&&(n(iy,t),!0)}),iY=(0,nX.cn)(null,function(e,n,t){var r=e(tL);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=to(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(tj),{paneId:r,dir:t});i&&n(iB,i)}}),iq=(0,nX.cn)(null,function(e,n,t){var r=t.paneId,i=t.pane;n(iP,{paneId:r,pane:i});var o=(0,nF.b)(i.type)?e(tG).find(function(n){return e(n.data).type===i.type&&n.paneId!==r}):null;if(o){var a=to(e(tj),o.paneId);if(!(null==a?void 0:a.floating)&&(null==a?void 0:a.paneGroup.panes.length)===1){n(iP,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}});return}n(iy,o.paneId)}}),iK=(0,nX.cn)(null,function(e,n,t){var r=e(e(tR(t.b)).data);n(iP,{paneId:t.a,pane:r});var i=to(e(tj),t.b);if(!(null==i?void 0:i.floating)&&(null==i?void 0:i.paneGroup.panes.length)===1){n(iq,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}});return}n(iy,t.b)}),iJ=(0,nX.cn)(null,function(e,n,t){var r,i=ta(e(tj),"topRight"),o=null===(r=t.activate)||void 0===r||r,a=e(tG).find(function(n){return e(n.data).type===t.pane.type});if((0,nF.b)(t.pane.type)&&a){n(iB,a.paneId),n(iP,{paneId:a.paneId,pane:t.pane,makeActive:o});return}if(!i){n(ik,{panes:[t.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:o,commit:t.commit});return}var l=i.paneGroup.panes.find(function(n){var t=e(tR(n));if(t.isHidden)return!1;var r=e(t.data);return!t.isCommitted&&!(0,nF.RX)(r.type)});if(l){n(iP,{paneId:l,pane:t.pane,makeActive:o});return}n(iE,{panes:[t.pane],paneGroupId:i.paneGroup.id,activate:o,commit:t.commit})}),i$=(0,et.createContext)(null);function iQ(e){var n=e.children,t=e.savedLayoutState,r=e.isHTML,i=void 0!==r&&r,o=e.isStacked,a=void 0!==o&&o,l=e.isExtension,c=void 0!==l&&l,u=e.sourceReplId,s=e.popupId,d=e.initialPane,p=(0,ei.P5)({controlName:"flag-maintain-pane-layout"}),f=(0,ei.P5)({controlName:"flag-cloud-services-homepage"}),h=(0,J._)((0,et.useState)(function(){var e=(0,nX.MT)(),n=t||rm({isHTML:i,isStacked:a,isExtension:c,sourceReplId:f&&u||"",isInPopup:!!s});return s&&(e.set(rw,s),e.set(ia,!0),n=(0,ny._)((0,ey._)({},n),{sidebarPercent:0})),e.set(io,n),e.set(rg,new Map([["flag-maintain-pane-layout",p]])),d&&e.set(iJ,{pane:d,commit:!0}),e}),1)[0];return(0,$.tZ)(i$.Provider,{value:h,children:n})}function i0(){var e=(0,et.useContext)(i$);if(!e)throw Error("Expected store in context");return e}function i1(e){return(0,rs.Dv)(e,{store:i0()})}function i2(e){return(0,ru.b)(e,i0())}var i4=function(e){return(0,rs.b9)(e,{store:i0()})};function i8(e){return(0,rd.lV)((0,et.useCallback)(function(n){return n(e)},[e]),{store:i0()})}var i3=t(93100),i5=(0,nX.cn)(null),i6=(0,rc.$)(["backgroundColor","borderRadius","zIndex","border","opacity","visiblity","width","height","x","y","innerScale","innerOpacity"]),i7=i6.cssVars,i9=i6.styleTokens,oe=(0,tw.kv)(i5,function(e){return(0,el._)({},i7.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(ea.TV.foregroundDefault):"1px solid ".concat(ea.TV.accentPrimaryDefault))},tF()),on=(0,tw.kv)(i5,function(e){return null==e?void 0:e.rect},tF()),ot=(0,tw.kv)(on,function(e){var n;return e?(n={},(0,el._)(n,i7.width,e.width+"px"),(0,el._)(n,i7.height,e.height+"px"),n):null},tF()),or=(0,tw.kv)(on,function(e){var n;return e?(n={},(0,el._)(n,i7.x,e.x+"px"),(0,el._)(n,i7.y,e.y+"px"),n):null},tF()),oi=(0,tw.kv)(i5,function(e){var n,t;return e?"detachPreview"===e.type?(n={},(0,el._)(n,i7.zIndex,i3.M.detachPreview.toString()),(0,el._)(n,i7.borderRadius,"100%"),(0,el._)(n,i7.backgroundColor,"transparent"),n):(t={},(0,el._)(t,i7.zIndex,i3.M.dropPreview.toString()),(0,el._)(t,i7.borderRadius,"8px"),(0,el._)(t,i7.backgroundColor,ea.TV.accentPrimaryDimmer),t):null},tF()),oo=(0,tw.kv)(i5,function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,el._)(t,i7.opacity,(.5*e.progress).toString()),(0,el._)(t,i7.visiblity,"visible"),t):(r={},(0,el._)(r,i7.opacity,"0.2"),(0,el._)(r,i7.visiblity,"visible"),r):(n={},(0,el._)(n,i7.opacity,"0"),(0,el._)(n,i7.visiblity,"hidden"),n)},tF()),oa=(0,tw.kv)(i5,function(e){return(0,el._)({},i7.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},tF()),ol=(0,tw.kv)(i5,function(e){return(0,el._)({},i7.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},tF()),oc=(0,eO.X)({root:[{position:"absolute",pointerEvents:"none",opacity:i9.opacity,width:i9.width,height:i9.height,transform:"translate(".concat(i9.x,", ").concat(i9.y,")"),backgroundColor:i9.backgroundColor,borderRadius:i9.borderRadius,border:i9.border,zIndex:i9.zIndex,visibility:i9.visiblity,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(ea.TV.backgroundHighest,")"),opacity:i9.innerOpacity,transform:"scale(".concat(i9.innerScale,")")}]}),ou=(0,et.memo)(function(){var e=(0,et.useRef)(null);(0,rl.j)(e,i2(or)),(0,rl.j)(e,i2(ot)),(0,rl.j)(e,i2(oe)),(0,rl.j)(e,i2(oi)),(0,rl.j)(e,i2(oo));var n=(0,et.useRef)(null);return(0,rl.j)(n,i2(oa)),(0,rl.j)(n,i2(ol)),(0,$.tZ)("div",{ref:e,css:oc.root,children:(0,$.tZ)("div",{ref:n,css:oc.inner})})}),os=(0,nX.cn)(null,function(e,n){n(i5,{type:"dropPreview",rect:e(op)})}),od=(0,nX.cn)(null,function(e,n,t){n(i5,null),n(iz,!1),n(ik,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),op=(0,nX.cn)(function(e){if(e(r_))return e(ih);var n=e(tA),t=n.width,r=n.height,i=e(tO),o=e(rt);return{x:Math.round(i.width+o),y:0,width:t-i.width-2*o,height:r-o}}),of={width:100,height:200},oh={width:200,height:100},ov=function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=n.width-t,o=n.width-oh.width/2-i/2,a=(n.height-r)/2-of.height/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:oh.width,height:oh.height}},below:{visible:!1,rect:{x:o,y:n.height-oh.height-r,width:oh.width,height:oh.height}},leftOf:{visible:!1,rect:{x:t+r,y:a,width:of.width,height:of.height}},rightOf:{visible:!1,rect:{x:n.width-of.width-r,y:a,width:of.width,height:of.height}}}},om=["above","rightOf","leftOf","below","middle"],og=(0,nX.cn)(null),oy=(0,nX.cn)(function(e){var n=e(og);if(!n)return null;var t=tl(e(tj),n.paneGroupId);return t&&t.panes[t.activeIndex]||null});(0,nX.cn)(function(e){var n=e(tA),t=e(tU),r=e(rK),i=e(rt);return{x:n.x+r+i,y:n.y-t-i,width:n.width-r-2*i,height:n.height-i}});var ob=(0,tw.kv)(og,function(e){return null==e?void 0:e.dropPoints}),ox=(0,nX.cn)(null,function(e,n,t){if(!e(ia)){var r=e(tA),i=tl(e(tj),t.paneGroupId);if(!i){var o=Error("Expected paneGroup");throw n(t4,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(tR(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(tU),u={x:l.x,y:l.y-c,width:l.width,height:l.height+c},s=t.mouse.x-(r.x+l.x),d=e(rt);n(og,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:u,movedAtAll:!1,dropPoints:"floating"===a.type?ov({container:r,sidebarWidth:e(rK),gap:d}):null})}}),oZ=(0,nX.cn)(null,function(e,n,t){if(!e(ia)){var r=e(og);if(!r){n(i5,null);return}var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(tj),c=tl(e(tj),o);if(!c){var u=Error("Expected paneGroup");throw n(t4,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var s=c.panes[c.activeIndex],d=to(l,s);if(!d){var p=Error("Expected pane");throw n(t4,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),p}var f=tR(s),h=tB(d.paneGroup.id),v=e(tU),m=Math.max(Math.abs(i.x),Math.abs(i.y)),g=m>=50,y=m>0;if(g&&!d.floating){var b=e(f).rectAtom,x=e(b),Z=(0,tX.Uy)(l,function(e){try{tb(e,{paneGroupPath:d.paneGroupPath,rect:{x:x.x+i.x,y:x.y-v+i.y,width:x.width,height:x.height+v}})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});n(ra,Z),n(oC,t.mouse);return}var w=e(h),C=e(f);c.id===e(es.Rq)&&n(es.Rq,null);var _="floating"===r.startType?tp({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(tA),minVisibleX:2*v,minVisibleY:v}):{x:a.x+i.x,y:a.y+i.y},k=_.x,S=_.y;if(n(w.rectAtom,function(e){return(0,tX.Uy)(e,function(e){e.x=k,e.y=S})}),n(C.rectAtom,function(e){return(0,tX.Uy)(e,function(e){e.x=k,e.y=S+v})}),!g&&!d.floating){var I=r.startPoint,R=1-.7*(1-Math.sqrt(1-Math.pow(m/50,2)));n(i5,{type:"detachPreview",rect:{x:I.x-50,y:I.y-50,width:100,height:100},progress:m/50}),n(og,(0,tX.Uy)(r,function(e){e.scale=R,e.movedAtAll=e.movedAtAll||y}));return}var G=e(rt);if(r.dropPoints){n(og,function(n){return(0,tX.Uy)(n,function(n){(null==n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidth,o=n.headerHeight,a=n.paneRects,l=n.mouse,c={x:l.x-t.x,y:l.y-t.y},u=null,s=null;if(a.length){var d=!0,p=!1,f=void 0;try{for(var h,v=a[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=(0,J._)(h.value,2),g=m[0],y=m[1],b={x:y.x-r/2,y:y.y-r/2-o,width:y.width+r,height:y.height+r+o};if(t6(l,b)){u=g,s=y;break}}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}if(e.middle.visible=!!s,s){var x={width:Math.min(100,s.width),height:Math.min(100,s.height)};e.middle.paneId=u,e.middle.rect={x:s.x+s.width/2-x.width/2,y:s.y-o+(s.height+o)/2-x.height/2-r,width:x.width,height:x.height+o/2}}}else{var Z={x:t.x+i+r,y:t.y,width:t.width-r-i,height:t.height},w={width:Math.min(100,Z.width),height:Math.min(100,Z.height)};e.middle.rect={x:Z.x+Z.width/2-w.width/2,y:Z.height/2-w.height/2,width:w.width,height:w.height},e.middle.visible=!0}var C=null,_=!0,k=!1,S=void 0;try{for(var I,R=om[Symbol.iterator]();!(_=(I=R.next()).done);_=!0){var G=I.value,E=e[G].rect;if(t6(c,E)){C=G;break}}}catch(e){k=!0,S=e}finally{try{_||null==R.return||R.return()}finally{if(k)throw S}}var T=!0,D=!1,P=void 0;try{for(var B,U=om[Symbol.iterator]();!(T=(B=U.next()).done);T=!0){var A=B.value;e[A].visible=!C||A===C}}catch(e){D=!0,P=e}finally{try{T||null==U.return||U.return()}finally{if(D)throw P}}}(n.dropPoints,{paneRects:e(ow),container:e(tA),sidebarWidth:e(rK),headerHeight:e(tU),gap:G,mouse:t.mouse})})});return}if(!d.floating)throw Error("Expected floating pane");n(oC,t.mouse)}}),ow=(0,nX.cn)(function(e){return e(tG).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})}),oC=(0,nX.cn)(null,function(e,n,t){var r=e(tU),i=e(tA),o=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidth,a=e.gap,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,u=!1,s=void 0;try{for(var d,p=n[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,J._)(d.value,2),h=f[0],v=f[1],m={x:v.x,y:v.y-i,width:v.width,height:i},g={x:m.x-a/2,y:m.y-a/2,width:m.width+a,height:i+a/2};if(t6(l,g))return{dropPreview:m,drop:{type:"insert",paneId:h}};var y={x:v.x,y:v.y-i,width:v.width,height:v.height+i},b={x:y.x-a/2,y:y.y-a/2,width:y.width+a,height:y.height+a};if(t6(l,b)){var x=t7(l,y);return{dropPreview:x.rect,drop:{type:"split",relativeTo:h,placement:x.placement}}}}}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}var Z=t7(l,{x:o,y:0,width:r.width-o,height:r.height});return{dropPreview:Z.rect,drop:{type:"split",relativeTo:["tiling"],placement:Z.placement}}}({views:e(ow),container:i,mouse:t,headerHeight:r,sidebarWidth:e(rK),gap:e(rt)}),a=o.drop;n(i5,{type:"dropPreview",rect:o.dropPreview}),n(og,function(e){return(0,tX.Uy)(e,function(e){e&&(e.drop=a,e.movedAtAll=!0)})})}),o_=(0,nX.cn)(null,function(e,n,t){var r=t.delta;if(!e(ia)){n(i5,null);var i=e(og);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(tj),u=tl(e(tj),o);if(!u){var s=Error("Expected paneGroup");throw n(t4,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=u.panes[u.activeIndex],p=to(c,d);if(!p){var f=Error("Expected pane");throw n(t4,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,tX.Uy)(c,function(t){if(!a&&p.floating&&"floating"===i.startType){var o=ti(t,p.paneGroupPath);if((null==o?void 0:o.type)!=="floatingPaneGroup")return;var c=e(tU),u=tp({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(tA),minVisibleX:2*c,minVisibleY:c}),s=u.x,f=u.y;o.rect.x=s,o.rect.y=f;return}if(a){if(p.paneGroup.panes.forEach(function(e){n(tW,e)}),"split"===a.type){if(null===t.tiling){var h=rx()();try{tf(t,{id:rx()(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=to(e,t);if(!o)throw Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;ty(e,o.paneGroupPath),tf(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var v=to(t,a.paneId);p.paneGroup.panes.forEach(function(e){tx(t,{paneId:e,paneGroupPath:(null==v?void 0:v.paneGroupPath)||["tiling"],activate:!1})})}});n(og,null),n(ra,h),(null==a?void 0:a.type)==="insert"&&n(iB,d)}}});function ok(e){return(0,nO.Z)(function(){return(0,nX.cn)(function(n){var t=n(og);return t&&e===t.paneGroupId?t:null})},[e])}function oS(e){return(0,nO.Z)(function(){return(0,tw.kv)(tj,function(n){return tl(n,e)})},[e])}function oI(e){var n=oS(e);return(0,nO.Z)(function(){return(0,nX.cn)(function(e){if(e(r_))return!0;if(!e(ia))return!1;var t=e(n);if(!t)return!1;var r=e(tL);return!!r&&t.panes.includes(r)})},[n])}function oR(e){var n=tB(e);return(0,nO.Z)(function(){return(0,tw.kv)(n,function(e){return"floating"===e.path[0]})},[n])}var oG=t(36559),oE=t(47857);function oT(){var e=(0,eb._)(["\n  query FiletypeAssociations {\n    currentUser {\n      id\n      filetypeAssociations\n    }\n  }\n"]);return oT=function(){return e},e}function oD(){var e=(0,eb._)(["\n  mutation SetFiletypeAssociation($input: FiletypeAssociationInput!) {\n    setFiletypeAssociation(input: $input) {\n      ... on UserFiletypeAssociations {\n        associations\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return oD=function(){return e},e}var oP={},oB=(0,ex.Ps)(oT()),oU=(0,ex.Ps)(oD()),oA=(0,nX.cn)({}),oO=(0,nX.cn)(null),oX=(0,nX.cn)(null,(o=(0,ev._)(function(e,n,t){var r,i,o,a,l,c;return(0,em.Jh)(this,function(u){switch(u.label){case 0:r=e(oA),n(oA,(0,tX.Uy)(r,function(e){if(!t.newAssociation){delete e[t.fileExtension];return}e[t.fileExtension]={extensionId:t.newAssociation.extensionId,fileHandlerId:t.newAssociation.fileHandlerId}})),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,null===ry.l||void 0===ry.l?void 0:ry.l.mutate({mutation:oU,variables:{input:t}})];case 2:if((null==(a=u.sent())?void 0:null===(o=a.data)||void 0===o?void 0:null===(i=o.setFiletypeAssociation)||void 0===i?void 0:i.__typename)!=="UserFiletypeAssociations")throw Error("Failed to set Filetype Association: "+(null==a?void 0:null===(c=a.data)||void 0===c?void 0:null===(l=c.setFiletypeAssociation)||void 0===l?void 0:l.message));return[3,4];case 3:return u.sent(),n(oA,r),[3,4];case 4:return[2]}})}),function(e,n,t){return o.apply(this,arguments)})),oL=(0,nX.cn)(null,function(e,n,t){var r,i=t.path,o=e(tj),a=(0,ey._)({},t);if(!a.opener){var l=e(oA),c=(0,oE.mD)(i);if(c){var u=l[c];if(u){var s=e(t$).find(function(e){return e.extension.extensionId===u.extensionId});s&&(a.opener={paneType:"extension",extensionFileHandler:s,supports:function(){return!0}})}}}if(a.newPane){n(iI,{pane:oM(a),edge:null!==(r=a.newPaneEdge)&&void 0!==r?r:"left"});return}var d=ta(o,"topLeft");if(!d){n(iC,{pane:oM(a),relativeTo:["tiling"],placement:"replace"});return}var p=e(tG).find(function(n){var t,r=e(n.data);return(0,nF.Ur)(r)?i===(0,nF.DQ)(r):!!((null===(t=a.opener)||void 0===t?void 0:t.paneType)==="extension"&&(0,nF.WQ)(r))&&r.data.filePath===i&&a.opener.extensionFileHandler.extension.installationId===r.data.installationId||"markdown"===r.type&&i===r.data.path});if(p&&!a.newTab){var f=e(p.data);if((0,nF.Ur)(f)||"markdown"===f.type){n(iB,p.paneId),n(iP,{paneId:p.paneId,pane:oM((0,ey._)({opener:{paneType:f.type}},a))});return}if((0,nF.WQ)(f)){n(iB,p.paneId);return}}var h=d.paneGroup;if(a.newTab){n(iE,{panes:[oM(a)],paneGroupId:h.id,activate:!0,commit:!0,index:h.activeIndex+1});return}var v=e(tG).find(function(n){return!n.isCommitted&&((0,nF.Ur)(e(n.data))||"markdown"===e(n.data).type)});if(v){n(iP,{paneId:v.paneId,pane:oM(a)}),n(iB,v.paneId);return}var m=e(tY).find(function(n){var t=e(n.data);return"codeEditor"===t.type&&""===(0,nF.DQ)(t)});if(m){n(iP,{paneId:m.paneId,pane:oM(a)}),n(iB,m.paneId);return}var g=h.panes.find(function(n){var t=e(tR(n));return"commands"===e(t.data).type});if(g){n(iP,{paneId:g,pane:oM(a)}),n(iB,g);return}n(iE,{panes:[oM(a)],paneGroupId:h.id,activate:!0})});function oM(e){var n=e.path,t=e.col,r=e.line,i=e.opener;if(!(null==i?void 0:i.paneType)&&(0,oG.gK)(n.toLowerCase()))return{type:"markdown",data:{path:n}};var o=(null==i?void 0:i.paneType)||(0,nF.Dp)({path:n});if("codeEditor"===o)return{type:"codeEditor",data:{path:n,col:t,line:r}};if("extension"===o){var a=i.extensionFileHandler;return{type:"extension",data:{filePath:n,extensionId:a.extension.extensionId,installationId:a.extension.installationId,name:a.extension.manifest.name,baseUrl:a.extension.baseUrl,path:a.handler}}}return"markdown"===o?{type:"markdown",data:{path:n}}:{type:o,data:{path:n}}}var oW=(0,nX.cn)(null,function(e,n,t){var r,i=t.paths.map(function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,nF.Dp)({path:r}),data:{path:r,line:i,col:o}}}).filter(Boolean),o=i.length-1,a=e(tL);i.forEach((r=(0,ev._)(function(e,t){return(0,em.Jh)(this,function(r){return n(iT,{pane:e,activate:o===t,placement:{type:"secondary",relativeTo:a}}),[2]})}),function(e,n){return r.apply(this,arguments)}))}),oz=(0,nX.cn)(null,function(e,n,t){var r=t.urls.map(function(e){var n;try{n=new URL(e)}catch(e){return!1}return"0.0.0.0"===n.hostname||"localhost"===n.hostname?{portType:"local",path:n.pathname,port:parseInt(n.port,10)}:(window.open(e,"_blank"),!1)}).filter(Boolean);if(0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;n(iO,u)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}});(0,nX.cn)({x:0,y:0,width:0,height:0});var oN=(0,nX.cn)(null,function(e,n,t){if(!e(ia)){var r=e(tA),i=t.pageX,o=t.pageY,a=e(tR(t.over)),l=n7({x:i-r.x,y:o-r.y},e(a.rectAtom)).previewRect;n(iz,!0),n(i5,{type:"dropPreview",rect:l})}}),oF=(0,nX.cn)(null,function(e,n,t){if(!e(ia)){var r=e(tA),i=t.pageX,o=t.pageY,a=t.over,l=e(tR(a)),c=n7({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(i5,null),n(iz,!1);var u=e(tj);if("newPaneGroup"===t.type){if("middle"===c){var s=to(u,l.paneId);if(!s)return;n(iE,{panes:t.panes,paneGroupId:s.paneGroup.id,activate:!0,index:s.index+1});return}n(ik,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId});return}var d=a;if("middle"===c){if(d===t.paneId)return;var p=to(u,l.paneId);if(!p)return;n(iM,{paneId:t.paneId,toPaneGroupId:p.paneGroup.id,index:p.index+1});return}if(d===t.paneId){var f=to(u,t.paneId);if(!f){var h=Error("Expected pane");throw n(t4,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),h}if(f.floating)throw Error("Expected paneGroup");var v=f.paneGroup.panes.find(function(e){return e!==t.paneId});if(!v)return;d=v}var m=(0,tX.Uy)(u,function(e){try{tg(e,t.paneId),tf(e,{id:rx()(),panes:[t.paneId],relativeTo:d,placement:c}),n(tW,t.paneId)}catch(e){throw n(t4,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});n(ra,m)}});function oV(e){var n=(0,nO.Z)(function(){return(0,nX.cn)(function(n){return!!n(r_)||!!n(ia)&&n(tL)===e})},[e]);return(0,nO.Z)(function(){return(0,nX.cn)(function(t){if(t(n))return t(im);var r=t(tR(e));return t(r.rectAtom)})},[e,n])}function oH(e){return(0,nO.Z)(function(){return(0,nX.cn)(function(n){var t=n(og);return t&&e===n(oy)?t:null})},[e])}function oj(e){return(0,nO.Z)(function(){return(0,nX.cn)(function(n){return n(tL)===e})},[e])}function oY(e){return(0,nO.Z)(function(){return(0,nX.cn)(function(n){return n(n(tR(e)).data)})},[e])}function oq(e){return(0,nO.Z)(function(){return(0,tw.kv)(tR(e),function(e){return"floating"===e.type})},[e])}var oK=(0,nX.cn)(null),oJ=(0,nX.cn)(function(e){var n=e(oK);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=to(e(tj),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(n){var t=e(tR(n));return[t.paneId,e(t.data)]})}}),o$=(0,nX.cn)(function(e){var n=e(oJ);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}),oQ=(0,nX.cn)(function(e){var n=e(oK);if(!n||"sidebar"===n.target)return null;if(e(il)===n.paneId)return e(im);var t=e(tR(n.paneId)),r=e(t.rectAtom),i=e(tU);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),o0=(0,nX.cn)(null,function(e,n,t){var r=e(tL),i=null!=t?t:r;if(i){n(oK,{target:"pane",paneId:i}),i!==r&&n(tM,i);return}var o=ta(e(tj),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;if(a){n(oK,{target:"pane",paneId:a});return}}),o1=(0,nX.cn)(null,function(e,n){var t=e(oK);t&&(n(oK,null),"sidebar"!==t.target&&n(iG,{paneId:t.paneId,activate:!0}))}),o2=(0,nX.cn)(null,function(e,n){if(e(oJ)){n(o1);return}var t=e(tL);if(t){n(o0,t);return}var r=ta(e(tj),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i){n(o0,i);return}}),o4=(0,nX.cn)(function(e){return null!==e(oK)}),o8=(0,nX.cn)(null,function(e,n){n(oK,null)}),o3=(0,nX.cn)(null,function(e,n,t){var r=e(tL);if(!(!r||e(il))){var i=ts({relativeTo:r,rects:new Map(e(tG).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t});i&&(n(tL,i),e(oK)&&n(oK,{target:"pane",paneId:i}))}}),o5=(0,nX.cn)(null,function(e,n,t){var r=e(oJ);null!==r&&"sidebar"!==r.target&&n(ra,(0,tX.Uy)(e(tj),function(e){!function(e,n){var t=n.paneGroupId,r=n.direction,i=tl(e,t),o=tc(e,t);if((null==i?void 0:i.type)==="paneGroup"&&o){var a=o.node.children.indexOf(i);if(-1===a)throw Error("Expected index");var l=(0,ec._)(o.path).concat([a]),c="down"===r||"right"===r,u=0===a,s=a===o.node.children.length-1,d=o.node.stacked===("up"===r||"down"===r),p=o.path.length>2;if(d&&!((s&&c||u&&!c)&&p)){!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===t&&i){e.pop(),e.unshift(n);return}if("back"===t&&0===r){e.shift(),e.push(n);return}var o="forward"===t?1:-1;e[r]=e[r+o],e[r+o]=n}}(o.node.children,i,c?"forward":"back");return}var f=(g=tc(e,i.id))?function e(n,t){var r=t.path,i=t.forwards,o=t.vertical,a=ti(n,r);if((null==a?void 0:a.type)!=="split")return null;var l=te(r);if(0===l.length)return null;var c=ti(n,l);if((null==c?void 0:c.type)!=="split")return null;if(c.stacked!==o)return e(n,{path:l,forwards:i,vertical:o});var u=c.children.indexOf(a),s=0===u;if(!(u===c.children.length-1&&i||s&&!i)){var d=u+(i?1:-1),p=c.children[d],f=c.children[u];return p?{other:f,node:p,parent:c,path:(0,ec._)(l).concat([d])}:null}if(1===l.length){var h=s&&!i?c.children.length-1:0;return{parent:c,other:c.children[u],path:(0,ec._)(l).concat([h]),node:c.children[h]}}return e(n,{path:l,forwards:i,vertical:o})}(e,{path:g.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(f){var h=l.slice(0,f.path.length+("paneGroup"===f.node.type?2:1));!function(e){if("tiling"!==e[0])throw Error("Expected tiling path")}(h);var v=ti(e,h);if(!v||"floatingPaneGroup"===v.type)throw Error("Expected adjacentNode");if("split"!==f.other.type)throw Error("Expected split");var m=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value.percent;r+=u}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(f.other.children,v);if("paneGroup"===f.node.type){var g,y,b,x=(y={start:0,end:100},b=!f.parent.stacked,m.start-y.start<y.end-m.end?b?"above":"rightOf":b?"below":"leftOf");ty(e,(0,ec._)(o.path).concat([a])),tf(e,{placement:x,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:f.path});return}var Z=function(e,n){var t=e.children,r=e.stacked,i="above",o=0,a=0,l=0,c=0,u=!0,s=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value,v={start:l,end:l+h.percent},m=Math.max(0,Math.min(n.end,v.end)-Math.max(n.start,v.start));m>c&&(c=m,o=a,i=n.start-v.start<v.end-n.end?r?"above":"rightOf":r?"below":"leftOf"),l+=h.percent,a++}}catch(e){s=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw d}}return{placement:i,index:o}}(f.node,m),w=Z.index,C=Z.placement;ty(e,(0,ec._)(o.path).concat([a])),tf(e,{placement:C,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,ec._)(f.path).concat([w])})}}}(e,{paneGroupId:r.paneGroupId,direction:t.direction})}))}),o6=(0,nX.cn)(null,function(e,n,t){n(io,rm({isHTML:t.isHTML,isStacked:t.isStacked,isExtension:t.isExtension,isInPopup:t.isInPopup,sourceReplId:t.sourceReplId,codeEditorPath:t.entrypoint})),n(ii,{replId:t.replId,force:!0})});(0,nX.cn)(null,function(e,n,t){n(io,t)});var o7={width:120,height:120},o9=(0,nX.cn)(null),ae=(0,nX.cn)(null,function(e,n,t){var r=e(tj);if("end"===t.type){n(o9,null),n(ra,r);return}if("update"===t.type){var i=e(o9);if(!i){var o=Error("Expected floatingResizeState");throw n(t4,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}var a=e(tU),l=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?n9:i,a=(0,ey._)({},e),l=o.height,c=o.width;if("top"===t||"topLeft"===t||"topRight"===t){var u=e.height-r.y;a.height=Math.max(u,l),u<l?a.y=e.y+e.height-l:a.y=e.y+r.y}else if("bottom"===t||"bottomLeft"===t||"bottomRight"===t){var s=e.height+r.y;a.height=Math.max(s,l)}if("right"===t||"bottomRight"===t||"topRight"===t){var d=e.width+r.x;a.width=Math.max(d,c)}else if("left"===t||"bottomLeft"===t||"topLeft"===t){var p=e.width-r.x;a.width=Math.max(p,c),p<c?a.x=e.x+e.width-c:a.x=e.x+r.x}return a}(i.rectStart,{delta:t.moveDelta,edge:i.edge,minSize:o7}),c=i.paneId,u=(0,tX.Uy)(r,function(e){var t=e.floating.find(function(e){return e.panes.includes(c)});if(!t){var r=Error("Expected floating");throw n(t4,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=l.x,i.y=l.y-a,i.width=l.width,i.height=l.height+a});n(ra,u);return}var s=e(tG).find(function(e){return e.paneId===t.paneId});if(!s){var d=Error("Expected pane");throw n(t4,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}n(tM,t.paneId),n(o9,{paneId:t.paneId,edge:t.edge,rectStart:e(s.rectAtom)})}),an=(0,nX.cn)(null,function(e,n,t){var r=e(tj),i=e(tR(t)),o=i.rectAtom,a=i.type,l=e(o),c=to(r,t);if(!c){var u=Error("Expected pane");throw n(t4,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"===a){n(ra,(0,tX.Uy)(r,function(e){tb(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})}));return}c.paneGroup.id===e(es.Rq)&&n(es.Rq,null);var s=e(tG).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(tU),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find(function(n){var t=e(n.rectAtom);return t6(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})});if(!f){n(ra,(0,tX.Uy)(r,function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=ti(e,t);if((null==o?void 0:o.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(ty(e,t),null===i){e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex};return}tf(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r})}(e,{paneGroupPath:c.paneGroupPath,to:["tiling"],placement:"leftOf"})}));return}n(ra,(0,tX.Uy)(r,function(e){var n=to(e,f.paneId);c.paneGroup.panes.forEach(function(t){tx(e,{paneId:t,paneGroupPath:(null==n?void 0:n.paneGroupPath)||["tiling"],activate:!1})})})),n(iB,c.paneGroup.panes[c.paneGroup.activeIndex])}),at=1920/1020,ar=(0,nX.cn)(null,function(e,n,t){var r,i,o,a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=e(tG).find(function(n){return e(n.data).type===t.type});if(c){n(iP,{paneId:c.paneId,pane:t}),l.commit&&n(tW,c.paneId);return}var u=n(iR,{pane:t,rect:(r=e(tA),i=e(tU),{width:o=Math.min(600,r.width),height:a=Math.min(600/at+i,r.height),x:r.width-o,y:r.height-a})});l.commit&&n(tW,u)}),ai=(0,nX.cn)(null,function(e,n,t){e(tG).filter(function(n){return e(n.data).type===t}).forEach(function(e){return n(iy,e.paneId)})}),ao=(0,nX.cn)(null),aa=(0,nX.cn)(function(e){var n=e(ao);return n&&e(tG).find(function(t){var r=e(t.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null==n?void 0:n.embedUrl)})||null}),al=(0,nX.cn)(function(e){var n=e(aa);return n&&!n.isHidden?n:null}),ac=(0,nX.cn)(null,function(e,n,t){n(ao,t);var r="videoPlayer";if(!t){n(ai,r);return}n(ar,{type:r,data:{title:"Tutorial",embedUrl:t.embedUrl}},{commit:!0})}),au=(0,nX.cn)(null,function(e,n){var t=e(aa);if(null==t?void 0:t.isHidden){n(iB,t.paneId),n(tW,t.paneId);return}var r=e(ao);r&&n(ac,r)}),as=(0,nX.cn)(function(e){return e(tG).find(function(n){return"tutorial"===e(n.data).type})||null}),ad=(0,nX.cn)(null,function(e,n){var t=e(as);if(null==t?void 0:t.isHidden){n(iB,t.paneId);return}n(ik,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1,commit:!0}),n(rX)}),ap=(0,nX.cn)(function(e){return!!(e(og)||e(o9)||e(rD)||e(iz)||e(rF))}),af=(0,nX.cn)(function(e){if(e(o4)||e(nM))return null;var n=e(tL);if(!n)return null;var t=e(tR(n)),r=e(t.data),i=t.paneId+r.type;return(0,nF.Ur)(r)&&(i+=r.data.path),i}),ah=(0,nX.cn)(null,function(e,n,t){var r,i,o,a;n(iR,{pane:t,rect:(i=(r=e(tA)).x+r.width,o=r.y+r.height,{width:a=Math.min(800,.8*i),height:.8*o,x:i/2-a/2-r.x,y:16}),makeActive:!0,makeModal:!0})}),av=(0,nX.cn)(null,function(e,n){var t=e(es.Rq);if(t){var r=tl(e(tj),t);r&&r.panes.forEach(function(e){n(iy,e)})}}),am=t(93279),ag=t(36851),ay=t(21362),ab=t(78081),ax=t(94118),aZ=(0,nX.cn)(null,function(e,n,t){if(null===t){n(i5,null),n(og,function(e){return e?(0,tX.Uy)(e,function(e){e.drop=null}):e});return}n(og,function(e){return e?(0,tX.Uy)(e,function(e){!function(e,n){if("edge"===n.type||"emptyLayout"===n.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"};return}var t=n.paneId;if("middle"===n.position){e.drop={type:"insert",paneId:t};return}e.drop={type:"split",relativeTo:t,placement:n.position}}(e,t)}):e});var r=e(tA),i=e(tU),o=e(rK),a=e(rt);if("pane"===t.type){var l=e(tR(t.paneId)),c=e(l.rectAtom);n(i5,{type:"dropPreview",rect:{x:c.x,y:c.y-i,width:c.width,height:c.height+i}});return}if("emptyLayout"===t.type){n(i5,{type:"dropPreview",rect:function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,c=o.width,u=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:c/2,height:u};case"rightOf":return{x:a+c/2,y:l,width:c/2,height:u};case"above":return{x:a,y:l,width:c,height:u/2};case"below":return{x:a,y:l+u/2,width:c,height:u/2}}}({container:r,sidebarWidth:o,location:t.position,gap:a})});return}n(i5,{type:"dropPreview",rect:function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(tj).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a})})}),aw=(0,rc.$)(["opacity","width","height","transform","pointerEvents"]),aC=aw.cssVars,a_=aw.styleTokens,ak=(0,eO.X)({dropPoint:[ea.l0.center,ea.l0.top(0),ea.l0.left(0),ea.l0.position.absolute,{zIndex:i3.M.overlay,cursor:"grabbing",width:a_.width,height:a_.height,transform:a_.transform,opacity:"var(".concat(aC.opacity,", 0)"),pointerEvents:a_.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:ea.TV.accentPrimaryStronger}}]}),aS={above:(0,$.tZ)(ab.Z,{}),below:(0,$.tZ)(am.Z,{}),leftOf:(0,$.tZ)(ag.Z,{}),rightOf:(0,$.tZ)(ay.Z,{}),middle:(0,$.tZ)(ax.Z,{})};function aI(e){var n=(0,et.useRef)(null),t=(0,et.useMemo)(function(){return(0,tw.kv)(ob,function(n){return null==n?void 0:n[e]})},[e]),r=(0,et.useMemo)(function(){return(0,tw.kv)(t,function(e){return e?(0,el._)({},aC.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},tF())},[t]);(0,rl.j)(n,i2(r));var i=(0,et.useMemo)(function(){return(0,tw.kv)(t,function(e){var n;return e?(n={},(0,el._)(n,aC.width,e.rect.width+"px"),(0,el._)(n,aC.height,e.rect.height+"px"),n):null},tF())},[t]);(0,rl.j)(n,i2(i));var o=(0,et.useMemo)(function(){return(0,tw.kv)(t,function(e){var n;return n={},(0,el._)(n,aC.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,el._)(n,aC.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),n},tF())},[t]);return(0,rl.j)(n,i2(o)),n}function aR(){var e=aI("middle"),n=i4(aZ),t=i8((0,et.useMemo)(function(){return(0,tw.kv)(ob,function(e){var n;return null!==(n=null==e?void 0:e.middle.paneId)&&void 0!==n?n:null})},[]));return(0,$.tZ)(eo.G,{css:ak.dropPoint,innerRef:e,onMouseEnter:function(){var e=t(),r="middle";n(e?{type:"pane",position:r,paneId:e}:{type:"emptyLayout",position:r})},onMouseLeave:function(){return n(null)},children:(0,$.tZ)(ax.Z,{size:32})})}function aG(e){var n=e.position,t=aI(n),r=i4(aZ);return(0,$.tZ)(eo.G,{css:ak.dropPoint,innerRef:t,onMouseEnter:function(){return r({type:"edge",position:n})},onMouseLeave:function(){return r(null)},children:(0,et.cloneElement)(aS[n],{size:32})})}var aE=(0,et.memo)(function(){return(0,$.BX)($.HY,{children:[(0,$.tZ)(aG,{position:"above"}),(0,$.tZ)(aG,{position:"below"}),(0,$.tZ)(aG,{position:"leftOf"}),(0,$.tZ)(aG,{position:"rightOf"}),(0,$.tZ)(aR,{})]})});function aT(e){return i1((0,nO.Z)(function(){return(0,nX.cn)(function(n){var t=n(tR(e));return n(t.data)})},[e]))}function aD(){var e=i4(tM),n=i4(tW);return(0,nO.Z)(function(){return function(t,r){(null==r?void 0:r.commit)&&n(t),e(t)}},[n,e])}function aP(e){var n=e.paneId;return i1((0,nO.Z)(function(){return(0,nX.cn)(function(e){return e(tL)===n})},[n]))}function aB(){return i4(iJ)}var aU=(0,nX.cn)(null,function(e,n){n(iz,!1)});function aA(e){var n=e.paneGroupId,t=i4(ox),r=i4(oZ),i=i4(o_),o=(0,nO.Z)(function(){return{start:function(e){t({paneGroupId:n,mouse:e.mouse})},update:function(e){r(e)},end:function(e){i(e)}}},[n,t,r,i]);return{isDragging:i1((0,nO.Z)(function(){return(0,nX.cn)(function(e){var t;return n===(null===(t=e(og))||void 0===t?void 0:t.paneGroupId)})},[n])),dnd:o}}function aO(){return i4(oL)}function aX(){return{maximizePane:i4(ic),maximizePaneGroup:i4(iu),restoreMaximizedPaneGroup:i4(is),toggleMaximizePane:i4(id),toggleMaximizedPaneGroup:i4(ip)}}function aL(e){var n,t,r=(n=tB(e),{activeIndexAtom:(0,nO.Z)(function(){return(0,nX.cn)(function(e){return e(n).activeIndex})},[n]),pathAtom:(0,nO.Z)(function(){return(0,tw.kv)(n,function(e){return e.path},tF())},[n]),panesAtom:(0,nO.Z)(function(){return(0,tw.kv)(n,function(e){return e.panes},tF())},[n]),activeFileAtom:(0,nO.Z)(function(){return(0,nX.cn)(function(e){var t=e(n),r=e(tR(t.panes[t.activeIndex])),i=e(r.data);return(0,nF.Ur)(i)?(0,nF.DQ)(i):null})},[n])}),i=r.activeIndexAtom,o=r.pathAtom,a=r.panesAtom;return{activeIndex:i2(i),path:i2(o),panes:i2(a),activeTabPaneId:i2((t=tB(e),(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(t);return e(tR(n.panes[n.activeIndex])).paneId})},[t])))}}function aM(e){var n,t,r,i,o,a,l,c,u,s,d,p=re(oV(e)),f=(t=rn(oV(e)),n=oH(e),r=(0,nO.Z)(function(){return(0,tw.kv)(n,function(e){var n;return null!==(n=null==e?void 0:e.scale)&&void 0!==n?n:1})},[n]),(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(t);return{x:n.x,y:n.y,scale:e(r)}})},[t,r])),h=(i=oH(e),(0,nO.Z)(function(){return(0,tw.kv)(i,function(e){var n;return null!==(n=null==e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"})},[i])),v=(o=oV(e),(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(o),t=e(tA);return{x:Math.round(t.x+n.x),y:Math.round(t.y+n.y)}})},[o])),m=(0,nO.Z)(function(){return(0,tw.kv)(tR(e),function(e){return e.isHidden})},[e]),g=(0,nO.Z)(function(){return(0,nX.cn)(function(n){var t=n(tR(e)),r=e===n(tL);return n(il)===e?i3.M.maximizedPane:e===n(oy)?i3.M.draggingPane:"floating"===t.type?r?i3.M.floatingPaneActive:i3.M.floatingPane:r?i3.M.tiledPaneActive:i3.M.tiledPane})},[e]),y=(0,nO.Z)(function(){return(0,nX.cn)(function(n){return!!n(og)&&n(oy)!==e&&"floating"!==n(tR(e)).type})},[e]),b=(a=oY(e),(0,nO.Z)(function(){return(0,tw.kv)(a,function(e){return e.type})},[a])),x=oq(e),Z=(0,nO.Z)(function(){return(0,nX.cn)(function(n){var t,r=null===(t=to(n(tj),e))||void 0===t?void 0:t.paneGroup;return!!r&&r.id===n(es.Rq)})},[e]),w=oj(e),C=(0,nO.Z)(function(){return(0,nX.cn)(function(n){return n(tL)===e})},[e]),_=(0,nO.Z)(function(){return(0,tw.kv)(tR(e),function(e){return e.isCommitted})},[e]),k=oY(e),S=(l=oq(e),c=oj(e),u=oH(e),(0,nO.Z)(function(){return(0,nX.cn)(function(e){return!e(ia)&&!!(e(l)||e(c)||e(u))})},[l,c,u])),I=(s=oH(e),(0,nO.Z)(function(){return(0,tw.kv)(s,Boolean)},[s])),R=(d=oH(e),(0,nO.Z)(function(){return(0,tw.kv)(d,function(e){var n;return null!==(n=null==e?void 0:e.movedAtAll)&&void 0!==n&&n})},[d]));return{size:i2(p),transform:i2(f),paneType:i2(b),transformOriginXAtom:i2(h),viewportInset:i2(v),zIndex:i2(g),disableInteractions:i2(ap),animate:i2(y),data:i2(k),isFloating:i2(x),isModal:i2(Z),isActive:i2(w),isActivePane:i2(C),isCommitted:i2(_),isHidden:i2(m),isBeingDragged:i2(I),hasMovedWhileDragging:i2(R),headerHeight:i2(tU),hasBorder:i2(S)}}function aW(e){var n,t,r,i,o,a,l,c,u,s=(t=oI(e),(0,nO.Z)(function(){return(0,nX.cn)(function(n){if(n(t))return n(iv);var r=n(tB(e));return n(r.rectAtom)})},[t,e])),d=re(s),p=rn(s),f=(r=ok(e),(0,nO.Z)(function(){return(0,tw.kv)(r,function(e){var n;return null!==(n=null==e?void 0:e.scale)&&void 0!==n?n:1})},[r])),h=(i=ok(e),(0,nO.Z)(function(){return(0,tw.kv)(i,function(e){var n;return null!==(n=null==e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"})},[i])),v=(o=ok(e),a=oI(e),l=oR(e),n=oS(e),c=(0,nO.Z)(function(){return(0,nX.cn)(function(e){var t=e(tL);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)})},[n]),(0,nO.Z)(function(){return(0,nX.cn)(function(e){return e(a)?i3.M.maximizedHeader:e(o)?i3.M.draggingHeader:e(l)?e(c)?i3.M.floatingHeaderActive:i3.M.floatingHeader:i3.M.tiledHeader})},[o,a,l,c])),m=(u=oR(e),(0,nO.Z)(function(){return(0,nX.cn)(function(n){var t=n(og);return!(!t||t.paneGroupId===e||n(u))})},[e,u])),g=oI(e),y=oR(e),b=(0,nO.Z)(function(){return(0,nX.cn)(function(n){return n(es.Rq)===e})},[e]);return{size:i2(d),position:i2(p),scale:i2(f),transformOriginX:i2(h),zIndex:i2(v),animate:i2(m),isMaximized:i2(g),isFloating:i2(y),isModal:i2(b)}}(0,nX.cn)(function(e){return!!e(rD)||e(rF)});var az=(0,nX.cn)(!1),aN=(0,nX.cn)(0);function aF(){return{width:i2(rK),isOpen:i2(rQ),toggle:i4(rL),content:i2(r1),openCodeSearch:i4(r3),closeCodeSearch:i4(r5),codeSearchData:i2(r2),setCodeSearchBindings:i4(r8)}}var aV=t(42701),aH=t(16923),aj=t(29252),aY=t(72883),aq=t(5357),aK=t(39944),aJ=t(93801),a$=t(60626),aQ=t(70191),a0=t(4683),a1=[{padding:(0,aK.fP)(8)}],a2=(0,eO.X)({root:[a1,ea.l0.align.center,ea.l0.flex.row,{gap:(0,aK.fP)(8),"&:hover .icon":{backgroundColor:"var(".concat(nx.dj.interactiveBackground,")")}}],iconSurface:[{padding:(0,aK.fP)(8),borderRadius:(0,aK.fP)(8)},ea.l0.position.relative],titleWithAlias:[ea.l0.rowWithGap(8)],aliasContainer:[ea.l0.rowWithGap(4),ea.l0.color.foregroundDimmest,ea.l0.align.center]}),a4=(0,eO.X)({root:[ea.l0.position.relative,(0,aK.D$)(16),{width:(0,aK.fP)(16),height:(0,aK.fP)(16)}]});function a8(e){var n=e.pane,t=e.active,r=e.highlight,i=(0,nF.Se)(),o=i.Icon({pane:n}),a=i.getTitle(n),l=(0,e2.b2)({paneType:n.type});return(0,$.BX)(eo.G,{css:a2.root,children:[(0,$.BX)(eo.G,{style:{position:"relative"},children:[(0,$.tZ)(eo.G,{css:a4.root,style:{opacity:e.active?1:.7},children:o}),l?(0,$.tZ)(aQ.B,{color:l}):null]}),e.alias?(0,$.BX)(eo.G,{css:a2.titleWithAlias,children:[(0,$.tZ)(eA.xv,{children:a}),(0,$.BX)(eo.G,{css:a2.aliasContainer,children:["(",e.aliasPrefix?(0,$.BX)(eA.xv,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,$.tZ)(aJ.x,{dimmed:!0,text:e.alias,highlight:r}),")"]})]}):(0,$.tZ)(aJ.x,{dimmed:!t,text:a,highlight:r})]})}var a3=t(44167),a5=t(56400),a6=t(70016),a7=t(52399),a9=t(74524),le=t(90493);function ln(e){var n=(0,nF.Se)(),t=(0,ei.P5)({controlName:"flag-command-bar-improvements"});return(0,nO.Z)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,$.tZ)(le.Z,{}),key:"codeSearch"},commands:function(r){var i=r.search;if(!i)return[];var o={type:"searchReplace",data:{initialQuery:i}};return[{match:t?(0,nH.r0)({defaultScore:a9.L.codeSearch,matchScoreMultiplier:a9.r.codeSearch,filterLowMatchScores:!1}):(0,nH.zf)({defaultScore:.5,matchScoreMultiplier:.5}),data:{type:"action",label:n.getTitle(o),icon:n.Icon({pane:o}),run:function(){e({pane:o})}}}]}}},[n,e,t])}var lt=t(48412),lr=t(72164);function li(e){var n,t=(0,nF.Se)(),r=(0,J._)((0,lt.Ni)(),1)[0],i=(0,lt.bD)({onSession:function(n){e({pane:{type:"ghostwriterChat",data:{sessionId:n}}})}}),o=i.sendMessage,a=i.setSessionId,l=(0,et.useCallback)((n=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return(0,eh.j)(eh.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:r,user_model_selection:r,message_content:e,message_source:"ask_ai_command_bar"}),[4,o({kind:"message",message:e,intent:lt.$h.EXPLAIN,model:"advanced"===r?lt.BY.ADVANCED:lt.BY.BASIC})];case 1:return n.sent(),a(null),[2]}})}),function(e){return n.apply(this,arguments)}),[r,o,a]),c=(0,ei.P5)({controlName:"flag-command-bar-improvements"});return(0,nO.Z)(function(){return{data:{type:"context",label:"AI",icon:(0,$.tZ)(lr.Z,{}),key:"askAi"},commands:function(e){var n=e.search;return n?[{match:c?(0,nH.r0)({defaultScore:a9.L.askAi,matchScoreMultiplier:a9.r.askAi,filterLowMatchScores:!1}):nH.pl,data:{type:"action",label:"Ask AI: ".concat(n),icon:t.Icon({pane:{type:"ghostwriterChat"}}),run:function(){l(n)}}}]:[]}}},[t,l,c])}function lo(e){var n=(0,es.AA)(),t=(0,es.lv)();return(0,et.useCallback)(function(){var r=t(),i=n().filter(function(e){return!r.includes(e)});return{data:{type:"context",label:"Recently opened",icon:(0,$.tZ)(nV.Z,{})},commands:function(n){var t=n.search;return(0,nj.w)({paths:i,search:t,run:function(n){e({path:n})}})}}},[n,t,e])}function la(e){var n,t=e.currentPaneId,r=e.type,i=(0,nF.Se)(),o=i4(iK),a=i4(iB),l=(0,es.nC)(),c=(0,a6.dr)(),u=(0,ei.P5)({controlName:"flag-command-bar-improvements"}),s=t?"Move existing tab here":"Jump to existing tab";return(0,et.useCallback)((n=(0,ev._)(function(e){var n,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k,S,I,R,G,E,T,D,P,B,U;return(0,em.Jh)(this,function(A){switch(A.label){case 0:if(n=e.search,d=l(),!(p=t?d.filter(function(e){return(0,J._)(e,1)[0]!==t}):d).length||!n)return[2,[]];f=new Map,h=[],v=!0,m=!1,g=void 0;try{for(y=p[Symbol.iterator]();!(v=(b=y.next()).done);v=!0)(x=(0,J._)(b.value,2))[0],Z=x[1],(0,nF.Ur)(Z)&&Z.data.path&&h.push(Z.data.path)}catch(e){m=!0,g=e}finally{try{v||null==y.return||y.return()}finally{if(m)throw g}}return[4,(0,aq.Rz)(n,h)];case 1:w=A.sent(),C=!0,_=!1,k=void 0;try{for(S=w[Symbol.iterator]();!(C=(I=S.next()).done);C=!0)R=I.value,f.set(R.path,{score:R.score,ranges:R.ranges})}catch(e){_=!0,k=e}finally{try{C||null==S.return||S.return()}finally{if(_)throw k}}G=[],E=!0,T=!1,D=void 0;try{for(P=function(){var e=(0,J._)(U.value,2),n=e[0],l=e[1],d=!(0,nF.Ur)(l)&&"markdown"!==l.type;if("tools"===r&&!d||"files"===r&&d)return"continue";var p=(0,nF.Ur)(l)?l.data.path:null,h=p?f.get(p):null,v=u?nH.aZ:nH.pl;if("deployments"===l.type){var m=c(n);if((null==m?void 0:m.type)==="deployments"){var g=m.getTabs();if(g)return G.push({match:v,data:{type:"context",label:i.getTitle(l),icon:(0,$.tZ)(i.Icon,{pane:l})},commands:function(){return g.map(function(e){return{match:v,data:{key:n+e.id,type:"action",label:e.label,icon:(0,$.tZ)(e.Icon,{size:16}),run:function(){a(n),m.setTab(e.id)}}}})}}),"continue"}}var y=p&&h?function(){return{score:h.score,render:(0,aq.xy)({path:p,ranges:h.ranges,description:u||!t?s:void 0})}}:v;G.push({match:y,data:{key:n,type:"action",label:i.getTitle(l),icon:i.Icon({pane:l}),run:function(){return t?o({a:t,b:n}):a(n)},description:u||!t?s:void 0}})},B=p[Symbol.iterator]();!(E=(U=B.next()).done);E=!0)P()}catch(e){T=!0,D=e}finally{try{E||null==B.return||B.return()}finally{if(T)throw D}}return[2,G]}})}),function(e){return n.apply(this,arguments)}),[t,l,i,a,o,c,s,u,r])}function ll(e){var n=(0,nF.Se)(),t=(0,a5.BV)(),r=(0,es.nC)(),i=(0,ei.P5)({controlName:"flag-command-bar-improvements"});return(0,et.useCallback)(function(){var o=r().map(function(e){var n=(0,J._)(e,2);return(n[0],n[1]).type}),a=[],l=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",["Chat",{alias:"Ghostwriter",prefix:"previously"}]],["shell",["Terminal"]],["objectStorage",["Blobject Storage","Blob Cloud"]]]),c=!0,u=!1,s=void 0;try{for(var d,p=t[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)!function(){var t,r,c,u,s,p=d.value;!((0,nF.b)(p.type)&&o.includes(p.type))&&a.push({match:(r=(t={pane:p,aliases:l.get(p.type),hasFlagCommandBarImprovements:i}).pane,c=t.aliases,u=void 0===c?[]:c,s=t.hasFlagCommandBarImprovements,function(e){var n=e.search,t=e.data,i=e.active;if("group"===t.type)return null;if(!n)return{score:1,render:{content:(0,$.tZ)(a8,{pane:r})}};var o=s?(0,a0.jy)(n,t.label,{filterLowMatchScores:!0}):a$.Z.match(n,t.label);if(o)return{score:o.score,render:{content:(0,$.tZ)(a8,{pane:r,highlight:o.ranges,active:i})}};var a=!0,l=!1,c=void 0;try{for(var d,p=u[Symbol.iterator]();!(a=(d=p.next()).done);a=!0){var f=d.value,h="string"==typeof f?{alias:f,prefix:void 0}:f,v=h.alias,m=h.prefix,g=s?(0,a0.jy)(n,v,{filterLowMatchScores:!0}):a$.Z.match(n,v,{filterLowMatchScores:!0});if(g)return{score:g.score,render:{content:(0,$.tZ)(a8,{pane:r,active:i,alias:v,aliasPrefix:m,highlight:g.ranges})}}}}catch(e){l=!0,c=e}finally{try{a||null==p.return||p.return()}finally{if(l)throw c}}return null}),data:{key:"extension"===p.type?"extension-".concat(p.data.installationId,"-").concat(p.data.path):void 0,type:"action",label:n.getTitle(p),icon:n.Icon({pane:p}),run:function(){e({pane:p})}}})}()}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}return a},[t,e,r,n,i])}function lc(e){var n=e.currentPaneId,t=e.openPane,r=(0,eu.Z)(),i=r.fs,o=r.container,a=ll(t),l=la({currentPaneId:n}),c=la({currentPaneId:n,type:"tools"}),u=la({currentPaneId:n,type:"files"}),s=(0,ei.P5)({controlName:"flag-command-bar-improvements"}),d=(0,et.useCallback)(function(e){var n=e.path;t({pane:{type:(0,nF.Dp)({path:n}),data:{path:n}}})},[t]),p=lo(d),f=(0,es.AA)(),h=(0,a3.T)(),v=ln(t),m=li(t),g=(0,ei.P5)({controlName:"flag-remove-command-bar-file-contents-search"});return(0,nO.Z)(function(){var e,t,r,y,b,x=(0,nj.i)({openFile:d,fs:i,shouldHideFile:h,getRecentFiles:f,getCurrentlyOpenFilePanesCommands:s?u:void 0,hasFlagCommandBarImprovements:s}),Z=(0,nY.F)({container:o,openFile:d,activeOnly:g,hasFlagCommandBarImprovements:s}),w={data:{type:"context",label:"Search",icon:(0,$.tZ)(le.Z,{}),key:aV.Lf},commands:function(){return[x,Z]}},C={data:{type:"context",label:n?aV.Ss:aV.MH,icon:(0,$.tZ)(aY.Z,{})},commands:(e=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,l({search:e.search})];case 1:return[2,ec._.apply(void 0,[n.sent()])]}})}),function(n){return e.apply(this,arguments)})},_={data:{type:"context",label:aV.cE,icon:(0,$.tZ)(aY.Z,{})},commands:(t=(0,ev._)(function(e){var n,t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(n=e.search,!s)return[3,2];return[4,c({search:n})];case 1:return t=r.sent(),[3,3];case 2:t=[],r.label=3;case 3:return[2,ec._.apply(void 0,[t]).concat((0,ec._)(a()))]}})}),function(e){return t.apply(this,arguments)})},k=(y=(r={fs:i,openFile:d,hasFlagCommandBarImprovements:s}).openFile,b=r.fs,{match:r.hasFlagCommandBarImprovements?nH.aZ:nH.pl,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,$.tZ)(aj.Z,{})},commands:function(e){var n=e.search,t=e.active;return n&&t?[{match:nH.pl,data:{type:"action",description:"Create a new file",label:n,icon:(0,$.tZ)(aH.Z,{path:n}),run:function(){return(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,b.stat(n)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(n,'" already exists')}];return[4,b.writeFile(n,a7.Z.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+n+'"'}];return y({path:n}),[2]}})})()}}}]:[]}});return{data:{type:"group",key:"root",description:"Ask AI, search for files & open tools"},commands:function(){return[k,_,v,m].concat((0,ec._)(s?[x,Z]:[w]),(0,ec._)(s?[]:[C]),(0,ec._)(s?[]:[p()]))}}},[o,i,f,a,l,n,c,u,h,p,s,d,v,m,g])}var lu=t(53773),ls="Ask AI & search";function ld(){var e=(0,rs.b9)(nW),n=i4(av),t=(0,rs.Dv)(nM);return(0,et.useCallback)(function(r){t||n(),e(r)},[n,t,e])}var lp={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,nA.l2)({cmdOrCtrl:!0,key:"k"})};function lf(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,rs.b9)(nN);(0,et.useEffect)(function(){if(n)return t(function(n){return(0,ec._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var lh=(0,eO.X)({surface:[ea.l0.maxHeight("70vh"),ea.l0.borderRadius(8)]}),lv=(0,et.memo)(function(){var e,n,t,r,i,o,a,l,c,u=(0,rs.Dv)(nM),s=ld(),d=(e=aB(),n=i4(ah),t=(0,ei.P5)({controlName:"flag-modal-panes"}),r=ll((0,et.useCallback)(function(r){if((0,eh.j)(eh.U3.TOOL_OPENED,{source:"Command Bar",tool:r.pane.type}),t){n(r.pane);return}e(r)},[e,n,t])),i=la({type:"tools"}),o=(0,nU.gf)("toggleGlobalCommandBarCommand"),a=(0,nO.Z)(function(){return{type:"context",icon:(0,$.tZ)(lu.Z,{}),label:"",description:ls,keyboardShortcut:o}},[o]),l=(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n,t=e(nN),o={data:{type:"context",label:aV.cE,icon:(0,$.tZ)(aY.Z,{})},commands:(n=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,i({search:e.search})];case 1:return[2,ec._.apply(void 0,[n.sent()]).concat((0,ec._)(r()))]}})}),function(e){return n.apply(this,arguments)})};return{data:a,commands:function(){return(0,ec._)(t).concat([o])}}})},[r,a,i]),c=(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(l),t=e(nz);return t?[n,t]:n})},[l]),(0,rs.Dv)(c)),p=(0,nU.gf)(lp.id);return(0,$.tZ)(e$.u,{hideCloseButton:!0,isOpen:u,onRequestClose:s,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,$.tZ)(e0.Tg,{css:lh.surface,children:(0,$.tZ)(nB.X,{keyboardShortcut:p,onAction:function(){return s()},command:d,autoFocus:!0})})})}),lm=t(13621),lg=t(80292),ly=t(85777),lb=t(8362),lx=t(59947),lZ=t(38868),lw=t(69170),lC=t(74004);function l_(){var e=(0,eb._)(["\n  mutation ReplEnvironmentHeaderSubmitRepl($replId: String!) {\n    submitRepl(replId: $replId) {\n      ... on Repl {\n        id\n        workspaceCta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return l_=function(){return e},e}function lk(){var e=(0,eb._)(["\n  query ReplEnvironmentHeaderSubmitReplDueDate($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        template {\n          id\n          dueDate\n        }\n      }\n    }\n  }\n"]);return lk=function(){return e},e}var lS={},lI=(0,ex.Ps)(l_()),lR=(0,ex.Ps)(lk());function lG(e){var n,t,r,i=e.replId,o=e.onDone,a=e.isResubmit,l=e.lastUpdated,c=e.openIOtesterPane,u=(0,eu.Z)().iotester,s=(0,lC.CH)({variables:{replId:i}}),d=u.lastRunAt.getTime()>l,p=(n=(0,ey._)({},lS,{variables:{replId:i}}),ew.a(lR,n)).data,f=(null==p?void 0:p.repl.__typename)==="Repl"?p.repl:null,h=(null==f?void 0:f.template)||null,v=(null==h?void 0:h.dueDate)||null,m=new Date().toISOString(),g=(0,lw.Z)(),y=g.showConfirm,b=g.showError,x=(0,J._)((t=(0,ey._)({},lS,{variables:{replId:i},onCompleted:function(e){var n=e.submitRepl;if("UserError"===n.__typename){b(n.message);return}"Repl"===n.__typename&&(y("Repl submitted"),o())},onError:function(e){b(e.message)}}),rR.D(lI,t)),2),Z=x[0],w=x[1],C=d&&u.lastRunDidPass;return(null===(r=s.data)||void 0===r?void 0:r.repl.__typename)==="Repl"&&s.data.repl.ioTests.length>0&&!C?(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24)],children:[(0,$.tZ)(eA.h4,{variant:"headerDefault",level:2,children:d?"Fix test failures before submitting":"Run tests before submitting"}),(0,$.tZ)(eA.xv,{children:d?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.justify.end],children:[(0,$.tZ)(nf.zx,{disabled:w.loading,colorway:"primary",onClick:function(){c(),o()},text:"View tests"}),(0,$.tZ)(nf.zx,{disabled:w.loading,onClick:function(){return Z()},iconLeft:(0,$.tZ)(lx.Z,{}),text:"Submit anyway"})]})]}):(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24)],children:[(0,$.tZ)(eA.h4,{variant:"headerDefault",level:2,children:a?" Resubmit Repl":"Submit Repl"}),(0,$.tZ)(eA.xv,{children:a?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),v&&v<m?(0,$.tZ)(eA.xv,{css:[ea.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}):null,(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.justify.end],children:[(0,$.tZ)(nf.zx,{disabled:w.loading,onClick:o,text:"Cancel"}),(0,$.tZ)(nf.zx,{colorway:"primary",disabled:w.loading,onClick:function(){return Z()},iconLeft:(0,$.tZ)(lx.Z,{}),text:a?"Submit again":"Submit"})]})]})}var lE=t(54228),lT=t(32622),lD=t(71089),lP=t(72370),lB=t(18458);function lU(){var e=(0,eb._)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return lU=function(){return e},e}function lA(){var e=(0,eb._)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return lA=function(){return e},e}var lO={},lX=(0,ex.Ps)(lU(),lB.vs),lL=(0,ex.Ps)(lA(),lB.vs),lM=function(e){var n,t,r,i,o,a,l,c,u,s,d,p=e.replId,f=e.onDone,h=(0,lw.Z)(),v=h.showConfirm,m=h.showError,g=(n=(0,ey._)({},lO,{variables:{replId:p},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(t=r.origin)||void 0===t?void 0:null===(n=t.template)||void 0===n?void 0:n.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(k(r.origin.template.modelSolution.visibleAfterSubmitting),R(r.origin.template.modelSolution.visibleAfterPassingTests),T(r.origin.template.modelSolution.visibleAfterDueDate))}}),ew.a(lX,n)),y=g.data,b=g.loading,x=(0,J._)((t=(0,ey._)({},lO,{onError:function(e){return m(e.message)},onCompleted:function(){v("Updated solution"),f()}}),rR.D(lL,t)),2),Z=x[0],w=x[1],C=(0,J._)((0,et.useState)(!1),2),_=C[0],k=C[1],S=(0,J._)((0,et.useState)(!1),2),I=S[0],R=S[1],G=(0,J._)((0,et.useState)(!1),2),E=G[0],T=G[1],D=(0,J._)((0,et.useState)(),2),P=D[0],B=D[1],U=(0,lP.U)();if((0,et.useEffect)(function(){var e="Students can ";if(_||E||I){e+="view the solution after";var n=[];_&&n.push("submitting their project"),I&&n.push("passing all tests"),E&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";B(e)},[_,I,E]),b)return(0,$.tZ)(eo.G,{css:[ea.l0.center],children:(0,$.tZ)(eX.Z,{})});var A=(null==y?void 0:y.repl.__typename)==="Repl"&&(null===(r=y.repl.owner)||void 0===r?void 0:r.__typename)==="Team"&&(null===(i=y.repl.owner)||void 0===i?void 0:i.id),O=(null==y?void 0:y.repl.__typename)==="Repl"&&(null===(a=y.repl.origin)||void 0===a?void 0:null===(o=a.template)||void 0===o?void 0:o.modelSolution);if(!O)return null;var X=O.id,L=(null==y?void 0:y.repl.__typename)==="Repl"&&((null===(l=y.repl.origin)||void 0===l?void 0:l.ioTests.length)||(null===(u=y.repl.origin)||void 0===u?void 0:null===(c=u.unitTests)||void 0===c?void 0:c.tests.length)),M=(null==y?void 0:y.repl.__typename)==="Repl"&&(null===(d=y.repl.origin)||void 0===d?void 0:null===(s=d.template)||void 0===s?void 0:s.dueDate);return(0,$.tZ)("form",{onSubmit:function(e){e.preventDefault(),A&&X&&Z({variables:{input:{teamId:A,solutionId:X,visibleAfterSubmitting:_,visibleAfterPassingTests:I,visibleAfterDueDate:E}}})},children:(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24)],children:[(0,$.tZ)(eA.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(lD.X,{id:U("availableAfterSubmitting"),checked:_,onChange:function(){return k(!_)}}),(0,$.tZ)("label",{htmlFor:U("availableAfterSubmitting"),children:(0,$.tZ)(eA.xv,{multiline:!1,children:"Available after submitting"})})]}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(lD.X,{id:U("availableAfterPassingTests"),checked:I,onChange:function(){return R(!I)}}),(0,$.tZ)("label",{htmlFor:U("availableAfterPassingTests"),children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4)],children:[(0,$.tZ)(eA.xv,{multiline:!1,children:"Available after passing tests"}),(0,$.BX)(eA.xv,{multiline:!1,children:["(",L?"".concat(L," ").concat((0,lT.Z)("test",L)," defined"):"no tests exist yet",")"]})]})})]}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,$.tZ)(lD.X,{id:U("availableAfterDueDate"),checked:E,onChange:function(){return T(!E)}}),(0,$.tZ)("label",{htmlFor:U("availableAfterDueDate"),children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4)],children:[(0,$.tZ)(eA.xv,{multiline:!1,children:"Available after due date"}),(0,$.BX)(eA.xv,{css:{textDecoration:"italic"},multiline:!1,children:["(",M?(0,lE.p)(M):"no due date set yet",")"]})]})})]})]}),(0,$.tZ)(eU.E,{text:"".concat(P),colorway:_||I||E?"positive":"negative"}),(0,$.tZ)(eo.G,{css:{alignItems:"end"},children:(0,$.tZ)(nf.zx,{type:"submit",stretch:!1,colorway:"primary",text:"".concat(w.loading?"Saving...":"Save"),iconLeft:(0,$.tZ)(lx.Z,{}),disabled:w.loading})})]})})},lW=(S={},(0,el._)(S,e4.Sy.PublishTemplate,"Publish project"),(0,el._)(S,e4.Sy.EditTemplate,"Edit project"),(0,el._)(S,e4.Sy.Submit,"Submit"),(0,el._)(S,e4.Sy.Resubmit,"Resubmit"),(0,el._)(S,e4.Sy.UpdateModelSolution,"Update solution"),S);function lz(e){var n=e.cta,t=e.replId,r=e.isGroupProject,i=e.openIOtesterPane,o=(0,J._)((0,et.useState)(null),2),a=o[0],l=o[1],c=function(){return l(null)},u=(0,e2.R3)(),s=(0,eu.Z)().fs,d=(0,J._)((0,et.useState)(0),2),p=d[0],f=d[1];(0,et.useEffect)(function(){if(!(!u||(0,oG.T3)(u)||(0,oG.sL)(u)))return s.watchTextFile(u,{onChange:function(e){e.changeSource===iD.Fl.Local&&f(Date.now())}})},[u,s,f]);var h=!!(a&&[e4.Sy.PublishTemplate,e4.Sy.EditTemplate].includes(a));return(0,et.useEffect)(function(){n===e4.Sy.ReviewSubmission&&(rZ.Z.get("annotations/educationModalDismissed")||(l(n),rZ.Z.set("annotations/educationModalDismissed",!0)))},[n]),(0,$.BX)($.HY,{children:[lW[n]&&(0,$.tZ)(nf.zx,{onClick:function(){return l(n)},text:lW[n],iconLeft:(0,$.tZ)(lx.Z,{})}),(0,$.tZ)(e$.u,{isOpen:a===e4.Sy.Submit||a===e4.Sy.Resubmit,onRequestClose:c,maxWidth:512,children:(0,$.tZ)(lG,{replId:t,onDone:c,isResubmit:a===e4.Sy.Resubmit,lastUpdated:p,openIOtesterPane:i})}),(0,$.tZ)(e$.u,{preventClose:!0,isOpen:h,onRequestClose:c,maxWidth:r?900:550,children:(0,$.tZ)(lZ.Z,{replId:t,onDone:c})}),(0,$.tZ)(e$.u,{isOpen:a===e4.Sy.UpdateModelSolution,onRequestClose:c,maxWidth:600,children:(0,$.tZ)(lM,{replId:t,onDone:c})})]})}var lN=t(57369),lF=t(98924),lV=t(91793),lH=t(27382),lj=t(63685),lY=t(38172),lq=t(55810),lK=t(18323),lJ=t(88654),l$=t(68637),lQ=t(53928),l0=t(43449),l1=t(42182),l2=t(92698),l4=t(8103);function l8(){var e=(0,eb._)(["\n  fragment ReplEnvironmentNavMenuCurrentUser on CurrentUser {\n    id\n    ...LayoutSidebarCurrentUser\n  }\n  ","\n"]);return l8=function(){return e},e}function l3(){var e=(0,eb._)(["\n  query ReplEnvironmentNavMenu($orgId: String) {\n    currentUser {\n      id\n      ...ReplEnvironmentNavMenuCurrentUser\n      org(orgId: $orgId) {\n        ...OrgSwitcherOrg\n      }\n    }\n  }\n  ","\n  ","\n"]);return l3=function(){return e},e}var l5={},l6=(0,ex.Ps)(l8(),l4.d),l7=(0,ex.Ps)(l3(),l6,l2.FK),l9=[ea.l0.viewStyle,ea.l0.reset.button,nx.gU.nofill,ea.l0.flex.row,ea.l0.height(32),ea.l0.width(40),ea.l0.center,ea.l0.color.foregroundDefault,ea.l0.cursor.pointer,ea.l0.borderRadius(),{":hover svg":{fill:ea.TV.foregroundDefault}}],ce={button:(0,Q.iv)(l9),surface:(0,Q.iv)([ea.l0.borderRadius(8),ea.l0.width(200),ea.l0.maxHeight("80vh"),ea.l0.maxWidth("80vw"),ea.l0.overflowY("auto")]),ctas:(0,Q.iv)([ea.l0.colWithGap(8),ea.l0.p(8)]),link:(0,Q.iv)([ea.l0.viewStyle,ea.l0.rowWithGap(4),ea.l0.color.foregroundDefault,ea.l0.p(8),ea.l0.align.center,nx.gU.listItem,{":active":{backgroundColor:"".concat(ea.TV.backgroundHighest," !important")}}]),linkText:(0,Q.iv)(ea.l0.flex.shrink(1)),popoverContainerRef:(0,Q.iv)([{position:"absolute",top:0,right:0,bottom:0,left:200}]),navItemListWrapper:(0,Q.iv)([{listStyleType:"none"}])},cn="workspace-header-nav-menu";function ct(e){var n,t,r,i,o=(r={variables:{orgId:e.orgId}},i=(0,ey._)({},l5,r),ew.a(l7,i)).data,a=(0,J._)((0,et.useState)(!1),2),l=a[0],c=a[1],u=(0,J._)((0,et.useState)(null),2),s=u[0],d=u[1],p=(null==o?void 0:null===(n=o.currentUser)||void 0===n?void 0:n.userSubscriptionType)!==e4.HP.HackerPro,f=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.org.__typename)==="Org"?o.currentUser.org:void 0;return(0,$.BX)($.HY,{children:[(0,$.BX)(lQ.xo,{isOpen:l,onOpenChange:c,placement:"bottom start",label:"Site Navigation",noArrow:!0,children:[function(e){var n=e.ref,t=(0,lF._)(e,["ref"]);return(0,$.BX)("button",(0,ny._)((0,ey._)({ref:n,"aria-label":"Nav menu","aria-expanded":l,"aria-controls":cn},t),{onClick:function(){return c(!l)},css:ce.button,"data-cy":"global-nav-dropdown-btn",children:[(0,$.tZ)(l$.N2,{color:ea.TV.foregroundDefault,size:20}),(0,$.tZ)(l0.Z,{color:ea.TV.foregroundDimmest,size:12})]}))},(0,$.BX)(e0.Tg,{id:cn,elevated:!0,css:ce.surface,background:"higher",children:[(0,$.tZ)(eo.G,{css:[ce.ctas],children:(0,$.tZ)(nf.zx,{"data-cy":"global-nav-dropdown-new-repl-btn",text:"Create",iconLeft:(0,$.tZ)(aj.Z,{}),colorway:void 0,variant:"outlined",onClick:function(){c(!1),d("create")}})}),(0,$.tZ)(cr,{org:f}),p?(0,$.tZ)(eo.G,{css:ce.ctas,children:(0,$.tZ)(l1.Z,{colorway:"primary",variant:"default",context:"workspace_sidebar",dataCy:"global-nav-dropdown-upgrade-btn"})}):null]})]}),(0,$.tZ)(nl.Z,{isOpen:"upgrade"===s,onClose:function(){return d(null)},type:"purchase",analyticsContext:{upgrade:{context:"workspace_menu_nav"}}}),(0,$.tZ)(lH.Z,{isOpen:"create"===s,onRequestClose:function(){return d(null)},children:(0,$.tZ)(lV.Z,{orgId:null==f?void 0:f.id})})]})}var cr=function(e){var n=e.org,t=(0,lJ.N)({org:n}).sidebarItems,r=t.homeItem,i=t.replsItem,o=t.deploymentsItem,a=t.usageItem,l=t.teamsItem,c=t.settingsItem,u=(0,et.useRef)(null);return(0,$.BX)(eo.G,{children:[(0,$.tZ)("div",{css:ce.popoverContainerRef,ref:u}),(0,$.BX)("ul",{children:[(0,$.tZ)("li",{children:(0,$.tZ)(lq.L,(0,ny._)((0,ey._)({},r),{active:!1}))}),(0,$.BX)(lK.y5,{portalContainer:u,children:[function(e,n){return(0,$.tZ)("li",(0,ny._)((0,ey._)({ref:n},e),{css:ce.navItemListWrapper,children:(0,$.tZ)(lq.L,(0,ny._)((0,ey._)({},i),{active:!1}))}))},n?(0,$.tZ)(lK.qm,{orgId:n.id}):(0,$.tZ)(lK.e0,{})]}),(0,$.tZ)("li",{children:(0,$.tZ)(lq.L,(0,ny._)((0,ey._)({},o),{active:!1}))}),a?(0,$.tZ)("li",{children:(0,$.tZ)(lq.L,(0,ny._)((0,ey._)({},a),{active:!1}))}):null,l&&!n?(0,$.tZ)("li",{children:(0,$.tZ)(lq.L,(0,ny._)((0,ey._)({},l),{active:!1}))}):null,(0,$.tZ)("li",{children:(0,$.tZ)(lq.L,(0,ny._)((0,ey._)({},c),{active:!1}))})]})]})},ci=t(7636),co=t(64073),ca=t(98250),cl=t(96225),cc=t(2401);function cu(){var e=(0,eb._)(['\n  fragment DesktopAppNavMenuCurrentUser on CurrentUser {\n    id\n    hasSeenWorkspaceTour: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return cu=function(){return e},e}function cs(){var e=(0,eb._)(["\n  query DesktopAppNavMenuTour {\n    currentUser {\n      id\n      ...DesktopAppNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return cs=function(){return e},e}var cd={},cp=(0,ex.Ps)(cu()),cf=(0,ex.Ps)(cs(),cp),ch={id:"DesktopAppNavMenu",title:"Native App Navigation",content:function(){return(0,$.tZ)(eo.G,{dataCy:"desktop-app-nav-menu-tour",children:(0,$.tZ)(eA.xv,{children:"In the desktop app, you can use this menu to switch between your Repls, create new ones, and open more windows."})})}};function cv(e){var n,t=e.targetElement,r=(0,ca.Z)("workspace","desktop-app-nav-menu"),i=r.shouldDisplay,o=r.register,a=r.dismiss,l=(n=(0,ey._)({},cd,void 0),ew.a(cf,n));return((0,et.useEffect)(function(){if(!l.loading&&(null===(e=l.data)||void 0===e?void 0:e.currentUser)){var e,n=l.data.currentUser,t=n.hasSeenWorkspaceTour,r=n.hasSeenSidebarTour;(t||r)&&o()}},[o,l]),t&&i)?(0,$.BX)($.HY,{children:[(0,$.tZ)(cl.w,{targetElement:t}),(0,$.tZ)(cc.k,{placement:"bottom-start",targetElement:t,activeStep:ch,currentStepIndex:0,done:a,goto:function(){},totalSteps:1,disableAnimation:!0,onClickOutside:a})]}):null}var cm=t(97133),cg=(0,eO.X)({button:l9,wrapper:[ea.l0.borderRadius(),ea.l0.width(300),ea.l0.maxHeight("60vh"),ea.l0.flex.column],newReplButtonWrapper:[ea.l0.p(8)],newWindowButtonWrapper:[ea.l0.p(8),ea.l0.pt(0)],replsListContainer:[ea.l0.flex.shrink(1),ea.l0.borderRadius("container")]});function cy(){var e=(0,J._)((0,et.useState)(!1),2),n=e[0],t=e[1],r=(0,J._)((0,et.useState)(!1),2),i=r[0],o=r[1],a=(0,e8.useRouter)(),l=(0,J._)((0,cm.Z)(),2),c=l[0],u=l[1];return(0,$.BX)($.HY,{children:[(0,$.BX)(lQ.xo,{background:"default",isOpen:n,onOpenChange:function(e){i||t(e)},placement:"bottom start",label:"Navigation menu",noArrow:!0,children:[function(e){var n=e.ref,t=(0,lF._)(e,["ref"]);return(0,$.BX)("button",(0,ny._)((0,ey._)({css:cg.button,"data-cy":"global-nav-dropdown-btn",ref:(0,lY.l)(n,u)},t),{children:[(0,$.tZ)(l$.N2,{color:e3.TV.foregroundDefault,size:20}),(0,$.tZ)(l0.Z,{color:e3.TV.foregroundDimmest,size:12})]}))},(0,$.BX)(eo.G,{css:cg.wrapper,children:[(0,$.tZ)(eo.G,{css:cg.newReplButtonWrapper,children:(0,$.tZ)(nf.zx,{colorway:"primary",text:"Create a Repl",iconLeft:(0,$.tZ)(aj.Z,{}),onClick:function(){return o(!0)}})}),(0,$.tZ)(eo.G,{css:cg.newWindowButtonWrapper,children:(0,$.tZ)(nf.zx,{text:"New window",iconLeft:(0,$.tZ)(ci.Z,{}),onClick:function(){lj.X.openNewWindow()}})}),(0,$.tZ)(eo.G,{css:cg.replsListContainer,children:(0,$.tZ)(co.Z,{onClick:function(e,n){if(n){lj.X.openWindow(e);return}a.push({pathname:"/replEnvironmentDesktop",query:{replUrl:e}},{pathname:e})}})})]})]}),(0,$.tZ)(lH.Z,{isOpen:i,onRequestClose:function(){return o(!1)},children:(0,$.tZ)(lV.Z,{})}),(0,$.tZ)(cv,{targetElement:c.current})]})}var cb=t(25528),cx=t(57967),cZ=t(46298),cw=t(15457),cC=t(64432),c_=t(31718),ck=t(69940),cS=(0,eO.X)({popover:[ea.l0.maxWidth(460),ea.l0.width("100%")],button:[nx.gU.nofill,ea.l0.height(32),ea.l0.flex.growAndShrink(1),ea.l0.align.center,ea.l0.rowWithGap(4),ea.l0.px(6),ea.l0.borderRadius(),ea.l0.color.foregroundDefault]});function cI(e){var n=e.repl,t=e.onDeployClick,r=(0,J._)((0,et.useState)(!1),2),i=r[0],o=r[1];return(0,$.BX)(lQ.xo,{isOpen:i,onOpenChange:function(e){o(e),e&&(0,eh.j)(eh.U3.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",noArrow:!0,css:cS.popover,children:[(0,$.tZ)(eo.K.button,{dataCy:"ws-repl-info-container",css:cS.button,onClick:function(){(0,eh.j)(eh.U3.REPL_METADATA_OPENED)},children:(0,$.tZ)(ck.Z,{repl:n})}),(0,$.tZ)(c_.Z,{setIsEditing:o,onDeployClick:t})]})}var cR=t(85763),cG=t(8261),cE=t(64318),cT=t(22987),cD=t(87409),cP=t(87128),cB=t(26881),cU=t(67242),cA=t(76575),cO=t(18123),cX=t(55460),cL=t(31417),cM=t(43471),cW=t(36556),cz=t(47149),cN=["/usr/bin/env","cat","/repl/stats/resources.json"],cF=t(99149),cV=t(3341),cH=t.n(cV),cj=t(92443);function cY(e,n){var t=100*n;return e.slice(0,c1).filter(function(e){return e>=t}).length}function cq(e){return cY(e,c0)>=c2?"danger":cY(e,cQ)>=c2?"warning":"ok"}function cK(e){return Math.round(10*e)/10}function cJ(e){return Math.round((e+Number.EPSILON)*100)/100}function c$(e){return e/1024/1024}var cQ=.9,c0=1,c1=10,c2=5,c4=nJ.Dy.Union([nJ.Dy.Literal("ok"),nJ.Dy.Literal("warning"),nJ.Dy.Literal("danger")]),c8=nJ.Dy.Object({cpuUtilizationPercent:nJ.Dy.Number(),memoryUsageRssBytes:nJ.Dy.Number(),memoryUsageCacheBytes:nJ.Dy.Number(),memorySoftLimitBytes:nJ.Dy.Number(),memoryHardLimitBytes:nJ.Dy.Number(),numVCpu:nJ.Dy.Number(),user:nJ.Dy.Object({cpuUtilizationPercent:nJ.Dy.Number()}),system:nJ.Dy.Object({cpuUtilizationPercent:nJ.Dy.Number()}),storage:nJ.Dy.Object({diskLimitBytes:nJ.Dy.Number(),diskUsedBytes:nJ.Dy.Number(),diskUsedWorkspaceBytes:nJ.Dy.Number(),diskUsedNixBytes:nJ.Dy.Number(),scratchDiskLimitBytes:nJ.Dy.Number(),scratchDiskUsedBytes:nJ.Dy.Number()})});nJ.Dy.Object({cpu:nJ.Dy.Object({numVCpu:nJ.Dy.Number(),utilPercent:nJ.Dy.Number(),recentUtilPercents:nJ.Dy.Array(nJ.Dy.Number()),status:c4,user:nJ.Dy.Object({utilPercent:nJ.Dy.Number(),recentUtilPercents:nJ.Dy.Array(nJ.Dy.Number())}),system:nJ.Dy.Object({utilPercent:nJ.Dy.Number(),recentUtilPercents:nJ.Dy.Array(nJ.Dy.Number())})}),memory:nJ.Dy.Object({softLimitBytes:nJ.Dy.Number(),hardLimitBytes:nJ.Dy.Number(),usageBytes:nJ.Dy.Number(),recentUtilPercents:nJ.Dy.Array(nJ.Dy.Number()),status:c4,rss:nJ.Dy.Object({usageBytes:nJ.Dy.Number(),recentUtilPercents:nJ.Dy.Array(nJ.Dy.Number())}),cache:nJ.Dy.Object({usageBytes:nJ.Dy.Number(),recentUtilPercents:nJ.Dy.Array(nJ.Dy.Number())})}),storage:nJ.Dy.Object({usedBytes:nJ.Dy.Number(),totalBytes:nJ.Dy.Number(),scratchUsedBytes:nJ.Dy.Number(),scratchTotalBytes:nJ.Dy.Number(),nixUsedBytes:nJ.Dy.Number(),workspaceUsedBytes:nJ.Dy.Number()})});var c3={cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,usageBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,nixUsedBytes:0,workspaceUsedBytes:0}},c5=(0,nX.cn)(c3),c6=(0,nX.cn)(!0),c7=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(n?Math.round(e):e,100)};function c9(e,n){e.unshift(n),e.pop()}var ue=(0,nX.cn)(null,function(e,n,t){n(c5,function(e){return(0,tX.Uy)(e,function(e){var n,r,i,o,a,l,c,u,s,d,p,f,h,v;c=e.cpu,u=e.memory,s=e.storage,c.numVCpu=t.numVCpu,c.utilPercent=c7(t.cpuUtilizationPercent,!0),c.recentUtilPercents.unshift(c.utilPercent),c.status=cq(c.recentUtilPercents),d=c.user,p=c.system,d.utilPercent=c7(t.user.cpuUtilizationPercent),c9(d.recentUtilPercents,d.utilPercent),p.utilPercent=c7(t.system.cpuUtilizationPercent),c9(p.recentUtilPercents,p.utilPercent),u.softLimitBytes=t.memorySoftLimitBytes,u.hardLimitBytes=t.memoryHardLimitBytes,u.usageBytes=t.memoryUsageRssBytes,f=u.usageBytes/u.softLimitBytes*100,c9(u.recentUtilPercents,f),u.status=cq(u.recentUtilPercents),h=u.rss,v=u.cache,h.usageBytes=t.memoryUsageRssBytes,c9(h.recentUtilPercents,t.memoryUsageRssBytes/t.memorySoftLimitBytes*100),v.usageBytes=t.memoryUsageCacheBytes,c9(v.recentUtilPercents,t.memoryUsageCacheBytes/t.memorySoftLimitBytes*100),s.usedBytes=(null===(n=t.storage)||void 0===n?void 0:n.diskUsedBytes)||0,s.totalBytes=(null===(r=t.storage)||void 0===r?void 0:r.diskLimitBytes)||1073741824,s.scratchUsedBytes=(null===(i=t.storage)||void 0===i?void 0:i.scratchDiskUsedBytes)||0,s.scratchTotalBytes=(null===(o=t.storage)||void 0===o?void 0:o.scratchDiskLimitBytes)||1073741824,s.nixUsedBytes=(null===(a=t.storage)||void 0===a?void 0:a.diskUsedNixBytes)||0,s.workspaceUsedBytes=(null===(l=t.storage)||void 0===l?void 0:l.diskUsedWorkspaceBytes)||0})})}),un=(0,tw.kv)(c5,function(e){return"ok"!==e.cpu.status?e.cpu.status:null}),ut=(0,tw.kv)(c5,function(e){return"ok"!==e.memory.status?e.memory.status:null}),ur=(0,nX.cn)(function(e){var n=e(ut);if(n)return{type:"ram_alert",status:n};var t=e(un);return t?{type:"cpu_alert",status:t}:null}),ui=(0,nX.cn)(function(e){for(var n=e(c5),t=n.cpu,r=n.memory,i=0,o=["danger","warning"];i<o.length;i++){var a=o[i];if(t.status===a||r.status===a)return"danger"}return"ok"}),uo=(0,tw.kv)(c5,function(e){var n=cK((0,cD.$s)(e.memory.softLimitBytes));return{numVCpu:cK(e.cpu.numVCpu),ramTotalGB:n}},cH()),ua=(0,tw.kv)(c5,function(e){var n=e.cpu,t=n.status,r=n.recentUtilPercents,i=n.user,o=n.system,a=cJ(n.utilPercent),l=cJ(i.utilPercent),c=cJ(o.utilPercent);return{status:t,currentPercent:a,recentUtilPercents:r,currentUserPercent:l,recentUserUtilPercents:i.recentUtilPercents,currentSystemPercent:c,recentSystemUtilPercents:o.recentUtilPercents}},cH()),ul=(0,tw.kv)(c5,function(e){var n=e.memory,t=n.status,r=n.recentUtilPercents,i=n.cache,o=n.rss,a=n.softLimitBytes,l=n.usageBytes,c=c$(a);return{status:t,currentPercent:Math.round(100*Math.min(1,Math.round(cJ(c$(l)))/c)),currentRssInBytes:1048576*Math.round(cJ(c$(o.usageBytes))),currentCacheInBytes:1048576*Math.round(cJ(c$(i.usageBytes))),recentUtilPercents:r,recentRssUtilPercents:o.recentUtilPercents,recentCacheUtilPercents:i.recentUtilPercents}},cH()),uc=(0,tw.kv)(c5,function(e){var n=e.storage;return{replUsedInMib:c$(n.usedBytes),scratchUsedInMib:c$(n.scratchUsedBytes),nixUsedInMib:c$(n.nixUsedBytes),workspaceUsedInMib:c$(n.workspaceUsedBytes)}},cH()),uu=(0,tw.kv)(c5,function(e){var n=e.cpu,t=e.memory;return{numVCpu:n.numVCpu,ramQuotaMiBs:c$(t.softLimitBytes),cpuRecentUtilPercents:n.recentUtilPercents,ramRecentUtilPercents:t.recentUtilPercents}},cH()),us=(0,tw.kv)(c5,function(e){return e.cpu.numVCpu}),ud=(0,tw.kv)(c5,function(e){return c$(e.memory.softLimitBytes)}),up=(0,tw.kv)(c5,function(e){return c$(e.storage.totalBytes)});function uf(){return(0,cM.Hg)(up)}var uh=(0,tw.kv)(c5,function(e){return c$(e.storage.usedBytes)});function uv(){return(0,cM.Hg)(uh)}var um=t(85289),ug=t(36079),uy=eo.K.span,ub=(0,eO.X)({triggerWrapper:[{":focus":{outline:"2px solid ".concat(ea.TV.accentPrimaryDefault),outlineOffset:"-1px",borderRadius:"4px"}}]});function ux(e){var n=e.label,t=e.children,r=(0,J._)(t,2),i=r[0],o=r[1],a=(0,J._)((0,et.useState)(!1),2),l=a[0],c=a[1],u=(0,J._)((0,et.useState)(!1),2),s=u[0],d=u[1],p=(0,et.useRef)(!1);return(0,et.useEffect)(function(){s&&(p.current=!0);var e=setTimeout(function(){c(s)},200);return function(){clearTimeout(e)}},[s]),(0,$.BX)(lQ.xo,{label:n,isOpen:l,onOpenChange:function(){return c(!l)},placement:"right",offset:16,children:[(0,$.tZ)(uy,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},onClick:function(){return c(!0)},onKeyDown:function(e){"Enter"===e.key&&c(!0)},tabIndex:0,css:ub.triggerWrapper,children:i}),(0,$.tZ)(uy,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:o})]})}function uZ(e){return e>ug.lb?"".concat((0,cD.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,cD.p6)(e)).toLocaleString()," MiB")}cB.kL.register(cB.jn,cB.Gu);var uw=(0,eO.X)({sectionPadding:[ea.l0.py(4),ea.l0.px(12)],rowSpacing:[ea.l0.rowWithGap(8),ea.l0.justify.spaceBetween,ea.l0.align.center]}),uC=(0,eO.X)({wrapper:[ea.l0.borderRadius(4),ea.l0.border({color:ea.TV.outlineDimmer}),ea.l0.overflow("hidden")],rowSection:[uw.sectionPadding,uw.rowSpacing],hoverRowSection:[uw.sectionPadding,uw.rowSpacing,{":hover":{backgroundColor:ea.TV.backgroundHigher}}],hoverColumnSection:[uw.sectionPadding,ea.l0.colWithGap(8),{":hover":{backgroundColor:ea.TV.backgroundHigher}}],sectionHeading:[ea.l0.fontWeight.bold],alignedRow:[ea.l0.rowWithGap(8),ea.l0.align.center],alignedSpaceBetweenRow:[uw.rowSpacing],detailContent:[ea.l0.p(8),ea.l0.colWithGap(8),ea.l0.width(260)],detailSectionsWrapper:[ea.l0.borderRadius(4),ea.l0.border({color:ea.TV.outlineDimmer}),ea.l0.overflow("hidden")],warningText:[ea.l0.color.orangeStronger],dangerText:[ea.l0.color.redStronger],chartWrapper:[ea.l0.width(22),ea.l0.height(18),ea.l0.borderRadius(2)],indentAgain:[ea.l0.pl(24)]});function u_(e){var n=e.editResourcesAuthz,t=e.onEditCompute,r=(0,cM.Hg)(uo);return(0,$.BX)(eo.G,{css:uC.wrapper,children:[(0,$.BX)(eo.G,{css:uC.rowSection,children:[(0,$.tZ)(eA.xv,{css:uC.sectionHeading,children:"Compute"}),(0,$.BX)(eo.G,{css:uC.alignedRow,children:[(0,$.BX)(eA.xv,{color:"dimmer",children:[r.numVCpu," vCPU, ",r.ramTotalGB," GiB RAM"]}),n.isAuthorized?(0,$.tZ)(cR.hU,{onClick:t,alt:"Edit compute",children:(0,$.tZ)(cA.Z,{})}):(0,$.tZ)(cR.hU,{disabled:!0,alt:n.message,children:(0,$.tZ)(cO.Z,{})})]})]}),(0,$.tZ)(cU.R,{}),(0,$.tZ)(uk,{}),(0,$.tZ)(uS,{})]})}function uk(){var e=(0,cM.Hg)(ua);return(0,$.tZ)(uI,{title:"CPU",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The amount of processing power this Repl is using.",detailRows:[{title:"User",displayValue:"".concat(e.currentUserPercent,"%"),recentPercents:e.recentUserUtilPercents},{title:"System",displayValue:"".concat(e.currentSystemPercent,"%"),recentPercents:e.recentSystemUtilPercents}]})}function uS(){var e=(0,cM.Hg)(ul);return(0,$.tZ)(uI,{title:"RAM",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The memory this Repl is using.",detailRows:[{title:"Active",displayValue:uZ(e.currentRssInBytes),recentPercents:e.recentRssUtilPercents},{title:"Cache",displayValue:uZ(e.currentCacheInBytes),recentPercents:e.recentCacheUtilPercents}]})}function uI(e){var n=e.title,t=e.displayValue,r=e.status,i=e.recentPercents,o=e.detailText,a=e.detailRows;return(0,$.BX)(ux,{label:"Compute details",children:[(0,$.BX)(eo.G,{css:uC.hoverRowSection,children:[(0,$.BX)(eo.G,{css:uC.alignedRow,children:[(0,$.tZ)(eA.xv,{children:n}),(0,$.tZ)(uR,{status:r})]}),(0,$.BX)(eo.G,{css:uC.alignedRow,children:[(0,$.tZ)(eA.xv,{color:"dimmer",children:t}),(0,$.tZ)(eo.G,{css:uC.chartWrapper,children:(0,$.tZ)(uG,{data:i,colorAreaUnderLine:!0})})]})]}),(0,$.BX)(eo.G,{css:uC.detailContent,children:[(0,$.tZ)(eA.xv,{children:o}),(0,$.tZ)(eo.G,{css:uC.detailSectionsWrapper,children:a.map(function(e,n){return(0,$.BX)(eo.G,{css:uC.rowSection,children:[(0,$.tZ)(eA.xv,{children:e.title}),(0,$.BX)(eo.G,{css:uC.alignedRow,children:[(0,$.tZ)(eA.xv,{color:"dimmer",children:e.displayValue}),(0,$.tZ)(eo.G,{css:uC.chartWrapper,children:(0,$.tZ)(uG,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},n)})})]})]})}function uR(e){var n=e.status;return"warning"===n?(0,$.BX)($.HY,{children:[(0,$.tZ)(cP.Z,{color:ea.TV.orangeStronger}),(0,$.tZ)(eA.xv,{css:uC.warningText,children:"Near limit"})]}):"danger"===n?(0,$.BX)($.HY,{children:[(0,$.tZ)(cP.Z,{color:ea.TV.redStronger}),(0,$.tZ)(eA.xv,{css:uC.dangerText,children:"At limit"})]}):null}function uG(e){var n=e.data,t=e.colorAreaUnderLine,r=void 0!==t&&t,i=e.showHorizontalGridLines,o=(0,cX.F)().values,a=n.map(function(e,n){return{x:-n,y:e}}),l=cQ-.05,c=c0-.02;return(0,$.tZ)(um.x1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(n.length-1)},y:{display:void 0!==i&&i,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var n=[10,50,90];e.ticks=e.ticks.filter(function(e){return n.includes(e.value)})},grid:{color:function(e){return e.tick.value>100*l?o.global.orangeDimmer:o.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:a,fill:{target:"origin"},borderColor:function(e){var n=e.chart,t=n.ctx,r=n.chartArea;if(r){var i=t.createLinearGradient(0,r.bottom,0,r.top),a=o.global.blueDefault,u=o.global.orangeDefault,s=o.global.redDefault;return i.addColorStop(0,a),i.addColorStop(l-.08,a),i.addColorStop(l+.08,u),i.addColorStop(c-.08,u),i.addColorStop(c,s),i}},backgroundColor:function(e){if(!r)return"transparent";var t=e.chart,i=t.ctx,u=t.chartArea;if(u){var s=i.createLinearGradient(u.left,0,u.right,0),d=uE(o.global.blueDimmest),p=uE(o.global.orangeDimmest),f=uE(o.global.redDimmest);return a.forEach(function(e,t){if(s){var r=1-t/(n.length-1);e.y<100*l?s.addColorStop(r,d):e.y<100*c?s.addColorStop(r,p):s.addColorStop(r,f)}}),s}}}]}})}function uE(e){var n,t,r=(n=(n=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,t,r){return n+n+t+t+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null);if(!r)return e;var i=r.r,o=r.g,a=r.b;return"rgba(".concat(i,", ").concat(o,", ").concat(a,", ",.5,")")}function uT(e){var n=e.alertDialogType,t=e.onRequestUpgrade,r=(0,cM.Hg)(uu);if(!r)return null;var i="cpu_alert"===n?r.cpuRecentUtilPercents:r.ramRecentUtilPercents,o="cpu_alert"===n?"CPU":"RAM",a="You have been near the ".concat("cpu_alert"===n?"".concat(r.numVCpu," vCPU"):"".concat((0,cD.$s)(1048576*r.ramQuotaMiBs)," GiB RAM")," limit of the free plan ").concat(c2," or more times in the past ").concat(20," seconds. More ").concat("cpu_alert"===n?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,$.BX)(eo.G,{css:uD.dialogContainer,children:[(0,$.tZ)(cP.Z,{color:ea.TV.orangeStrongest}),(0,$.BX)(eA.xv,{variant:"subheadDefault",multiline:!1,children:["High ",o," usage"]}),(0,$.tZ)(eA.xv,{color:"dimmer",children:a}),(0,$.tZ)(eo.G,{css:uD.chartWrapper,children:(0,$.tZ)(uG,{data:i,showHorizontalGridLines:!0})}),(0,$.tZ)(nf.zx,{size:"big",colorway:"warning",text:"Increase ".concat(o," limit"),onClick:function(){(0,eh.j)(eh.U3.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),t()}})]})}var uD=(0,eO.X)({dialogContainer:[ea.l0.p(8),ea.l0.colWithGap(8)],chartWrapper:[ea.l0.height(67),ea.l0.backgroundColor.backgroundRoot,ea.l0.borderRadius(12),ea.l0.py(12),ea.l0.px(16)]}),uP=t(27833),uB=function(){return(0,no.r)().showResourcesUpsell?(0,$.tZ)(cC.u,{tooltip:uU,children:(0,$.tZ)(uP.D,{text:"CPU/RAM LIMITS"})}):null},uU="You're development resources are limited. Upgrade for more speed, storage, better AI, and more.",uA=t(2511),uO=t(17841),uX=t(43182),uL=t(54579),uM=t(98674);function uW(){var e=(0,eb._)(["\n  fragment EditComputeOptions on Repl {\n    devComputeOptions {\n      sku\n      status\n      cost\n      displayName\n      description\n    }\n  }\n"]);return uW=function(){return e},e}function uz(){var e=(0,eb._)(["\n  query EditComputeDialog($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        ...EditComputeOptions\n      }\n    }\n  }\n  ","\n"]);return uz=function(){return e},e}function uN(){var e=(0,eb._)(["\n  mutation EditCompute($input: BoostRepl2Input!) {\n    boostRepl2(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoostRepl2Result {\n        repl {\n          ... on Repl {\n            id\n            ...EditComputeOptions\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return uN=function(){return e},e}var uF={},uV=(0,ex.Ps)(uW()),uH=(0,ex.Ps)(uz(),uV),uj=(0,ex.Ps)(uN(),uV),uY=t(96955);function uq(e){var n,t,r=e.onEditComplete,i=(0,ef.Z)(),o=(0,J._)((0,et.useState)([]),2),a=o[0],l=o[1],c=(0,J._)((0,et.useState)(null),2),u=c[0],s=c[1],d=(0,J._)((0,et.useState)(null),2),p=d[0],f=d[1],h=(0,lw.Z)().showError,v=(0,lP.U)(),m=(n=(0,ey._)({},uF,{variables:{replId:i},onCompleted:function(e){if((null==e?void 0:e.repl.__typename)!=="Repl"){h("Failed to load Repl");return}var n=e.repl.devComputeOptions.find(function(e){return e.status===e4.Mf.Current});if(!n){uX.uT("Missing currentBoost for repl ".concat(i));return}l(e.repl.devComputeOptions),s(n),f(n.sku)}}),ew.a(uH,n)).loading,g=(0,J._)((0,et.useState)(!1),2),y=g[0],b=g[1],x=(0,J._)((t=(0,ey._)({},uF,{onError:function(e){uX.Tb(e),h(e.message)},onCompleted:function(e){(null==e?void 0:e.boostRepl2.__typename)!=="BoostRepl2Result"&&h(e.boostRepl2.message),setTimeout(function(){r()},3e3)}}),rR.D(uj,t)),1)[0];return m?(0,$.tZ)(eo.G,{css:u$.loadingWrapper,children:(0,$.tZ)(eX.Z,{})}):(0,$.BX)(eo.G,{css:u$.root,children:[(0,$.tZ)(uL.E,{tag:"fieldset",name:v("pickAmount"),value:null!=p?p:e4.Xb.Boost_4cpu_8ram,onChange:function(e){f(e.target.value)},css:u$.radioGroup,children:a.map(function(e){return(0,$.tZ)(uJ,{checked:p===e.sku,option:e,isCurrentOption:(null==u?void 0:u.sku)===e.sku},e.sku)})}),(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",css:u$.explanationText,children:"You will only be charged for the time this Repl is active"}),(0,$.tZ)(nf.zx,{css:u$.submitButton,colorway:"primary",text:y?(0,$.tZ)(eX.Z,{}):"Apply change",disabled:(null==u?void 0:u.sku)===p||y,onClick:function(){p&&(b(!0),x({variables:{input:{replId:i,setting:uK(p)}}}))}})]})}var uK=function(e){switch(e){case e4.Xb.Boost_4cpu_8ram:return e4.jU.Off;case e4.Xb.Boost_8cpu_16ram:return e4.jU.Boost_8cpu_16ram;case e4.Xb.Boost_16cpu_32ram:return e4.jU.Boost_16cpu_32ram;case e4.Xb.Boost_32cpu_64ram:return e4.jU.Boost_32cpu_64ram;default:(0,uY.Z)(e)}};function uJ(e){var n=e.checked,t=e.option,r=e.isCurrentOption;return(0,$.tZ)("label",{htmlFor:t.sku,css:[uQ.base,n?uQ.checked:uQ.unchecked],children:(0,$.BX)(eo.G,{children:[(0,$.tZ)(nZ.T,{children:(0,$.tZ)(uL.Y,{id:t.sku,value:t.sku,disabled:"unavailable"===t.status})}),(0,$.BX)(eo.G,{css:"unavailable"===t.status?u$.disabledOption:u$.optionContainer,children:[(0,$.BX)(eo.G,{css:u$.optionHeader,children:[(0,$.tZ)(eA.xv,{css:u$.optionDisplayText,children:t.displayName}),(0,$.BX)(eo.G,{css:u$.optionPriceAndStatus,children:[(0,$.tZ)(eA.xv,{children:t.cost}),r?(0,$.tZ)(lx.Z,{size:16}):null]})]}),(0,$.tZ)(eA.xv,{color:"dimmer",children:t.description})]})]})})}var u$=(0,eO.X)({root:[ea.l0.p(8),ea.l0.colWithGap(16)],explanationText:[ea.l0.textAlign.center],submitButton:[ea.l0.borderRadius(4)],radioGroup:[ea.l0.colWithGap(8)],disabledOption:[ea.l0.flex.growAndShrink(1),{opacity:.5}],optionContainer:[ea.l0.flex.growAndShrink(1)],optionHeader:[ea.l0.rowWithGap(32),ea.l0.align.center,ea.l0.justify.spaceBetween],optionDisplayText:[ea.l0.fontWeight.bold],optionPriceAndStatus:[ea.l0.rowWithGap(6),ea.l0.align.center],loadingWrapper:[ea.l0.p(16),ea.l0.align.center,ea.l0.justify.center]}),uQ=(0,eO.X)({base:[ea.l0.position.relative,ea.l0.flex.growAndShrink(1),ea.l0.p(8),(I={border:"1px solid "+ea.TV.outlineDimmest,cursor:"pointer",flexBasis:0,transition:"transform 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)"},(0,el._)(I,(0,uM.et)("mobileMax"),[ea.l0.py(8),ea.l0.colWithGap(4)]),(0,el._)(I,"&:focus-within",{borderColor:ea.TV.outlineStrongest}),I),ea.l0.borderRadius(4)],checked:[[(0,el._)({backgroundColor:ea.TV.accentPrimaryDimmest,borderColor:ea.TV.accentPrimaryStronger},(0,uM.et)("mobileMax"),{transform:"scale(1.02)",boxShadow:ea.TV.shadow1})]],unchecked:[nx.gU.outlined]});function u0(){var e=(0,eb._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n        replPowerUps {\n          __typename\n          ... on ReplPowerUpDescriptionType {\n            id\n            type\n          }\n        }\n      }\n    }\n  }\n"]);return u0=function(){return e},e}function u1(){var e=(0,eb._)(["\n  query ReplResourcesReplInfo($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        authorizations {\n          editResources {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return u1=function(){return e},e}var u2={},u4=(0,ex.Ps)(u0()),u8=(0,ex.Ps)(u1()),u3=t(80952),u5=t(91961),u6=t(55821);function u7(){var e=(0,eb._)(["\n  query ReplResourcesCurrentUserStorageUsage {\n    currentUser {\n      id\n      userSubscriptionType\n      storageInfo {\n        accountStorageUtilization {\n          ... on AccountStorageUtilization {\n            total\n          }\n        }\n      }\n    }\n  }\n"]);return u7=function(){return e},e}var u9={},se=(0,ex.Ps)(u7()),sn=t(39171);function st(e){return e>ug.lb?"".concat((0,cD.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,cD.p6)(e)).toLocaleString()," MiB")}function sr(e,n){return 0===n||0===e?0:Math.round(e/n*100)}function si(e){var n,t,r,i=e.isTeamRepl,o=e.isReplOwner,a=uv(),l=uf(),c=(n=(0,ey._)({},u9,void 0),ew.a(se,n)),u=c.data,s=c.refetch,d=(null==u?void 0:null===(t=u.currentUser)||void 0===t?void 0:t.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"?Number(u.currentUser.storageInfo.accountStorageUtilization.total):0,p=(null==u?void 0:null===(r=u.currentUser)||void 0===r?void 0:r.userSubscriptionType)===e4.HP.HackerPro?ug.CU:ug.tC,f=(0,et.useMemo)(function(){return(0,sn.Z)(function(){return s()},{wait:12e4,maxWait:3e5})},[s]);return(0,et.useEffect)(function(){var e,n=!1,t=null,r=(e=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:if(n)return[2];return[4,f()];case 1:return e.sent(),t=setTimeout(r,3e5),[2]}})}),function(){return e.apply(this,arguments)});return r(),function(){n=!0,t&&clearTimeout(t),f.isScheduled()&&f.flush()}},[f,a,l,s]),(0,$.BX)(eo.G,{css:uC.wrapper,children:[(0,$.BX)(eo.G,{css:uC.rowSection,children:[(0,$.tZ)(eA.xv,{css:uC.sectionHeading,children:"Storage"}),o?(0,$.tZ)(eo.G,{css:uC.alignedRow,children:(0,$.tZ)(eA.xv,{color:"dimmer",children:st(d)})}):null]}),(0,$.tZ)(cU.R,{}),o?(0,$.tZ)(so,{accountUsedInBytes:d,accountQuotaInBytes:p}):(0,$.tZ)(sa,{isReplOwner:o,isTeamRepl:i})]})}function so(e){var n=e.accountUsedInBytes,t=e.accountQuotaInBytes,r=(0,J._)((0,et.useState)(!1),2),i=r[0],o=r[1],a=sr(n,t),l=(0,cM.Hg)(uc),c=l.replUsedInMib,u=l.scratchUsedInMib,s=l.nixUsedInMib,d=l.workspaceUsedInMib,p=[{title:"Total",usageDisplayText:"".concat(st(n)),percentOfUsage:null},{title:"This Repl",usageDisplayText:"".concat(st(1048576*c)),percentOfUsage:sr(1048576*c,n)},{title:"Workspace",usageDisplayText:"".concat(st(1048576*d)),percentOfUsage:null,indentAgain:!0},{title:"Nix packages",usageDisplayText:"".concat(st(1048576*s)),percentOfUsage:null,indentAgain:!0,nix:!0},{title:"Scratch disk",usageDisplayText:"".concat(st(1048576*u)),percentOfUsage:sr(1048576*u,n)}];return(0,$.BX)($.HY,{children:[(0,$.BX)(ux,{label:"Storage details",children:[(0,$.BX)(eo.G,{css:uC.hoverColumnSection,children:[(0,$.BX)(eo.G,{css:uC.alignedSpaceBetweenRow,children:[(0,$.BX)(eA.xv,{children:[st(t)," included"]}),(0,$.BX)(eo.G,{css:uC.alignedRow,children:[(0,$.BX)(eA.xv,{color:"dimmer",multiline:!1,children:[Math.min(a,100),"%"]}),(0,$.tZ)(su,{percentage:a})]})]}),n>t?(0,$.BX)(eo.G,{css:uC.alignedSpaceBetweenRow,children:[(0,$.tZ)(eA.xv,{children:"Additional usage"}),(0,$.tZ)(eA.xv,{color:"dimmer",children:st(n-t)})]}):null]}),(0,$.BX)(eo.G,{css:uC.detailContent,children:[(0,$.tZ)(eA.xv,{children:"Your account storage usage."}),(0,$.tZ)(eo.G,{css:uC.detailSectionsWrapper,children:p.map(function(e,n){return(0,$.BX)(eo.G,{css:uC.rowSection,children:[(0,$.BX)(eo.G,{css:uC.alignedRow,children:[n>0?(0,$.tZ)(eo.G,{css:e.indentAgain&&uC.indentAgain,children:(0,$.tZ)(u5.Z,{color:ea.TV.outlineDefault,size:16})}):null,(0,$.tZ)(eA.xv,{children:e.title})]}),e.nix?(0,$.tZ)(eo.G,{css:uC.alignedRow,children:(0,$.tZ)(cR.hU,{onClick:function(){return o(!0)},alt:"Delete Nix packages",disabled:s<1,children:(0,$.tZ)(u6.Z,{})})}):null,(0,$.BX)(eo.G,{css:uC.alignedRow,children:[(0,$.tZ)(eA.xv,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,$.BX)(eA.xv,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},n)})})]})]}),(0,$.tZ)(ss,{isOpen:i,onClose:function(){return o(!1)}})]})}function sa(e){var n=e.isReplOwner,t=e.isTeamRepl,r=uv(),i=uf(),o=1048576*r,a=sr(o,1048576*i);return(0,$.BX)(eo.G,{css:uC.rowSection,children:[(0,$.BX)(eo.G,{css:uC.alignedRow,children:[n?(0,$.tZ)(u5.Z,{color:ea.TV.outlineDefault,size:16}):null,(0,$.tZ)(eA.xv,{children:"This Repl"})]}),(0,$.BX)(eA.xv,{color:"dimmer",children:[st(o)," ",t?"(".concat(a,"% of total)"):null]})]})}var sl=(0,eO.X)({bar:[ea.l0.width(1.5),ea.l0.height(7),ea.l0.borderRadius(1)]}),sc=(0,eO.X)({wrapper:[ea.l0.rowWithGap(1)],dimBar:[sl.bar,ea.l0.backgroundColor.greyDimmest],blueBar:[sl.bar,ea.l0.backgroundColor.blueStronger],yellowBar:[sl.bar,ea.l0.backgroundColor.yellowStronger],redBar:[sl.bar,ea.l0.backgroundColor.redStronger]});function su(e){var n=e.percentage,t=Math.round(n/10),r=(0,ec._)(Array(7).fill(sc.blueBar)).concat((0,ec._)([,,].fill(sc.yellowBar)),[sc.redBar]);return(0,$.tZ)(eo.G,{css:sc.wrapper,children:r.map(function(e,i){var o=n>100?sc.blueBar:r[i];return(0,$.tZ)(eo.G,{css:i<t?o:sc.dimBar},i)})})}var ss=function(e){var n=e.onClose,t=e.isOpen,r=(0,eu.Z)().container;return(0,$.tZ)(e$.u,{isOpen:t,onRequestClose:n,children:(0,$.tZ)(u3.Z,{name:"Nix Packages",description:"this Repl's Nix packages",confirmDescription:"Nix packages",hideModal:n,delete:function(){n();var e=r.openChannel({service:"file",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(n){return n.channel.request({resetNixFilesystem:{}}).then(function(n){n.ok&&e()}),function(){}})}})})},sd=t(14375),sp=(0,eO.X)({replResourcesContainer:[ea.l0.p(8),ea.l0.colWithGap(8)],headerContainer:[ea.l0.rowWithGap(8)],trialButton:[ea.l0.borderRadius(4)],headerAndSubheaderContainer:[ea.l0.colWithGap(4)],editComputeContainer:[ea.l0.rowWithGap(8),ea.l0.p(8),ea.l0.align.center],loadingStateWrapper:[ea.l0.center,ea.l0.p(16)],ctaWrapper:[ea.l0.colWithGap(8)]});function sf(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y=e.onRequestUpgrade,b=(o=(0,ey._)({},u2,void 0),ew.a(u4,o)),x=b.data,Z=b.loading,w=(a={variables:{replId:(0,ef.Z)()}},l=(0,ey._)({},u2,a),ew.a(u8,l)),C=w.data,_=w.loading,k=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:null,S=(null==k?void 0:null===(c=k.org)||void 0===c?void 0:c.id)!==void 0,I=(null==k?void 0:null===(u=k.owner)||void 0===u?void 0:u.__typename)==="Team"||S,R=(null==k?void 0:null===(s=k.owner)||void 0===s?void 0:s.id)===(null==x?void 0:null===(d=x.currentUser)||void 0===d?void 0:d.id),G=null==x?void 0:null===(p=x.currentUser)||void 0===p?void 0:p.userSubscriptionType,E=(null==x?void 0:null===(h=x.currentUser)||void 0===h?void 0:null===(f=h.paymentMethod)||void 0===f?void 0:f.__typename)==="PaymentMethod"&&null!==x.currentUser.paymentMethod.id,T=null==x?void 0:null===(m=x.currentUser)||void 0===m?void 0:null===(v=m.userSubscription)||void 0===v?void 0:v.isTrial,D=R&&("HACKER_PRO"!==G||T&&!E),P=(0,no.r)().showResourcesUpsell,B=null==k?void 0:null===(g=k.authorizations)||void 0===g?void 0:g.editResources,U=(0,J._)((0,et.useState)(!1),2),A=U[0],O=U[1],X=(0,cM.Hg)(c6);return Z||_||X||!B?(0,$.tZ)(eo.G,{css:sp.loadingStateWrapper,children:(0,$.tZ)(eX.Z,{})}):A?(0,$.BX)(eo.G,{children:[(0,$.BX)(eo.G,{css:sp.editComputeContainer,children:[(0,$.tZ)(cR.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return O(!1)},dataCy:"edit-compute-back-button",children:(0,$.tZ)(uA.Z,{})}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Edit compute"})]}),(0,$.tZ)(uq,{onEditComplete:function(){return O(!1)}})]}):(0,$.BX)(eo.G,{css:sp.replResourcesContainer,children:[(0,$.BX)(eo.G,{css:sp.headerAndSubheaderContainer,children:[(0,$.BX)(eo.G,{css:sp.headerContainer,children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Resources"}),(0,$.tZ)(sh,{resourceTier:(t=(n={isTeamRepl:I,isReplOwner:R,plan:G}).isTeamRepl,r=n.isReplOwner,i=n.plan,t?"team":r&&"HACKER_PRO"===i?"member":r&&null===i?"free":"hidden"),isOnTrial:T,showResourcesUpsell:P})]}),(0,$.tZ)(eA.xv,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,$.tZ)(u_,{editResourcesAuthz:B,onEditCompute:function(){O(!0)}}),S?null:(0,$.tZ)(si,{isTeamRepl:I,isReplOwner:R}),D?(0,$.BX)(eo.G,{css:sp.ctaWrapper,children:[(0,$.tZ)(nf.zx,{colorway:"blurple",iconLeft:(0,$.tZ)(uO.Z,{}),text:"Join Replit ".concat(sd.we),onClick:function(){return y()},css:sp.trialButton}),(0,$.BX)(eA.xv,{css:ea.l0.textAlign.center,color:"dimmer",variant:"small",children:["Get 4 vCPU, 8 GiB RAM, and ",(0,cD.$s)(ug.CU)," GiB Storage"]})]}):null]})}function sh(e){var n=e.resourceTier,t=e.isOnTrial,r=e.showResourcesUpsell;switch(n){case"free":return r?(0,$.tZ)(uB,{}):(0,$.tZ)(cG.D,{text:"Free",colorway:"grey"});case"member":if(t)return(0,$.tZ)(cG.D,{text:"".concat(sd.we," Trial"),colorway:"blue"});return(0,$.tZ)(cG.D,{text:"".concat(sd.we),colorway:"purple"});case"team":return(0,$.tZ)(cG.D,{text:"Team",colorway:"green"});default:return null}}var sv=t(45929);function sm(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w=e.repl,C=e.currentUser,_=(0,J._)((0,et.useState)(!1),2),k=_[0],S=_[1],I=(0,J._)((0,et.useState)("resources"),2),R=I[0],G=I[1],E=(0,no.r)(),T=E.showResourcesUpsell,D=E.refetch,P=(0,J._)((0,et.useState)(!1),2),B=P[0],U=P[1],A=(r=(n={repl:w,currentUser:C,onAlert:function(e){G(e),S(!0)}}).repl,i=n.currentUser,o=n.onAlert,a=(0,cM.yL)(ur),l=(0,e8.useRouter)(),c=(0,eu.Z)().runner,u=(0,ei.P5)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),d=(s=(0,J._)((0,et.useState)(!1),2))[0],p=s[1],f=(null===(t=r.owner)||void 0===t?void 0:t.__typename)==="User"&&r.owner.id===(null==i?void 0:i.id),h=null==i?void 0:i.userSubscriptionType,m=(v=(0,ca.Z)("announcement","resources-upgrade-modal")).shouldDisplay,g=v.register,y=v.dismiss,(0,et.useEffect)(function(){!(0,eH.Gv)(l)&&f&&null===h&&u&&g()},[u,f,g,l,h]),x=(b=(0,J._)((0,et.useState)(!0),2))[0],Z=b[1],(0,et.useEffect)(function(){var e=setTimeout(function(){Z(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,et.useEffect)(function(){if(c&&!d)return c.onStateChanged(function(e){e!==sv.Ah.RUNNING||d||p(!0)})},[c,d]),(0,et.useEffect)(function(){if(!(x||(0,eH.Gv)(l))&&m&&d)return a.subscribe(function(e){e&&o(e.type)})},[a,g,x,u,f,o,l,m,h,d]),{dismissAlert:y}).dismissAlert,O=function(){A(),S(!1),G("resources")};return(0,$.BX)($.HY,{children:[(0,$.BX)(lQ.xo,{isOpen:k,onOpenChange:function(e){S(e),e&&(0,eh.j)(eh.U3.REPL_RESOURCES_OPENED),e||"cpu_alert"!==R&&"ram_alert"!==R||O()},placement:"bottom start",label:"Repl resources",noArrow:!0,css:sy.popover,children:[T?(0,$.BX)(nf.Yd,{"aria-label":"Repl resources","aria-expanded":k,"data-cy":"repl-resources-button",css:sy.resourcesUpsell,children:[(0,$.tZ)(cT.Z,{size:16}),(0,$.tZ)(eA.xv,{children:"CPU/RAM LIMITS"}),(0,$.tZ)(sg,{})]}):(0,$.tZ)(cR.hU,{"aria-label":"Repl resources",alt:"Repl resources","aria-expanded":k,dataCy:"repl-resources-button",css:sy.button,children:(0,$.BX)(eo.G,{css:sy.buttonWrapper,children:[(0,$.tZ)(cT.Z,{size:16}),(0,$.tZ)(sg,{})]})}),(0,$.BX)(eo.G,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===R?(0,$.tZ)(sf,{onRequestUpgrade:function(){return U(!0)}}):null,"cpu_alert"===R||"ram_alert"===R?(0,$.BX)(eo.G,{css:sy.alertDialogWrapper,children:[(0,$.tZ)(cR.hU,{onClick:O,alt:"Close",css:sy.alertDialogCloseButton,children:(0,$.tZ)(cE.Z,{})}),(0,$.tZ)(uT,{alertDialogType:R,onRequestUpgrade:function(){return U(!0)}})]}):null]})]}),(0,$.tZ)(nl.Z,{isOpen:B,onClose:function(){return U(!1)},onPurchaseComplete:function(){return D()},type:"purchase",contextualUpsell:T?(0,$.BX)($.HY,{children:[(0,$.tZ)(eA.xv,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,$.BX)(eA.xv,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and"," ",(0,cD.$s)(ug.CU)," GiB of storage"]})]}):void 0,analyticsContext:{upgrade:{context:"repl_resources"}}})]})}function sg(){var e=(0,cM.Hg)(ui);return"ok"===e?null:(0,$.BX)($.HY,{children:[(0,$.tZ)(eo.G,{css:sC.base}),(0,$.tZ)(eo.G,{css:"warning"===e?sC.warningColors:sC.dangerColors})]})}var sy=(0,eO.X)({popover:[ea.l0.width(360)],buttonWrapper:[ea.l0.position.relative],button:[ea.l0.height(32),ea.l0.width(32),ea.l0.borderRadius()],resourcesUpsell:[(0,nf.uW)({size:12,variant:"nofill"}),(0,cG.E)({colorway:"yellow",clickable:!0,iconLeft:!0,iconRight:!1,variant:"muted"}),ea.l0.px(4),ea.l0.height(24),ea.l0.borderRadius(),ea.l0.position.relative,(0,el._)({},ea.BC.max("tabletMax"),{span:{display:"none"}})],alertDialogWrapper:[ea.l0.position.relative],alertDialogCloseButton:[ea.l0.position.absolute,ea.l0.top(8),ea.l0.right(8),ea.l0.zIndex(1)]}),sb=function(e){return"\n0% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 ".concat(e,";\n}\n\n70% {\n  transform: scale(1);\n  box-shadow: 0 0 0 6px transparent;\n}\n\n100% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 transparent;\n}\n")},sx=(0,Q.F4)(sb(ea.TV.orangeDefault)),sZ=(0,Q.F4)(sb(ea.TV.redDefault)),sw={position:"absolute",width:8,height:8,borderRadius:"50%",top:-4,right:-4,outline:"2px solid "+ea.TV.backgroundRoot,borderStyle:"solid"},sC=(0,eO.X)({base:[sw,{backgroundColor:ea.TV.backgroundRoot}],warningColors:[sw,{backgroundColor:ea.TV.orangeStronger,animation:"".concat(sx," 2s infinite"),outlineColor:"transparent"}],dangerColors:[sw,{backgroundColor:ea.TV.redStronger,animation:"".concat(sZ," 2s infinite"),outlineColor:"transparent"}]});function s_(e,n){e.preventDefault();var t={x:e.pageX,y:e.pageY},r={x:0,y:0};n.start&&n.start({mouse:t,shiftKey:e.shiftKey});var i=function(e){var i={x:e.pageX,y:e.pageY};r={x:i.x-t.x,y:i.y-t.y},n.move({delta:r,shiftKey:e.shiftKey,mouse:i})},o=null,a=function(e){e.preventDefault(),o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){i(e)})},l=function(){o&&cancelAnimationFrame(o),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),document.removeEventListener("touchcancel",l),n.end&&n.end({delta:r,shiftKey:e.shiftKey})};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l),document.addEventListener("touchcancel",l)}var sk=t(63066),sS=t(11120),sI=t(27022),sR=(0,rc.$)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),sG=sR.cssVars,sE=sR.styleTokens,sT=(0,eO.X)({root:[ea.l0.center,ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0),{transform:"translate(".concat(sE.transformX,", ").concat(sE.transformY,")"),width:sE.width,height:sE.height,cursor:sE.cursor,zIndex:sE.zIndex,"&:hover":{zIndex:i3.M.gutterHovered},"& .icon":{transform:"rotate(".concat(sE.rotation,")")},"&:hover .blanket":{transform:"scale(".concat(sE.hoverScaleX,", ").concat(sE.hoverScaleY,")")},"&:active .blanket":[ea.l0.height("200vh"),ea.l0.width("200vw"),{transform:"translate(-50%, -50%)"}],"&:not(:active):hover > .grip":(0,el._)({},sG.gripColor,ea.TV.foregroundDefault)}],blanket:ea.l0.coverContainer,grip:[ea.l0.borderRadius(4),{width:sE.gripWidth,height:sE.gripHeight,visibility:sE.gripVisibility,background:sE.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]});function sD(e){var n=(0,et.useRef)(null),t=(0,sS.T)();(0,rl.j)(n,e.size,function(e){var n,t=e.width,r=e.height;return n={},(0,el._)(n,sG.width,t+"px"),(0,el._)(n,sG.height,r+"px"),n}),(0,rl.j)(n,e.position,function(e){var n,t=e.x,r=e.y;return n={},(0,el._)(n,sG.transformX,Math.round(t)+"px"),(0,el._)(n,sG.transformY,Math.round(r)+"px"),n}),(0,rl.j)(n,e.rotation,function(e){return(0,el._)({},sG.rotation,e+"deg")}),(0,rl.j)(n,e.gripIsHidden,function(e){return(0,el._)({},sG.gripVisibility,e?"hidden":"visible")}),(0,rl.j)(n,e.length,function(e){return(0,el._)({},sG.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")});var r=(0,sk.y)()?3:2;return(0,rl.j)(n,e.isStacked,function(e){var n;return n={},(0,el._)(n,sG.cursor,e?"row-resize":"col-resize"),(0,el._)(n,sG.hoverScaleX,(e?1:r).toString()),(0,el._)(n,sG.hoverScaleY,(e?r:1).toString()),n}),(0,rl.j)(n,e.isActive,function(e){var n;return n={},(0,el._)(n,sG.gripColor,e?"radial-gradient(circle, ".concat(ea.TV.accentPrimaryDefault," calc(100% - 48px), transparent)"):ea.TV.outlineDimmest),(0,el._)(n,sG.zIndex,(e?i3.M.gutterActive:i3.M.gutter).toString()),n}),(0,rl.j)(n,e.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,el._)(n,sG.gripWidth,t+"px"),(0,el._)(n,sG.gripHeight,r+"px"),n}),n}var sP=(0,et.memo)(function(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w=(d=rB(n=e.handleId),f=re(p=rU(n)),h=rn(p),v=rA(n),m=(t=rB(n),(0,nO.Z)(function(){return(0,tw.kv)(t,function(e){return!!e.snapped})},[t])),g=rO(n),y=(r=re(rU(n)),i=rO(n),(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(r),t=n.width,o=n.height;return e(i)?t:o})},[r,i])),b=(o=rB(n),(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(o),t=n.snapped,r=n.stacked;return"right"===t?r?180:90:"left"===t?r?0:270:0})},[o])),x=(a=rO(n),l=rA(n),c=re(rU(n)),(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(c),t=n.width,r=n.height,i=e(l);return e(a)?{width:i?t:24,height:2}:{height:i?r:24,width:2}})},[c,a,l])),Z=(u=re(rU(n)),s=rO(n),(0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(u),t=n.width,r=n.height;return(e(s)?t:r)<24})},[u,s])),{handle:i2(d),size:i2(f),position:i2(h),isActive:i2(v),isSnapped:i2(m),isStacked:i2(g),length:i2(y),rotation:i2(b),gripSize:i2(x),gripIsHidden:i2(Z)}),C=sD(w),_=i4(rP),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,et.useRef)(e),t=i4(i_),r=i8(tj);return(0,et.useCallback)(function(i){if(i.snapped){t({leftPath:i.leftPath,percent:n.current});return}Promise.resolve(r()).then(function(r){var o=ti(r,i.leftPath);if(!o||!tn(o))throw Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})})},[e,t,r])}(),S=(0,et.useRef)(null),I=(0,cZ.Z)(w.isSnapped);return(0,$.BX)(eo.G,{innerRef:C,css:sT.root,onDoubleClick:function(){k(w.handle.current)},onPointerDown:function(e){s_(e,{start:function(){var e=w.handle.current;S.current=document.activeElement,_({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){_({type:"update",moveDelta:e.delta})},end:function(){var e,n;_({type:"end"}),null===(n=S.current)||void 0===n||null===(e=n.focus)||void 0===e||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,$.tZ)(eo.G,{className:"blanket",css:sT.blanket}),I?(0,$.tZ)(sI.Z,{className:"icon"}):(0,$.tZ)(eo.G,{className:"grip",css:sT.grip})]})}),sB=(0,et.memo)(function(){var e,n,t=sD((e=re(rH),n=rn(rH),{size:i2(e),position:i2(n),isActive:i2(rF),length:i2(rj),gripSize:i2(rV),isStacked:i2(az),gripIsHidden:i2(az),rotation:i2(aN)})),r={start:i4(rW),update:i4(rz),end:i4(rN)},i=aF().toggle,o=(0,et.useRef)(null);return(0,$.BX)(eo.G,{innerRef:t,css:sT.root,onDoubleClick:function(){i()},onPointerDown:function(e){s_(e,{start:function(){o.current=document.activeElement,r.start()},move:function(e){var n=e.delta;r.update({deltaX:n.x})},end:function(){var e,n;r.end(),null===(n=o.current)||void 0===n||null===(e=n.focus)||void 0===e||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,$.tZ)(eo.G,{className:"blanket",css:sT.blanket}),(0,$.tZ)(eo.G,{className:"grip",css:sT.grip})]})}),sU=t(55927),sA=t(5363),sO=t(39475),sX=t(74977),sL=t(4502),sM=t(288),sW=t(75039),sz=t(74203);function sN(){var e=(0,eb._)(["\n  query ReplEnvironmentDesktopSidebarContent {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return sN=function(){return e},e}var sF={},sV=(0,ex.Ps)(sN(),sz.$),sH=t(71358),sj=t(12904),sY=t(47664),sq=t(78711);function sK(){var e=(0,eb._)(["\n  query workspaceMultiplayersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n      fullName\n    }\n  }\n"]);return sK=function(){return e},e}var sJ={},s$=(0,ex.Ps)(sK()),sQ=t(51585),s0={type:"context",icon:(0,$.tZ)(le.Z,{}),label:"",description:"Search"},s1=(0,Q.iv)([ea.l0.top(0),ea.l0.left(0),ea.l0.width("100%"),ea.l0.zIndex(3),{"& > div:first-of-type > div:first-of-type":[ea.l0.pl(0),ea.l0.pr(0),ea.l0.pt(0)]},{'& [role="listbox"]':[ea.l0.pl(8),ea.l0.position.absolute,ea.l0.top(40),ea.l0.height("calc(100% - ".concat(40,"px)")),ea.l0.left(0),ea.l0.width("100%"),ea.l0.zIndex(3),ea.l0.backgroundColor.backgroundRoot]},{'& [role="option"] > div':[ea.l0.borderRadius(8)]}]);function s2(){var e,n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m=(e=(0,eu.Z)().fs,n=(0,es.AA)(),t=(0,a3.T)(),i=lo(r=aO()),o=(0,sj.s6)(sY.Y.SidebarSearch),a=aB(),c=ll(l=(0,et.useCallback)(function(e){(0,eh.j)(eh.U3.TOOL_OPENED,{source:"Sidebar Search",tool:e.pane.type}),a(e)},[a])),u=ln(l),s=li(l),d=ep(aO()),p=(0,ng.aG)(),h=(0,J._)((f=(0,ey._)({},sJ,void 0),sq.t(s$,f)),1)[0],v=(0,nO.Z)(function(){return{data:{type:"context",label:"Multiplayers",icon:(0,$.tZ)(e1.Z,{})},commands:(0,ev._)(function(){var e,n,t,r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:if(!p.length)return[2,[]];return[4,h({variables:{ids:p.map(function(e){return e.id}).slice(0,sQ.I)}})];case 1:if(!(e=i.sent().data))return[2,[]];return n=p.reduce(function(e,n){return e[n.id]=n.color,e},{}),t=e.currentUser,r=e.usersByIds.filter(function(e){return e.id!==(null==t?void 0:t.id)}).map(function(e){return{match:nH.pl,data:{type:"action",label:e.username,icon:(0,$.tZ)(eo.G,{style:{border:"2px solid",borderColor:n[e.id],borderRadius:"50%",width:20,height:20},children:(0,$.tZ)(eB.q,{size:16,src:e.image,username:e.username,fullName:e.fullName})}),run:function(){return d({username:e.username,id:e.id})}}}}),p.length>sQ.I&&r.push({match:nH.pl,data:{type:"action",label:"+".concat(p.length-sQ.I," more"),icon:(0,$.tZ)(e1.Z,{}),run:function(){}}}),[2,r]}})})}},[p,d,h]),(0,nO.Z)(function(){var a={data:{type:"context",label:aV.cE,icon:(0,$.tZ)(aY.Z,{})},commands:c},l=(0,nj.i)({openFile:r,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return l.match=void 0,{data:s0,commands:function(){return[i(),l,a,v,u,s,{data:{type:"group",key:"extensions"},commands:(0,ev._)(function(){var e;return(0,em.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(o.map((t=(0,ev._)(function(n){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,sH.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}]}}},[e,c,i,t,r,n,v,u,s,o]));return(0,$.tZ)(eo.G,{css:s1,children:(0,$.tZ)(nB.X,{command:m,openOnInput:!0})})}var s4=t(70501);function s8(e){var n=e.sections,t=e.id,r=n.findIndex(function(e){return e.id===t});if(-1===r)throw Error("");var i=n[r],o=i.height;i.height=0;var a=n.slice(r),l=n.slice(0,r).reverse(),c=!0,u=!1,s=void 0;try{for(var d,p=(0,ec._)(a).concat((0,ec._)(l))[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;if(0!==f.height){f.height+=o;return}}}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}}var s3=(0,et.createContext)(void 0);function s5(){var e=(0,et.useContext)(s3);if(!e)throw Error("Expected store in context");return e}function s6(e){var n=s5();return(0,rs.Dv)(e,{store:n})}var s7=function(e){var n=s5();return(0,rs.b9)(e,{store:n})};function s9(e){var n=(0,J._)((0,et.useState)(function(){return(0,nX.MT)()}),1)[0];return(0,$.tZ)(s3.Provider,{value:n,children:e.children})}var de=(0,nX.cn)({}),dn=(0,nX.cn)(null,function(e,n,t){n(de,function(e){return(0,tX.Uy)(e,function(e){e[t.id]=t.preferredHeight})})}),dt=(0,tw.O4)("replEnvironmentDesktopSidebarSections",[]),dr=(0,nX.cn)(null,function(e,n,t){try{n(dt,t)}catch(e){uX.Tb(e)}}),di=(0,nX.cn)(0);function da(e,n){return e.map(function(e){return{id:e.id,height:e.percent/100*n}})}var dl=(0,nX.cn)(null,function(e,n,t){var r=t.height-36*t.sections.length;n(di,t.height);var i=e(dt);if(i.length!==t.sections.length){n(dr,da(t.sections,r));return}for(var o=[],a=i.map(function(e){return e.height}).reduce(function(e,n){return e+n},0),l=0;l<i.length;l++){if((null===(c=i[l])||void 0===c?void 0:c.id)!==(null===(u=t.sections[l])||void 0===u?void 0:u.id)){n(dr,da(t.sections,r));return}var c,u,s=i[l];o.push((0,ny._)((0,ey._)({},s),{percent:0===a?0:s.height/a*100}))}n(dr,da(o,r))}),dc=(0,tw.kv)(dt,function(e){return e.map(function(e){return e.id})},tF()),du=(0,nX.cn)(null,function(e,n,t){n(di,t),n(dr,function(e){return(0,tX.Uy)(e,function(e){var n=e.reduce(function(e,n){return e+n.height},0),r=t-36*e.length-n,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(u.height>0){var s=0===n?0:u.height/n;u.height=Math.max(0,u.height+r*s)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}),ds=(0,nX.cn)(null,function(e,n,t){var r=e(dt),i=e(de)[t],o=r.find(function(e){return e.id===t});if(!o)throw Error("");if(0===o.height){n(dt,(0,tX.Uy)(r,function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex(function(e){return e.id===r});if(-1===i)throw Error("Expected sectionIndex");var o=n.reduce(function(n,t){return n+(t.height+e.headerHeight)},0),a=e.totalHeight-o,l=n[i];if(a>0){l.height=a;return}var c=n.slice(i+1).find(function(e){return e.height>0})||n.slice(0,i).reverse().find(function(e){return e.height>0});if(c){if(void 0!==t&&t<c.height){l.height=t,c.height-=t;return}l.height=c.height,c.height=0}}({sections:n,id:t,totalHeight:e(di),headerHeight:36,preferredHeight:i})}));return}n(dn,{id:o.id,preferredHeight:o.height}),n(dt,(0,tX.Uy)(r,function(e){return s8({sections:e,id:t})}))});function dd(e){return s6((0,nO.Z)(function(){return(0,nX.cn)(function(n){var t;return(null===(t=n(dt).find(function(n){return n.id===e}))||void 0===t?void 0:t.height)===0})},[e]))}var dp=(0,nX.cn)(null),df=(0,nX.cn)(null,function(e,n,t){var r=e(dt);if("start"===t.type){var i=r.find(function(e){return e.id===t.id});if(!i)throw Error("");n(dp,{id:t.id,heightStart:i.height,sectionStart:r});return}var o=e(dp);if(!o)throw Error("");if("update"===t.type){var a=e(di);n(dt,(0,tX.Uy)(o.sectionStart,function(e){var n=o.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce(function(n,t){return n+(t.height+e.headerHeight)},0),i=n.findIndex(function(e){return e.id===t});if(-1===i)throw Error("Expected sectionIndex");var o=r+n.slice(i).reduce(function(e,n){return e+n.height},0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),u=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var s=!0,d=!1,p=void 0;try{for(var f,h=n.slice(i+1)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var v=f.value;if(0!==v.height){if(v.height<u){u-=v.height,v.height=0;continue}v.height-=u;break}}}catch(e){d=!0,p=e}finally{try{s||null==h.return||h.return()}finally{if(d)throw p}}return}var m=n[i+1];if(e.height>=0){a.height=e.height,m&&(m.height+=u);return}var g=a.height;a.height=0;var y=-1*e.height,b=!0,x=!1,Z=void 0;try{for(var w,C=n.slice(0,i).reverse()[Symbol.iterator]();!(b=(w=C.next()).done);b=!0){var _=w.value;if(_.height>y){g+=y,_.height-=y;break}g+=_.height,y-=_.height,_.height=0}}catch(e){x=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(x)throw Z}}m&&(m.height+=g)}({headerHeight:36,totalHeight:a,sections:e,id:o.id,height:n})}));return}n(dt,(0,tX.Uy)(r,function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||s8({sections:e,id:a.id})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}})),n(dp,null)}),dh=(0,nX.cn)(function(e){return!!e(dp)});function dv(e){var n=e.id;return s6((0,nO.Z)(function(){return(0,nX.cn)(function(e){var t;return(null===(t=e(dp))||void 0===t?void 0:t.id)===n})},[n]))}var dm=t(77862),dg=t(36365),dy=t(32862),db=t(39864),dx=t(78377),dZ=t(64393),dw=t(99450),dC=t(59249),d_=t(31892),dk=t(54556),dS=t(40509),dI=t(21625),dR=t(30826),dG=t.n(dR),dE=t(10495),dT=t(72333),dD=t(34357),dP=t(47336),dB=t.n(dP);function dU(){var e=(0,eb._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return dU=function(){return e},e}function dA(){var e=(0,eb._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return dA=function(){return e},e}var dO=(0,ex.Ps)(dU()),dX=(0,ex.Ps)(dA(),dO),dL=(0,eO.X)({root:[ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.px(8),{textDecoration:"none"}],info:[ea.l0.colWithGap(2),ea.l0.flex.growAndShrink(1)],meta:{fontSize:10}});function dM(e){var n=e.repl,t=e.height,r=e.isActive,i=e.search,o=n.title,a=(0,et.useMemo)(function(){return i?a$.Z.match(i,o):null},[i,o]);return(0,$.tZ)(dB(),{legacyBehavior:!0,href:n.url,passHref:!0,children:(0,$.BX)(eo.G,{tag:"a",style:{height:t},css:dL.root,children:[(0,$.tZ)(dT.ZP,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,$.BX)(eo.G,{css:dL.info,children:[(0,$.tZ)(aJ.x,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,$.BX)(eA.xv,{css:dL.meta,color:"dimmest",multiline:!1,children:[n.owner.username," â€¢ edited ",(0,dE.F)(n.timeUpdated)]})]})]})})}function dW(){return(dW=(0,ev._)(function(e){var n;return(0,em.Jh)(this,function(t){switch(t.label){case 0:if(!ry.l)throw Error("Expected apolloClient");return[4,ry.l.query({query:dX,variables:e})];case 1:return[2,(null===(n=t.sent().data.currentUser)||void 0===n?void 0:n.search.repls.filter(function(e){return!!e.owner}))||[]]}})})).apply(this,arguments)}var dz=t(17198),dN=t(2049),dF=t(15434),dV=t(1383),dH=t(90155),dj=t(79050),dY=["isLayoutStacked","fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","chatAudioNotification","multiselectModifierKey","completeCodeEngine","codeSuggestion","chatEngine","ghostwriterUseAdvancedModel"],dq=t(55814),dK=t(79125),dJ=t(25165),d$=t(84126),dQ=t(77847),d0=t(84522),d1=t(75993),d2={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,el._)({},e4.Bd.DesktopApp,(0,nA.l2)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,el._)({},e4.Bd.DesktopApp,(0,nA.l2)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,el._)({},e4.Bd.DesktopApp,(0,nA.l2)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,el._)({},e4.Bd.DesktopApp,(0,nA.l2)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,el._)({},e4.Bd.DesktopApp,(0,nA.l2)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,nA.l2)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:nY.q},run:{id:"repl.run",name:"Run Repl",default:(0,nA.l2)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,nA.l2)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,nA.l2)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,el._)({},e4.Bd.DesktopApp,(0,nA.l2)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,nA.l2)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},d4=Object.values(d2),d8=(0,et.memo)(function(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m=e.isAdmin,g=e.isSubscribed,y=ld(),b=(0,J._)((0,et.useState)(!1),2),x=b[0],Z=b[1],w=(0,es.AA)(),C=(0,eu.Z)(),_=C.fs,k=C.container,S=C.runner,I=(0,dZ.g)(),R=I.fork,G=I.isForking,E=(0,lb.L7)(S),T=(0,a3.T)(),D=aO(),P=i4(iH),B=i4(ij),U=i4(iW),A=i4((n=(0,es.gv)(),(0,nO.Z)(function(){return(0,nX.cn)(null,function(e,t){var r=n();if(r){t(iV,[r.pane]);var i=e(tL);i&&t(tW,i)}})},[n]))),O=i4(o3),X=i4(iY),L=i4(tW),M=i1(tL),W=i1((0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(tL);if(!n)return null;var t=to(e(tj),n);return t?t.paneGroup.id:null})},[])),z=i4(an),N=aX().toggleMaximizePane,F=i4(iZ),V=i4(ib),H=i4(o8),j=i4(iw),Y=(0,a6.Y6)(M),q=(0,dw.Wd)("replUrl","string"),K=(0,ef.Z)(),Q=(0,cx.Z)(),ee=i8(t1),en=aB(),er=i4(ah),eo=(0,d0.Z)(),ea=(0,dQ.Z)(),ep=(0,dI.Z)(k),eg=(0,lw.Z)().showNotice,ey=(0,dK.Z)(),eb=ey.openInVSCode,ex=ey.onConfirmConfig,eZ=ey.isConfigModalOpen,ew=ey.closeConfigModal,eC=dG()(function(e){return(0,eh.j)(eh.U3.PROJECT_RAN,{replId:K,placement:e})},500);(0,nU.Il)(function(){return[d2.saveAllFiles.id,function(){_.flush(void 0,iD.WL.MANUAL_SAVE)}]},[_]),(0,nU.Il)(function(){return[d2.newTab.id,function(){return P()}]},[P]),(0,nU.Il)(function(){return[d2.nextTab.id,function(){return X("next")}]},[X]),(0,nU.Il)(function(){return[d2.previousTab.id,function(){return X("previous")}]},[X]),(0,nU.Il)(function(){return[d2.closeTab.id,function(){return B()||ee()>0}]},[B,ee]),(0,nU.Il)(function(){return[d2.reopenClosedTab.id,function(){return A()}]},[A]),(0,nU.Il)(function(){return[d2.moveTabUpGroup.id,function(){return U("above")}]},[U]),(0,nU.Il)(function(){return[d2.moveTabRightGroup.id,function(){return U("rightOf")}]},[U]),(0,nU.Il)(function(){return[d2.moveTabLeftGroup.id,function(){return U("leftOf")}]},[U]),(0,nU.Il)(function(){return[d2.moveTabDownGroup.id,function(){return U("below")}]},[U]),(0,nU.Il)(function(){return M?[d2.keepTab.id,function(){return L(M)}]:void 0},[M,L]),(0,nU.Il)(function(){return M?[d2.insertPaneGroupUp.id,function(){return j({paneId:M,placement:"above",autoFocus:!0})}]:void 0},[M]),(0,nU.Il)(function(){return M?[d2.insertPaneGroupRight.id,function(){return j({paneId:M,placement:"rightOf",autoFocus:!0})}]:void 0},[M]),(0,nU.Il)(function(){return M?[d2.insertPaneGroupLeft.id,function(){return j({paneId:M,placement:"leftOf",autoFocus:!0})}]:void 0},[M]),(0,nU.Il)(function(){return M?[d2.insertPaneGroupDown.id,function(){return j({paneId:M,placement:"below",autoFocus:!0})}]:void 0},[M]),(0,nU.Il)(function(){return[lp.id,function(){return y()}]},[y]);var e_=(0,nU.gf)(d2.findFile.id);(0,nU.Il)(function(){return[d2.findFile.id,function(){return y(nj.i({openFile:D,fs:_,shouldHideFile:T,getRecentFiles:w,keyboardShortcut:e_}))}]},[y]);var ek=(0,ei.P5)({controlName:"flag-command-bar-improvements"}),eS=la({type:"files"});lf(nj.i({openFile:D,fs:_,shouldHideFile:T,getRecentFiles:w,getCurrentlyOpenFilePanesCommands:ek?eS:void 0,hasFlagCommandBarImprovements:ek,keyboardShortcut:e_}));var eI=(0,nU.gf)(d2.searchFileContents.id),eR=aF();(0,nU.Il)(function(){return[d2.searchFileContents.id,function(){(0,eh.j)(eh.U3.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==Y?void 0:Y.type)==="codeEditor"&&(n=null===(e=Y.getCurrentSelectionText)||void 0===e?void 0:e.call(Y)),eR.openCodeSearch({initialQuery:n})}]},[Y,y,D]),(0,nU.Il)(function(){return M?[d2.toggleFloatPaneGroup.id,function(){return z(M)}]:void 0},[M]),(0,nU.Il)(function(){return M?[d2.toggleMaximizePaneGroup.id,function(){return N(M)}]:void 0},[M]),(0,nU.Il)(function(){return W?[d2.removePaneGroup.id,function(){F({paneGroupId:W}),H()}]:void 0},[W]),(0,nU.Il)(function(){return M?[d2.removeOthersInPaneGroup.id,function(){V(M)}]:void 0},[M]),(0,nU.Il)(function(){return[d2.moveFocusUp.id,function(){return O("above")}]},[]),(0,nU.Il)(function(){return[d2.moveFocusDown.id,function(){return O("below")}]},[]),(0,nU.Il)(function(){return[d2.moveFocusRight.id,function(){return O("rightOf")}]},[]),(0,nU.Il)(function(){return[d2.moveFocusLeft.id,function(){return O("leftOf")}]},[]);var eG=(0,ei.P5)({controlName:"flag-modal-panes"});lf(ln(function(e){if(eG){er(e.pane);return}en(e)})),lf(li(function(e){if(eG){er(e.pane);return}en(e)}));var eE=(0,ei.P5)({controlName:"flag-remove-command-bar-file-contents-search"});lf(nY.F({container:k,keyboardShortcut:eI,openFile:D,activeOnly:eE,hasFlagCommandBarImprovements:ek})),(0,nU.Il)(function(){if(E!==sv.Ah.OFFLINE)return[d2.run.id,function(){E===sv.Ah.RUNNING&&S.stopRun(),eC("shortcut_cmd_enter"),S.run()}]},[E]);var eT=(0,nU.gf)(d2.run.id);return lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(ci.Z,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){lj.X.openNewWindow()}}},{enabled:Q}),lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(db.Z,{}),label:"Run",description:"Run Repl",run:function(){S.run()},keyboardShortcut:eT}},{enabled:E===sv.Ah.IDLE}),lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(dx.Z,{}),label:"Stop",description:"Stop Repl",run:function(){S.stopRun()}}},{enabled:E===sv.Ah.RUNNING}),lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(dS.Z,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){k.exec("kill","1")}}},{enabled:m}),lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(dC.Z,{}),label:"Open development URL",run:function(){if(!ep)throw Error("Expected dotdevUrl");window.open(ep,"_blank")}}},{enabled:!0}),lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(dk.Z,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!q)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(q);window.open(e,"_blank")}}},{enabled:!Q}),lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(dq.Z,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,eh.j)(eh.U3.OPEN_IN_VSCODE_CLICKED,{source:"command_bar"}),eb()}}},{enabled:!!eo&&g}),lf({match:ek?nH.aZ:nH.pl,data:{type:"action",icon:(0,$.tZ)(d$.Z,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!eo)throw Error("Expected sshConfig");var e=eo.sshPort,n=eo.sshUser,t=eo.sshHostname,r="ssh -i ".concat(ea,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,eh.j)(eh.U3.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,d1.Z)(r),eg("Copied SSH command")}}},{enabled:!!eo&&g}),lf((r=(t={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,i=t.onRun,o=(0,ed.Z)(i),a=(0,ei.P5)({controlName:"flag-command-bar-improvements"}),(0,nO.Z)(function(){return{match:a?(0,nH.r0)({defaultScore:a9.L.myRepls}):(0,nH.zf)({defaultScore:.5}),data:{type:"context",label:"My Repls",icon:(0,$.tZ)(dD.Z,{}),description:r},commands:function(e){var n=e.search,t=e.active;return(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:if(!t)return[2,[]];return[4,function(e){return dW.apply(this,arguments)}({query:n,count:50})];case 1:return[2,e.sent().map(function(e){var t,r,i,a;return r=(t={repl:e,search:n,run:function(){return o.current(e)}}).repl,i=t.search,a=t.run,{match:function(){return{score:1,render:{height:44,content:(0,$.tZ)(dM,{repl:r,height:44,search:i})}}},data:{type:"action",label:r.title,icon:(0,$.tZ)(dT.ZP,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return a(r)}}}})]}})})()}}},[r,o,a]))),lf({match:ek?(0,nH.r0)({defaultScore:a9.L.fork}):(0,nH.zf)({defaultScore:.5}),data:{type:"action",label:"Fork",icon:(0,$.tZ)(d_.Z,{}),description:"Fork Repl",run:function(){G||R()}}}),lf({match:ek?(0,nH.r0)({defaultScore:a9.L.createNewRepl}):(0,nH.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,$.tZ)(aj.Z,{}),description:"Create a new Repl",run:function(){Z(!0)}}}),l=(0,ei.P5)({controlName:"flag-settings-command",default:!1,type:"boolean"}),u=(c=dz.Gn.apply(void 0,(0,ec._)(dY))).preferences,s=c.update,d=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,eh.j)(eh.U3.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),s(e)},f=(p=(0,cX.F)()).setActiveTheme,h=p.theme,lf({match:(v=(0,ei.P5)({controlName:"flag-command-bar-improvements"}))?(0,nH.r0)({defaultScore:a9.L.settings,matchScoreMultiplier:a9.r.settings}):(0,nH.zf)({defaultScore:.5}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,$.tZ)(dF.Z,{})},commands:function(e){var n=e.active,t=e.search;if(!n&&!t)return[];var r={match:v?(0,nH.r0)({defaultScore:a9.L.settings,matchScoreMultiplier:a9.r.settings}):(0,nH.zf)({defaultScore:.5}),data:{type:"context",label:"Theme",icon:(0,$.tZ)(dj.Z,{}),description:"Change Replit Theme"},commands:function(){return dH.T.map(function(e){return{match:v?(0,nH.r0)({defaultScore:a9.L.settings,matchScoreMultiplier:a9.r.settings}):(0,nH.zf)({defaultScore:.5}),data:{type:"action",label:e.title,icon:h.id===e.id?(0,$.tZ)(dV.Z,{}):(0,$.tZ)(dF.Z,{opacity:0}),description:"Use "+e.title+" theme "+(h.id===e.id?" (current)":""),run:function(){f(e.id)}}}})}},i=Object.values(dN.z2).filter(function(e){return -1!==dY.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:v?(0,nH.r0)({defaultScore:a9.L.settings,matchScoreMultiplier:a9.r.settings}):(0,nH.zf)({defaultScore:.5}),data:{type:"context",label:e.name,icon:(0,$.tZ)(dF.Z,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=u[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:v?(0,nH.r0)({defaultScore:a9.L.settings,matchScoreMultiplier:a9.r.settings}):(0,nH.zf)({defaultScore:.5}),data:{type:"action",label:n.title,icon:r?(0,$.tZ)(dV.Z,{}):(0,$.tZ)(dF.Z,{opacity:0}),description:n.description,run:function(){return(0,ev._)(function(){return(0,em.Jh)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,d((0,el._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,ec._)(i).concat([r])}},{enabled:l}),(0,$.BX)($.HY,{children:[(0,$.tZ)(lH.Z,{isOpen:x,onRequestClose:function(){return Z(!1)},children:(0,$.tZ)(lV.Z,{})}),(0,$.tZ)(e$.u,{isOpen:eZ,onRequestClose:ew,centered:!0,children:(0,$.tZ)(dJ.Z,{onConfirm:ex})})]})}),d3=(0,et.createContext)({toolTourMap:{}}),d5=function(e){return(0,et.useContext)(d3).toolTourMap[e.type]},d6=function(e){var n=e.children;return(0,$.tZ)(d3.Provider,{value:{toolTourMap:{}},children:n})},d7=t(95571),d9=t(84645),pe={38:20,32:16,20:14},pn=(0,rc.$)(["background"]),pt=pn.cssVars,pr=pn.styleTokens,pi=(0,eO.X)({toolListItemTextWrapper:[ea.l0.flex.growAndShrink(1),ea.l0.rowWithGap(4),ea.l0.align.center],aiUpsellPill:[{lineHeight:10},ea.l0.height(16)],toolListItemText:[{textAlign:"left",fontSize:13}],coloredToolRecentItem:[ea.l0.viewStyle,ea.l0.reset.button,ea.l0.colWithGap(4),ea.l0.cursor.pointer,ea.l0.center,{border:"none"," .icon":nx.gU.listItem,"&:hover":[ea.l0.color.foregroundDefault],"&:active .frame":{opacity:.5},"&:focus-visible .icon":[{boxShadow:"0 0 0 2px currentColor",outline:"2px solid transparent",outlineOffset:"4px"}]}],coloredToolListItem:[ea.l0.viewStyle,ea.l0.reset.button,nx.gU.listItem,ea.l0.borderRadius(4),ea.l0.rowWithGap(6),ea.l0.cursor.pointer,ea.l0.align.center,ea.l0.pl(1),ea.l0.pr(4),ea.l0.height(24),ea.l0.color.foregroundDimmer,ea.l0.hover(ea.l0.color.foregroundDefault),{"&:active .frame":{opacity:.5}}],tooltip:[ea.l0.fontSize(13),{lineHeight:1}]});function po(e){var n=e.children,t=e.className,r=e.pill;return(0,$.BX)(eo.G,{css:pi.toolListItemTextWrapper,children:[(0,$.tZ)(eA.xv,{className:t,css:pi.toolListItemText,multiline:!1,children:n}),r]})}var pa=(0,eO.X)({root:[nx.gU.filled,ea.l0.position.relative,ea.l0.center,ea.l0.borderRadius(8),{"> svg":{filter:"drop-shadow(0 0 3px rgba(255, 255, 255, 0.5))"}},{background:pr.background,border:"none","& img":[ea.l0.borderRadius(8)]}],listView:[ea.l0.position.relative,ea.l0.center,ea.l0.borderRadius(4),{background:pr.background,border:"none","& img":[ea.l0.borderRadius(8)]}],hovered:{backgroundColor:nx.vb.interactiveBackgroundActive,"& > svg":ea.l0.color.foregroundDefault},active:[nx.gU.filled["@media (hover: hover)"][":not([disabled], [aria-disabled])"][":active"],{"& > svg":ea.l0.color.foregroundDimmer}],focused:[{boxShadow:"0 0 0 2px "+ea.TV.accentPrimaryDefault,outline:"2px solid transparent",outlineOffset:"4px"}]});function pl(e){var n=e.indicator,t=e.children,r=e.className,i=e.size,o=void 0===i?38:i,a=e.backgroundColor,l=void 0===a?ea.TV.backgroundDefault:a;return(0,$.BX)(eo.G,{className:r,css:pa.listView,style:(0,el._)({width:o,height:o},pt.background,l),children:[(0,et.cloneElement)(t,{size:pe[o]}),n?(0,$.tZ)(aQ.B,{color:n}):null]})}function pc(e){var n=e.pane,t=e.onClick,r=e.dragRef,i=e.buttonRef,o=e.onKeyDown,a=e.tabIndex,l=(0,nF.Se)(),c=l.Icon({pane:n,size:20}),u=l.getTitle(n),s=(0,e2.b2)({paneType:n.type}),d=d5(n),p=(0,dy.l)(null==d?void 0:d.buttonRef,i,r),f=(0,et.useCallback)(function(e){t(e),null==d||d.dismissTour()},[t,d]),h=void 0;return"ghostwriterChat"===n.type&&(h=ea.TV.blurpleDimmest),(0,$.tZ)(cC.u,{delay:"none",tooltip:(0,$.tZ)(eA.xv,{css:pi.tooltip,children:u}),children:(0,$.tZ)("button",{css:pi.coloredToolRecentItem,onClick:f,ref:p,onKeyDown:o,tabIndex:a,children:(0,$.tZ)(pl,{className:"icon",indicator:s,size:32,backgroundColor:h,children:c})})})}var pu={searchReplace:d2.searchFileContents,shell:d2.showShell,runnerOutput:d2.showConsole,docs:d2.showDocs,ghostwriterChat:d2.showReplitAi,preferences:d2.showSettings,git:d2.showGit};function ps(e){var n=e.name,t=(0,nU.gf)(n.id),r=(0,d7.NJ)();if(!t)return null;var i=(0,nU.Ih)(t,r);return(0,$.tZ)(eA.xv,{css:ea.l0.fontSize(13),color:"dimmest",children:i})}function pd(e){var n=e.pane,t=e.onClick,r=e.dragRef,i=e.buttonRef,o=e.onKeyDown,a=e.tabIndex,l=(0,nF.Se)(),c=l.Icon({pane:n,size:20}),u=l.getTitle(n),s=(0,e2.b2)({paneType:n.type}),d=d5(n),p=(0,dy.l)(null==d?void 0:d.buttonRef,i,r),f=(0,et.useCallback)(function(e){t(e),null==d||d.dismissTour()},[t,d]),h=pu[n.type],v=void 0,m="ghostwriterChat"===n.type;return m&&(v=ea.TV.blurpleDimmest),(0,$.BX)("button",{css:pi.coloredToolListItem,onClick:f,ref:p,onKeyDown:o,tabIndex:a,children:[(0,$.tZ)(pl,{className:"icon",indicator:s,size:20,backgroundColor:v,children:c}),(0,$.tZ)(po,{className:"text",pill:m?(0,$.tZ)(d9.A,{}):null,children:u}),h?(0,$.tZ)(ps,{name:h}):null]})}var pp=t(19805),pf=t(20314),ph=t(1169),pv=function(e){return(0,Q.iv)({"body *":{cursor:"".concat(e," !important")}})},pm=(0,Q.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),pg={"n-resize":pv("n-resize"),"ne-resize":pv("ne-resize"),"nesw-resize":pv("nesw-resize"),"s-resize":pv("s-resize"),"se-resize":pv("se-resize"),"sw-resize":pv("sw-resize"),"e-resize":pv("e-resize"),"ew-resize":pv("ew-resize"),"row-resize":pv("row-resize"),"col-resize":pv("col-resize"),grabbing:pv("grabbing")};function py(e){var n=e.cursor;return(0,$.tZ)(Q.xB,{styles:[pm,pg[n]]})}var pb=t(72287),px=t(93924),pZ=t(3440),pw={root:ea.l0.px(4),rowWrap:(0,Q.iv)([ea.l0.borderRadius(8)]),row:(0,Q.iv)([nx.gU.nofill,ea.l0.rowWithGap(8),ea.l0.p(4),ea.l0.minHeight(32),ea.l0.align.center,{transition:"initial"}]),icon:(0,Q.iv)([ea.l0.position.relative,{"& > svg":ea.l0.color.foregroundDimmer}]),textWrap:[ea.l0.colWithGap(2),ea.l0.flex.growAndShrink(1)],heading:[ea.l0.flex.growAndShrink(1),{opacity:.5}],text:[ea.l0.flex.growAndShrink(1)]};function pC(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,a=e.dragRef;return(0,$.tZ)(eo.G,{css:pw.root,children:(0,$.tZ)(e0.Tg,{elevated:r,css:pw.rowWrap,"data-search-item-surface":!0,children:(0,$.BX)(e0.Tg,{innerRef:a,css:pw.row,children:[(0,$.tZ)(eo.G,{css:pw.icon,children:t}),(0,$.BX)(eo.G,{css:pw.textWrap,children:[o?(0,$.tZ)(eA.xv,{variant:"small",color:"dimmest",css:pw.heading,multiline:!1,children:o}):null,(0,$.tZ)(eA.xv,{multiline:!1,css:pw.text,color:(null==i?void 0:i.length)?"dimmest":"default",children:(null==i?void 0:i.length)?(0,$.tZ)(pZ.xK,{style:{color:ea.TV.foregroundDimmest},matchStyle:{fontWeight:ea.TV.fontWeightBold,color:ea.TV.foregroundDefault},source:n,matches:i.map(function(e){return{column:e.from,length:e.to-e.from}})}):n})]})]})})})}var p_={root:(0,Q.iv)([ea.l0.position.absolute,ea.l0.borderRadius(8),ea.l0.minWidth(100),{"[data-search-item-surface]":ea.l0.shadow(2)}])};function pk(e){var n=e.pane,t=e.x,r=e.y,i=(0,nF.Se)(),o=i.Icon({pane:n,size:20}),a=i.getTitle(n);return(0,$.tZ)(eo.G,{css:p_.root,style:{transform:"translate(".concat(t,"px, ").concat(r,"px)")},children:(0,$.tZ)(pC,{active:!0,icon:o,title:a})})}function pS(){var e=(0,px.u)();if(!e.display)return null;var n=e.item,t=e.monitor.getSourceClientOffset();return t?(0,$.BX)($.HY,{children:[(0,$.tZ)(py,{cursor:"grabbing"}),(0,$.tZ)(pk,{pane:n.pane,x:t.x,y:t.y})]}):null}var pI=(0,Q.iv)({position:"fixed",pointerEvents:"none",zIndex:i3.M.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"});function pR(){var e=(0,pb.f)(function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}}),n=e.isDragging,t=e.itemType===pp.z.NewPane;return n&&t?(0,$.tZ)("div",{css:pI,children:(0,$.tZ)(pS,{})}):null}(a=R||(R={})).Files="files",a.Dock="dock";var pG=function(e){var n={action:"opened"};switch(uX.n_({category:"dock",message:"Opened ".concat(e)}),(0,eh.j)(eh.U3.TOOL_OPENED,{source:"Sidebar Dock",tool:e}),e){case"git":return(0,eh.j)(eh.U3.GIT_FEATURE_USED,{action:"pane-opened",source:"git-pane"});case"envEditor":return(0,eh.j)(eh.U3.ENV_EDITOR_USED,n);case"database":return(0,eh.j)(eh.U3.DATABASE_USED,{action:"opened",type:"ReplitKV",provider:"replit"});case"neon":return(0,eh.j)(eh.U3.DATABASE_USED,{action:"opened",type:"PostgreSQL",provider:"neon"});case"replAuth":return(0,eh.j)(eh.U3.AUTH_SIDEBAR_USED,n);case"packager":return(0,eh.j)(eh.U3.PACKAGE_MANAGER_USED,n);case"unitTests":return(0,eh.j)(eh.U3.REPL_UNIT_TEST_USED,n);case"debugger":return(0,eh.j)(eh.U3.DEBUGGER_USED,n);case"extensionStore":return(0,eh.j)(eh.U3.EXTENSION_STORE_VIEWED,{source:"tools-sidebar"})}};function pE(e){var n=e.pane,t=e.variant,r=aB(),i=i4(aU),o=(0,J._)((0,pf.c)({type:pp.z.NewPane,item:function(){return{type:pp.z.NewPane,pane:n,grid:!0}},end:function(){i()}}),3),a=o[1],l=o[2],c=(0,et.useRef)(null),u=(0,J._)((0,ph.XZ)(c,!1),4),s=u[0],d=u[1],p=u[2],f=u[3];return((0,ph.Ym)(d,c),(0,dg.K)(l),"recent"===(void 0===t?"default":t))?(0,$.tZ)(pc,{pane:n,dragRef:a,buttonRef:c,tabIndex:s,onKeyDown:p,onClick:function(){f(),r({pane:n}),pG(n.type)}}):(0,$.tZ)(pd,{pane:n,dragRef:a,buttonRef:c,tabIndex:s,onKeyDown:p,onClick:function(){f(),r({pane:n}),pG(n.type)}})}var pT=(0,eO.X)({grid:[ea.l0.pl(8),{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fill, minmax(".concat(60,"px, 1fr))"),gridAutoFlow:"dense"}],list:ea.l0.pl(8),recentSection:[ea.l0.position.relative,ea.l0.colWithGap(4),ea.l0.pb(8),ea.l0.pt(4)],allSection:[ea.l0.colWithGap(6)],recentRow:[ea.l0.rowWithGap(6),ea.l0.overflowX("auto"),ea.l0.px(8),ea.l0.pb(8),ea.l0.pt(4),{backgroundColor:"transparent"}],fadeLeft:[ea.l0.position.absolute,ea.l0.height(32),ea.l0.width(8),ea.l0.left(0),{background:"linear-gradient(to right, ".concat(ea.TV.backgroundRoot,", transparent)")}],fadeRight:[ea.l0.position.absolute,ea.l0.height(32),ea.l0.width(16),ea.l0.right(0),{background:"linear-gradient(to left, ".concat(ea.TV.backgroundRoot,", transparent)")}],sectionTitle:[ea.l0.fontWeight.medium,ea.l0.fontSize(10),ea.l0.pl(8),{lineHeight:1}],emptyRecentTool:[ea.l0.width(32),ea.l0.height(32),ea.l0.border({color:ea.TV.outlineDimmest,style:"dashed"}),ea.l0.borderRadius(4)],noRecentToolsFade:[ea.l0.position.absolute,ea.l0.height(32),ea.l0.width(16),ea.l0.right(0),{background:"linear-gradient(to left, ".concat(ea.TV.backgroundRoot,", transparent)")}]});function pD(e){var n=e.text;return(0,$.tZ)(eA.xv,{color:"dimmest",css:pT.sectionTitle,children:n})}var pP={title:"Tools",content:(0,$.tZ)(function(){var e,n,t=dd(R.Dock),r=(0,a5.BV)(),i=r.length,o=s7(dn);(0,et.useEffect)(function(){o({id:R.Dock,preferredHeight:Math.min(300,40*i)})},[i,o]);var a=(e=(0,a5.Li)(),n=(0,cZ.Z)(e),(0,et.useMemo)(function(){return n.filter(function(e){return r.some(function(n){return n.type===e.type})})},[n,r]));return(0,$.tZ)(d6,{panes:r,isCollapsed:t,children:(0,$.BX)($.HY,{children:[(0,$.tZ)(pR,{}),(0,$.BX)(eo.G,{css:pT.recentSection,children:[(0,$.tZ)(pD,{text:"Recent"}),(0,$.tZ)(e0.Tg,{elevated:!0,css:pT.recentRow,"aria-orientation":"horizontal",style:{overflowX:0===a.length?"hidden":void 0},children:a.length>0?(0,$.BX)($.HY,{children:[(0,$.tZ)(ph.uP,{options:{direction:"horizontal",loopAround:!0},children:a.map(function(e){return(0,$.tZ)(pE,{pane:e,variant:"recent"},"extension"===e.type?e.data.installationId:e.type)})}),(0,$.tZ)(eo.G,{css:pT.fadeLeft}),(0,$.tZ)(eo.G,{css:pT.fadeRight})]}):(0,$.BX)($.HY,{children:[Array.from({length:a5.Nd},function(e,n){return(0,$.tZ)(eo.G,{css:pT.emptyRecentTool},n)}),(0,$.tZ)(eo.G,{css:pT.noRecentToolsFade})]})})]}),(0,$.BX)(eo.G,{css:pT.allSection,children:[(0,$.tZ)(pD,{text:"All"}),(0,$.tZ)(eo.G,{role:"toolbar",css:pT.list,"aria-label":"Dock","aria-orientation":"vertical",children:(0,$.tZ)(ph.uP,{options:{direction:"vertical",loopAround:!0},children:r.map(function(e){return(0,$.tZ)(pE,{pane:e},"extension"===e.type?e.data.installationId:e.type)})})})]})]})})},{})},pB=t(46026),pU=t(91859),pA=t(96213),pO=t(59500),pX=t(25129),pL=t(55236),pM=t(60433),pW=t(12602),pz=t(17141),pN=t(96619),pF=t(73372),pV=t(31764),pH=t(29775),pj=t(20795),pY=t(92286),pq=t(4461),pK=t(44049),pJ=t(66958),p$=t(1592),pQ=t(63416),p0=t(50745),p1=t(69368),p2=t(41909);function p4(e){return{match:nH.pl,data:{type:"action",label:"Rename",icon:(0,$.tZ)(cA.Z,{}),run:e}}}function p8(e){return[{label:"Copy file path",icon:(0,$.tZ)(pj.Z,{}),run:function(){return(0,d1.Z)(e)}},{label:"Copy link",icon:(0,$.tZ)(pJ.Z,{}),run:function(){return(0,d1.Z)((0,p0.dr)({path:e}))}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:nH.pl,data:{type:"action",label:n,icon:t,run:r}}})}function p3(e){return{match:nH.pl,data:{type:"action",icon:(0,$.tZ)(u6.Z,{color:ea.TV.redDefault}),label:"Delete",run:e}}}function p5(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,$.tZ)(nb.Z,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var p6=/[*]{2}\/[*]\.([a-z0-9.]+)/,p7=t(55055),p9=t(38057),fe=t(35116),fn=t(55642),ft=t(49580),fr=t(10378),fi=t(75588),fo=t(8812);function fa(e){var n=e.filetree,t=(0,ef.Z)(),r=(0,e2.OM)(),i=(0,e2.t9)(),o=(0,et.useRef)(null),a=(0,et.useRef)(null),l=i4(iI),c=(0,p7.Z)(),u=(0,et.useCallback)(function(){var e=[{icon:(0,$.tZ)(fe.Z,{}),label:fr.st.UploadFile.text,run:function(){o.current&&(o.current.click(),(0,p1.Z)({replId:t,action:"uploaded",fileType:iD.Tv.File}))}}];return c&&e.push({icon:(0,$.tZ)(fn.Z,{}),label:fr.st.UploadFolder.text,run:function(){a.current&&(a.current.click(),(0,p1.Z)({replId:t,action:"uploaded",fileType:iD.Tv.Directory}))}}),e.push({icon:(0,$.tZ)(ag.Z,{}),label:fr.st.OpenPane.text,run:function(){l({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{icon:(0,$.tZ)(p9.Z,{}),label:fr.st.DownloadZip.text,run:function(){return(0,fo.R)(t)}},{icon:i?(0,$.tZ)(pK.Z,{}):(0,$.tZ)(na.Z,{}),label:i?fr.st.HideHiddenFiles.text:fr.st.ShowHiddenFiles.text,run:function(){r(!i)}}),n.getExpandedDirs()&&e.push({icon:(0,$.tZ)(pY.Z,{}),label:"Collapse all",run:function(){var e=n.getExpandedDirs();e&&n.collapse((0,ec._)(e))}}),{data:{type:"context",label:"Search actions",icon:(0,$.tZ)(le.Z,{})},commands:function(){return e.map(function(e){return{match:nH.pl,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}})}}},[i,r,t,c,l,n]),s=(0,pO.av)().openContextMenu,d=(0,et.useRef)(null);return(0,$.BX)($.HY,{children:[(0,$.tZ)(cR.hU,{alt:"menu",tooltipBehavior:"hidden",ref:d,onClick:function(){return d.current&&s({target:d.current,command:u()})},children:(0,$.tZ)(ft.Z,{})}),(0,$.tZ)(fi.Q,{fileUploadInputRef:o,dirUploadInputRef:a,uploadFiles:n.upload})]})}function fl(e){var n="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(n,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(n,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(n,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}function fc(){return(fc=(0,ev._)(function(e){var n,t,r,i,o,a,l;return(0,em.Jh)(this,function(c){var u,s;switch(c.label){case 0:return n=e.fs,r=void 0===(t=e.language)?"python3":t,[4,n.createDir(".lesson")];case 1:if((i=c.sent()).error)return[2,i];return[4,n.writeFile(".lesson/assets/logo.png",a7.Z.from("iVBORw0KGgoAAAANSUhEUgAAATcAAABeCAYAAABGrlMUAAAACXBIWXMAAAWJAAAFiQFtaJ36AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABiXSURBVHgB7Z1bcxNXtseXuGM4FTGVPOakzWuqDnISLoEHBHlJKtTBwxSvg8kHiO18gCCfDwBmPgCIvKZOEFNJpSpViZs8hEAYbOZ9cFN5SkgFpwowd83/397tacu9+yJ1y5K8flVtyeqL1N27/3vttfZeW0RRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEWJoCSKouRKtVqVx48fO1Hrtm3btuC67oIohbNJFEXJDSNsw81m807U+kePHk3hpSZK4XRd3A4cOOC8fPmygptfLpVKDpYyPn6F6/DZXfPqcdm5c+ec1nLKeuTkyZPieV4Fz8do1PoNGzbM//jjj5ekDWq1muC5Kj948KAStX5QnruuixvNctRsCxCvN7A4WPbgBvoXGa8Sfl1cXJT9+/d7eDuH7Rq4oVdxQz1RlAHn3r17fBnBs3Amaj2ehxm8tCVuEC5alyMbN278LurQEL2j3Ez6nELEbe/evb5l1vo5bhRrAw8C5Uro4tGaw0sVFt3xiJqK62jhjeKYFDsK3bQKnaIoceQqbhCpKoSHNU3Vto2xxvh2DosHQXOfP39+++bNm3X8X4fPooxaZdQcx4k4BE31uhG6Ot5PqcgpitJKLuJmRO0clkqG3bhtBRaYb6nt27dvAULlwuHauHHjRh0f1VOI5RjWj6nIKYrSygbpADYnISwzpv2fRdhWYQILo7TKcMx5iB1Fzbt+/foRfHaa72N2p8jNYL8JURRFkQ7EDUIyjiblrMQ0QTuAPrYaBQsidwoWWf3Jkycj+Px83D5YzlFsjQ9PUZR1TGZxo08MAnIRb6eNtVUkjrHkZhFlLcOKm0AzdhKiFxemZlN25p133qmKoijrlkziRosIAQE2QcekuzD6OsMo7LVr16bx/ojEN1MdhLlnTNNWUZR1SGpxo7Dl4VvrAAdWG5uc1Z9++mkOFt2RBAuOfryaCpzSj3Ckw44dOy6jDA9blo9EiSVVtDQkbI6sLWX8jsuw4I7ADzfHV3w2E9c8NgIniMBOiaL0CRxFABbMorRBouXWQ8IWUIYFd5m/ixYcmp+JoqUWnKKsPxLFjZaS9I6wBVBwGdQQ44NrJO1gBG5UFEVZF8Q2SxGlPCcZfWz0g0FIOPrg9suXL+kbW4CltcK0fvHiBaOgDt4G40odyU6V3UTQ3Lz09OnT01u2bKkmRW+x/iIsvjnt7Ksog49V3ODPGsNLqk6xRtAuYWlcv37dlYwEY0txnFOSod8crTE4Xq8wgwGOcd6MZoijbCzREVEUZaCJFDfjZ0vjo/KwTA8NDV3qJEWKsaTqsjTkiimRahCuUyl2ZdeUMf6Gx48fT8N6G0/R964Ci68Gi68mPY4ZZ1t+/vy5s2nTJq8IizP4DljT5SDZAb+rX5MqBokiw+fD1gMij56mz1pfRGbixcNfjxMXY6lNwUqblhgoVHww0Swth7OEsLBBwBbiCl1akcNx5yBUI2afWkpR5neP5C0WtHZNc3sFPM+ka0UoNA8fPjyF60UrdkUzG/9P5SHI7EqD63rYuANiXQJhFwPEonHz5k1XcsaIEX9TNWo9Ks5pmygFeclwzUZxzQ7LktXviIUuno81WWXa+8hzazQaZVTYka0nnK9rsutEfT+fnTGJx4l5tupBbsU46OtmUE96lFWWGzvKJgiKiwt7ulUYzIO5opAxcweimf76IEdbAD5nQso5WF4L+E6mMbpNEXj27Jk3Nze3YI4/ZgTLGq3lQ8rRCCyotN62bt2aRtzKJiBxRHIE525rVntYrOLGa/fo0aNxLByBEVgbkhfB8XFMjsF10h7biGuVC+7XuMmt5+adpIDCZslb1sQ9rUtLd4jgAf76668n6MoIrlkSUeeD/evY/1Kv+WGZcw3W8y5bZY1r5m9m2X3Ycj3TMpaijDSZUFaWsvv0JKvEDTf6nG3jqFqHEUhciHGIVBX7SgIulga2v5K2MHG7SqUyAtGq4d/xqG1QUBkFdSmKKLCupPPbVQNRlDWEY3QhPLVSQUPZcj6+I2uYiSWw1FDW+OD6Fk2HlUAwhnmMrRXtCzlYrBA3k2Koatl2Ejd/2fowTbBzKR+aoLZ3pQ0oWniZwO9biKrJ8Nnh0L9XJGVQAqLIY7myBhhritbjaJ5WWgAtcFQ2PH6liOPLksgdhiiwwmsrI2wWmHb7q6++GsE5fSH5d03yRQ6CfQqvRzWaPhisMLVQWMct200GPiM+NMy8wQcnhbB5HCbFtEXtClsYHIMWyKralU1TigXfQ7BcSU91LQbY87dyjK4tP36n0FrDsbsxVI7Nn4tFd5BmM/Tnn39mZcq02I4UB31ltzR11mCwbLmZCOmqh800RX1h40OD/2t4m2itYbtLcAZP5B2hosDht0qrBQexoPV25YcffpgziS9TNcOCJq10EZN8oBDhwbU5w3uU0VrzjLM9uFeOpBeRkrF63kAlVsh4R1i4f6aIpjmn0Hl45n+WAydDs3wXlrMoQ69oMzV/HsxICRbVdxl3aw4dkaMZ9/mPuEUJGzgf+NiyPDR5RfZsUOBQ+Pa0WD7DwRtTuFMV5pYmbeGk6RhtEgKwKc+I1Tycx39ICsdtcI+StuPxYXkzN54Lp7V1piPTtOX14XWuJhz2NNPHFyBwvK8XbCuNmLm4RlcQeW9EnUsogsjrPpqimxEF+wzO5480Ue5egueKKCtThMUGy3Dd2MPgbNQqLJM4/9uSAK535mACw4svs+eAbEobhMXtVItwedu3b6/xTdqHxhxnqht9yDgqAUGGcFcGJ7R6TlJaHqXic9Itk6JjtGu62LiSEQZ2UtwjuglOpz2+CfNzOY/fzpmYLpguJDbomL+bo8VTgiB9EXOP2MdyKql1wMijLFlyHh7+BoSOQQTeh/G478ZyFm6LubUOOmUhNODetW1jxL7E3gxRvHjx4nY/nbMNX9xMk3RFoaWvjIUm1BRNJIuwtXQdKZvlNo4xm2ZmKwYZ8LtPm24ixAn9jj8KcqJ3BM7L5pvyRaddv6S5f+cSNjvPyqpdNwGEbhb3bMQIg+08fIsHgnA1r4fDImzzTPnTzvUKhA7nMoFz4aiWOD9eCW6LL7Dtbu0A3H/4AQUodbXl8zrFxQyLSmuW19MIG0WNDmj4UeZNNG9M/tPsGTczW80z229SuvCWKQJfkR7GWG1O6+f0TUJ0RjoJuLCzs8R3XqU12LH/k8Lw6quvUtxOxOTSoyBcCAI8BTBrIpqudADP5f33359/8uTJWxLvc90FH+kFUfoOX9xQWKqhz7wgIhmyipJgE3YyaSOTyZeFM02/K3Y1SJwPIRQ9jd1urYmy2oylO9aJ6JguOXGjSXJ1E3z55ZccNXAZ5/NJzGbD7JAs+TOPcpZbVw024dACuM9jSrzAjWra+v4j6AqyJ/iAlgQLj83SiIJNqqQHtM28cE6SwLEGbyZk5E3Ak+JxZPV5n89DdGKauv7wmCL8n6b3/MWobjkBWPdxztYbm6JHi2ge4nc2YcGdEHtZoDX6qSh9RWC5Bf42Dw9L3V8R89C0UE/TRDDDnRzJznLuNhvMSNLy/xvS23DKwo4tG3a6Fvs15b1MtKbbxQgcxc21bLIrR+utWeRoCFpw5XL5fkLq7qpab/3FhharyG3DakuMjJnjVaV9/NxttpUQP1dCtW54kH4KEkPeecNgjeRA3ODowAKXYqHo/J9tJa03yQdmRCl0FIQRa7YCbN9D6+24KH0DLTcn+CcQqoxWm5e0kRlQ3hEc9C3247f2t3EkPZ50EfrA8hCdSqVSjvG1ed3ojhMIgtitt3IO1k4zTQWaE02Upbjv6rgcK91jA2r/wMpxTYS0KhmtthSTIFelc6o2H44RCy5y8ODBSpa+a4gU+8KIc+hGwV1u9ncKMw/HrHale8RZb3lYO4VbbQFGrD0pVqyVLrEhlNCvzlfLSIUo3MACYWJA20YUG8mJBw8exB3Lb14+e/Ys0/ft3LnTF7cM590Jbl5NxZYI9wpwP7oiBsR0CJ2LCerskc5wpbs0UeF/ZllXYq49UfqC8MD5q/yTdjhSIIZsHknMcKKQZVgoJrdU7EMfgWtSlDvShflYc25e2URjoZu9y40zPkgCGUUn15Vd6K9IF6FYo4Js2NbjPDsVa6VL+CMUmDQS0TsvaqRCDL4YDg0NOSgM1o04OQwsCSmawO+GwpdlrKj/4HTDaguuseQE75NlFMacdJknT57whZZzNWJ1meWqXYs1zRjHPKFYHzp0iElT5yxDzVTcOmAbiu6DNpLEPpqRtH1uA5qbOMgciy9UHFicctjScj5/WmZRqbWXf9SjR97WrVslD4ImZBSBv5CZZiUl+N1BDc0xhp4USHCN88AEE2wWcXX//v1tDTRuF5MV1gruCQXBk+wsrEVutc2bN9N6o6hGiZsjStuYfgJuhl1kcUZK7Qy238DJQJhP3nyQ1mpbrk3NNH3WfmUm0aQrHULLJ6kDZ4q88WEyB1A6JGvNY4XWsvQRuC+7pA0CV0O3oSUaSv+0ihQBNKUHYLR0IbCI0voTKDQtHzGSad2+tZNtO6DZOR23ngWulG7GLB+I8hR/c0gQ/5ACwffclZzolh9zrYkTmCJBS6PZ4agXpQfYQOslsIjSNunCNaqZnMNhvizb9viOunRmuczHdQcwIlWT9Fw2E8osC2KEYOdKL88SpCiDSOuMLo6kICxuQVeSpCYhh7Zg2/uSEe7DMYVx23AqtSxWG7b9pFUQ8dmsFIdaAYrSZZbFjQ97qY3EjaEuGONxTVNaiLDymF5mXtIf+z6W2CwQzP6KbVKnpAlGCLQKYp7NxgjyFjcvYX2zhxYJvWbFkbWj9xICKplYzsQb16xMCWdzGkMovW6yga7COPCPQkjOhIQlqhDxYeD8qB/FCRvFdHFxcULSR1IuclgS98NvPRuKDHv91GzEvVqIiUBfwXlNSA+xY8eOdsW9zHtlEkx2jadPnzLp5v/Y1uvsWP3BJumQsNOXU/2hIDLyai3MpmCchshNwYo6bjoNO2Y1rbt/MnqbJDbBzN54m5SBNmB2+/btfnP04cOHY/iecN82V/oIRqBtk+Dger7xwQcfeLYKps8om0rXky7Cfpm2yauL9s0q+dGWuG3cuHE56y07z4ZysdN6O3Ps2LFJJjWMw4jcebNkIhA2kyI6DTMQthNmNMJwa2IATjAifYYZEVCN+LzCiYtlQPx8Jkt0XboEK4VGo1E283OsYq0iuEp2EqeItzAcvGETKbyCTaJff/31z3H+t05oETYnYXOq7vT169f9JIfvvvsuJ8VYNanvtm3bujrEJyesPfcTxuD2ExzLebibViibwJs3b7aNWGEXkdw6YyvF0q64OcEb00nXC6/kLEkUoLwFLouwMRiBB+MEhG0y2Be+Pk5l1vrg1/tx8o/Q6IpVwLI+MyDNUnLcWKJd4dmzZxRUayYTlCFXlL5gWdxMM9FNud+e8MMTUZuVKUB5CRy/i1YXjncEheuWxAubb60NDQ3tvnbtmi8ARhRrEjGtXjczaORJQiaOajcFgdfXtuRAGZZolvHCbcPfyxE3eGsTN+/mzZtqufUJK3xuHEmAB6aaYr9q2K/DTLgR/cwcI3BHUWjm24l4UdS438zMzC6IGnPYT1jGvjbN5LyXsJwPR7OMKJ6xTEc336/zM9Ji3r9/P4U5cu5N+j5Pnjw5+fnnn0uR4N6WEiLt89IZzAk3gXO9AitcCobzpNZixle7onREOzPO01p52cZg+xXixpEEKEQUASdpR+PXcfmeKWLggL0YsRkF7hYetEk8BHwQm0kiF6rtSxC18uLiIh/e8YjIYBDFcLFcgaV2Kdy8NKlrSs+fP2dTNLJrRBczvBYCm6a4vuOWdROe532GCmK2qCaqETZbxUEobLulc2i5TeD7povqFhK4PHDd/mrZJDalupKOdmec/68j2SuWVT63tA88atPx4KFJGBzPDBYXOfejrZnKz2Bl+B1yaQWwqwa2/w7Lv7Dvp1gYnW2aEQ4zWKY5dyYioH9isADL+bCwmeMMQ9jYhLX1+ZrtVobXomiZt3UV8B39P61eKYCQ/9MmbBSDmuQDTalP+X1FCDXLnjmXb2M2c7V/W3+xqiuIsd7YxKwm7LuiaUpRTGjSjnE9rLgpNqcgTMtWHAXt7t27r3A9jrPLNAsaZrKOBY6C2LFjh5fk+D927Jjcu3ePO4+bjsJWvxPWnZABIOG6D+PafrF3796jH374YTMvYQgJW5wYMC3WZ5Ifu/h9KANv4/vv52XB8VwQ3d8VFUUPwey8n4jSV0T2c0shVIR92iZqS/hWBETLk/gmLTtGsvl6JiRy/NwzhTVzYsLAEmQTFIV0FMc/a74nbrfpQamFzXWfFruFWoUF9x0suBN5iAIrkN9++y0pYp2n1RZmGNb8tzj2X9r144Zh2cF5/AlCTZG2dZ+h+6OuiQ/6j0hxS/HA+HA8KQoYtwtbbxclmWWRQ2F1EaH6DN/noqnLaFWTgvfaa6/Jm2++KYG1EQQX+DmsM+bcovPXt/rwSktzPOXYWM5a3te+tlZwLabg82SEb9iySRXX6R+4Pu/hgfYkhe+zFV7/b775pvTLL79UIJaxVo4szYqWp9UWZoQWHM6n43OB+yPpXIinvrb+xDpCgf3D9u3bdxg3dkTs+CMSUMgmWcBMk5YO2bSRDQfLGERtDK9MmjkHobqKYMVtFLwFiBjHovrCySYwCnQZTnJ/zgYUSuaeO24bJmOhWdSs5WsJfZ5mzO4tNustm9HauoPKpM6H9eDBg96WLVuarCxsEVWKAKLJDB75wR34MMdTTPvIyiPPJpwnq8VnxbkEIscVNqFrDVSlPBeWl9Pqa+tPYodfsROsaX7YLAI/KofC/3cUnhkWLKY2SnjIbDhcwmM+UXil9T3WSwd8MqgF9fXXX4fue+/h7bcJ156+zzGO30XF1MA+/zx06NAcHnYxLgL/WrPCMNFq+kGZvv2vKSzjeVqHOVYevriYrC/DtnOhyLE7EsrG9zgXjyuYKjw4F76nhc+hXDgeLdzDKc6FAawpVPLar61PiVUKCgGE6kRSHjZYXheCSJZJbdRzzldTUKdlQKH15TjOLM7zvWa6vHn0T9Zxr27BX/k7/r9jItSszO7gvv+Oe/o7tmGz7eOUwna0gMqDZfAvCec0xnOhNcdzYZQ8fC5Pnz79netwrhcobmmF7caNGwPlvlhvJJpBdKTSgpP4nFzsz/YFamzfYmDztJf6kJmCWpMBhwKHqPIs7tfbkqHzrHnYHVmKkHNxStly+90pSNh8jGgzYWniOZnfzeBAVdo7F5bzSRW2/idVG48BhhSZdCuoKc+yY6fZp2YErt1EhbmwXoQtwMya7ltRpitNkdefx2bGlbeLbO4b0eZUe2x2dzriwQbPZR5W4lvsNylK35PagUVrLEXtSf/HBfg9SnTgUuBME3UtBK653oQtwAR3vKGhITbXPpKle5bnPQg6VE8GGVekYMw5MVixO+dKs2lS2U/h2G9pl4/BIZN3njfezGcQK3D0edAHx57f165dm8Y+u6W4GncVprB+tB6FLUwQwTaCQJHj6I5w+u8sBPvNUAiYmGAtLBxjmbJVsDtkmbZ1PoGo8Vxwnaa6INLt/taijjPQZE5WSYugUqm8tXXrVobROa4xqh9GhVFWROLYcXQWhcbDZ7sPHDhQg9n/cRuR1CzQ53RiLaKiOLdLUZMvr3WCQ9M9oo57UTeD3Kv4rRyvuccyq3oYj9lnmdAT+3zfC5aNOR9mGx7D+wlEfauylMkj9nxMcgX+/tscl1tEJJQtlkajcX/Lli1RPrsmyqbbzePEMM+WTdSxOZexFES7M863Q+oOYlFArBiKZ7YOa1cRXkBj8vudLTm/qBkaFaQX7+g3hL6H+dv+xqawKKkxnaP9PoQSSvfOP92oIMx8FrTEovqcsSvI7iy/wwwNY7ePMqL4Zbwu4HUB1t7CoPVvVOLpWFhgxZVRcCaMyNmO5xmRWzGmlOIIoftffD7awe/xe8SzM6d2tuw/8hY3RQnIxWoiKS2yFSLHDyh0KOC0HNiU9ZsWeK1EhO9bj8f9G9jubyY7htKHqLgpRZGbuAVQ5GTJp/NxyP/R+j2+yKEZeRWLPwyIhTyctSIQPByHWX2ZNskJ1nGUAqzFaW1m9D8qbkpR5C5uYSh0xho73mKNhb+XqY0aiFj9He/9fnRFJSRUeg8VN6UoOp63NI7W6fv27t1bMRYYX//bWGRcTi0uLp7C/9/DKqtLl+epVBRl8ChU3Fox3Qi4NERRFKVAOkqxoSiK0quouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpB0dYSCorRiphHkmOKoTM2abVZRFEVRFEVRFEVRlH7k30ucc3EstpUHAAAAAElFTkSuQmCC","base64"))];case 2:if((o=c.sent()).error)return[2,o];return[4,n.writeFile(".lesson/lessonplan.md",a7.Z.from((u=r,"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(fl(u),"\n  "))))];case 3:if((a=c.sent()).error)return[2,a];return[4,n.writeFile(".lesson/instructions.md",a7.Z.from((s=r,"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(fl(s),"\n  "))))];case 4:if((l=c.sent()).error)return[2,l];return[2,{error:null}]}})})).apply(this,arguments)}function fu(){var e=(0,eb._)(["\n  query TeamsForEduLessonCta($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n      }\n    }\n  }\n"]);return fu=function(){return e},e}var fs={},fd=(0,ex.Ps)(fu()),fp=(0,eO.X)({root:[ea.l0.p(8),ea.l0.colWithGap(4),ea.l0.backgroundColor.accentPrimaryDimmest,ea.l0.borderRadius(8),{fontSize:e3.TV.fontSizeSmall}]});function ff(){var e,n,t=aO(),r=(e={variables:{replId:(0,ef.Z)()}},n=(0,ey._)({},fs,e),ew.a(fd,n)).data,i=(0,eu.Z)().fs,o=(0,J._)((0,et.useState)(!1),2),a=o[0],l=o[1],c=(0,J._)((0,et.useState)(!1),2),u=c[0],s=c[1],d=(null==r?void 0:r.repl.__typename)==="Repl"&&r.repl.isProject,p=(0,lw.Z)().showError;if((0,et.useEffect)(function(){if(d){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,ev._)(function(){var n;return(0,em.Jh)(this,function(t){switch(t.label){case 0:return[4,i.readDir(pF.oh)];case 1:if(n=t.sent(),e||!n.error&&n.children.length)return[2];return l(!0),[2]}})})).apply(this,arguments)}},[i,d]),!a)return null;function f(){return(f=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return s(!0),[4,function(e){return fc.apply(this,arguments)}({fs:i})];case 1:if(e.sent().error)return p("Something when wrong"),[2];return t({path:pF.oh+"/lessonplan.md"}),l(!1),[2]}})})).apply(this,arguments)}return(0,$.BX)(eo.G,{css:fp.root,children:[(0,$.tZ)(nf.zx,{iconLeft:u?(0,$.tZ)(eX.Z,{}):(0,$.tZ)(aj.Z,{}),text:"Add lesson contents",size:"small",onClick:function(){return f.apply(this,arguments)},disabled:u}),(0,$.tZ)("a",{href:"https://docs.replit.com/teams-edu/lesson-authoring",target:"_blank",children:"Learn more"})]})}var fh=et.createContext(null),fv=fh.Provider,fm=(0,eO.X)({root:ea.l0.coverContainer,inner:[ea.l0.coverContainer,ea.l0.pl(8)],loader:[ea.l0.justify.start,ea.l0.position.absolute,{top:2,left:16,overflow:"hidden"}]}),fg=(0,eO.X)({root:[ea.l0.rowWithGap(4),ea.l0.align.center],text:[ea.l0.fontWeight.medium,{fontSize:13}]}),fy=(0,eO.X)({root:[ea.l0.rowWithGap(4),ea.l0.pr(2)]}),fb={files:{title:(0,$.tZ)(function(){return(0,$.BX)(eo.G,{css:fg.root,children:[(0,$.tZ)(eA.xv,{css:fg.text,children:"Files"}),(0,$.tZ)(pM.m,{})]})},{}),controls:(0,$.tZ)(function(){var e=(0,et.useContext)(fh),n=(0,J._)((0,et.useState)(!1),2),t=n[0],r=n[1],i=dd(R.Files),o=s7(ds);if(!e)throw Error("Expected filetree");return(0,et.useEffect)(function(){return e.onLoad(function(){return r(!0)})},[e]),(0,$.BX)(eo.G,{css:fy.root,style:{opacity:t?1:0},children:[(0,$.tZ)(cR.hU,{dataCy:"filetree-add-file",alt:"New file",tooltipPlacement:"top",onClick:function(){i&&o(R.Files),e.create(iD.Tv.File)},children:(0,$.tZ)(pU.Z,{})}),(0,$.tZ)(cR.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){i&&o(R.Files),e.create(iD.Tv.Directory)},children:(0,$.tZ)(pA.Z,{})}),(0,$.tZ)(fa,{filetree:e})]})},{}),content:(0,$.tZ)(function(){var e=(0,et.useContext)(fh),n=(0,J._)((0,et.useState)(!!(null==e?void 0:e.hasLocalCache)),2),t=n[0],r=n[1];if(!e)throw Error("Expected filetree");return(0,et.useEffect)(function(){return e.onLoad(function(){return r(!0)})},[e]),(0,$.BX)(eo.G,{"data-cy":"sidebar-filetree-section",css:fm.root,children:[t?null:(0,$.tZ)(eo.G,{css:fm.loader,style:{opacity:t?0:1},children:(0,$.tZ)(pL.Z,{path:pF.Ql})}),(0,$.BX)(eo.G,{css:fm.inner,style:{opacity:t?1:0},children:[(0,$.tZ)(ff,{}),(0,$.tZ)(pX.s,{store:e.store})]})]})},{})},dock:pP},fx={root:(0,Q.iv)([ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.height(36),{userSelect:"none"}]),header:(0,Q.iv)([ea.l0.reset.button,ea.l0.height("100%"),ea.l0.focusRing,ea.l0.borderRadius(4),ea.l0.ml(8),ea.l0.flex.growAndShrink(1),ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.cursor.pointer]),title:(0,Q.iv)([ea.l0.fontWeight.medium,{fontSize:13}]),border:(0,Q.iv)([ea.l0.position.absolute,ea.l0.top(0),ea.l0.right(0),ea.l0.width("calc(100% - ".concat(ea.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:ea.TV.outlineDimmest}]),content:(0,Q.iv)([ea.l0.flex.growAndShrink(1),ea.l0.overflowY("auto"),ea.l0.scrollbar.hidden])},fZ=(0,et.memo)(function(e){var n=dd(e.id),t=s7(ds),r=fb[e.id],i=r.title,o=r.controls;return(0,$.BX)(eo.G,{css:fx.root,children:[(0,$.BX)(eo.G,{id:"sidebar-section-header-".concat(e.id),tag:"button",onClick:function(){(0,eh.j)(eh.U3.WS_SIDEBAR_SECTION_TOGGLED,{section:e.id,action:n?"open":"close"}),t(e.id)},css:fx.header,"aria-expanded":!n,"aria-controls":"sidebar-section-content-".concat(e.id),dataCy:"sidebar-section-content-".concat(e.id),children:[(0,$.tZ)(s4.Z,{rotate:n?0:90,color:ea.TV.foregroundDimmer}),"string"==typeof i?(0,$.tZ)(eA.xv,{css:fx.title,multiline:!1,children:i}):et.cloneElement(i,{collapsed:n})]}),o||null]})}),fw=(0,et.memo)(function(e){var n=fb[e.id].content,t=dd(e.id);return(0,$.tZ)(eo.G,{id:"sidebar-section-content-".concat(e.id),inert:t?"true":void 0,css:[fx.content,"files"===e.id?ea.l0.position.relative:{}],children:(0,$.tZ)(eo.G,{css:ea.l0.pb(8),children:n})})}),fC={root:(0,Q.iv)([ea.l0.position.relative,ea.l0.height(0),ea.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,Q.iv)([ea.l0.position.relative,ea.l0.height(8),ea.l0.top(-4)])},f_=(0,et.memo)(function(e){var n=s7(df),t=dv({id:e.id});return(0,$.tZ)(eo.G,{css:fC.root,onPointerDown:function(t){s_(t,{start:function(){n({type:"start",id:e.id})},move:function(e){n({type:"update",delta:e.delta.y})},end:function(e){n({type:"end",delta:e.delta.y})}})},children:(0,$.tZ)(eo.G,{style:t?{transform:"scaleY(100)"}:void 0,css:fC.hoverArea})})});function fk(e){var n,t,r,i=(0,et.useRef)(null),o=(0,sS.T)(),a=dv({id:e.id}),l=s6(dh),c=(n=e.id,t=s5(),r=(0,nO.Z)(function(){return(0,nX.cn)(function(e){var t;return 36+((null===(t=e(dt).find(function(e){return e.id===n}))||void 0===t?void 0:t.height)||0)})},[n]),(0,ru.b)(r,t));return(0,et.useEffect)(function(){return(0,dm.A)(i,"height",c.current+"px"),c.subscribe(function(e){(0,dm.A)(i,"height",e+"px")})},[c]),(0,$.BX)(eo.G,{innerRef:i,style:{zIndex:a?2:void 0,position:"relative",transition:o||l?void 0:"height 120ms ease-out"},children:[e.border?(0,$.tZ)(eo.G,{css:fx.border}):null,(0,$.tZ)(fZ,{id:e.id}),(0,$.tZ)(fw,{id:e.id}),e.resizable?(0,$.tZ)(f_,{id:e.id}):null]})}var fS=(0,eO.X)({root:[ea.l0.pl(8),ea.l0.pt(4),ea.l0.rowWithGap(2),ea.l0.align.center],cta:[ea.l0.flex.growAndShrink(1)]});function fI(){var e,n,t=(e=(0,ey._)({},sF,void 0),ew.a(sV,e)),r=t.data,i=t.loading,o=(0,sO.o)("ghostwriter-repl-resources-cta"),a=o.isLoading,l=o.isDone,c=o.setAsDone;if(i||a||!(null==r?void 0:r.currentUser))return null;var u=(0,sX.d)({user:r.currentUser}).plan;if(u.name===sd.we&&null===u.trial||u.name===sd.we&&null!==u.trial&&null===u.trial.cancelsAt)return null;if(u.name!==sd.we)return l?null:(0,$.BX)(eo.G,{css:fS.root,children:[(0,$.tZ)(eo.G,{dataCy:"workspace-sidebar-upgrade-cta",css:fS.cta,children:(0,$.tZ)(l1.Z,{style:{borderRadius:4},context:"workspace_sidebar",stretch:!0})}),(0,$.tZ)(cR.hU,{onClick:function(){return c()},tooltipBehavior:"hidden",alt:"Hide",children:(0,$.tZ)(cE.Z,{})})]});var s=(null===(n=u.trial)||void 0===n?void 0:n.cancelsAt)?"Trial ends ".concat((0,sA.V)(u.trial.cancelsAt)):void 0;return(0,$.tZ)(eo.G,{css:fS.root,children:(0,$.tZ)(eo.G,{css:fS.cta,children:(0,$.tZ)(l1.Z,{style:{borderRadius:4},colorway:"blurple",context:"workspace_sidebar",text:s})})})}var fR=(0,Q.F4)({from:{opacity:0},to:{opacity:1}}),fG={container:(0,Q.iv)([ea.l0.position.absolute,ea.l0.colWithGap(4),ea.l0.top(0),ea.l0.left(0),ea.l0.width("100%"),ea.l0.height("100%"),ea.l0.minWidth(r$),{animation:"".concat(fR," 0.2s ease-in-out")}]),header:(0,Q.iv)([ea.l0.pl(8),{zIndex:3}]),content:(0,Q.iv)([ea.l0.flex.growAndShrink(1)]),footer:(0,Q.iv)([ea.l0.colWithGap(8),ea.l0.pb(8)],{zIndex:2}),help:(0,Q.iv)([ea.l0.flex.growAndShrink(1),ea.l0.justify.center,{button:ea.l0.borderRadius(4)}]),newTabWrapper:[ea.l0.pl(8),ea.l0.pt(4),ea.l0.flex.growAndShrink(1)],newTabButton:[ea.l0.border({color:ea.TV.outlineDimmest,width:1})]};function fE(){return(0,$.tZ)(eo.G,{css:fG.footer,children:(0,$.tZ)(fI,{})})}var fT=(0,et.memo)(function(){var e,n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k,S,I,R,G,E,T,D,P,B,U,A,O,X,L,M=(e=(0,ef.Z)(),t=(n=(0,J._)((0,et.useState)(null),2))[0],r=n[1],i=aO(),o=(0,pz.L)(),a=(0,a3.T)(!0),l=(0,et.useCallback)(function(e){return!a(e.filename)},[a]),c=(0,eu.Z)().fs,u=(0,dz.Gn)("multiselectModifierKey").preferences,s=i4(t3),d="cmdOrCtrlKey"===u.multiselectModifierKey?"cmdOrCtrlKey":"altKey",p=(0,es.AA)(),f=(0,et.useCallback)(function(e){return(0,pN.mn)(e,p)},[p]),h=(0,ei.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),v=(0,pO.av)().onContextMenu,m=(0,ef.Z)(),g=(0,eu.Z)().fs,y=aO(),b=i4(iI),x=i1(t$),Z=(0,sj.s6)(sY.Y.FiletreeContextMenu),w=i1(oA),C=i4(oX),_=(0,ei.P5)({controlName:"flag-open-with-default",type:"boolean",default:!1}),k=i4(oO),S=(0,et.useCallback)(function(e){if(_){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,i=w[t];i&&i.extensionId===n&&i.fileHandlerId===r||k(e)}},[k,_,w]),I=(0,ei.P5)({controlName:"flag-draft-buffers"}),R=(0,et.useCallback)(function(e,n){var t,r=e.path,i=[{data:{type:"group",key:"rename"},commands:function(){return[p4(function(){return n.rename(r)})]}}];(0,oG.Mb)(r)&&I&&i.push({data:{type:"group",key:"saveFile"},commands:function(){var e;return[(e=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,g.flush(new Set([r]),iD.WL.MANUAL_SAVE)];case 1:return e.sent(),[2]}})}),{match:nH.pl,data:{type:"action",label:"Save file",icon:(0,$.tZ)(pq.Z,{}),run:e}})]}}),i.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:iD.Tv.File,path:n}],o=!0,a=!1,l=void 0;try{for(var c,u=t()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=(0,J._)(c.value,2),d=s[0],p=s[1];p!==iD.Tv.Directory&&d!==n&&i.push({path:d,type:p})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var f=i.length,h=1===f?"Open":"Open ".concat(f," files");return[{label:h,icon:(0,$.tZ)(na.Z,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:h+" in split",icon:(0,$.tZ)(ag.Z,{}),run:function(){var e=(0,tt._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;r({path:s.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:nH.pl,data:{type:"action",label:n,icon:t,run:r}}})}({path:r,getSelectedNodes:n.getSelectedNodes,openFile:y})}});var o=function(e){var n=function(e){var n=r[e],i=(0,pH.Z)(n.glob);if(!i||!i.exec(t))return"continue";var l=p6.exec(n.glob),c=n.icon?n.icon:n.extension.manifest.icon,u=n.name?n.name:n.extension.manifest.name,d=c?(0,p2.Vh)(n.extension.baseUrl,c):null;s.push({match:nH.pl,data:{type:"action",icon:d?(0,$.tZ)(p5,{size:16,name:u,iconUrl:d}):(0,$.tZ)(na.Z,{}),label:"Open with "+u,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),o({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,c=(0,oE.mD)(t),u=c?i[c]:null,s=[];for(var d in r)n(d);return u&&c&&s.length&&s.push({match:nH.pl,data:{icon:(0,$.tZ)(u6.Z,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:c,newAssociation:null})}}}),s}({path:r,handlers:x,filetypeAssociations:w,requestAssociateFiletype:S,associateFiletype:C,openFile:y});return o.length&&i.push({data:{type:"group",key:"extensions"},commands:function(){return o}}),i.push({data:{type:"group",key:"copy"},commands:function(){return p8(r)}}),i.push((t=(0,ev._)(function(){var e;return(0,em.Jh)(this,function(t){switch(t.label){case 0:e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,pV.Z)(r,g)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,p1.Z)({replId:m,action:"duplicated",fileType:iD.Tv.File}),n.rename(e),[2]}})}),{match:nH.pl,data:{type:"action",label:"Duplicate file",icon:(0,$.tZ)(d$.Z,{}),run:t}})),i.push((0,pQ.H4)(r,g)),i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[p3(function(){return n.deleteNodes(e)})]}}),i.push({data:{type:"group",key:"extensions"},commands:(0,ev._)(function(){var e;return(0,em.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{filePath:r,fileType:iD.Tv.File}}],[4,Promise.all(Z.map((t=(0,ev._)(function(n){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,sH.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),i},[y,S,C,m,Z,x,w,g,I]),G=(0,e2.OM)(),E=(0,e2.t9)(),T=(0,et.useCallback)(function(e,n){var t,r=e.path,i=r===pF.Ql,o=i?[]:[{data:{type:"group",key:"rename"},commands:function(){return[p4(function(){return n.rename(e.path)})]}}];return o.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:nH.pl,data:{type:"action",icon:(0,$.tZ)(le.Z,{}),label:"Search this directory",run:function(){b({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),o.push.apply(o,(0,ec._)((t=function(t){return n.create(t,e.path)},[{label:"Add file",icon:(0,$.tZ)(pU.Z,{}),run:function(){return t(iD.Tv.File)}},{label:"Add folder",icon:(0,$.tZ)(pA.Z,{}),run:function(){return t(iD.Tv.Directory)}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:nH.pl,data:{type:"action",label:n,icon:t,run:r}}})))),o.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:nH.pl,data:{type:"action",label:"Open shell here",icon:(0,$.tZ)(p$.Z,{}),run:function(){b({pane:{type:"shell",data:{initialPwd:r}},edge:"left"})}}}]}}),i||o.push({data:{type:"group",key:"copy"},commands:function(){return p8(r)}}),n.getExpandedDirs()&&o.push({match:nH.pl,data:{icon:(0,$.tZ)(pY.Z,{}),type:"action",label:"Collapse "+(i?"all":"child folders"),run:function(){var e=n.getExpandedDirs(r);e&&n.collapse((0,ec._)(e))}}}),i||o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[p3(function(){return n.deleteNodes(e)})]}}),i&&o.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:nH.pl,data:{type:"action",label:(E?"Hide":"Show")+" hidden files",icon:E?(0,$.tZ)(pK.Z,{}):(0,$.tZ)(na.Z,{}),run:function(){G(!E)}}}]}}),o.push({data:{type:"group",key:"extensions"},commands:(0,ev._)(function(){var e;return(0,em.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{dirPath:r,fileType:iD.Tv.Directory}}],[4,Promise.all(Z.map((t=(0,ev._)(function(n){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,sH.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),o},[E,G,Z,b]),D=(0,et.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,$.tZ)(le.Z,{})},commands:function(){return e.type===iD.Tv.Directory?T(e,n):R(e,n)}}},[R,T]),P=(0,e2.xz)(),B=(0,pX.p)({fs:c,filter:l,fontSize:13,onFileDoubleClick:function(e,n){s(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===d?(0,pB.jh)(r):r.altKey;i({path:n,newTab:a}),o(n,{newTab:a})},onCreate:function(e){e.type===iD.Tv.File&&i({opener:{paneType:(0,nF.Dp)({path:e.path})},path:e.path})},multiselectModifierKey:d,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return v(e,{command:D(n,B)})},autocomplete:f,localCacheKey:h?e+":sidebar":void 0,onFileRenameStart:P,onFileRenameEnd:function(){return P(null)}}),U=(0,pW.C)(),(0,et.useEffect)(function(){return B.setFileStatus(U)},[B,U]),A=(0,es.Y_)(),(0,et.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:if(null===e)return B.select(null),[2];return[4,B.select({path:e,type:iD.Tv.File})];case 1:if(n.sent(),A.current!==e)return[2];return B.scrollToPath(e),[2]}})})).apply(this,arguments)}return e(A.current),A.subscribe(e)},[A,B]),O=aF(),X=(0,es.rE)(),L=(0,es.p9)(),(0,et.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return O.isOpen.current||O.toggle(),O.closeCodeSearch(),[4,B.select({path:e,type:iD.Tv.File})];case 1:return n.sent(),B.scrollToPath(e),L(null),[2]}})})).apply(this,arguments)}return e(X.current),X.subscribe(e)},[X,L,B,O]),{filetree:B,activeModal:t,closeModal:function(){return r(null)}}),W=M.filetree,z=M.activeModal,N=M.closeModal,F=(0,ng.HQ)();return(0,et.useEffect)(function(){return W.setPresenceState(F.current),F.subscribe(W.setPresenceState)},[W,F]),(0,$.BX)(fv,{value:W,children:[(0,$.tZ)(fD,{}),(0,$.BX)(e$.u,{isOpen:!!z,onRequestClose:N,children:[(null==z?void 0:z.type)==="conflicts"?(0,$.tZ)(sL.Z,{paths:z.data.conflicts.map(function(e){return e.path}),onCancel:N,onConfirm:function(){var e=z.data;"move"===e.type?W.move({nodes:e.nodes,to:e.to,overwrite:!0}):W.upload({files:e.files,parentPath:e.to,overwrite:!0}),N()}}):null,(null==z?void 0:z.type)==="deleteNode"?(0,$.tZ)(u3.Z,(0,ny._)((0,ey._)({},(0,sW.B)(z.data.nodes)),{delete:function(){return z.data.confirm()},hideModal:N})):null]})]})}),fD=(0,et.memo)(function(){var e,n,t,r,i=s6(dc),o=(e=s7(dl),n=s7(du),t=(0,et.useRef)(null),(0,et.useEffect)(function(){t.current&&e({height:t.current.getBoundingClientRect().height,sections:[{id:R.Files,percent:60},{id:R.Dock,percent:40}]})},[e]),r=(0,sU.Z)(function(e){e&&n(e.height)},{wait:100,type:"debounce"}),(0,lY.l)(r,t)),a=(0,ly.Do)(lm.y.Sidepane),l=(0,sM.Z)().isTutorial,c=i[i.length-1];return(0,$.BX)(eo.G,{innerRef:l?null:a,css:fG.container,children:[(0,$.tZ)(eo.G,{css:fG.header,children:(0,$.tZ)(s2,{})}),(0,$.tZ)(eo.G,{css:fG.content,innerRef:o,children:i.map(function(e,n){return(0,$.tZ)(fk,{id:e,resizable:e!==c,border:0!==n},e)})}),(0,$.tZ)(fE,{})]})}),fP=t(12945),fB=function(e){var n;null===(n=e.focus)||void 0===n||n.call(e)};function fU(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?fB:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,c=e.boundary,u=(0,et.useRef)(null);return(0,et.useEffect)(function(){if(u.current){var e=u.current,r=function(r){if(n(r)){if(l)d=(0,ec._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),d=(0,ec._)(o)}if(0!==d.length){var u=document.activeElement;if(e.contains(u)){if(l){if(c){var s=null==u?void 0:u.closest(c);u=(null==u?void 0:u.closest(l))||(null==s?void 0:s.querySelector(l))}else u=null==u?void 0:u.closest(l)}if(l&&(!u||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var d,p,f=null===(p=document.activeElement)||void 0===p?void 0:p.querySelector(l);f?i(f):i(d[0]);return}if(!u){r.preventDefault(),r.stopPropagation(),i(d[0]);return}var h=d.findIndex(function(e){return e===u});if(-1===h){r.preventDefault(),r.stopPropagation(),i(d[0]);return}var v=t({event:r,children:d,activeIndex:h,activeElement:u});!a&&(v<0||v>d.length-1)||(i(v<0?d[d.length-1]:v>d.length-1?d[0]:d[v]),r.stopPropagation(),r.preventDefault())}}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[c,n,t,i,u,l,a]),u}var fA=t(45911),fO=t(35247),fX=t(38477),fL=t(79556),fM=(0,eO.X)({self:[ea.l0.position.relative,ea.l0.flex.shrink(1),ea.l0.width("100%")],iconWrapper:[ea.l0.position.absolute,ea.l0.top(0),ea.l0.right(0),ea.l0.height("100%"),ea.l0.p(4)]}),fW=(0,et.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,lF._)(e,["onClear"]);return(0,$.BX)(eo.G,{css:fM.self,children:[(0,$.tZ)(fL.w,(0,ey._)({ref:n},i)),((null===(t=i.value)||void 0===t?void 0:t.length)||0)>0?(0,$.tZ)(eo.G,{css:fM.iconWrapper,children:(0,$.tZ)(cR.hU,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(ea.TV.backgroundHighest," !important")}},children:(0,$.tZ)(cE.Z,{})})}):null]})});fW.displayName="SearchInput";var fz=t(77794),fN=(0,eO.X)({self:[ea.l0.width(32),ea.l0.height(32)],queryPill:[ea.l0.display.inline,ea.l0.fontSize(ea.TV.fontSizeDefault)],popover:[{"& > .popover-control-container":ea.l0.mr(0)}]});function fF(e){var n=e.text;return(0,$.tZ)(cG.D,{css:fN.queryPill,text:0===n.length?"âŽµ":n})}function fV(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24)],children:[(0,$.BX)(eA.xv,{children:["Replace ",(0,$.tZ)(fF,{text:n})," with ",(0,$.tZ)(fF,{text:t})," ","in ",(0,lT.Z)("match",r,!0),"?"]}),(0,$.tZ)(eA.xv,{children:"This operation cannot be undone!"}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.justify.end],children:[(0,$.tZ)(nf.zx,{onClick:function(){return i()},text:"Cancel"}),(0,$.tZ)(nf.zx,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,lT.Z)("match",r,!0)),iconLeft:(0,$.tZ)(fz.Z,{})})]})]})}function fH(e){var n,t=e.disabled,r=e.loading,i=e.query,o=e.replacement,a=e.results,l=e.replace,c=e.onReplace,u=e.buttonProps,s=(0,J._)((0,et.useState)(!1),2),d=s[0],p=s[1],f=(n=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return p(!1),(0,eh.j)(eh.U3.SEARCH_PANE_USED,{action:"replace"}),[4,l()];case 1:return e.sent().success&&c(),[2]}})}),function(){return n.apply(this,arguments)}),h=(0,et.useMemo)(function(){return a.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[a]);return(0,$.tZ)(eo.G,{css:fN.popover,children:(0,$.BX)(nm.Z,{isOpen:d,maxWidth:400,showArrow:!0,children:[(0,$.tZ)(nf.zx,(0,ny._)((0,ey._)({},u),{text:"Replace all",disabled:t||r,onClick:function(){p(function(e){return!e})}})),(0,$.tZ)(fV,{query:i,replacement:o,numMatches:h,onCancel:function(){return p(!1)},onConfirm:f})]})})}var fj=t(82496),fY=t(47357),fq=t(62435),fK=(0,eO.X)({self:[ea.l0.width("fit-content"),ea.l0.display.inlineBlock,ea.l0.color.accentNegativeDefault,ea.l0.fontWeight.bold]});function fJ(e){var n=e.content;return(0,$.tZ)($.HY,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,ec._)(e).concat([(0,$.tZ)(eo.K.span,{css:fK.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var f$=eo.K.span,fQ="SearchMatch";function f0(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}(l=G||(G={})).HIGHLIGHT="highlight",l.REMOVE="remove",l.ADD="add",l.TEXT="text";var f1=(0,eO.X)((E={self:[ea.l0.width("fit-content"),ea.l0.display.inline,ea.l0.cursor.pointer,{"&:focus-visible":[ea.l0.focusRing]},ea.l0.mx(1),ea.l0.px(2),ea.l0.borderRadius(4)]},(0,el._)(E,"highlight",[ea.l0.backgroundColor.accentPrimaryDimmest,f0(ea.TV.accentPrimaryDimmer)]),(0,el._)(E,"remove",[ea.l0.backgroundColor.accentNegativeDimmest,f0(ea.TV.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,el._)(E,"add",[ea.l0.backgroundColor.accentPositiveDimmest,f0(ea.TV.accentPositiveDimmer)]),(0,el._)(E,"hiddenTextWrapper",[ea.l0.display.inlineBlock,ea.l0.mx(2),{"& > div":[ea.l0.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,el._)(E,"firstHiddenTextWrapper",[ea.l0.ml(0)]),(0,el._)(E,"lastHiddenTextWrapper",[ea.l0.mr(0)]),E));function f2(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,$.tZ)($.HY,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var c=t[l],u=c.start+c.length;o.push({start:a,end:c.start,type:"text"});var s=n.substring(c.start,u);i.length>0&&i!==s?(o.push({start:c.start,end:u,type:"remove"}),o.push({start:-1,end:u,type:"add"})):o.push({start:c.start,end:u,type:"highlight",matchIndex:l}),a=u}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var c=e.start,u=e.end,s=e.type,d="".concat(c,"-").concat(u),p=u-c;if("text"===s){var f=r[t+1];if(0===t&&p>50)return(0,$.BX)(et.Fragment,{children:[(0,$.tZ)(f$,{css:[f1.hiddenTextWrapper,f1.firstHiddenTextWrapper],children:(0,$.tZ)(cR.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(u-50)},children:(0,$.tZ)(fq.Z,{})})},d),(0,$.tZ)("span",{children:n.substring(u-50,u)})]},d);if(t===r.length-1&&p>50)return(0,$.BX)(et.Fragment,{children:[(0,$.tZ)("span",{children:n.substring(c,c+50)}),(0,$.tZ)(f$,{css:[f1.hiddenTextWrapper,f1.lastHiddenTextWrapper],children:(0,$.tZ)(cR.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,$.tZ)(fq.Z,{})})},d)]},d);if(f&&p>100)return(0,$.BX)(et.Fragment,{children:[(0,$.tZ)("span",{children:n.substring(c,c+50)}),(0,$.tZ)(f$,{css:f1.hiddenTextWrapper,children:(0,$.tZ)(cR.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,$.tZ)(fq.Z,{})})},d),(0,$.tZ)("span",{children:n.substring(u-50,u)})]},d)}var h=-1===c?i:n.substring(c,u);if("text"===s)return(0,$.tZ)(et.Fragment,{children:h},d);var v=null,m=r[t-1];return"add"===s&&(null==m?void 0:m.type)==="remove"&&(v=n.substring(m.start,m.end)),(0,$.tZ)(f4,{content:h,type:s,isRegex:o,query:a,replacement:i,removedText:v,onClick:function(e){e.stopPropagation(),l(u)}},d)})})}function f4(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,lF._)(e,["content","type","isRegex","replacement","query","removedText"]),c=n,u=void 0;switch(t){case"highlight":u="Matched text ".concat(c);break;case"remove":u="Removed text ".concat(c);break;case"add":if(u="Added text ".concat(c),r&&null!==a)try{c=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,$.tZ)(eo.K.span,(0,ny._)((0,ey._)({css:[f1.self,f1[t]],tabIndex:0,"aria-label":u,role:"button","data-nav":fQ},l),{children:"add"===t?(0,$.tZ)(fJ,{content:c}):c}))}var f8="SearchLine",f3="--search-line-number-width",f5=(0,eO.X)({self:[ea.l0.rowWithGap(8),ea.l0.align.stretch,ea.l0.overflow("hidden"),ea.l0.cursor.pointer,ea.l0.borderRadius(4),{"&:focus-visible":[ea.l0.focusRing],"&:hover, &:focus-visible":[ea.l0.backgroundColor.backgroundHighest]}],content:[ea.l0.font.code,ea.l0.maxWidth("100%"),ea.l0.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[ea.l0.display.inlineBlock,ea.l0.color.foregroundDimmest,ea.l0.mr(8),ea.l0.pl(8)],lineNumber:[ea.l0.display.inlineBlock,ea.l0.textAlign.right,{width:"var(".concat(f3,")")}]});function f6(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,l=(0,lF._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),c=(0,nO.Z)(function(){return function(e){(0,eh.j)(eh.U3.SEARCH_PANE_RESULT_CLICKED,(0,ey._)({},l)),a({path:i,lineNumber:n,columnNumber:e})}},[n,l,i,a]),u=(0,nO.Z)(function(){return function(){var e=r.length>0?r[0]:null;c(e?e.start+e.length:0)}},[r,c]);return(0,$.BX)(eo.G,{tabIndex:0,css:f5.self,"data-nav":f8,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u())},onClick:u,children:[(0,$.tZ)(eo.G,{css:f5.lineNumberWrapper,children:(0,$.tZ)(eo.G,{tag:"span",css:f5.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,$.tZ)("pre",{css:f5.content,children:(0,$.tZ)(f2,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:c})})]})}var f7=t(26685),f9=eo.K.span,he=(0,eO.X)({root:[ea.l0.display.flex,ea.l0.colWithGap(8),ea.l0.align.center,ea.l0.py(16)],icon:[ea.l0.color.foregroundDimmest],message:[ea.l0.color.foregroundDimmest]});function hn(e){var n=e.icon,t=void 0===n?null:n,r=e.message;return(0,$.BX)(eo.G,{css:he.root,children:[t?(0,$.tZ)(eo.G,{css:he.icon,children:t}):null,(0,$.tZ)(f9,{css:he.message,children:void 0===r?"No results found.":r})]})}var ht=(0,eO.X)({self:[ea.l0.flex.row,ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.justify.center,ea.l0.pt(8),ea.l0.pb(8),ea.l0.width("100%"),ea.l0.flex.wrap],text:[ea.l0.display.block,ea.l0.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function hr(e){var n=e.error;return(0,$.BX)(eo.G,{css:ht.self,children:[(0,$.tZ)(cP.Z,{}),(0,$.tZ)(eA.xv,{css:ht.text,multiline:!1,children:n})]})}function hi(e){return Math.log(e)*Math.LOG10E+1|0}var ho=t(54738),ha=t(13754),hl="SearchFileNav",hc="SearchFileHeaderNav",hu="SearchQueryNav",hs="SearchQueryTogglesNav",hd=parseInt(e3.Wx.space24,10)+10,hp=(0,eO.X)({header:[ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.rowWithGap(6),ea.l0.flex.growAndShrink(1),ea.l0.overflow("hidden")],headerParentPathText:[ea.l0.flex.shrink(1e7)],headerFileNameText:[ea.l0.flex.shrink(1)],headerMatchesCountPill:[ea.l0.height(20),ea.l0.flex.shrink(0)],accordionWrapper:[ea.l0.mx(4),ea.l0.border({direction:"top",color:e3.TV.outlineDimmest})],accordionChildren:[ea.l0.p(4)],linesWrapper:[ea.l0.overflow("hidden"),ea.l0.borderRadius(4),ea.l0.font.code],padding:ea.l0.pb(4)});function hf(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,l=e.scrollOffset,c=e.onFileLineClicked,u=e.searchResultBackgroundColor,s=(0,lF._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),d=(0,dz.Gn)("fontSize").preferences.fontSize,p=(0,et.useRef)(null),f=(0,nO.Z)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),h=(0,nO.Z)(function(){var e=t[t.length-1];if(!e)return{};var n=hi(e.lineNumber),r=(0,ha.$)(d);return(0,el._)({fontSize:d,lineHeight:r},f3,"".concat(n,"ch"))},[t,d]);return(0,$.tZ)(e0.Tg,{css:hp.accordionWrapper,style:h,"data-nav":hl,innerRef:p,children:(0,$.tZ)(ho.Q,{expanded:void 0===o||o,onClick:function(){a(p.current)},headerProps:{"data-nav":"".concat(hc," ").concat(f8," ").concat(i?"".concat(hu," ").concat(hs):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:u}},headerContent:(0,$.BX)(eo.G,{css:hp.header,children:[(0,$.tZ)(aH.Z,{path:n,size:16}),(0,$.tZ)(eA.xv,{css:hp.headerFileNameText,multiline:!1,children:(0,oG.UO)(n)}),(0,$.tZ)(eA.xv,{color:"dimmest",css:hp.headerParentPathText,multiline:!1,children:(0,oG.Il)(n).replace(/^\.\//,"")}),(0,$.tZ)(cG.D,{variant:"muted",text:"".concat(f," ").concat((0,lT.Z)("match",f)),css:hp.headerMatchesCountPill})]}),children:(0,$.tZ)(eo.G,{css:hp.accordionChildren,children:(0,$.tZ)(eo.G,{css:hp.linesWrapper,children:t.map(function(e){return(0,$.tZ)(f6,(0,ny._)((0,ey._)({},e,s),{path:n,dedentBy:r,onFileLineClicked:c}),e.lineNumber)})})})})})}var hh=t(73705),hv=(0,eO.X)({container:[ea.l0.p(4),ea.l0.flex.row,ea.l0.align.center,ea.l0.justify.spaceBetween,ea.l0.border({direction:"bottom",color:ea.TV.outlineDimmest})],actions:[ea.l0.display.flex,ea.l0.rowWithGap(4)]});function hm(e){var n="collapse"===e.collapseExpandAllState;return(0,$.BX)(eo.G,{css:hv.container,children:[(0,$.BX)(eA.xv,{color:"dimmer",children:[e.totalCount," results in ",(0,lT.Z)("file",e.fileCount,!0)]}),(0,$.BX)(eo.G,{css:hv.actions,children:[(0,$.tZ)(cR.hU,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,$.tZ)(pU.Z,{})}),(0,$.tZ)(cR.hU,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,$.tZ)(pY.Z,{}):(0,$.tZ)(hh.Z,{})})]})]})}var hg=(0,Q.F4)({from:{opacity:0},to:{opacity:1}}),hy=(0,eO.X)({listWrapper:[ea.l0.overflowY("auto"),ea.l0.flex.grow(1),{contain:"strict"}],list:[ea.l0.width("100%"),ea.l0.position.relative],listItem:[ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0),ea.l0.width("100%")],resultCount:[ea.l0.p(4),ea.l0.pb(8),ea.l0.color.foregroundDimmer],resultRow:[{animation:"".concat(hg," 120ms linear forwards")}]});function hb(e){var n,t,r,i,o,a,l,c=e.results,u=e.error,s=e.paneRef,d=e.onFileLineClicked,p=e.onOpenSearchPane,f=e.searchResultBackgroundColor,h=(0,lF._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),v=(0,nO.Z)(function(){return c.filter(function(e){return e.lines.length>0})},[c]),m=(0,nO.Z)(function(){return v.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[v]),g=(0,J._)((0,et.useState)({}),2),y=g[0],b=g[1],x=(0,et.useRef)(null),Z=(0,fY.MG)({count:v.length,getScrollElement:function(){return x.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,i=0;i<e.length;i++){var o=e[i],a=9*hi(i)+9*o.content.length+4*o.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return hd+20+24.39*t+2*t}(v[e].lines,null==s?void 0:null===(n=s.current)||void 0===n?void 0:n.offsetWidth)},overscan:3}),w=Z.getVirtualItems(),C=(0,et.useRef)(null),_=(0,et.useCallback)(function(e){var n=x.current;if(n&&C.current!==e){if(e.matches('[data-nav*="'.concat(hc,'"]'))){e.focus();return}var t=e.closest('[data-nav="'.concat(hl,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(hc,'"]'));if(!r){e.focus();return}var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;C.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),C.current===e&&(e.focus(),C.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),k=(n=(0,et.useCallback)(function(e){return"Tab"===e.key},[]),t=(0,et.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),fU((0,ny._)((0,ey._)({},{selector:'[data-nav*="'.concat(hc,'"]'),boundary:'[data-nav*="'.concat(hl,'"]')}),{isValid:n,move:t}))),S=(r=(0,et.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),i=(0,et.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),fU((0,ny._)((0,ey._)({},{selector:'[data-nav*="'.concat(f8,'"]'),focus:_}),{isValid:r,move:i}))),I=(o=(0,et.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),a=(0,et.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),fU((0,ny._)((0,ey._)({},{selector:'[data-nav*="'.concat(fQ,'"]'),focus:_}),{isValid:o,move:a}))),R=(0,dy.l)(k,S,I),G=(0,nO.Z)(function(){return v.length===Object.keys(y).length&&Object.values(y).every(Boolean)},[y,v.length]),E=null;return v.length>0?E=(0,$.BX)($.HY,{children:[(0,$.tZ)(hm,{fileCount:v.length,totalCount:m,collapseExpandAllState:G?"expand":"collapse",onToggleCollapseExpandAll:function(){G?b({}):b(v.reduce(function(e,n){return(0,ny._)((0,ey._)({},e),(0,el._)({},n.path,!0))},{}))},onStartNewSearch:p}),(0,$.tZ)(eo.K.div,{ref:x,css:hy.listWrapper,children:(0,$.tZ)(eo.G,{css:hy.list,style:{height:Z.getTotalSize()},children:(0,$.tZ)(eo.G,{css:hy.listItem,style:{transform:"translateY(".concat(null===(l=w[0])||void 0===l?void 0:l.start,"px)")},innerRef:R,children:w.map(function(e){var n,t=v[e.index],r=t.path;return(0,$.tZ)(eo.K.div,{"data-index":e.index,ref:Z.measureElement,css:hy.resultRow,children:(0,$.tZ)(hf,(0,ny._)((0,ey._)({},t,h),{scrollOffset:null===(n=w[0])||void 0===n?void 0:n.start,onFileLineClicked:d,isFirst:0===e.index,expanded:!0!==y[r],searchResultBackgroundColor:f,onClick:function(e){if(b(function(e){return(0,ny._)((0,ey._)({},e),(0,el._)({},r,!(r in e)||!e[r]))}),x.current&&e){var n,t,i=Math.floor(null!==(t=null===(n=w[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0),o=Math.floor(x.current.scrollTop),a=e.offsetTop+i;a>o||x.current.scrollTo({top:a-1})}}}))},e.key)})})})})]}):u===f7.f.EMPTY_RESULTS&&(E=(0,$.tZ)(hn,{icon:(0,$.tZ)(le.Z,{size:32}),message:u})),(0,$.BX)($.HY,{children:[u&&u!==f7.f.EMPTY_RESULTS?(0,$.tZ)(hr,{error:u}):null,E]})}var hx=t(56443);function hZ(e){return(0,et.useMemo)(function(){return(0,ec._)((0,hx.Eu)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var hw=t(82614);function hC(){return(hC=(0,ev._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,em.Jh)(this,function(s){switch(s.label){case 0:if(t=e.container,r=e.fileList,0===(i=(0,lF._)(e,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:T.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:T.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=t).exec.apply(a,(0,ec._)((0,hw.PR)((0,ny._)((0,ey._)({},i),{context:1,mode:"files"}))))];case 2:if((c=s.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===c.error?T.NO_MATCHES:c.error}];o=(null===(l=c.output)||void 0===l?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],s.label=3;case 3:var d,p,f,h,v,m,g,y;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:T.NO_MATCHES}];return[4,(n=t).exec.apply(n,(0,ec._)((p=(d=i).replacement,f=d.query,h=d.isRegex,v=d.isCaseSensitive,m=d.isMatchingWholeWords,g=["sd"],y=[f.indexOf("\n")>=0?"m":"e",v?"c":"i"],m&&y.push("w"),g.push("--flags",y.join("")),h||g.push("--string-mode"),f.startsWith("-")&&(f="\\"+f),g.push(f,p),g)).concat((0,ec._)(o)))];case 4:if((u=s.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:u.error}];return[2,{success:!0}]}})})).apply(this,arguments)}(c=T||(T={})).QUERY_EMPTY="The query is empty",c.QUERY_SAME="The query is the same as replacement",c.NO_MATCHES="No matches were found to replace",c.RG_EMPTY="Ripgrep didn't return a response",c.NOT_MOUNTED="Component wasn't mounted";var h_=t(67484),hk=t(57604),hS=t(68302),hI=t(90005),hR=t(27173),hG=t(8684),hE="SearchQueryControlsNav",hT="SearchQueryExcludeNav",hD="SearchQueryControlsColumnNav",hP=(0,Q.F4)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),hB=ea.nC.min(360),hU=(0,eO.X)({self:[ea.l0.height("100%"),ea.l0.width("100%"),ea.l0.overflow("hidden"),ea.l0.px(4),ea.l0.container()],filesIncludeExcludeWrapper:[ea.l0.colWithGap(8),ea.l0.pt(8),ea.l0.mt(6),ea.l0.border({direction:"top",color:ea.TV.outlineDimmest}),(0,el._)({},hB,[ea.l0.rowWithGap(6),ea.l0.align.start,ea.l0.mt(0),{border:"none"}])],inputWithLabel:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(1)],inputLabelText:[{userSelect:"none"},ea.l0.color.foregroundDimmest,ea.l0.truncate,{fontSize:ea.TV.fontSizeSmall}],inputLabel:[ea.l0.flex.shrink(1),ea.l0.m(0),{lineHeight:1}],input:[ea.l0.viewStyle,ea.l0.border(),{blockSize:ea.TV.space32,"::placeholder":{color:ea.TV.foregroundDimmest},"&:hover::placeholder":{color:ea.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:ea.TV.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[ea.l0.rowWithGap(2),ea.l0.flex.shrink(0),(0,el._)({},hB,{" > *":ea.l0.height("100%")})],results:[ea.l0.position.relative,{flex:"1 1 auto"}],searchWrapper:[ea.l0.pb(4),ea.l0.rowWithGap(4),{flex:"0 1 auto"}],expandCollapseButton:[ea.l0.height(32)],searchInputAndOptionsWrapper:[ea.l0.colWithGap(4),(0,el._)({flex:1},hB,[ea.l0.rowWithGap(4)])],replacementWrapper:[ea.l0.ml(24),ea.l0.pl(4),ea.l0.pb(6)],replaceInputWrapper:[ea.l0.colWithGap(6),ea.l0.pt(8),ea.l0.border({direction:"top",color:ea.TV.outlineDimmest}),(0,el._)({},hB,[ea.l0.rowWithGap(4),ea.l0.pt(0),ea.l0.align.center,{border:"none"}])],horizontalLine:[ea.l0.mt(2),ea.l0.mb(8),ea.l0.height(1),ea.l0.borderRadius(2),ea.l0.width("100%"),ea.l0.backgroundColor.backgroundHigher],loadingBar:[ea.l0.position.absolute,ea.l0.mt(2),ea.l0.height(1),ea.l0.borderRadius(2),ea.l0.width("100%"),ea.l0.backgroundColor.accentPrimaryDimmer,{animation:"".concat(hP," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function hA(e){var n=e.updateData,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,c=e.isMatchingWholeWords,u=e.setIsMatchingWholeWords,s=e.isCollapsed,d=e.setIsCollapsed,p=e.executeSearch,f=e.searchInputRef,h=e.onCloseRequested,v=e.onMoveRequested,m=e.moveDestination;return(0,$.BX)(eo.G,{css:hU.searchWrapper,children:[(0,$.tZ)(cR.hU,{onClick:function(){return d(function(e){return!e})},alt:s?"Show replacement options":"Hide replacement options",css:hU.expandCollapseButton,children:s?(0,$.tZ)(s4.Z,{}):(0,$.tZ)(l0.Z,{})}),(0,$.BX)(eo.G,{css:hU.searchInputAndOptionsWrapper,children:[(0,$.tZ)(fW,{"data-nav":"".concat(hu," ").concat(hE),ref:f,autoSize:!0,placeholder:"Search",value:t,css:hU.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,pB.jh)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),p())}}),(0,$.BX)(eo.G,{css:hU.optionsWrapper,children:[(0,$.tZ)(fj.Z,{alt:"case sensitive","data-nav":"".concat(hE," ").concat(hD),icon:(0,$.tZ)(fA.Z,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,$.tZ)(fj.Z,{alt:"regular expressions","data-nav":"".concat(hE," ").concat(hD),icon:(0,$.tZ)(fO.Z,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,$.tZ)(fj.Z,{alt:"whole words","data-nav":"".concat(hE," ").concat(hD),icon:(0,$.tZ)(fX.Z,{}),checked:c,onClick:function(){return u(function(e){return!e})}}),(0,$.tZ)(cR.hU,{onClick:v,alt:"Move to ".concat("pane"===m?"tab":"sidebar"),children:"pane"===m?(0,$.tZ)(hG.Z,{}):(0,$.tZ)(hR.Z,{})}),h?(0,$.tZ)(cR.hU,{onClick:h,alt:"Close",children:(0,$.tZ)(cE.Z,{})}):null]})]})]})}function hO(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,c=e.setIncludeGlob,u=e.excludeGlob,s=e.setExcludeGlob,d=e.replace,p=e.results;return(0,$.BX)(eo.G,{css:hU.replacementWrapper,children:[(0,$.BX)(eo.G,{css:hU.replaceInputWrapper,children:[(0,$.tZ)(fW,{"data-nav":"".concat(hu," ").concat(hE," ").concat(hT),autoSize:!0,placeholder:"Replacement",value:t,css:hU.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,$.tZ)(eo.G,{css:hU.optionsWrapper,children:(0,$.tZ)(fH,{query:i,replacement:t,results:p,disabled:0===i.length,loading:o,replace:d,onReplace:a,buttonProps:{"data-nav":"".concat(hE," ").concat(hs," ").concat(hD)}})})]}),(0,$.BX)(eo.G,{css:hU.filesIncludeExcludeWrapper,children:[(0,$.BX)(eo.G,{css:hU.inputWithLabel,id:"filesToInclude",children:[(0,$.tZ)("label",{htmlFor:"filesToIncludeInput",css:hU.inputLabel,children:(0,$.tZ)(eA.xv,{css:hU.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,$.tZ)(fW,{id:"filesToIncludeInput","data-nav":"".concat(hu," ").concat(hE),autoSize:!0,value:l,css:hU.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){c(e),n({initialIncludeGlob:e})},onClear:function(){c(""),n({initialIncludeGlob:""})}})]}),(0,$.BX)(eo.G,{css:hU.inputWithLabel,id:"filesToExclude",children:[(0,$.tZ)("label",{htmlFor:"filesToExcludeInput",css:hU.inputLabel,children:(0,$.tZ)(eA.xv,{css:hU.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,$.tZ)(fW,{id:"filesToExcludeInput","data-nav":"".concat(hE," ").concat(hT),autoSize:!0,value:u,css:hU.input,onChange:function(e){s(e),n({initialExcludeGlob:e})},onClear:function(){s(""),n({initialExcludeGlob:""})}})]})]})]})}function hX(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k,S,I,R,G,E,T,D,P,B,U,A,O,X,L,M,W,z=e.isActive,N=e.initialQuery,F=void 0===N?"":N,V=e.initialReplacement,H=void 0===V?"":V,j=e.initialIncludeGlob,Y=void 0===j?"":j,q=e.initialExcludeGlob,K=void 0===q?"":q,Q=e.searchInputRef,ee=e.onDataChanged,en=e.onFileLineClicked,er=e.onOpenSearchPane,ea=e.onCloseRequested,el=e.onMove,es=e.moveDestination,ed=e.searchResultBackgroundColor,ep=(0,J._)((0,et.useState)(F),2),ef=ep[0],eg=ep[1],eb=(0,J._)((0,et.useState)(H),2),ex=eb[0],eZ=eb[1],ew=(0,J._)((0,et.useState)(!1),2),eC=ew[0],e_=ew[1],ek=(0,J._)((0,et.useState)(!1),2),eS=ek[0],eI=ek[1],eR=(0,J._)((0,et.useState)(!1),2),eG=eR[0],eE=eR[1],eT=(0,J._)((0,et.useState)(!0),2),eD=eT[0],eP=eT[1],eB=(0,J._)((0,et.useState)(K),2),eU=eB[0],eA=eB[1],eO=(0,J._)((0,et.useState)(Y),2),eX=eO[0],eL=eO[1],eM=hZ(eU),eW=hZ(eX),ez=(0,et.useRef)(null),eN=(t=(n={query:ef,isRegex:eC,isCaseSensitive:eS,isMatchingWholeWords:eG,excludeGlobs:eM,includeGlobs:eW}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,u=void 0===(c=n.excludeGlobs)?[]:c,d=(s=(0,eu.Z)()).container,p=s.dotReplit,f=(0,hk.n)(p),h=(0,ei.P5)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),m=(v=(0,J._)((0,et.useState)([]),2))[0],g=v[1],b=(y=(0,J._)((0,et.useState)(null),2))[0],x=y[1],w=(Z=(0,J._)((0,et.useState)(t.length>0),2))[0],C=Z[1],_=(0,nO.Z)(function(){return(0,ec._)(u).concat((0,ec._)(f||[]),(0,ec._)(hI.hD))},[u,f]),k=d.getConnectionState(),S=(0,et.useMemo)(function(){return(0,hS.Z)({container:d,onError:function(e){return x(e)},onUpdate:function(e){return g(e)},onLoadingStateChange:function(e){return C(e)},isStreaming:!0,trackLatency:h})},[]),(0,et.useEffect)(function(){k===h_.em.CONNECTED&&S({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:_})},[k,S,t,r,i,o,l,_,f]),{loading:w,error:b,data:m,search:function(){return S({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:_})}}),eF=eN.loading,eV=eN.error,eH=eN.data,ej=eN.search;(0,fP.Z)(function(){""!==ef&&(0,eh.j)(eh.U3.SEARCH_PANE_USED,{action:"search",isRegex:eC,isCaseSensitive:eS,hasIncludes:eW.length>0,hasExcludes:eM.length>0})},[ef,eW,eM,eC,eS],1e3);var eY=(R=(I={replacement:ex,query:ef,isRegex:eC,isCaseSensitive:eS,isMatchingWholeWords:eG,excludeGlobs:eM,includeGlobs:eW,fileList:eV?void 0:eH}).query,G=I.replacement,E=I.fileList,T=(0,lF._)(I,["query","replacement","fileList"]),D=(0,eu.Z)().container,B=(P=(0,J._)((0,et.useState)(!1),2))[0],U=P[1],O=(A=(0,J._)((0,et.useState)(null),2))[0],X=A[1],M=(L=(0,J._)((0,et.useState)(!1),2))[0],W=L[1],{replace:(0,et.useCallback)((0,ev._)(function(){var e;return(0,em.Jh)(this,function(n){switch(n.label){case 0:return W(!0),X(null),[4,function(e){return hC.apply(this,arguments)}((0,ey._)({container:D,query:R,replacement:G,fileList:null==E?void 0:E.map(function(e){return e.path})},T))];case 1:return(e=n.sent()).success||X(e.errorMessage),W(!1),U(e.success),[2,e]}})}),[D,R,G,E,T]),loading:M,error:O,data:B}),eq=eY.loading,eK=eY.replace,eJ=(0,et.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ee||ee({initialQuery:ef,initialReplacement:ex,initialIncludeGlob:eX,initialExcludeGlob:eU},e)},[ee,ef,ex,eU,eX]),e$=(0,et.useCallback)(function(){el({query:ef,replacement:ex,includeGlob:eX,excludeGlob:eU})},[el,ef,ex,eX,eU]);(0,et.useLayoutEffect)(function(){eg(F),eZ(H),eL(Y),eA(K)},[F,H,Y,K]);var eQ=fU({selector:'[data-nav*="'.concat(hu,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(hu,'"]')),r=e.target.matches("[data-nav*=".concat(hc,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e0=fU({selector:'[data-nav*="'.concat(hs,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(hs,'"]')),r=e.target.matches("[data-nav*=".concat(hc,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e1=fU({selector:'[data-nav*="'.concat(hD,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(hs,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(hD,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(hs,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),e2=fU({selector:'[data-nav*="'.concat(hT,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(hT,'"]')),r=e.target.matches("[data-nav*=".concat(hu,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),e4=fU({selector:'[data-nav*="'.concat(hE,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(hD,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),e8=(0,lY.l)(eQ,e0,e1,e2,e4),e3=(0,et.useCallback)(function(e){"Escape"===e.key&&(null==ea||ea())},[ea]);return(0,$.BX)(eo.G,{css:hU.self,innerRef:e8,onKeyDown:e3,children:[(0,$.tZ)(hA,{isActive:z,query:ef,setQuery:eg,updateData:eJ,isRegex:eC,isCaseSensitive:eS,isMatchingWholeWords:eG,setIsRegex:e_,setIsCaseSensitive:eI,setIsMatchingWholeWords:eE,isCollapsed:eD,setIsCollapsed:eP,executeSearch:ej,searchInputRef:Q,onCloseRequested:ea,onMoveRequested:e$,moveDestination:es}),eD?null:(0,$.tZ)(hO,{replacement:ex,setReplacement:eZ,updateData:eJ,query:ef,replaceLoading:eq,search:ej,includeGlob:eX,setIncludeGlob:eL,excludeGlob:eU,setExcludeGlob:eA,replace:eK,results:eH}),(0,$.BX)(eo.G,{css:hU.results,children:[eF?(0,$.tZ)(eo.G,{css:hU.loadingBar},ef):null,0===ef.length&&0===eH.length?(0,$.tZ)(hn,{icon:(0,$.tZ)(le.Z,{size:32}),message:"Enter a query to start searching."}):(0,$.tZ)(hb,{isRegex:eC,query:ef,replacement:ex,include:eX,exclude:eU,results:eH,error:eV,paneRef:ez,onOpenSearchPane:er,onFileLineClicked:en,searchResultBackgroundColor:ed})]})]})}function hL(){var e=(0,et.useRef)(null),n=aO(),t=aB(),r=aF(),i=r.closeCodeSearch,o=r.codeSearchData,a=r.setCodeSearchBindings,l=(0,cZ.Z)(o);(0,et.useEffect)(function(){a({focusSearchInput:function(){setTimeout(function(){var n,t;null===(n=e.current)||void 0===n||n.select(),null===(t=e.current)||void 0===t||t.focus()},50)}})},[a,e]);var c=(0,et.useCallback)(function(e){n({path:e.path,line:e.lineNumber,col:e.columnNumber})},[n]),u=(0,et.useCallback)(function(){t({pane:{type:"searchReplace"}})},[t]),s=(0,et.useCallback)(function(e){t({pane:{type:"searchReplace",data:{initialQuery:e.query,initialReplacement:e.replacement,initialIncludeGlob:e.includeGlob,initialExcludeGlob:e.excludeGlob}}}),i()},[t,i]);return(0,$.tZ)(hX,(0,ny._)((0,ey._)({},l),{isActive:!0,searchInputRef:e,onFileLineClicked:c,onOpenSearchPane:u,onCloseRequested:i,onMove:s,moveDestination:"pane",searchResultBackgroundColor:e3.TV.backgroundRoot}))}var hM={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,nA.l2)({cmdOrCtrl:!0,shift:!0,key:"b"})},hW=(0,rc.$)(["width","sidebarVisibility","mainContentVisibility","codeSearchContentVisibility"]),hz=hW.cssVars,hN=hW.styleTokens,hF=(0,eO.X)({sidebar:[ea.l0.height("100%"),ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0),ea.l0.flex.row,ea.l0.flex.growAndShrink(1),ea.l0.overflow("auto"),{width:hN.width,visibility:hN.sidebarVisibility}],mainContent:[{visibility:hN.mainContentVisibility}],codeSearchContent:[ea.l0.width("100%"),{visibility:hN.codeSearchContentVisibility}]}),hV=(0,et.memo)(function(){var e=(0,et.useRef)(null),n=(0,et.useRef)(null),t=(0,et.useRef)(null),r=aF();return(0,rl.j)(e,r.width,function(e){return(0,el._)({},hz.width,e+"px")}),(0,rl.j)(e,r.isOpen,function(e){return(0,el._)({},hz.sidebarVisibility,e?"visible":"hidden")}),(0,rl.j)(n,r.content,function(e){return(0,el._)({},hz.mainContentVisibility,e===k.MAIN?"visible":"hidden")}),(0,rl.j)(t,r.content,function(e){return(0,el._)({},hz.codeSearchContentVisibility,e===k.CODE_SEARCH?"visible":"hidden")}),(0,$.BX)($.HY,{children:[(0,$.BX)(eo.G,{css:hF.sidebar,innerRef:e,children:[(0,$.tZ)(eo.G,{css:hF.mainContent,innerRef:n,children:(0,$.tZ)(s9,{children:(0,$.tZ)(fT,{})})}),(0,$.tZ)(eo.G,{css:hF.codeSearchContent,innerRef:t,children:(0,$.tZ)(hL,{})})]}),(0,$.tZ)(sB,{})]})}),hH=t(40750),hj=t(79834),hY=t(96651),hq=t(98706),hK=(0,eO.X)({root:[ea.l0.rowWithGap(8),ea.l0.align.center]});function hJ(e){return(0,$.BX)(eo.G,{css:hK.root,children:[(0,$.tZ)(eA.xv,{multiline:!1,variant:"small",children:e.text}),(0,$.tZ)(nU.bM,{fontSize:10,keyCombo:e.shortcut})]})}var h$=(0,eO.X)({root:[ea.l0.reset.button,nx.gU.nofill,ea.l0.height(32),ea.l0.width(32),ea.l0.center,ea.l0.cursor.pointer,ea.l0.borderRadius(),{"& > div":{opacity:.75,transition:"opacity 0.1s"},"&:hover > div":{opacity:1}}],iconContainer:[ea.l0.flex.row,ea.l0.align.center,{height:14,width:16,border:"1px solid ".concat(ea.TV.foregroundDefault),borderRadius:ea.TV.borderRadius2}],icon:[{height:"100%",borderRight:"1px solid ".concat(ea.TV.foregroundDefault),transition:"0.1s ease-out width, 0.1s background-color"}]}),hQ=(0,eO.X)({buttonWrapper:[ea.l0.position.relative],button:[ea.l0.height(32),ea.l0.width(32),ea.l0.borderRadius()]});function h0(){var e=aF(),n=(0,cZ.Z)(e.isOpen),t=e.toggle;(0,nU.Il)(function(){return[hM.id,function(){return t()}]},[t]);var r=(0,nU.gf)(hM.id),i=(n?"Close":"Open")+" sidebar",o=(0,J._)((0,et.useState)(!1),2),a=o[0],l=o[1],c=r?(0,$.tZ)(hJ,{shortcut:r,text:i}):i;return(0,$.tZ)(cC.u,{tooltip:c,placement:"bottom-start",children:(0,$.tZ)(eo.G,{tag:"button",alt:i,css:h$.root,"aria-label":"Toggle sidebar","aria-expanded":n,onClick:function(){t(),l(!1)},onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,$.BX)(eo.G,{css:h$.iconContainer,children:[(0,$.tZ)(eo.G,{css:h$.icon,style:{width:n&&!a||!n&&a?"40%":"20%",backgroundColor:n?ea.TV.foregroundDefault:"transparent"}}),(0,$.tZ)(eo.G,{})]})})})}function h1(e){var n=e.org,t=n?(0,cw._Q)({id:n.id,slug:n.slug}):void 0,r=t?t.home.href:"/home";return(0,$.tZ)(hq.I,{"aria-label":"Home",alt:"Home",dataCy:"home-button",css:hQ.button,href:r,children:(0,$.tZ)(eo.G,{css:hQ.buttonWrapper,children:(0,$.tZ)(hY.Z,{size:16})})})}function h2(e){var n=e.org,t=(0,cx.Z)();return(0,ei.P5)({controlName:"flag-header-home"})&&!t?(0,$.tZ)(h1,{org:n}):t?(0,$.tZ)(cy,{}):(0,$.tZ)(ct,{orgId:null==n?void 0:n.id})}function h4(e){var n=e.repl,t=e.currentUser,r=aB(),i=(0,hH.k)(),o=(0,hj.iM)();return(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.align.center,ea.l0.justify.start],children:[(0,$.tZ)(cb.Z,{}),(0,$.tZ)(eo.G,{css:ea.l0.noDragRegion,children:(0,$.tZ)(h0,{})}),(0,$.tZ)(eo.G,{css:ea.l0.noDragRegion,children:(0,$.tZ)(h2,{org:n.org||void 0})}),(0,$.tZ)(eo.G,{css:[ea.l0.flex.shrink(1),ea.l0.flex.row,ea.l0.maxWidth(530),ea.l0.align.center,{"& > span":[ea.l0.viewStyle,ea.l0.flex.shrink(1)]},ea.l0.noDragRegion],children:(0,$.tZ)(cI,{repl:n,onDeployClick:function(){r({pane:{type:"deployments"}})}})}),(0,$.tZ)(eo.G,{css:ea.l0.noDragRegion,children:(0,$.tZ)(sm,{repl:n,currentUser:t})}),(null==t?void 0:t.isFirewallMode)?(0,$.tZ)(eo.G,{css:[ea.l0.noDragRegion,ea.l0.pl(8)],children:(0,$.tZ)(lN.Z,{isWorkspace:!0})}):null,i&&o?(0,$.tZ)(cC.u,{tooltip:"Pid2 Enabled",children:(0,$.tZ)(cG.D,{variant:"filled",text:"Pid2",colorway:"green"})}):null]})}var h8=t(80274),h3=t(77810),h5=t(83805),h6=t(99266),h7="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651",h9="https://linkedin.com/sharing/share-offsite",ve=t(34186),vn=t(85638),vt=t(77898),vr=t(5964),vi=t(76677),vo=t(51406),va=t(43891),vl=function(e){var n,t,r,i,o,a,l,c=e.lessonSlug,u=e.courseSlug,s=(0,lw.Z)().showConfirm;if(!c||!u)return null;var d=(0,va.QW)(u),p=(0,va.qv)(u,c);if(!p)return null;var f=p.ordinalLabel,h=(0,va.tD)(d.socialSharingText,p),v="".concat(h," ").concat(d.sharableLink),m=(0,ve.Z)({text:h,url:d.sharableLink}),g=(n=({url:d.sharableLink}).url,"".concat(h9,"?url=").concat(encodeURIComponent(n))),y=(r=(t={url:d.sharableLink,hashtag:d.socialHashtag}).url,i=t.hashtag,o=t.redirectBackTo,(a=new URLSearchParams).append("href",r),o&&a.append("redirect_uri",o),i&&(i.startsWith("#")||(i="#".concat(i)),a.append("hashtag",i)),l=a.toString(),"".concat(h7,"&").concat(l)),b=[{url:m,icon:vi.Z,base:ve.c,cta:"Share on Twitter",color:vo.Z.brands.twitter},{url:g,icon:vr.Z,base:h9,cta:"",color:vo.Z.brands.linkedin},{url:y,icon:vt.Z,base:h7,cta:"",color:vo.Z.brands.facebook}];return(0,$.BX)(eo.G,{children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(16),ea.l0.align.center,ea.l0.pr(24)],children:[(0,$.tZ)(eo.G,{css:{fontSize:48},children:"\uD83E\uDD73"}),(0,$.BX)(eA.xv,{variant:"headerDefault",multiline:!1,children:["Congrats on completing ",f,"!"]})]}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",css:[ea.l0.py(12)],multiline:!1,children:"Share your progress"}),(0,$.BX)(eo.G,{css:[ea.l0.position.relative,ea.l0.borderRadius(8),ea.l0.backgroundColor.backgroundHigher,ea.l0.py(8),ea.l0.px(12)],children:[(0,$.tZ)(eo.G,{css:ea.l0.pr(16),children:v}),(0,$.tZ)(cR.hU,{css:[ea.l0.position.absolute,ea.l0.top(8),ea.l0.right(8)],alt:"Copy",size:18,tooltipBehavior:"hidden",onClick:function(){s("Copied to clipboard!"),(0,d1.Z)(v),(0,h3.l)({action:"copied_share_text",lessonSlug:c,courseSlug:u,origin:"lesson_complete_modal"})},children:(0,$.tZ)(d$.Z,{size:16})})]}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(16),ea.l0.justify.center,ea.l0.pt(16),ea.l0.align.center],children:[(0,$.tZ)(vn.Z,{variant:"outlined",text:"Back to the learning hub",href:"/learn/".concat(u,"/hub")}),(0,$.tZ)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:b.map(function(e){var n=e.url,t=e.icon,r=e.base,i=e.cta,o=e.color;return(0,$.tZ)(nf.zx,{css:[{backgroundColor:o,color:"white"}],onClick:function(){window.open(n,"_blank"),(0,eh.j)(eh.U3.EXTERNAL_LINK_VIEWED,{url:r,placement:"lesson-complete-modal",campaign:u,lessonSlug:c})},text:i,iconLeft:(0,$.tZ)(t,{})},n)})})]})]})};function vc(){var e=(0,eb._)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return vc=function(){return e},e}function vu(){var e=(0,eb._)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return vu=function(){return e},e}var vs={},vd=(0,ex.Ps)(vc()),vp=(0,ex.Ps)(vu()),vf=function(e){var n,t=e.lesson,r=(0,lw.Z)().showError,i=(0,h5.$0)().fireCircularBurstFrom,o=(0,et.useRef)(null),a=(0,sS.T)(),l=(0,J._)((0,et.useState)(!1),2),c=l[0],u=l[1],s=(0,J._)((n=(0,ey._)({},vs,{onError:function(){return r("Something went wrong")},onCompleted:function(e){var n,l;(null===(n=e.completeUserCourseLesson)||void 0===n?void 0:n.__typename)!=="UpdatedUserCourseLesson"?r((null===(l=e.completeUserCourseLesson)||void 0===l?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===t.id?(o.current&&!a&&i({element:o.current}),u(!0)):r("Something went wrong")}}),rR.D(vp,n)),2),d=s[0],p=s[1].loading;return(0,$.BX)($.HY,{children:[null!==t.timeCompleted?(0,$.tZ)(nf.zx,{ref:o,disabled:!0,text:"Lesson completed \uD83C\uDF89",colorway:"primary"}):(0,$.tZ)(nf.zx,{iconLeft:p?(0,$.tZ)(eX.Z,{}):void 0,onClick:function(){(0,h3.l)({action:"completed",lessonSlug:t.lessonSlug,courseSlug:t.course.courseSlug}),d({variables:{input:{userLessonId:t.id}}})},text:p?"Verifyingâ€¦":"Mark lesson as complete",colorway:"primary",css:[p&&h6.p.backgroundPulse()]}),(0,$.tZ)(e$.u,{isOpen:c,onRequestClose:function(){return u(!1)},children:(0,$.tZ)(vl,{lessonSlug:t.lessonSlug,courseSlug:t.course.courseSlug})})]})};function vh(e){var n,t=e.lesson,r=(n="tutorial",i1((0,nO.Z)(function(){return(0,nX.cn)(function(e){return e(tG).find(function(t){return!t.isHidden&&e(t.data).type===n})})},[n]))),i=i4(ad);return r?(0,$.tZ)(vf,{lesson:t}):(0,$.tZ)(nf.zx,{colorway:"primary",iconLeft:(0,$.tZ)(h8.Z,{}),text:"Show tutorial",onClick:function(){return i()}})}var vv=t(26975),vm=t(9756);function vg(){var e=(0,eb._)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n    url\n    username\n    image\n    ...LayoutHeaderAvatarDropdownCurrentUser\n  }\n  ","\n"]);return vg=function(){return e},e}function vy(){var e=(0,eb._)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    workspaceCta\n    org {\n      id\n      type\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    multiplayers {\n      id\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return vy=function(){return e},e}function vb(){var e=(0,eb._)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return vb=function(){return e},e}var vx={},vZ=(0,ex.Ps)(vg(),vv.z),vw=(0,ex.Ps)(vy(),vd),vC=(0,ex.Ps)(vb(),vw,vm.s,vZ),v_=t(7948),vk=t(12715),vS=t(3777),vI=t(17791),vR=t(69815),vG=t(39712),vE=t(6981),vT=t(93264),vD=t(15063),vP=t(89885),vB=t(94932),vU=t(77361),vA=(0,eO.X)({self:[ea.l0.position.relative,ea.l0.borderRadius(4,0,0,4)],dotWrapper:[ea.l0.position.absolute,ea.l0.top("-3px"),ea.l0.right("-3px"),ea.l0.width("10px"),ea.l0.height("10px"),ea.l0.borderRadius("full"),ea.l0.border({color:ea.TV.backgroundDefault,width:2})],dot:[ea.l0.width("100%"),ea.l0.height("100%"),ea.l0.borderRadius("full")]});function vO(e){var n=e.color;return(0,$.BX)(eo.G,{css:vA.self,children:[(0,$.tZ)(vU.Z,{}),(0,$.tZ)(eo.G,{tag:"span",css:vA.dotWrapper,children:(0,$.tZ)(eo.G,{tag:"span",css:vA.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var vX=(0,Q.iv)([ea.l0.flex.growAndShrink(1),ea.l0.borderRadius(4,0,0,4),(0,el._)({},ea.BC.max("tabletMin"),{"div span":[ea.l0.display.none],"div svg":[ea.l0.mr(0)]})]),vL=(0,Q.iv)([vX,ea.l0.borderRadius()]),vM={base:{self:vX,loading:(0,Q.iv)([vX,h6.p.backgroundPulse()])},rounded:{self:vL,loading:(0,Q.iv)([vL,h6.p.backgroundPulse()])}};function vW(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,c=(0,$.tZ)(nf.zx,{text:n,iconLeft:t,css:vM[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o});return a?(0,$.tZ)(cC.u,{tooltip:a,children:c}):c}function vz(){var e,n,t=(0,vD.kW)(),r=!1,i=!1;switch(t){case vP.z.Ready:case vP.z.Suspended:case vP.z.ProcessingLifecycleCommand:e="Deploy",n=(0,$.tZ)(vU.Z,{});break;case vP.z.Loading:e="Deploy",n=(0,$.tZ)(vU.Z,{}),r=!0,i=!0;break;case vP.z.Preparing:e="Preparing",n=(0,$.tZ)(vU.Z,{}),r=!0,i=!0;break;case vP.z.Deploying:e="Deploying",n=(0,$.tZ)(eX.Z,{}),i=!0;break;default:(0,uY.Z)(t)}var o=aB(),a=(0,ei.P5)({controlName:"flag-modal-panes"}),l=i4(ah);return(0,$.tZ)(vW,{text:e,icon:n,onClick:function(){if(t===vP.z.Ready&&(0,eh.j)(eh.U3.DEPLOY_PROJECT_SELECTED,{source:"deploy_button"}),a){l({type:"deployments"});return}o({pane:{type:"deployments"}})},disabled:r,loading:i,rounded:!0})}var vN={self:ea.l0.rowWithGap(1),open:(0,Q.iv)([ea.l0.borderRadius(0,4,4,0),ea.l0.px(4)])};function vF(){var e,n,t,r=(0,vD.kW)(),i=(0,vD.ev)(),o=(0,vD._U)(),a=(0,vD.XA)().redeployWithNoNewOptions,l=aB(),c=(0,lw.Z)().showError,u=(e=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:if(r===vP.z.Deploying||r===vP.z.Suspended||r===vP.z.ProcessingLifecycleCommand||r===vP.z.Preparing)return l({pane:{type:"deployments"}}),[2];if(d&&(p(void 0),d===e4.Fe.Failed)||i)return l({pane:{type:"deployments",data:{view:vB.k.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a()];case 2:return e.sent(),[3,4];case 3:return c(e.sent().message),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),s=(0,J._)((0,et.useState)(void 0),2),d=s[0],p=s[1];(0,et.useEffect)(function(){if(o&&"HostingBuildDeployStatusAction"===o.__typename)switch(o.status){case e4.Fe.Success:case e4.Fe.Failed:p(o.status)}},[o]),(0,et.useEffect)(function(){r===vP.z.Deploying&&p(void 0)},[r]);var f=void 0,h=!1,v=!1;switch(r){case vP.z.Ready:n="Redeploy",t=(0,$.tZ)(vU.Z,{}),d&&(d===e4.Fe.Success?(t=(0,$.tZ)(vO,{color:ea.TV.accentPositiveDefault}),f="Success"):(t=(0,$.tZ)(vO,{color:ea.TV.accentNegativeDefault}),f="An error occurred"));break;case vP.z.Suspended:n="Redeploy",t=(0,$.tZ)(vO,{color:ea.TV.greyDefault}),f="Deployment suspended";break;case vP.z.Loading:n="Redeploy",t=(0,$.tZ)(vU.Z,{}),h=!0,v=!0;break;case vP.z.ProcessingLifecycleCommand:n="Redeploy",t=(0,$.tZ)(vO,{color:ea.TV.orangeStronger}),v=!0,f="Updating deployment";break;case vP.z.Preparing:n="Preparing",t=(0,$.tZ)(eX.Z,{}),v=!0,h=!0;break;case vP.z.Deploying:n="Deploying",t=(0,$.tZ)(eX.Z,{}),v=!0;break;default:(0,uY.Z)(r)}return i&&(n="Error",t=(0,$.tZ)(vO,{color:ea.TV.accentNegativeDefault}),f=i),(0,$.BX)(eo.G,{css:vN.self,children:[(0,$.tZ)(vW,{text:n,icon:t,tooltip:f,onClick:u,disabled:h,loading:v}),(0,$.tZ)(cC.u,{tooltip:"Open Deployments pane",children:(0,$.tZ)(nf.zx,{text:"",iconLeft:(0,$.tZ)(hG.Z,{}),onClick:function(){l({pane:{type:"deployments"}})},css:vN.open})})]})}var vV=function(){var e=aB(),n=(0,ei.P5)({controlName:"flag-modal-panes"}),t=i4(ah);return(0,$.tZ)(nf.zx,{text:"Redeploy",iconLeft:(0,$.tZ)(vU.Z,{}),onClick:function(){if(n){t({type:"deployments"});return}e({pane:{type:"deployments"}})}})};function vH(){var e=(0,vD.hn)(),n=(0,vD.$y)(),t=(0,vD.BU)().deployability;return e&&n?t.deploy.isAuthorized||t.redeploy.isAuthorized?(0,$.tZ)(vF,{}):(0,$.tZ)(vV,{}):(0,$.tZ)(vz,{})}var vj=t(62496),vY=t(25612);function vq(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,i=(0,lw.Z)().showError,o=(0,J._)((0,et.useState)(null),2),a=o[0],l=o[1],c=(0,vj.xT)({variables:{replId:e}}),u=function(){var e,n=null===(e=c.data)||void 0===e?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,fullName:n.fullName,image:n.image}}:null},s=function(n,t){var r=n.readQuery({query:vj.yi,variables:{replId:e}});if(!r)throw Error("expected data");if("Repl"!==r.repl.__typename)throw Error("expected repl");var i=[],o=r.repl.annotationAnchors,a=o.findIndex(function(e){return e.id===t.id});i=-1===a?(0,ec._)(o).concat([t]):(0,ec._)(o.slice(0,a)).concat([t],(0,ec._)(o.slice(a+1))),n.writeQuery({query:vj.yi,variables:{replId:e},data:(0,ny._)((0,ey._)({},r),{repl:(0,ny._)((0,ey._)({},r.repl),{annotationAnchors:i})})})},d=(0,J._)((0,vj.AS)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],p=(0,J._)((0,vj.gE)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],f=(0,J._)((0,vj.Rp)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],h=(0,J._)((0,vY.n)(),1)[0],v=(0,J._)((0,vj.Hj)(),1)[0];(0,vj.Tt)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,i=null==n?void 0:n.updatedAnnotation;i&&(s(t,i),r(i))}});var m=(0,J._)((0,et.useState)([]),2),g=m[0],y=m[1];(0,et.useEffect)(function(){var e,n=[];(null===(e=c.data)||void 0===e?void 0:e.repl.__typename)==="Repl"&&n.push.apply(n,(0,ec._)(c.data.repl.annotationAnchors)),a&&n.push((0,ny._)((0,ey._)({},a),{isGeneral:!!a.isGeneral,messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),y(n)},[c,a]);var b=(0,et.useMemo)(function(){return g.find(function(e){return e.isGeneral})},[g]),x=(0,et.useMemo)(function(){return g.reduce(function(e,n){return n.isResolved?e:n.messages.some(function(e){return!1===e.seen})?e+1:e},0)},[g]),Z=function(e){var n=e.annotationAnchor,t=e.annotationMessage;d({variables:{annotationAnchor:n,annotationMessage:t,highlight:e.highlight},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,ny._)((0,ey._)({},u(),n),{isGeneral:!!n.isGeneral,__typename:"AnnotationAnchor",messages:t?[(0,ny._)((0,ey._)({},u(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},w=(0,nO.Z)(function(){return dG()(v,1e3,{trailing:!1})},[v]);return{annotations:g,loading:c.loading,generalThread:b,unreadThreadCount:x,placeholderAnchorId:null==a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){l(e.annotationAnchor)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:Z,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,i=n.highlight;(null==a?void 0:a.id)===t.id?(l(null),Z({annotationAnchor:(0,ey._)({},a),annotationMessage:r,highlight:i})):p({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:i},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,ny._)((0,ey._)({},t),{messages:(0,ec._)(t.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,ny._)((0,ey._)({},u(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;f({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,ny._)((0,ey._)({},n,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){w({variables:{threadId:e.threadId,messageId:e.messageId}})},markAllMessagesInReplAsSeenByUser:function(){h({variables:{replId:e}})}}}var vK=function(e){var n=vq(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,et.useMemo)(function(){return n?n.messages.filter(function(e){return!1===e.seen}).length:0},[n])};function vJ(e){var n=vq(e,{onReceiveAnnotationUpdate:function(){}}).annotations;return(0,et.useMemo)(function(){return n.reduce(function(e,n){return n.isGeneral?e:e+n.messages.filter(function(e){return!1===e.seen}).length},0)},[n])}var v$=t(55524),vQ={container:(0,Q.iv)([ea.l0.position.relative]),button:(0,Q.iv)([ea.l0.position.relative,nx.gU.filled,ea.l0.width(32),ea.l0.height(32),ea.l0.borderRadius(4,0,0,4)]),notificationDot:(0,Q.iv)(ea.l0.display.none)},v0=function(){var e=(0,ef.Z)(),n=vK(e),t=vJ(e),r=i4(iX),i=aB();return(0,$.tZ)(eo.G,{css:[ea.l0.flex.row,ea.l0.align.center,{"&:only-child .open-chat-button":[ea.l0.width(32),ea.l0.height(32),ea.l0.borderRadius(8),nx.gU.nofill],"&:only-child .notification-dot-on-button":[ea.l0.display.block],"&:not(:only-child) .notification-dot-on-icon":[ea.l0.display.block]}],children:(0,$.tZ)(cR.hU,{alt:"Open Chat and Threads",onClick:function(){r(),i({pane:{type:"chat"}})},css:vQ.button,className:"open-chat-button",children:(0,$.BX)($.HY,{children:[n>0||t>0?(0,$.tZ)(eo.G,{className:"notification-dot-on-button",css:vQ.notificationDot,children:(0,$.tZ)(aQ.B,{})}):null,(0,$.BX)(eo.G,{css:vQ.container,children:[n>0||t>0?(0,$.tZ)(eo.G,{className:"notification-dot-on-icon",css:vQ.notificationDot,children:(0,$.tZ)(aQ.B,{})}):null,(0,$.tZ)(v$.Z,{})]})]})})})},v1=eo.K.button,v2="tabletMax",v4=(0,eO.X)({button:[nx.gU.filled,ea.l0.py(4),ea.l0.px(8),ea.l0.textAlign.left,ea.l0.rowWithGap(12),ea.l0.align.center,ea.l0.color.foregroundDimmest,ea.l0.border({color:ea.TV.outlineDimmest}),{"&:hover":{cursor:"text"}},(0,el._)({},ea.BC.max(v2),[ea.l0.display.none])],iconButton:[nx.gU.filled,ea.l0.width(32),ea.l0.height(32),(0,el._)({},ea.BC.min(v2),[ea.l0.display.none])]});function v8(){var e=ld(),n=(0,nU.gf)(lp.id);return(0,$.BX)($.HY,{children:[(0,$.BX)(v1,{onClick:function(){return e()},css:v4.button,children:[(0,$.tZ)(eA.xv,{children:ls}),n?(0,$.tZ)(nU.bM,{keyCombo:n,fontSize:12}):null]}),(0,$.tZ)(cR.hU,{alt:ls,onClick:function(){return e()},css:v4.iconButton,children:(0,$.tZ)(le.Z,{})})]})}var v3=function(e){var n=e.className;return(0,no.r)().showPrivateUpsell?(0,$.tZ)(cC.u,{tooltip:v5,children:(0,$.tZ)(uP.D,{className:n,iconLeft:(0,$.tZ)(na.Z,{}),text:"PUBLIC"})}):null},v5="This Repl is publicly visible. Upgrade to make it private.",v6=[e4.Sy.Submit,e4.Sy.Resubmit,e4.Sy.UpdateModelSolution,e4.Sy.PublishTemplate,e4.Sy.EditTemplate,e4.Sy.ReviewSubmission],v7=(0,Q.F4)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),v9=(0,Q.F4)({from:{opacity:0},to:{opacity:1}}),me={root:(0,Q.iv)([ea.l0.width("100%"),ea.l0.top(0),ea.l0.left(0),ea.l0.py(8),ea.l0.px(12),ea.l0.position.absolute,ea.l0.dragRegion,{userSelect:"none",display:"grid",gridTemplateColumns:"1fr max-content 1fr",alignItems:"center",gap:8},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(v7," 0.2s ease-in-out, ").concat(v9," 0.2s ease-in-out")},animation:"".concat(v9," 0.2s ease-in-out")}]),center:(0,Q.iv)([ea.l0.noDragRegion,ea.l0.position.relative,ea.l0.rowWithGap(8),ea.l0.align.center]),right:(0,Q.iv)([ea.l0.rowWithGap(6),ea.l0.align.center,ea.l0.justify.end]),socialGroup:(0,Q.iv)([ea.l0.rowWithGap(1),ea.l0.align.stretch,ea.l0.borderRadius(),ea.l0.noDragRegion,{overflow:"hidden"}]),privatePill:(0,Q.iv)([(0,el._)({},ea.BC.max(1180),{display:"none"})]),inviteButton:(0,Q.iv)((0,ec._)((0,nf.uW)({size:16})).concat([nx.gU.filled,(0,el._)({borderTopLeftRadius:0,borderBottomLeftRadius:0},ea.BC.max("tabletMax"),{svg:[ea.l0.mr(0)],span:[ea.l0.display.none]})])),searchButton:(0,Q.iv)([ea.l0.height(32),ea.l0.width(32)]),commandButton:[ea.l0.flex.growAndShrink(1),(0,el._)({},ea.BC.max("tabletMax"),{"div span":[ea.l0.display.none],"div svg":[ea.l0.mr(0)]})],rightIconButtons:(0,Q.iv)([ea.l0.flex.row])},mn={windowsOSRoot:(0,Q.iv)([me.root,ea.l0.dragRegion,{paddingRight:vR.KN}])},mt=(0,et.memo)(function(){var e,n,t,r,i,o,a,l,c=(0,e8.useRouter)(),u=(0,eu.Z)().runner,s=(0,ef.Z)(),d=(0,J._)((0,et.useState)(!1),2),p=d[0],f=d[1],h=(0,ly.e$)(lm.y.Run),v=(0,ly.e$)(lm.y.Share),m=(0,cx.Z)(),g=(0,d7.Cl)(),y=(0,J._)((0,et.useState)(!1),2),b=y[0],x=y[1],Z=(e=(0,ey._)({},vx,{variables:{id:s}}),ew.a(vC,e)).data,w=aB(),C=ep(aO()),_=ld(),k=(0,ei.P5)({controlName:"flag-no-workspace-notifications",default:!1}),S=(0,ei.P5)({controlName:"flag-command-bar-input-field-button",default:!1}),I=(0,vT.cR)(),R=(null==Z?void 0:Z.repl.__typename)==="Repl"?Z.repl:null,G=null==Z?void 0:Z.currentUser,E=(null==R?void 0:R.multiplayers)&&R.multiplayers.length>0,T=(0,et.useRef)(null),D=(0,et.useRef)(null),P=(0,et.useRef)(p&&(null==v?void 0:v.isActive));(0,et.useEffect)(function(){!P.current||(null==v?void 0:v.isActive)||f(!1),P.current=p&&(null==v?void 0:v.isActive)},[v,p]),(0,et.useEffect)(function(){if(null==v?void 0:v.isActive){if(p&&D.current){null==v||v.delegateTooltip(D.current);return}v.delegateTooltip(T.current)}},[v,p,D]);var B=(null==R?void 0:null===(n=R.owner)||void 0===n?void 0:n.__typename)==="Team",U=!!((null==R?void 0:null===(t=R.owner)||void 0===t?void 0:t.__typename)==="Team"&&(null==R?void 0:null===(r=R.owner.capabilities)||void 0===r?void 0:r.isEducationPlan)),A=v6.find(function(e){return e===(null==R?void 0:R.workspaceCta)}),O=!U&&(null==R?void 0:R.authorizations.editPermissions.isAuthorized),X=!!((null==R?void 0:null===(o=R.authorizations)||void 0===o?void 0:null===(i=o.viewDeploymentConfig)||void 0===i?void 0:i.isAuthorized)&&!I);(0,nU.Il)(function(){if(!U)return[d2.toggleInviteDialog.id,function(){return f(function(e){return!e})}]},[f]);var L=(0,nU.gf)(d2.toggleInviteDialog.id);lf({match:nH.pl,data:{type:"action",label:"Invite",icon:(0,$.tZ)(e1.Z,{}),description:"Open invite dialog",keyboardShortcut:L,run:function(){f(!0)}}},{enabled:!U});var M=(0,nU.gf)(d2.run.id),W=(0,nU.gf)(lp.id),z=[{type:"button",key:"shortcuts",onClick:function(){_(),(0,eh.j)(eh.U3.KEYBOARD_SHORTCUTS_OPENED)},content:(0,$.BX)($.HY,{children:[(0,$.tZ)(vG.Z,{}),(0,$.tZ)(eA.xv,{children:"Shortcuts"}),W?(0,$.tZ)(nU.bM,{keyCombo:W,small:!0}):null]})}],N=(0,$.tZ)(vk.Z,{extraItems:z,onDocsClick:function(e){e.preventDefault(),w({pane:{type:"docs",data:{url:null}}})}});return R&&G?(0,$.BX)(e0.Tg,{tag:"header",css:m&&g?mn.windowsOSRoot:me.root,children:[(0,$.tZ)(h4,{repl:R,currentUser:G}),(0,$.tZ)(eo.G,{innerRef:null==h?void 0:h.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null==h?void 0:h.isActive)&&h.next()},css:me.center,children:(0,$.tZ)(lb.ZP,{runner:u,disableTooltip:null==h?void 0:h.isActive,shortcut:M})}),(0,$.BX)(eo.G,{css:me.right,children:[(null==R?void 0:R.lesson)?(0,$.tZ)(vh,{lesson:R.lesson}):null,S?(0,$.tZ)(v8,{}):(0,$.tZ)(cC.u,{tooltip:(0,$.BX)($.HY,{children:[(0,$.tZ)(eA.xv,{multiline:!1,variant:"small",children:ls}),W?(0,$.tZ)(nU.bM,{fontSize:10,keyCombo:W}):null]}),placement:"bottom-end",children:(0,$.tZ)(nf.zx,{text:"AI & Search",iconLeft:(0,$.tZ)(lr.Z,{}),onClick:function(){_()},css:me.commandButton})}),(0,$.BX)(e0.Tg,{css:[me.socialGroup],background:"root",children:[E?(0,$.tZ)(v0,{}):null,(0,$.tZ)(nP,{onAvatarClick:C}),O?(0,$.tZ)($.HY,{children:(0,$.tZ)(eo.G,{innerRef:T,css:{"&:only-child .invite-button":[ea.l0.borderRadius()]},children:(0,$.BX)(lQ.xo,{isOpen:p,placement:"bottom end",label:"Invite",css:ea.l0.width(400),onOpenChange:function(e){if(p&&!b){f(!1);return}e&&(0,eh.j)(eh.U3.INVITE_MODAL_OPENED,{replId:R.id,source:"replEnvironment"}),f(e)},noArrow:!0,children:[(0,$.BX)(nf.Yd,{css:me.inviteButton,className:"invite-button",children:[(0,$.tZ)(lg.Z,{}),(0,$.tZ)(eA.xv,{children:"Invite"}),(0,$.tZ)(v3,{css:me.privatePill})]}),(0,$.tZ)("div",{ref:D,children:(0,$.tZ)(nd,{handleUpgradeTriggered:function(e){return x(e)},replId:s,isTeamRepl:B,org:null!==(l=R.org)&&void 0!==l?l:void 0})})]})})}):null]}),X&&R?(0,$.tZ)(eo.G,{children:(0,$.tZ)(vH,{})}):null,I?(0,$.tZ)(nf.zx,{text:"Extension Devtools",iconLeft:(0,$.tZ)(vE.Z,{}),onClick:function(){w({pane:{type:"extensionDevtools"}})}}):null,A?(0,$.tZ)(lz,{cta:A,replId:s,isGroupProject:!!(null==R?void 0:null===(a=R.template)||void 0===a?void 0:a.isGroupProject),openIOtesterPane:function(){w({pane:{type:"autograder"}})}}):null,m?(0,$.BX)($.HY,{children:[N,(0,$.tZ)(vI.S,{})]}):(0,$.BX)($.HY,{children:[(0,$.BX)(eo.G,{css:me.rightIconButtons,children:[k?null:(0,$.tZ)(vS.Z,{pathname:c.pathname,showCount:!1}),N]}),(0,$.tZ)(v_.Z,{currentUser:G})]})]})]}):null}),mr=t(25978),mi=t(7198);function mo(){var e=(0,es.WU)(),n=i8(tJ),t=i8(tQ),r=i8(r7),i=i4(iT),o=i4(iG),a=i4(iP),l=i8(tq),c=i8(tK),u=i1(ia);return(0,et.useCallback)(function(s){var d=s.pane,p=s.activate,f=s.updateOnReveal,h=e(),v=(0,nF.Ur)(d)?l():c();if(v||(v=function(e){var n,t,r,i,o=e.panes,a=e.pane;if((0,nF.Ur)(a)){var l,c,u=a.data.path;return null!==(c=null===(l=o.find(function(e){var n=(0,J._)(e,2)[1];return(0,nF.Ur)(n)&&n.data.path===u}))||void 0===l?void 0:l[0])&&void 0!==c?c:null}return(0,nF.WQ)(a)?null!==(t=null===(n=o.find(function(e){var n=(0,J._)(e,2)[1];return!!(0,nF.WQ)(n)&&n.data.installationId===a.data.installationId&&n.data.path===a.data.path&&n.data.filePath===a.data.filePath}))||void 0===n?void 0:n[0])&&void 0!==t?t:null:(0,nF.b)(a.type)&&null!==(i=null===(r=o.find(function(e){return(0,J._)(e,2)[1].type===a.type}))||void 0===r?void 0:r[0])&&void 0!==i?i:null}({panes:(0,ec._)(n()).concat((0,ec._)(t())),pane:d})),v&&h){var m,g,y=r().layout,b=null===(m=to(y,h))||void 0===m?void 0:m.paneGroup,x=null===(g=to(y,v))||void 0===g?void 0:g.paneGroup;if(!u||(null==b?void 0:b.id)===(null==x?void 0:x.id))return(void 0===f||f)&&a({paneId:v,pane:d}),o({paneId:v,activate:p}),v}var Z=s.placement;return u&&null!=h?Z={type:"after",paneId:h}:(null==Z?void 0:Z.type)!=="secondary"||Z.relativeTo||(Z={type:"secondary",relativeTo:h}),i({pane:d,activate:p,placement:Z})},[e,l,c,u,i,n,t,r,o,a])}var ma={base:(0,Q.iv)([ea.l0.position.absolute,ea.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:nh.H.duration,transitionTimingFunction:nh.H.timingFunction}]),floating:(0,Q.iv)([{borderColor:ea.TV.outlineDimmest},ea.l0.shadow(2)]),dragging:(0,Q.iv)([{borderColor:ea.TV.outlineStronger},ea.l0.shadow(3)]),active:(0,Q.iv)([{borderColor:ea.TV.outlineDimmer}])},ml=(0,et.memo)(function(e){var n=aM(e.paneId),t=(0,cZ.Z)(n.isFloating),r=(0,cZ.Z)(n.isActive),i=(0,cZ.Z)(n.isBeingDragged),o=(0,cZ.Z)(n.hasBorder),a=(0,cZ.Z)(n.headerHeight);return o&&t?(0,$.tZ)(eo.G,{style:{width:"calc(100% + 2px)",left:-1,height:"calc(100% + ".concat(a,"px + 2px)"),top:-(a+1)},css:[ma.base,t&&ma.floating,r&&ma.active,i&&ma.dragging]}):null}),mc=eo.K.div,mu=(0,Q.iv)([ea.l0.width("100%"),ea.l0.position.absolute,ea.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),ms=(0,Q.iv)([ea.l0.height("100%"),ea.l0.position.absolute,ea.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),md=(0,Q.iv)([ea.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function mp(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var mf={topLeft:(0,Q.iv)([ea.l0.top(0),ea.l0.left(0),mp("topLeft")]),topRight:(0,Q.iv)([ea.l0.top(0),ea.l0.right(0),mp("topRight")]),bottomLeft:(0,Q.iv)([ea.l0.bottom(0),ea.l0.left(0),mp("bottomLeft")]),bottomRight:(0,Q.iv)([ea.l0.bottom(0),ea.l0.right(0),mp("bottomRight")])};function mh(e){var n=e.edge,t=e.size,r=e.onPointerDown;return"top"===n||"bottom"===n?(0,$.tZ)(mc,{onPointerDown:r,style:(0,el._)({height:t},n,-t),css:mu}):"right"===n||"left"===n?(0,$.tZ)(mc,{onPointerDown:r,style:(0,el._)({width:t},n,-t),css:ms}):(0,$.tZ)(mc,{onPointerDown:r,style:{height:t,width:t,cursor:"topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize"},css:[md,mf[n]]})}var mv=["bottom","right","left","bottomRight","bottomLeft"],mm=(0,et.memo)(function(e){var n=i4(ae);return(0,$.tZ)($.HY,{children:mv.map(function(t){return(0,$.tZ)(mh,{size:8,edge:t,onPointerDown:function(r){s_(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mg=["top","right","left","topRight","topLeft"],my=(0,et.memo)(function(e){var n=i4(ae);return(0,$.tZ)($.HY,{children:mg.map(function(t){return(0,$.tZ)(mh,{size:8,edge:t,onPointerDown:function(r){s_(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mb=(0,rc.$)(["fixedPositionOffsetX","fixedPositionOffsetY","transformX","transformY","scale","transformOriginX","width","height","transitionDuration","interactionBlanketDisplay","pointerEvents","userSelect"]),mx=mb.cssVars,mZ=mb.styleTokens,mw=(0,eO.X)({root:[ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0),ea.l0.borderRadius(0,0,4,4),ea.l0.container("pane"),{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate(".concat(mZ.transformX,", ").concat(mZ.transformY,") scale(").concat(mZ.scale,")"),transformOrigin:"".concat(mZ.transformOriginX," top"),width:mZ.width,height:mZ.height,transitionDuration:mZ.transitionDuration,"--fixed-position-offset-x":mZ.fixedPositionOffsetX,"--fixed-position-offset-y":mZ.fixedPositionOffsetY}],container:[ea.l0.position.relative,ea.l0.width("100%"),ea.l0.flex.growAndShrink(1),{overflow:"auto",zIndex:1,userSelect:mZ.userSelect}],interactionBlanket:[ea.l0.coverContainer,{zIndex:1,display:mZ.interactionBlanketDisplay}]}),mC=(0,et.memo)(function(e){var n,t,r,i,o=e.paneId,a=(0,nF.Se)().Content,l=aM(o),c=(0,cZ.Z)(l.isHidden),u=(0,cZ.Z)(l.data),s=(0,cZ.Z)(l.isActive),d=(0,cZ.Z)(l.isCommitted);(0,es.Np)(o,u);var p=(n=mo(),t=i4(iP),r=i4(tW),i=i4(iy),(0,nO.Z)(function(){return function(e){switch(e.operation){case"commit":r(o);return;case"open":n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:o}:{type:"after",paneId:o}});return;case"replace":t({paneId:o,pane:e.pane});return;case"remove":i(o);return;default:(0,uY.Z)(e)}}},[o,n,t,r,i]));return(0,$.tZ)(a,{pane:u,options:{paneId:o,isHidden:c,performPaneOperation:p,isActive:s,isCommitted:d}})}),m_=(0,eO.X)({overlay:[ea.l0.coverContainer,ea.l0.position.fixed,ea.l0.backgroundColor.backgroundOverlay,ea.l0.zIndex(i3.M.floatingPane)]});function mk(){var e=i4(av);return(0,et.useEffect)(function(){var n=function(n){"Escape"===n.key&&e()};return document.addEventListener("keydown",n,!0),function(){document.removeEventListener("keydown",n,!0)}},[e]),(0,$.tZ)(eo.G,{onClick:e,css:m_.overlay})}var mS=(0,et.memo)(function(e){var n,t,r,i,o,a,l=e.paneId,c=(0,sS.T)(),u=aD(),s=(t=({paneId:l}).paneId,i=(r=(0,J._)((0,mr.L)({accept:[iD.Tv.File,pp.z.Pane,pp.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var r=n.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:t})},drop:function(e,n){var r=n.getClientOffset();if(r){if(e.type===pp.z.Pane){a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:t});return}if("nodes"===e.type){var i=(0,nF.ME)(e.nodes);i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:t})}if(e.type===pp.z.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:t})}}}}),2))[0].isOver,o=r[1],a=(n=i4(i5),(0,et.useEffect)(function(){i||n(null)},[i,n]),{drag:i4(oN),drop:i4(oF)}),o),d=aM(l),p=(0,cZ.Z)(d.isActive),f=(0,cZ.Z)(d.isFloating),h=(0,cZ.Z)(d.isModal),v=(0,cZ.Z)(d.paneType),m=(0,cx.Z)(),g=(0,d7.NJ)(),y=(0,d7.Cl)(),b=(0,d7.Vm)(),x=(g||y)&&m?er.Mz:0,Z=(0,et.useRef)(null);(0,rl.j)(Z,d.size,function(e){var n,t=e.width,r=e.height;return n={},(0,el._)(n,mx.width,t+"px"),(0,el._)(n,mx.height,r+"px"),n}),(0,rl.j)(Z,d.transform,function(e){var n,t=e.x,r=e.y,i=e.scale;return n={},(0,el._)(n,mx.transformX,Math.round(t)+"px"),(0,el._)(n,mx.transformY,Math.round(r)+"px"),(0,el._)(n,mx.scale,i.toString()),n}),(0,rl.j)(Z,d.transformOriginXAtom,function(e){return(0,el._)({},mx.transformOriginX,e)}),(0,rl.j)(Z,d.viewportInset,function(e){var n,t=e.x,r=e.y;return n={},(0,el._)(n,mx.fixedPositionOffsetX,-t+"px"),(0,el._)(n,mx.fixedPositionOffsetY,-r-x+"px"),n}),(0,rl.j)(Z,d.isHidden,function(e){return{opacity:e?"0":"1",visibility:e?"hidden":"visible"}}),(0,rl.j)(Z,d.animate,function(e){return(0,el._)({},mx.transitionDuration,e&&c?"140ms":"0ms")}),(0,rl.j)(Z,d.zIndex,function(e){return{"z-index":e.toString()}}),(0,rl.j)(Z,d.disableInteractions,function(e){var n;return n={},(0,el._)(n,mx.interactionBlanketDisplay,e?"block":"none"),(0,el._)(n,mx.userSelect,e?"none":"auto"),(0,el._)(n,mx.pointerEvents,e?"none":"auto"),n});var w=b?void 0:{"& iframe":{pointerEvents:mZ.pointerEvents}},C=p?void 0:function(){u(l,{commit:"codeEditor"!==v})},_=(0,a6.u1)();return(0,$.BX)($.HY,{children:[h&&p?(0,$.tZ)(mk,{}):null,(0,$.tZ)(a6.Xq,{value:l,children:(0,$.tZ)(e0.Tg,{role:"tabpanel",id:l,"aria-labelledby":"tab-".concat(l),innerRef:(0,lY.l)(Z,f?void 0:s),css:mw.root,elevated:!0,children:(0,$.BX)(mi.Z,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,nO.Z)(function(){return{paneType:v}},[v]),children:[(0,$.tZ)(ml,{paneId:l}),(0,$.BX)(eo.G,{css:mw.container,onMouseDown:C,onContextMenu:C,innerRef:function(e){return _(l,e)},style:w,children:[(0,$.tZ)(eo.G,{tabIndex:-1}),(0,$.tZ)(mC,{paneId:l})]}),f&&!h?(0,$.tZ)(mm,{paneId:l}):null,(0,$.tZ)(eo.G,{css:mw.interactionBlanket})]},l)})})]})}),mI=t(38702),mR=t(19653),mG=t(80003),mE=(0,nX.cn)([]);function mT(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,rs.b9)(mE);(0,et.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,ec._)(e).concat((0,ec._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function mD(){var e=(0,rs.Dv)(mE);return(0,et.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,c=o.value,u=c.shortcut,s=c.run;!!u.cmdOrCtrlKey==!!(0,pB.jh)(n)&&!!u.altKey==!!n.altKey&&!!u.shiftKey==!!n.shiftKey&&(null===(l=u.key)||void 0===l?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),s(u))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var mP=t(1712),mB=t(74042),mU=(0,Q.F4)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),mA=(0,eO.X)({root:[ea.l0.color.foregroundDimmest,ea.l0.position.relative,ea.l0.width("100%"),ea.l0.height("100%"),{overflow:"hidden"}],arrows:[ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0),ea.l0.flex.row,ea.l0.flex.wrap,ea.l0.width("200%"),ea.l0.height("200%"),{animationName:mU,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[ea.l0.width("50%"),ea.l0.height("50%"),ea.l0.center]});function mO(e){var n=e.delay,t=e.duration;return(0,$.tZ)(eo.G,{css:mA.root,children:(0,$.BX)(eo.G,{css:mA.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,$.tZ)(eo.G,{css:mA.arrow,children:(0,$.tZ)(mP.Z,{size:12})}),(0,$.tZ)(eo.G,{css:mA.arrow,children:(0,$.tZ)(uA.Z,{size:12})}),(0,$.tZ)(eo.G,{css:mA.arrow,children:(0,$.tZ)(dV.Z,{size:12})}),(0,$.tZ)(eo.G,{css:mA.arrow,children:(0,$.tZ)(mB.Z,{size:12})})]})})}var mX=t(75334),mL=(0,eO.X)({root:[ea.l0.position.relative],circle:[ea.l0.top(-6),ea.l0.right(-6),ea.l0.minWidth(12),ea.l0.borderRadius(8),ea.l0.position.absolute,ea.l0.backgroundColor.backgroundHighest,ea.l0.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:ea.TV.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function mM(e){var n=e.count,t=(0,lF._)(e,["count"]);return(0,$.BX)(eo.G,{css:mL.root,children:[(0,$.tZ)(cE.Z,(0,ey._)({},t)),(0,$.tZ)(eo.G,{css:[mL.circle,mL.count],children:n})]})}function mW(){return(0,$.BX)(eo.G,{css:mL.root,children:[(0,$.tZ)(cE.Z,{}),(0,$.tZ)(eo.G,{css:mL.circle,children:(0,$.tZ)(dV.Z,{size:6})})]})}function mz(e){var n=e.run;return{match:nH.pl,data:{type:"action",label:"Keep open",icon:(0,$.tZ)(mX.Z,{}),run:n}}}function mN(e){var n=e.paneId,t=e.paneGroupId,r=(0,nF.Se)(),i=aT(n),o=i4(iy),a=i4(ix),l=i4(ib),c=i1((0,nO.Z)(function(){return(0,nX.cn)(function(e){var t=to(e(tj),n);return t?t.paneGroup.panes.findIndex(function(e){return e===n}):null})},[n])),u=i1((0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=tl(e(tj),t);return n?n.panes.length:null})},[t]));return(0,nO.Z)(function(){var e=r.getTitle(i),t=[{match:nH.pl,data:{type:"action",label:"Close "+e,icon:(0,$.tZ)(cE.Z,{}),run:function(){o(n)}}}];return u&&u>1&&(null!==c&&c<u-1&&t.push({match:nH.pl,data:{type:"action",label:"Close to the right",icon:(0,$.tZ)(mW,{}),run:function(){a(n)}}}),t.push({match:nH.pl,data:{type:"action",label:"Close all other tabs",icon:(0,$.tZ)(mM,{count:u-1}),run:function(){l(n)}}})),t},[r,i,u,c,o,n,a,l])}var mF=function(e){return{data:e,match:nH.pl}},mV=t(62940),mH=new Map([["left",{label:"Move Left",icon:(0,$.tZ)(uA.Z,{})}],["right",{label:"Move Right",icon:(0,$.tZ)(dV.Z,{})}],["up",{label:"Move Up",icon:(0,$.tZ)(mB.Z,{})}],["down",{label:"Move Down",icon:(0,$.tZ)(mP.Z,{})}]]),mj=t(37978),mY=new Map([["leftOf",{label:"Move Left",icon:(0,$.tZ)(uA.Z,{})}],["rightOf",{label:"Move Right",icon:(0,$.tZ)(dV.Z,{})}],["above",{label:"Move Up",icon:(0,$.tZ)(mB.Z,{})}],["below",{label:"Move Down",icon:(0,$.tZ)(mP.Z,{})}]]),mq=t(72359),mK=t(41589),mJ=t(36536),m$=t(54707),mQ=t(50798),m0=new Map([["leftOf",{commandId:d2.insertPaneGroupUp.id,label:"Insert Left",icon:(0,$.tZ)(ag.Z,{})}],["rightOf",{commandId:d2.insertPaneGroupRight.id,label:"Insert Right",icon:(0,$.tZ)(ay.Z,{})}],["above",{commandId:d2.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,$.tZ)(ab.Z,{})}],["below",{commandId:d2.insertPaneGroupDown.id,label:"Insert Down",icon:(0,$.tZ)(am.Z,{})}]]),m1=t(33813),m2=function(e){return{data:e,match:nH.pl}};function m4(e){var n,t,r,i,o,a,l,c,u=e.paneId,s=(n=(0,nF.Se)(),t=(0,a5.OY)(),r=i4(iq),(0,et.useCallback)(function(){return{data:{type:"context",label:aV.cE,icon:(0,$.tZ)(aY.Z,{})},commands:function(){return t().map(function(e){return{match:nH.pl,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,eh.j)(eh.U3.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:u,pane:e})}}}})}}},[t,n,r,u])),d=(i=(0,es.AA)(),o=(0,es.lv)(),a=i4(iq),(0,et.useCallback)(function(){var e=o(),n=i().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,$.tZ)(nV.Z,{})},commands:function(e){var t=e.search;return(0,nj.w)({paths:n,search:t,run:function(e){a({paneId:u,pane:{type:(0,nF.Dp)({path:e}),data:{path:e}}})}})}}},[i,a,u,o])),p=(l=(0,eu.Z)().fs,c=i4(iq),(0,nO.Z)(function(){return{match:nH.pl,data:{type:"context",label:"Files",icon:(0,$.tZ)(mX.Z,{})},commands:function(e){var n=e.search,t=e.active;return(0,ev._)(function(){var e;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((e=r.sent()).error)return[2,[]];if(!e.files)throw Error("Expected files");return[2,(0,nj.w)({paths:e.files,search:n,run:function(e){c({paneId:u,pane:{type:(0,nF.Dp)({path:e}),data:{path:e}}})}})]}})})()}}},[l,c,u]));return(0,nO.Z)(function(){return{match:nH.pl,data:{type:"context",label:"Change tab",icon:(0,$.tZ)(m1.Z,{})},commands:function(e){var n=e.search,t=e.active;return n||t?[d(),p,s()]:[]}}},[d,s,p])}var m8=(0,Q.iv)(ea.l0.center,{fontSize:ea.TV.fontSizeSmall,border:"1px solid",borderColor:ea.TV.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},ea.l0.borderRadius(8));function m3(e){return(0,$.tZ)(eo.G,{css:m8,children:(0,$.tZ)(eo.G,{css:{lineHeight:1},children:e.count})})}var m5=(0,eO.X)({overlay:[ea.l0.align.end,ea.l0.p(16),ea.l0.position.absolute,ea.l0.overflow("hidden"),ea.l0.zIndex(i3.M.overlay)],surface:[ea.l0.position.relative,ea.l0.borderRadius(8),ea.l0.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:ea.TV.outlineDefault,opacity:0},ea.l0.shadow(3)],innerSurface:[ea.l0.flex.growAndShrink(1),ea.l0.borderRadius(8)]}),m6=(0,eO.X)({root:[ea.l0.colWithGap(8),ea.l0.p(8),{borderTop:"1px solid",borderColor:ea.TV.outlineDimmer}],row:[ea.l0.rowWithGap(2),ea.l0.align.center,ea.l0.justify.spaceBetween],hint:[ea.l0.rowWithGap(4)]});function m7(){var e=(0,nA.zb)();return(0,$.BX)(eo.G,{css:m6.root,children:[(0,$.BX)(eo.G,{css:m6.row,children:[(0,$.tZ)(eA.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,$.BX)(eo.G,{css:m6.hint,children:[(0,$.tZ)(nU.bM,{keyCombo:"".concat(e),small:!0}),(0,$.tZ)(mG.ir,{small:!0,text:(0,$.tZ)(mO,{duration:6e3,delay:6e3})})]})]}),(0,$.BX)(eo.G,{css:m6.row,children:[(0,$.tZ)(eA.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,$.BX)(eo.G,{css:m6.hint,children:[(0,$.tZ)(nU.bM,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,$.tZ)(mG.ir,{small:!0,text:(0,$.tZ)(mO,{duration:6e3,delay:1500})})]})]})]})}var m9=(0,et.memo)(function(){var e=function(){var e=i1(ia),n=i1(oQ);if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:ea.TV.accentPrimaryStronger,borderRadius:ea.TV.borderRadius6,boxShadow:ea.TV.shadow3,transitionProperty:"transform, height, width",transitionDuration:nh.H.duration,transitionTimingFunction:nh.H.timingFunction};return(0,ey._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=i4(o8),t=(0,mR.Z)(n,[]);return(0,et.useEffect)(function(){var e=setTimeout(function(){(0,dm.A)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,$.tZ)(mI.MT,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,$.tZ)(eo.G,{style:e,css:m5.overlay,children:(0,$.tZ)(e0.Tg,{innerRef:t,elevated:!0,css:m5.surface,children:(0,$.tZ)(e0.Tg,{css:m5.innerSurface,elevated:!0,children:(0,$.tZ)(gr,{})})})})})}),ge={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},gn={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},gt=Object.keys(ge),gr=(0,et.memo)(function(){var e=i4(o3),n=i4(o5),t=i4(o1),r=i1(ia);mT({key:"Escape"},{run:function(){t()}}),mT(gt.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(ge[n.key])},enabled:!r}),mT(gt.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:gn[e.key]})},enabled:!r});var i=i1(o$);return i&&"sidebar"!==i.target?(0,$.tZ)($.HY,{children:(0,$.tZ)(gi,{paneGroupId:i.paneGroupId,paneId:i.paneId})}):null});function gi(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k,S,I,R,G,E,T,D,P,B,U,A,O,X,L,M,W,z,N,F,V,H,j,Y,q,K,Q,ee,en,et,er,eo,ea,eu,es,ed,ep,ef,ev,em,eg,eb,ex,eZ,ew,eC,e_,ek,eS,eI,eR,eG,eE,eT,eD,eP,eB,eU=i1(ia),eA=i4(o8),eO=i4(o1),eX=(eZ=e.paneGroupId,o=(n={paneId:ew=e.paneId,paneGroupId:eZ}).paneId,a=n.paneGroupId,l=(0,nF.Se)(),c=aT(o),u=(0,a6.Y6)(o),s=(t=aM(o),r=(0,cZ.Z)(t.isCommitted),i=i4(tW),r?void 0:mz({run:function(){return i(o)}})),d=mN({paneId:o,paneGroupId:a}),eC=(0,nO.Z)(function(){var e,n,t,r=l.getTitle(c),i=null!==(n=null==u?void 0:null===(e=u.actions)||void 0===e?void 0:e.map(mF))&&void 0!==n?n:[],o=null!==(t=null==u?void 0:u.commands)&&void 0!==t?t:[],a=(0,ec._)(i).concat((0,ec._)(o),[{data:{type:"group",key:"pane-close"},commands:function(){return[s].concat((0,ec._)(d)).filter(Boolean)}}]);return{match:nH.pl,data:{type:"context",label:r,icon:(0,$.tZ)(l.Icon,{pane:c})},commands:function(e){var n=e.active,t=e.search;return n||t?a:[]}}},[c,u,l,s,d]),ek=(e_={paneId:ew,paneGroupId:eZ}).paneGroupId,eS=e_.paneId,eI=i1((0,nO.Z)(function(){return(0,nX.cn)(function(e){var n=e(tD),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map(function(n){return[n,e(e(tR(n)).data)]}),d="floating"===u.path[0];(d?t:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}})},[])),eR=(0,nF.Se)(),eG=i4(iG),eE=i4(iE),eT=m4({paneId:eS}),eD=(0,nO.Z)(function(){var e=eI.tiling,n=eI.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:nH.pl,data:{type:"action",label:"New tab",icon:(0,$.tZ)(aj.Z,{}),run:function(){eE({paneGroupId:ek,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[eT,{match:nH.pl,data:{type:"context",label:(0,lT.Z)("Tab",t),icon:(0,$.tZ)(m3,{count:t})},commands:function(t){var i=t.active,o=t.search;if(!(i||o))return[];var a=(0,ec._)(e).concat((0,ec._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,J._)(e,2),t=n[0],r=n[1];return{match:nH.pl,data:{type:"action",label:eR.getTitle(r),icon:(0,$.tZ)(eR.Icon,{pane:r}),run:function(){eG({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[eT,r]},[eI,eR,eG,eE,ek,eT]),es=(p={paneGroupId:eZ,paneId:ew}).paneGroupId,ep=(m=(f={paneId:ed=p.paneId,paneGroupId:es}).paneId,g=aW(f.paneGroupId),y=(0,cZ.Z)(g.isMaximized),b=(0,cZ.Z)(g.isFloating),x=!y&&!b,Z=(h=(0,mQ.xF)(),v=i4(iw),(0,nO.Z)(function(){return(0,ec._)(m0.entries()).map(function(e){var n,t,r=(0,J._)(e,2),i=r[0],o=r[1],a=o.commandId,l=o.label,c=o.icon;return{match:nH.pl,data:{label:l,icon:c,type:"action",keyboardShortcut:null!==(t=null===(n=h.get(a))||void 0===n?void 0:n.shortcut)&&void 0!==t?t:void 0,run:function(){v({placement:i,paneId:m,autoFocus:!0}),(0,eh.j)(eh.U3.WS_SPLIT_USED,{action:"opened",placement:i})}}}})},[h,v,m])),(0,nO.Z)(function(){return x?[{match:nH.pl,data:{type:"context",label:"Add pane",icon:(0,$.tZ)(m$.Z,{})},commands:function(e){var n=e.active,t=e.search;return n||t?Z:[]}}]:[]},[x,Z])),ef=(w=aM(ed),C=i1(ia),_=(0,cZ.Z)(w.isFloating),k=!C&&!_,S=i4(iW),(0,nO.Z)(function(){var e=(0,ec._)(mY.entries()).map(function(e){var n=(0,J._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:nH.pl,data:{label:i,icon:o,type:"action",run:function(){S(t)}}}});return k?[{match:nH.pl,data:{type:"context",label:"Move tab",icon:(0,$.tZ)(mj.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]:[]},[k,S])),ev=(I=aW(es),R=(0,cZ.Z)(I.isMaximized),G=(0,cZ.Z)(I.isFloating),E=!R&&!G,T=i4(o5),(0,nO.Z)(function(){var e=(0,ec._)(mH.entries()).map(function(e){var n=(0,J._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:nH.pl,data:{label:i,icon:o,type:"action",run:function(){T({direction:t})}}}});return E?[{match:nH.pl,data:{type:"context",label:"Move group",icon:(0,$.tZ)(mV.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]:[]},[E,T])),em=(P=(D=aX()).maximizePaneGroup,B=D.restoreMaximizedPaneGroup,U=aW(es),A=(0,cZ.Z)(U.isMaximized),O=i1(r_),X=(0,nU.gf)(d2.toggleMaximizePaneGroup.id),(0,nO.Z)(function(){return A?O?[]:[{match:nH.pl,data:{type:"action",label:"Restore",icon:(0,$.tZ)(mK.Z,{}),run:function(){return B()},keyboardShortcut:X}}]:[{match:nH.pl,data:{type:"action",label:"Maximize",icon:(0,$.tZ)(mq.Z,{}),run:function(){return P({paneGroupId:es})},keyboardShortcut:X}}]},[A,X,O,B,P,es])),eg=(L=i4(iZ),M=i4(o8),W=i1(r_),z=(0,nU.gf)(d2.removePaneGroup.id),(0,nO.Z)(function(){return W?[]:[{match:nH.pl,data:{type:"action",label:"Close",icon:(0,$.tZ)(cE.Z,{}),run:function(){M(),L({paneGroupId:es})},keyboardShortcut:z}}]},[M,L,W,z,es])),eb=(F=(N={paneId:ed,paneGroupId:es}).paneId,V=N.paneGroupId,H=i4(an),j=aW(V),Y=(0,cZ.Z)(j.isMaximized),q=(0,cZ.Z)(j.isFloating),K=(0,nU.gf)(d2.toggleFloatPaneGroup.id),(0,nO.Z)(function(){return Y?[]:[{match:nH.pl,data:{type:"action",label:q?"Unfloat":"Float",icon:q?(0,$.tZ)(ax.Z,{}):(0,$.tZ)(ci.Z,{}),keyboardShortcut:K,run:function(){H(F)}}}]},[F,H,K,q,Y])),ex=(ee=aW((Q={paneId:ed,paneGroupId:es}).paneGroupId),en=aM(Q.paneId),et=aL(Q.paneGroupId),er=i8(t0),eo=i4(rC),ea=(0,cZ.Z)(ee.isMaximized),eu=(0,ei.P5)({controlName:"flag-popout-pane"}),(0,nO.Z)(function(){return!eu||ea?[]:[{match:nH.pl,data:{type:"action",label:"New window",icon:(0,$.tZ)(mJ.Z,{}),run:function(){var e=rv()(),n=er().filter(function(e){var n=(0,J._)(e,1)[0];return et.panes.current.includes(n)});eo({popupId:e,state:{sidebarPercent:0,type:"saved",layout:{floating:[],tiling:{id:rv()(),type:"paneGroup",percent:100,activeIndex:et.activeIndex.current,panes:et.panes.current}},data:n.reduce(function(e,n){var t=(0,J._)(n,2),r=t[0],i=t[1];return(0,ny._)((0,ey._)({},e),(0,el._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(en.size.current.height,"px,width=").concat(en.size.current.width,"px")),(0,eh.j)(eh.U3.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,J._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,J._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,J._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,J._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[eu,ea,et.activeIndex,et.panes,er,eo,en.size])),eP=(0,nO.Z)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,ec._)(ep).concat((0,ec._)(ef),(0,ec._)(ev),(0,ec._)(em),(0,ec._)(eb),(0,ec._)(ex),(0,ec._)(eg))}}]},[ep,ef,ev,em,eb,ex,eg]),(0,nO.Z)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[eC].concat((0,ec._)(eD),(0,ec._)(eP))}}},[eC,eD,eP])),eL=(0,dz.Gn)("fontSize").preferences;return(0,$.tZ)(nB.X,{iconBreadcrumbs:!0,command:eX,onAction:function(){return eA()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),eO();return}(0,pB.jh)(e)&&e.preventDefault()},footer:eU?null:(0,$.tZ)(m7,{}),fontSize:null!==(eB=eL.fontSize)&&void 0!==eB?eB:14,compact:!0})}var go={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,nA.l2)({cmdOrCtrl:!0,key:"j"})};function ga(){var e=i4(o2),n=i1(o4);return((0,nU.Il)(function(){return[go.id,function(){return e()}]},[e]),n)?(0,$.tZ)(m9,{}):null}var gl=t(46051);function gc(){var e=(0,eu.Z)().presence,n=(0,J._)((0,et.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,et.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function gu(){var e=(0,eb._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return gu=function(){return e},e}var gs={},gd=(0,ex.Ps)(gu());function gp(e){var n,t,r=(n={variables:{userIds:e.slice(0,sQ.I)},skip:0===e.length},t=(0,ey._)({},gs,n),ew.a(gd,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var gf={root:(0,Q.iv)([ea.l0.rowWithGap(4),ea.l0.align.center]),text:(0,Q.iv)([ea.l0.flex.shrink(1),ea.l0.align.center]),username:(0,Q.iv)([ea.l0.flex.shrink(2),ea.l0.maxWidth(140),ea.l0.truncate])};function gh(){var e=gc();return 0===e.length?null:1===e.length?(0,$.tZ)(gv,{user:e[0]}):(0,$.BX)(eA.xv,{variant:"small",color:"dimmest",css:gf.text,multiline:!1,children:[e.length," users are observing you"]})}function gv(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=gp([t]),a={id:t,username:r,color:i,image:null==o?void 0:o.get(t)};return(0,$.BX)(eo.G,{css:gf.root,children:[(0,$.tZ)(eB.q,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,$.tZ)(eA.xv,{variant:"small",color:"dimmer",css:gf.username,multiline:!1,children:r}),(0,$.tZ)(eA.xv,{variant:"small",color:"dimmest",css:gf.text,multiline:!1,children:"is observing you"})]})}var gm={root:(0,Q.iv)([ea.l0.rowWithGap(4),ea.l0.align.center]),text:(0,Q.iv)([ea.l0.flex.shrink(1),ea.l0.align.center]),username:(0,Q.iv)([ea.l0.flex.shrink(2),ea.l0.maxWidth(140),ea.l0.truncate])};function gg(e){var n=e.id,t=e.username,r=e.color,i=gp([n]),o=(0,eu.Z)().presence,a={id:n,username:t,color:r,image:null==i?void 0:i.get(n)};return(0,$.BX)(eo.G,{css:gm.root,children:[(0,$.tZ)(eB.q,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,$.tZ)(eA.xv,{css:gm.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,$.tZ)(eA.xv,{css:gm.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,$.tZ)(cR.hU,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,$.tZ)(cE.Z,{})})]})}var gy=(0,eO.X)({root:[ea.l0.px(4),ea.l0.rowWithGap(8),ea.l0.height("100%"),ea.l0.border({color:ea.TV.outlineDimmest,direction:"bottom"}),ea.l0.highRes({borderBottomWidth:.5}),ea.l0.align.center]});function gb(e){var n,t,r,i=e.paneId,o=aT(i),a=(n=(0,gl.Z)(),t=aP({paneId:i}),n&&t?n:null),l=(r=gc(),aP({paneId:i})&&r.length>0?r:null),c=(0,nF.Ur)(o)?o.data.path:null,u=null;return(a&&(u=(0,$.tZ)(gg,{id:a.id,username:a.username,color:a.color})),null!==u||l)?(0,$.BX)(eo.G,{css:gy.root,children:[l&&c?(0,$.tZ)(gh,{}):null,u]}):null}var gx=(0,eO.X)({handle:[ea.l0.flex.growAndShrink(1),ea.l0.minWidth(16),ea.l0.height("100%"),{borderBottom:"1px solid ".concat(ea.TV.outlineDimmest)},ea.l0.highRes({borderBottomWidth:.5})]});function gZ(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=aA({paneGroupId:n}),i=r.isDragging,o=r.dnd,a=aX().toggleMaximizedPaneGroup,l=aW(n),c=(0,cZ.Z)(l.isMaximized),u=aD();return o?(0,$.tZ)(eo.G,{onDoubleClick:function(){a({paneGroupId:n})},title:c?"Double click to restore.":"Double click to maximize. Drag to move.",css:gx.handle,style:{cursor:c?void 0:i?"grabbing":"grab"},onPointerDown:function(e){u(t),!c&&"button"in e&&0===e.button&&s_(e,{start:o.start,move:o.update,end:o.end})}}):null}var gw=(0,Q.iv)([ea.l0.flex.row,ea.l0.width("100%"),ea.l0.height("100%")]),gC=(0,Q.iv)([ea.l0.pl(6),ea.l0.rowWithGap(6),ea.l0.height("100%"),ea.l0.align.center,ea.l0.border({direction:"bottom",color:ea.TV.outlineDimmest}),ea.l0.highRes({borderBottomWidth:.5})]),g_=(0,Q.iv)([ea.l0.fontSize(13)]);function gk(e){var n=e.headerId,t=e.paneId,r=aT(t),i=(0,nF.Se)(),o=i.getTitle(r),a=i.Icon({pane:r,size:16});return(0,$.BX)(eo.G,{css:gw,children:[(0,$.BX)(eo.G,{css:gC,children:[a,(0,$.tZ)(eA.xv,{css:g_,children:o})]}),(0,$.tZ)(gZ,{paneGroupId:n,activeTabPaneId:t})]})}var gS=t(58582),gI=t(59775),gR=(0,nX.cn)(null),gG=function(){return(0,cM.Hg)(gR)},gE=function(){var e=(0,cM.$X)(gR),n=gG(),t=(0,et.useCallback)(function(n){return new Promise(function(t){e({paths:n,onCallback:function(n){t(n),e(null)}})})},[e]);return(0,et.useMemo)(function(){return{isShown:null!==n,show:t}},[n,t])},gT=t(43580),gD=(0,rc.$)(["fontStyle","iconOpacity","titleContainerPaddingRight","closeButtonOpacity","unsavedChanges","closeIconDisplay"]),gP=gD.cssVars,gB=gD.styleTokens,gU=eo.K.div,gA=(0,Q.iv)([ea.l0.display.inlineFlex,ea.l0.height("100%"),ea.l0.flex.row,ea.l0.align.center,ea.l0.position.relative,ea.l0.minWidth(ea.TV.space96),{userSelect:"none","& > span":[{"& > *":ea.l0.height("100%")},ea.l0.display.flex,ea.l0.flex.grow(1),ea.l0.flex.row,ea.l0.align.center,ea.l0.height("100%")]}]),gO=(0,Q.iv)([ea.l0.position.relative,ea.l0.cursor.pointer,ea.l0.align.center,ea.l0.rowWithGap(6),ea.l0.px(6),ea.l0.focusRing,ea.l0.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),gX=(0,eO.X)({rootDragging:[ea.l0.width(0),ea.l0.visibility.hidden],root:[(D={":not(:last-of-type)":[ea.l0.border({direction:"right",color:ea.TV.outlineDimmest}),ea.l0.highRes({borderRightWidth:.5})],":first-of-type > div":{borderTopLeftRadius:4,"[data-pane-tab-primary-button]":{borderTopLeftRadius:4},"[data-active-pane-line]":[{clipPath:"polygon(100% 0%, 100% 100%, 2.35px 100%, 3px 55%, 4px 13%, 5px 0%)"},ea.l0.highRes({clipPath:"polygon(100% 0%, 100% 100%, 1.85px 100%, 2.5px 55%, 3.5px 13%, 4.5px 0%)"})]},":last-of-type [data-active-pane-line]":[{width:"calc(100% + 1px)"},ea.l0.highRes({width:"calc(100% + 0.5px)"})]},(0,el._)(D,gP.closeButtonOpacity,0),(0,el._)(D,"&:hover",(0,el._)({},gP.closeButtonOpacity,1)),D)],notificationDot:[ea.l0.top(3),ea.l0.right(3)],tabBaseDefault:[gA,ea.l0.color.foregroundDimmer,{backgroundColor:"transparent"}],tabBaseActive:[gA,ea.l0.color.foregroundDefault,{boxShadow:"0 1px 0 0 "+nx.vb.surfaceBackground,"data-pane-tab-primary-button":[ea.l0.transition.none,ea.l0.hover({boxShadow:"0 1px 0 0 "+nx.vb.interactiveBackground})]}],tabTitleContainer:[ea.l0.rowWithGap(8),ea.l0.align.baseline,ea.l0.position.relative,{paddingRight:gP.titleContainerPaddingRight}],tabTitle:[ea.l0.truncate,ea.l0.maxWidth(180),ea.l0.display.inlineBlock,ea.l0.fontSize(13),{fontStyle:gB.fontStyle,"::after":{display:"block",content:"attr(title)",height:"0",fontStyle:"normal",color:"transparent",overflow:"hidden",visibility:"hidden"}}],uniquePath:[ea.l0.truncate,ea.l0.maxWidth(180),ea.l0.display.inlineBlock,ea.l0.fontSize(12),ea.l0.color.foregroundDimmest,{fontStyle:gB.fontStyle}],tabIcon:[ea.l0.width(16),ea.l0.height(16),ea.l0.position.relative,{opacity:gB.iconOpacity}],button:[ea.l0.position.relative,ea.l0.cursor.pointer,ea.l0.align.center,ea.l0.rowWithGap(6),ea.l0.px(6),ea.l0.focusRing,nx.gU.listItem,ea.l0.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}],buttonDefault:[nx.gU.listItem,gO],buttonActive:[gO],activeLine:[ea.l0.height(1),ea.l0.top(0),ea.l0.left(-1),{position:"absolute",pointerEvents:"none",width:"calc(100% + 2px)",backgroundColor:ea.TV.accentPrimaryDefault},ea.l0.highRes({left:-.5,width:"calc(100% + 1px)"})],closeWrapper:[ea.l0.height("100%"),{button:[ea.l0.width(20),ea.l0.height("100%"),ea.l0.borderRadius(0),ea.l0.color.foregroundDimmer,(B={},(0,el._)(B,gP.unsavedChanges,"block"),(0,el._)(B,gP.closeIconDisplay,"none"),(0,el._)(B,"&:hover",(P={},(0,el._)(P,gP.unsavedChanges,"none"),(0,el._)(P,gP.closeIconDisplay,"block"),P)),(0,el._)(B,"paddingBottom",3),B)]}],unsavedChangesContainer:[{display:gB.unsavedChanges}],closeIconContainer:[{display:gB.closeIconDisplay}],displayNone:[ea.l0.display.none],displayBlock:[ea.l0.display.block],unsavedChangesIndicator:[ea.l0.width(8),ea.l0.height(8),ea.l0.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]}),gL=(0,et.memo)(function(e){var n,t,r,i,o,a,l,c,u,s,d=e.paneId,p=e.paneGroupId,f=e.isActive,h=e.removePane,v=e.dragGroup,m=e.selectTab,g=(0,eu.Z)().fs,y=gE().show,b=aM(d),x=(0,cZ.Z)(b.isCommitted),Z=i4(tW),w=aT(d),C=(0,nF.Se)(),_=C.getTitle(w),k=C.Icon({pane:w,size:16}),S=(0,cZ.Z)(b.isActivePane),I=(0,e2.b2)({paneType:w.type}),R="codeEditor"===w.type,G=(0,gT.Z)(g,R?w.data.path:null),E=(0,es.t4)((0,nF.Ur)(w)?w.data.path:null),T=void 0;(0,nF.Ur)(w)&&w.data.path&&(T=w.data.path);var D=(0,sS.T)(),P=(0,et.useRef)(null),B=(0,J._)((0,pf.c)({type:pp.z.Pane,item:function(){var e,n=(null===(e=P.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:pp.z.Pane,paneId:d,width:n}},collect:function(e){return{isDragging:e.isDragging()}}}),2),U=B[0].isDragging,A=B[1],O=i4(iz);(0,et.useEffect)(function(){return O(U)},[O,U]);var X=aA({paneGroupId:p}).dnd,L=X&&v?function(e){1!==e.button&&s_(e,{start:X.start,move:X.update,end:X.end})}:void 0;(0,et.useEffect)(function(){f&&P.current&&(0,gI.Z)(P.current,{behavior:D?"auto":"smooth",scrollMode:"if-needed"},!0)},[f,D,P]);var M=(t=(n={paneId:d,paneGroupId:p}).paneId,r=n.paneGroupId,i=(0,a6.dr)(),o=i0(),a=(0,et.useCallback)(function(e){var n=o.get(tR(e));return{pane:o.get(n.data),isCommitted:n.isCommitted}},[o]),l=i4(tW),c=m4({paneId:t}),u=mN({paneId:t,paneGroupId:r}),s=(0,nF.Se)(),(0,et.useCallback)(function(){var e,n,r,o=a(t),d=o.isCommitted,p=o.pane,f=i(t),h=null!==(n=null==f?void 0:null===(e=f.actions)||void 0===e?void 0:e.map(m2))&&void 0!==n?n:[],v=null!==(r=null==f?void 0:f.commands)&&void 0!==r?r:[],m=d?mz({run:function(){return l(t)}}):null;return{data:{type:"context",label:"Search actions",icon:(0,$.tZ)(s.Icon,{pane:p})},commands:function(){return(0,ec._)(h).concat((0,ec._)(v),[{data:{type:"group",key:"secondary"},commands:function(){return[m,c].concat((0,ec._)(u)).filter(Boolean)}}])}}},[i,s,a,l,t,c,u])),W=(0,pO.av)().onContextMenu,z=(0,et.useRef)(!1),N=(0,et.useMemo)(function(){if(f&&!x)return function(){z.current&&Z(d)}},[Z,f,x,d]),F=function(e){void 0===e?uX.n_({category:"pane",message:"Tab closed: "+w.type}):uX.n_({category:"pane",message:"Tab closed: "+w.type,data:{reason:e}}),(0,eh.j)(eh.U3.WS_TAB_CLOSED,{paneType:w.type}),h(d)},V=function(e){"confirm"===e?F("save changes"):"discard"===e&&F("discard changes")};return(0,$.tZ)($.HY,{children:(0,$.tZ)(gU,{ref:P,css:U?gX.rootDragging:gX.root,onAuxClick:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),R&&G?w.data.path&&y([w.data.path]).then(V):F("middle click"))},onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation())},children:(0,$.tZ)(gN,{innerRef:L?void 0:A,hasUnsavedChanges:G,uniquePath:E,title:_,icon:"commands"!==w.type?k:void 0,isActive:f,isActivePane:S,italicizeTitle:!x&&"commands"!==w.type,tooltip:T,paneId:d,indicatorColor:I,onClick:N,onContextMenu:function(e){return W(e,{command:M()})},onMouseDown:function(){f?z.current=!0:(uX.n_({category:"pane",message:"Tab clicked: "+w.type}),(0,eh.j)(eh.U3.WS_TAB_OPENED,{paneType:w.type}),m(d),z.current=!1)},onPointerDown:L,onClose:function(){R&&G?w.data.path&&y([w.data.path]).then(V):F()}})})})}),gM=eo.K.button,gW=function(){return(0,$.tZ)(eo.G,{css:gX.unsavedChangesIndicator})};function gz(e){var n=e.onClick,t=e.tabIndex,r=e.hasUnsavedChanges,i=r?gX.unsavedChangesContainer:gX.displayNone,o=r?gX.closeIconContainer:gX.displayBlock;return(0,$.tZ)(cR.hU,{onClick:n,alt:r?"Close tab (unsaved changes)":"Close tab",tabIndex:t,size:12,children:(0,$.BX)($.HY,{children:[(0,$.tZ)(eo.G,{css:i,children:(0,$.tZ)(gW,{})}),(0,$.tZ)(eo.G,{css:o,children:(0,$.tZ)(cE.Z,{})})]})})}function gN(e){var n=e.title,t=e.uniquePath,r=e.hasUnsavedChanges,i=e.onClick,o=e.onContextMenu,a=e.onClose,l=e.isActive,c=e.isActivePane,u=e.italicizeTitle,s=e.innerRef,d=e.icon,p=e.onMouseDown,f=e.onPointerDown,h=e.paneId,v=e.indicatorColor,m=e.tooltip,g=(0,et.useRef)(null),y=(0,J._)((0,ph.XZ)(g,!1),4),b=y[0],x=y[1],Z=y[2],w=y[3];return(0,ph.Ym)(x,g),(0,$.BX)(e0.Tg,{elevated:l,innerRef:s,css:l?gX.tabBaseActive:gX.tabBaseDefault,children:[(0,$.tZ)(cC.u,{isDisabled:!m,tooltip:m,maxWidth:600,delay:"long",closeDelay:"none",children:(0,$.BX)(gM,{role:"tab",ref:g,tabIndex:b,onKeyDown:Z,onMouseDown:p,onClick:function(e){w(),null==i||i(e)},onPointerDown:f,onContextMenu:o,css:l?gX.buttonActive:gX.buttonDefault,"aria-selected":l,"aria-controls":h,id:"tab-".concat(h),"data-pane-tab-primary-button":!0,children:[d?(0,$.tZ)(eo.G,{style:(0,el._)({},gP.iconOpacity,l?"1":"0.6"),css:gX.tabIcon,children:d}):null,(0,$.BX)(eo.G,{style:(0,el._)({},gP.titleContainerPaddingRight,v?"16px":"0px"),css:gX.tabTitleContainer,children:[(0,$.tZ)(eA.xv,{multiline:!1,css:gX.tabTitle,title:n,style:(0,el._)({},gP.fontStyle,u?"italic":"inherit"),children:n}),t?(0,$.tZ)(eA.xv,{multiline:!1,css:gX.uniquePath,style:(0,el._)({},gP.fontStyle,u?"italic":"inherit"),children:t}):null,v?(0,$.tZ)(aQ.B,{css:gX.notificationDot,color:v}):null]})]})}),(0,$.tZ)(gj,{paneId:h,isActive:l}),c?(0,$.tZ)(eo.G,{css:gX.activeLine,"data-active-pane-line":!0}):null,(0,$.tZ)(eo.G,{style:{opacity:l?1:gB.closeButtonOpacity},css:gX.closeWrapper,children:(0,$.tZ)(gz,{hasUnsavedChanges:r,onClick:a,tabIndex:x?0:-1})})]})}var gF=(0,eO.X)({containerOuter:{display:"grid",transition:"grid-template-columns 120ms ease-out"}}),gV=(0,eO.X)({containerOuterHidden:[gF.containerOuter,{gridTemplateColumns:"0fr",visibility:"hidden"}],containerOuterVisible:[gF.containerOuter,{gridTemplateColumns:"1fr",visibility:"visible",height:"100%"}],root:[ea.l0.flex.row,ea.l0.overflow("hidden"),{button:[ea.l0.height("100%"),ea.l0.center,ea.l0.borderRadius(0),ea.l0.width(20),ea.l0.color.foregroundDimmer,ea.l0.hover([ea.l0.color.foregroundDefault])]}]});function gH(e){var n=e.icon,t=e.run,r=e.label,i=e.dataCy;return(0,$.tZ)(cR.hU,{onClick:function(){return t(null)},dataCy:i,alt:r,size:12,children:n})}function gj(e){var n=e.paneId,t=e.isActive,r=(0,a6.Y6)(n),i=null==r?void 0:r.actions;return(null==i?void 0:i.length)?(0,$.tZ)(eo.G,{css:t?gV.containerOuterVisible:gV.containerOuterHidden,children:(0,$.tZ)(eo.G,{css:gV.root,children:i.map(function(e){var n=e.label,t=(0,lF._)(e,["label"]);return(0,$.tZ)(gH,(0,ey._)({label:n},t),n)})})}):null}var gY=(0,eO.X)({container:[ea.l0.flex.row,ea.l0.align.center,ea.l0.height("100%"),ea.l0.width("100%")],newTabContainer:[ea.l0.height("100%"),ea.l0.pl(4),ea.l0.justify.center,ea.l0.align.center,ea.l0.border({direction:"bottom",color:ea.TV.outlineDimmest}),ea.l0.border({direction:"left",color:ea.TV.outlineDimmest}),{"& > button":[ea.l0.height(24),ea.l0.width(24)]},ea.l0.highRes({borderBottomWidth:.5,borderLeftWidth:.5})],rightActionsContainer:[ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.pr(4),ea.l0.height(31),ea.l0.highRes(ea.l0.highRes(ea.l0.height(31.5)))],moreActions:[ea.l0.color.foregroundDimmest],tabScrollAreaRoot:[ea.l0.flex.row,ea.l0.align.center,ea.l0.height("100%"),ea.l0.overflowX("hidden"),ea.l0.overflowY("hidden"),{"--scrollbar-size":"6px"}],tabScrollAreaViewport:[ea.l0.height("100%"),{"& > div":{height:"100%",width:"max-content",display:"block !important"}}],tabScrollAreaScrollbar:[ea.l0.display.flex,ea.l0.backgroundColor.backgroundOverlay,ea.l0.height("var(--scrollbar-size)"),ea.l0.flex.column,{touchAction:"none",transition:"background 160ms ease-out",userSelect:"none","&:hover":{backgroundColor:ea.TV.backgroundOverlay}}],tabScrollAreaThumb:[ea.l0.flex.grow(1),ea.l0.backgroundColor.outlineDimmest,ea.l0.borderRadius(4),ea.l0.position.relative,{"&::before":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:"44px",minHeight:"44px"}}],tabContainer:[ea.l0.flex.row,ea.l0.height("100%")],tabPreviewWrap:[ea.l0.p(4)],tabPreview:[ea.l0.borderRadius(4),ea.l0.height("100%"),ea.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(ea.TV.accentPrimaryDimmer)}]});function gq(e){var n,t,r,i,o,a,l=e.headerId,c=i4(iB),u=i4(iE),s=i4(iM),d=i4(iy),p=(0,et.useRef)(null),f=aL(l),h=(0,cZ.Z)(f.activeIndex),v=(0,cZ.Z)(f.activeTabPaneId),m=(0,cZ.Z)(f.panes),g=(0,et.useCallback)(function(e){if(p.current&&0!==e.deltaY&&0===e.deltaX){e.preventDefault();var n=e.deltaY,t=p.current.scrollLeft,r=p.current.scrollWidth;p.current.scrollLeft=Math.max(0,Math.min(r,t+n))}},[]),y=(0,J._)((0,mr.L)({accept:[iD.Tv.File,pp.z.Pane,pp.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&C({item:e,panes:m,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=(null==_?void 0:_.index)!==null?null==_?void 0:_.index:m.length;if("nodes"===e.type){var r=(0,nF.ME)(e.nodes);r.length>0&&u({activate:!0,commit:!0,paneGroupId:l,index:t,panes:r});return}if(e.type===pp.z.NewPane){u({activate:!0,paneGroupId:l,index:t,panes:[e.pane]});return}if("paneId"in e){var i=m.includes(e.paneId)?m.length-1:m.length;s({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupId:l})}}}}),2),b=y[0],x=y[1],Z=(n=({isOver:b.isOver}).isOver,r=(t=(0,J._)((0,et.useState)(null),2))[0],i=t[1],o=(0,et.useRef)(null),a=(0,et.useRef)([]),(0,et.useEffect)(function(){if(!n){a.current=[],i(null);return}o.current&&(a.current=(0,ec._)(o.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[n]),{tabContainerRef:o,hover:(0,et.useCallback)(function(e){if(0!==a.current.length){var n=e.item.type===pp.z.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null==n?void 0:n.width)||80,l=a.current.map(function(e,n){return -1===r||r>n?e:e+o/2}).findIndex(function(n){return n>e.sourceClientOffset}),c=-1===r?e.panes.length:e.panes.length-1;i({index:-1===l?c:Math.min(l,c),paneId:t,width:o})}},[]),dropState:r}),w=Z.tabContainerRef,C=Z.hover,_=Z.dropState,k=_?_.index:null;if((null==_?void 0:_.paneId)&&null!==k){var S=m.indexOf(_.paneId);S>-1&&S<k&&k++}var I=_&&null!==k?(0,ec._)(m.slice(0,k)).concat([_],(0,ec._)(m.slice(k))):m;return(0,$.BX)(eo.G,{css:gY.container,innerRef:x,role:"tablist",children:[(0,$.BX)(ph.uP,{children:[(0,$.BX)(gS.fC,{css:gY.tabScrollAreaRoot,onWheel:g,children:[(0,$.tZ)(gS.l_,{css:gY.tabScrollAreaViewport,ref:p,children:(0,$.tZ)(eo.G,{innerRef:w,css:gY.tabContainer,children:I.map(function(e,n){return"string"!=typeof e?(0,$.tZ)(eo.G,{css:gY.tabPreviewWrap,children:(0,$.tZ)(eo.G,{style:{width:e.width},css:gY.tabPreview})},"preview"):(0,$.tZ)(gL,{dragGroup:1===m.length,paneId:e,paneGroupId:l,isActive:h===n,selectTab:c,removePane:d},e)})})}),(0,$.tZ)(gS.LW,{css:gY.tabScrollAreaScrollbar,orientation:"horizontal",children:(0,$.tZ)(gS.bU,{css:gY.tabScrollAreaThumb})})]}),(0,$.tZ)(eo.G,{css:gY.newTabContainer,children:(0,$.tZ)(cR.hU,{alt:"New tab",tooltipBehavior:"hidden",size:12,onClick:function(){u({paneGroupId:l,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,$.tZ)(aj.Z,{})})})]}),(0,$.tZ)(gZ,{paneGroupId:l,activeTabPaneId:v})]})}function gK(e){var n=e.headerId,t=e.isMaximized,r=aX(),i=r.maximizePaneGroup,o=r.restoreMaximizedPaneGroup;return t?(0,$.tZ)(cR.hU,{alt:"Restore pane",onClick:o,children:(0,$.tZ)(mK.Z,{color:ea.TV.foregroundDimmest})}):(0,$.tZ)(cR.hU,{alt:"Maximize pane",onClick:function(){return i({paneGroupId:n})},children:(0,$.tZ)(mq.Z,{color:ea.TV.foregroundDimmest})})}var gJ=(0,eO.X)({left:[ea.l0.flex.row,ea.l0.flex.growAndShrink(1),ea.l0.align.center,ea.l0.height("100%"),{border:"none"}],right:[ea.l0.flex.row,ea.l0.border({direction:"bottom",color:ea.TV.outlineDimmest}),ea.l0.highRes({borderBottomWidth:.5})],rightActionsContainer:[ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.pr(4),ea.l0.height(31),ea.l0.highRes(ea.l0.highRes(ea.l0.height(31.5)))],moreActions:[ea.l0.color.foregroundDimmest]}),g$=(0,et.memo)(function(e){var n=e.headerId,t=aW(n),r=(0,cZ.Z)(t.isMaximized),i=(0,cZ.Z)(t.isModal),o=(0,cZ.Z)(t.isFloating),a=i4(an),l=i4(iy),c=aL(n),u=(0,cZ.Z)(c.activeTabPaneId),s=(0,cZ.Z)(c.panes),d=s.length>1,p=i4(o0),f=(0,nU.gf)(go.id),h=(0,$.tZ)(cR.hU,{css:gJ.moreActions,onClick:function(){return p(u)},alt:"Pane actions",tooltipBehavior:void 0===f?"hidden":void 0,tooltipPlacement:"left",tooltipContents:f?(0,$.tZ)(nU.bM,{fontSize:12,keyCombo:f}):null,children:(0,$.tZ)(fq.Z,{color:ea.TV.foregroundDimmest})}),v=(0,$.tZ)(cR.hU,{alt:"Close pane",onClick:function(){return s.forEach(l)},children:(0,$.tZ)(cE.Z,{color:ea.TV.foregroundDimmest})});return(0,$.BX)($.HY,{children:[(0,$.tZ)(eo.G,{css:gJ.left,children:i&&!d?(0,$.tZ)(gk,{headerId:n,paneId:u}):(0,$.tZ)(gq,{headerId:n})}),(0,$.tZ)(gb,{paneId:u}),(0,$.tZ)(eo.G,{css:gJ.right,children:(0,$.BX)(eo.G,{css:gJ.rightActionsContainer,children:[o?(0,$.tZ)(cR.hU,{alt:"Unfloat",onClick:function(){return a(u)},children:(0,$.tZ)(ax.Z,{color:ea.TV.foregroundDimmest})}):null,(0,$.tZ)(gK,{isMaximized:r,headerId:n}),i?v:h]})})]})}),gQ=(0,rc.$)(["left","top","scale","transformOriginX","width","height","zIndex","transitionDuration"]),g0=gQ.cssVars,g1=gQ.styleTokens,g2="color-mix(in srgb, ".concat(nx.vb.interactiveBackground," 60%, ").concat(nx.vb.surfaceBackground,")"),g4=(0,Q.iv)([ea.l0.borderRadius(4,4,0,0),ea.l0.position.absolute,ea.l0.flex.row,ea.l0.align.center],{transformOrigin:"".concat(g1.transformOriginX," bottom"),top:g1.top,left:g1.left,width:g1.width,height:g1.height,transform:"scale(".concat(g1.scale,")"),transitionDuration:g1.transitionDuration,transitionProperty:"top, left, width, height",transitionTimingFunction:"ease-out",backgroundColor:g2}),g8=(0,et.memo)(function(e){var n=e.headerId,t=(0,sS.T)(),r=aL(n),i=(0,cZ.Z)(r.activeTabPaneId),o=aW(n),a=(0,cZ.Z)(o.isFloating),l=(0,cZ.Z)(o.isModal),c=(0,et.useRef)(null);return(0,rl.j)(c,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,el._)(n,g0.width,t+"px"),(0,el._)(n,g0.height,r+"px"),n}),(0,rl.j)(c,o.position,function(e){var n,t=e.x,r=e.y;return n={},(0,el._)(n,g0.left,Math.round(t)+"px"),(0,el._)(n,g0.top,Math.round(r)+"px"),n}),(0,rl.j)(c,o.scale,function(e){return(0,el._)({},g0.scale,e.toString())}),(0,rl.j)(c,o.transformOriginX,function(e){return(0,el._)({},g0.transformOriginX,e)}),(0,rl.j)(c,o.animate,function(e){return(0,el._)({},g0.transitionDuration,e&&t?"140ms":"0ms")}),(0,rl.j)(c,o.zIndex,function(e){return{"z-index":e.toString()}}),(0,$.BX)(e0.Tg,{innerRef:c,css:g4,children:[(0,$.tZ)(g$,{headerId:n}),a&&!l?(0,$.tZ)(my,{paneId:i}):null]})}),g3=t(90413),g5=t(98986),g6=t(60397),g7=t(24226),g9=t(73590),ye=t(43208),yn=t(75126),yt=t(45795),yr=[hM,lp,go].concat((0,ec._)(d4),(0,ec._)(g7.Ic),(0,ec._)(ye.bO),[yn.s,g9.x,yt.CH]);function yi(e){var n=(0,g6.O)();return(0,$.tZ)(nU.GO,{commands:yr,onChange:n,keybindings:e.keybindings,children:e.children})}var yo=t(91395),ya=t(69407),yl=t(70884),yc=t(67385);function yu(e){var n=e.children,t=(0,nO.Z)(function(){return new g3.z(rZ.Z.get("stateCache","object"))},[]);return(0,$.tZ)(g3.d.Provider,{value:t,children:n})}function ys(e){var n,t,r,i,o=e.ui,a=e.repl,l=e.services,c=e.userKeybindings,u=e.children,s=a.id,d=a.language,p=a.config.isExtension,f=null===(r=a.source)||void 0===r?void 0:null===(t=r.release)||void 0===t?void 0:null===(n=t.repl)||void 0===n?void 0:n.id,h=(0,nO.Z)(function(){return{id:s,language:d,replConfigIsExtension:p,sourceReplId:f}},[s,d,p,f]);return(0,$.tZ)(yi,{keybindings:c,children:(0,$.tZ)(nF.kz,{value:o,children:(0,$.tZ)(yu,{children:(0,$.tZ)(yo.Z.Provider,{value:l,children:(0,$.tZ)(ya.Z.Provider,{value:h,children:(0,$.tZ)(g5.$,{replId:a.id,container:l.container,fs:l.fs,dotReplit:l.dotReplit,ports:l.ports,secrets:l.secrets,children:(0,$.tZ)(dZ.b,{repl:a,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},teamContext:null===(i=a.user)||void 0===i?void 0:i.username,children:(0,$.tZ)(yc.Wv,{children:(0,$.tZ)(yl.Z,{children:u})})})})})})})})})}var yd=t(41876),yp=t(2934),yf=t(43985),yh=t(37715),yv=t(49348),ym=t(32108),yg=t(87117),yy=t(80131),yb=t(8260),yx=t(36632),yZ=t(53157),yw=t(91620).lW;function yC(){var e=(0,J._)((0,et.useState)(!1),2),n=e[0],t=e[1],r=i4(iA),i=aO(),o=(0,eu.Z)().replspaceApi;return((0,et.useEffect)(function(){if(n)return o.onConfirmSendToken(function(e){e&&e(!0,!1)})},[n,o]),(0,yp.F)({insertConfigPlugin:function(){return r({pane:{type:"config"},focusIfExists:!0})},setConfigScreenLockIsOpen:t,openFile:i}),n)?(0,$.tZ)(yd.Z,{reason:"Importing..."}):null}(u=U||(U={})).PreparingRepl="preparingRepl",u.GitInit="gitInit",u.GitRemoteAdd="gitRemoteAdd",u.CheckoutBranch="checkoutBranch",u.TidyingFiles="tidyingFiles",u.Done="done";var y_=(A={},(0,el._)(A,U.PreparingRepl,"Preparing Repl"),(0,el._)(A,U.GitInit,"Initializing Git"),(0,el._)(A,U.GitRemoteAdd,"Adding Remote"),(0,el._)(A,U.CheckoutBranch,"Checking Out Branch"),(0,el._)(A,U.TidyingFiles,"Tidying Files"),(0,el._)(A,U.Done,"Done"),A);function yk(){var e,n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k,S,I,R=(0,J._)((0,et.useState)(!1),2),G=R[0],E=R[1],T=(0,J._)((0,et.useState)(null),2),D=T[0],P=T[1],B=i4(iA),U=aO(),A=(0,eu.Z)().replspaceApi;return((0,et.useEffect)(function(){if(G)return A.onConfirmSendToken(function(e){e&&e(!0,!1)})},[G,A]),n=(e={insertConfigPlugin:function(){return B({pane:{type:"config"},focusIfExists:!0})},setConfigScreenLockIsOpen:E,openFile:U,onUpdateState:P}).insertConfigPlugin,t=e.setConfigScreenLockIsOpen,r=e.openFile,i=e.onUpdateState,o=(0,ef.Z)(),a=(0,e8.useRouter)(),c=(l=(0,J._)((0,yv.Gq)(),2))[0],u=l[1],d=(s=(0,J._)((0,et.useState)(null),2))[0],p=s[1],h=(f=(0,dw.Wd)("importBranch","string"))?decodeURIComponent(f):null,m=(v=(0,lw.Z)()).showError,g=v.showConfirm,b=(y=(0,eu.Z)()).dotReplit,x=y.fs,Z=y.runner,(0,et.useEffect)(function(){u.error&&m("Failed to finish cloning Repl - "+u.error)},[u.error,m]),(0,et.useEffect)(function(){d&&m("Failed to finish cloning Repl - "+d)},[d,m]),(0,et.useEffect)(function(){u.data&&g("Finished cloning Repl")},[u.data,g]),w=(0,yh.U)(function(e,n){var t;return t=(0,ev._)(function(t){var r,o,a,l,c,u,s,d,p,f,v,g,y,b,x;return(0,em.Jh)(this,function(Z){switch(Z.label){case 0:r=t.remote,o=t.accessToken,a=t.homeDir,c=function(){},Z.label=1;case 1:if(Z.trys.push([1,15,,16]),!n.connected)throw Error("Session not connected");return u={homeDir:a,remoteUrl:r,accessToken:o,clearHomeDir:!0},h&&(u.checkoutBranch=h),[4,e.gitImport.fromGithub.subscribe(u)];case 2:l=(s=J._.apply(void 0,[Z.sent(),2]))[0],c=s[1],d=!1,p=!1,Z.label=3;case 3:Z.trys.push([3,8,9,14]),v=(0,cL._)(l),Z.label=4;case 4:return[4,v.next()];case 5:if(!(d=!(g=Z.sent()).done))return[3,7];(y=g.value).ok?i(y.payload.state):m(y.payload.code+": "+y.payload.message),Z.label=6;case 6:return d=!1,[3,4];case 7:return[3,14];case 8:return b=Z.sent(),p=!0,f=b,[3,14];case 9:if(Z.trys.push([9,,12,13]),!(d&&null!=v.return))return[3,11];return[4,v.return()];case 10:Z.sent(),Z.label=11;case 11:return[3,13];case 12:if(p)throw f;return[7];case 13:return[7];case 14:return c(),[3,16];case 15:throw x=Z.sent(),c(),x;case 16:return[2]}})}),function(e){return t.apply(this,arguments)}},[h,i,m]),C=(0,ev._)(function(){var e;return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,ym.W)({dotReplit:b,fs:x})];case 1:return(e=n.sent().entrypoint)&&r({path:e,opener:(0,oG.gK)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),_=(0,ev._)(function(e,n){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,yy.J9)({repoNameWithOwner:e,accessToken:n})];case 1:if("error"in(t=r.sent()))return[2,{hasDotReplit:!1,hasProcfile:!1}];return[2,{hasDotReplit:t.some(function(e){return e.path===yx.l}),hasProcfile:t.some(function(e){return e.path===yb.E})}]}})}),k=(0,ev._)(function(e,n){var t,r,i,o,a,l,c,u;return(0,em.Jh)(this,function(s){switch(s.label){case 0:return[4,(0,yy.LK)({repoNameWithOwner:e,filePath:yb.E,accessToken:n})];case 1:if("error"in(t=s.sent())||(r=yw.from(t.content,"base64").toString(),!(i=(0,yb.c)(r))||!(a=null!==(o=i.web)&&void 0!==o?o:i.worker)))return[2,{showConfigPanel:!0}];return l=a.command+" "+a.options.join(" "),[4,b.updateDotReplit([(0,yZ.KQ)(l),(0,yZ.xz)("interpreter")])];case 2:if(c=s.sent(),u=i.web&&!i.worker||!i.web&&i.worker,c.error||!u)return[2,{showConfigPanel:!0}];return[2,{showConfigPanel:!1}]}})}),I=(0,J._)((0,yv.OU)({variables:{replId:o},fetchPolicy:"no-cache",onCompleted:(S=(0,ev._)(function(e){var r,i,o,l,u,s,d,f,v,m,g,y,b;return(0,em.Jh)(this,function(x){switch(x.label){case 0:if(r=e.repl,i=e.currentUser,"Repl"!==r.__typename||!i||"CurrentUser"!==i.__typename||(u=null!==(l=null===(o=i.gitHubInfo)||void 0===o?void 0:o.accessToken)&&void 0!==l?l:void 0,!(s=r.config.gitRemoteUrl)||!w||!r.config.doClone))return[2];x.label=1;case 1:return x.trys.push([1,9,10,11]),t(!0),[4,w({homeDir:"/home/runner/".concat(r.slug),remote:s,accessToken:u})];case 2:return x.sent(),[4,c({variables:{input:{id:r.id,doClone:!1}}})];case 3:return x.sent(),h&&(0,dw.pg)({router:a,params:[{mode:"delete",key:"importBranch"}]}),[4,function(){return C.apply(this,arguments)}()];case 4:if(x.sent(),(0,eh.j)(eh.U3.NIX_GH_IMPORT_USED,{action:yf.D.ImportEnded,replId:r.id}),d=(0,yg.J)(s),f=!1,!d)return[3,8];return v=d.username,m=d.repository,[4,function(e,n){return _.apply(this,arguments)}("".concat(v,"/").concat(m),null!=u?u:null)];case 5:if(y=(g=x.sent()).hasDotReplit,!(g.hasProcfile&&!y))return[3,7];return[4,function(e,n){return k.apply(this,arguments)}("".concat(v,"/").concat(m),null!=u?u:null)];case 6:return f=!x.sent().showConfigPanel,[3,8];case 7:f=y,x.label=8;case 8:if("html"===Z.mode||f)return[2];return n(),[3,11];case 9:return b=x.sent(),cW.kg.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(b),query:JSON.stringify(a.query),githubRepo:s,hasAccessToken:!!u}),uX.Tb(b,{extra:{query:JSON.stringify(a.query),githubRepo:s,hasAccessToken:!!u}}),p(String(b)),[3,11];case 10:return t(!1),[7];case 11:return[2]}})}),function(e){return S.apply(this,arguments)})}),1)[0],(0,et.useEffect)(function(){w&&I()},[I,w]),G)?(0,$.tZ)(yd.Z,{reason:D?y_[D]:"Importing..."}):null}var yS=(0,et.memo)(function(){var e=i1(t8),n=(0,gl.Z)();return e&&n?(0,$.tZ)("div",{css:[ea.l0.position.absolute,ea.l0.width(e.width),ea.l0.height(e.height),ea.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}),yI=t(63908),yR=t(11894),yG=t(5294),yE=t(69755),yT=t(65108);function yD(){var e=i4(iF),n=(0,yT.Z)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,c=n.setSelectedFile,u=n.reviewingPrompt,s=n.onChoice,d=n.local,p=n.remote,f=[ea.l0.minHeight("7em"),ea.l0.maxHeight("50vh"),ea.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,$.tZ)(e$.u,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24)],children:[(0,$.tZ)(eA.h4,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,$.BX)(eA.xv,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,$.BX)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,$.tZ)(yG.Z,{}):(0,$.BX)($.HY,{children:[a.length?(0,$.tZ)(yR.P,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){c(e.path)}}):null,i?(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(16),ea.l0.justify.start,ea.l0.align.center,ea.l0.pt(16),ea.l0.p(8),ea.l0.backgroundColor.redDimmest,ea.l0.font.code],children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,$.BX)(eA.xv,{multiline:!1,children:["Divergence type: ",null==u?void 0:u.case]})]}):null,(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,$.tZ)(e0.Tg,{elevated:!0,css:[ea.l0.flex.growAndShrink(1),ea.l0.py(8)],children:(0,$.tZ)(eo.G,{css:f,children:(0,$.tZ)(yE.q,{diffViewer:d})})}),(0,$.BX)(eo.G,{css:[ea.l0.pt(16)],children:[(0,$.tZ)(eA.xv,{css:[ea.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,$.tZ)(nf.zx,{onClick:function(){s("local")},text:"Reset to Mine"})]})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,$.tZ)(e0.Tg,{elevated:!0,css:[ea.l0.flex.growAndShrink(1),ea.l0.py(8)],children:(0,$.tZ)(eo.G,{css:f,children:(0,$.tZ)(yE.q,{diffViewer:p})})}),(0,$.BX)(eo.G,{css:[ea.l0.pt(16),ea.l0.justify.end],children:[(0,$.tZ)(eA.xv,{css:[ea.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,$.tZ)(nf.zx,{onClick:function(){s("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}function yP(){var e=(0,e2.ev)(),n=(0,e2._o)(),t=(0,eu.Z)().fs,r=function(){n(null)};return(0,$.tZ)(e$.u,{isOpen:!!e,onRequestClose:r,children:e?(0,$.tZ)(u3.Z,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var yB=t(85874);function yU(){var e=(0,eb._)(["\n  fragment AccountStorageUtilization on AccountStorageUtilization {\n    __typename\n    total\n    perRepl {\n      __typename\n      usage\n      percentage\n      repl {\n        __typename\n        id\n        slug\n        url\n        title\n        nextPagePathname\n        iconUrl\n      }\n    }\n  }\n"]);return yU=function(){return e},e}function yA(){var e=(0,eb._)(["\n  query ManageAccountStorageUtilizationCurrentUser(\n    $input: UsageOverviewUsageByReplInput\n  ) {\n    currentUser {\n      ...UsageBreakdownCurrentUser\n      usageInterval {\n        ... on UsageInterval {\n          __typename\n          resources {\n            developmentStorage {\n              displayName\n              unitPrice\n              allotment\n              usage\n              percentage\n              overageCostsUSD\n              totalRepls\n              usageByReplConnection(input: $input) {\n                ... on UnitPriceReplUsageTypeConnection {\n                  ...UnitPriceReplUsageConnection\n                }\n              }\n            }\n          }\n        }\n        ... on ServiceUnavailable {\n          __typename\n          message\n        }\n        ... on UserError {\n          __typename\n          message\n        }\n        ... on UnauthorizedError {\n          __typename\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return yA=function(){return e},e}function yO(){var e=(0,eb._)(["\n  query ManageAccountStorageUtilizationCurrentRepl($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return yO=function(){return e},e}function yX(){var e=(0,eb._)(["\n  query ManageAccountStorageUtilizationStorageQuota {\n    currentUser {\n      __typename\n      id\n      storageInfo {\n        storageQuota {\n          ... on StorageQuota {\n            __typename\n            quota\n          }\n        }\n      }\n    }\n  }\n"]);return yX=function(){return e},e}var yL={};yU();var yM=(0,ex.Ps)(yA(),yB.t0,yB._9),yW=(0,ex.Ps)(yO());yX();var yz=t(76027),yN=t(4762),yF=function(e,n){var t=e.findIndex(function(e){var t;return(null===(t=e.repl)||void 0===t?void 0:t.id)===n.replId});if(t<yN.AX)return{contextReplIndex:t,individualSummaries:e.slice(0,yN.AX),groupedSummaries:e.slice(yN.AX)};var r=e[t];return{contextReplIndex:yN.AX,individualSummaries:e.slice(0,yN.AX).concat(r),groupedSummaries:e.slice(yN.AX,t).concat(e.slice(t+1))}},yV=t(82481),yH=t(39477),yj=t(33449),yY=t(61967),yq=t(641),yK=(0,eO.X)({self:[ea.l0.rowWithGap(8),ea.l0.align.center],dot:[ea.l0.flex.grow(1),ea.l0.width(8),ea.l0.height(8),ea.l0.minWidth(8),ea.l0.maxHeight(8),{borderRadius:"50%"}],title:[ea.l0.flex.grow(1),ea.l0.color.foregroundDefault,(0,el._)({},(0,uM.EM)("mobileMax"),[ea.l0.flex.shrink(1),ea.l0.truncate])],line:[ea.l0.flex.growAndShrink(1),ea.l0.height(8),ea.l0.width("100%"),(0,el._)({},(0,uM.EM)("mobileMax"),[ea.l0.flex.shrink(4)])]}),yJ=eo.K.a,y$=eo.K.li,yQ=function(e){var n=e.color,t=e.title,r=e.usage,i=e.resourceUsageType,o=e.linkedRepl,a=e.username,l=o?(0,yY.aq)(o):(0,yq.Ru)(a);return(0,$.tZ)(y$,{children:(0,$.tZ)(dB(),(0,ny._)((0,ey._)({legacyBehavior:!0},l),{passHref:!0,children:(0,$.tZ)(yJ,{children:(0,$.BX)(eo.G,{css:yK.self,children:[(0,$.tZ)("div",{css:yK.dot,style:{backgroundColor:n}}),o?(0,$.tZ)(dT.ZP,{size:16,iconUrl:o.iconUrl,alt:t}):null,(0,$.tZ)(eA.xv,{css:yK.title,multiline:!1,children:t}),(0,$.tZ)(eo.G,{css:yK.line,children:(0,$.tZ)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",children:(0,$.tZ)("line",{x1:"0%",y1:"50%",x2:"100%",y2:"50%",stroke:ea.TV.outlineDefault})})}),(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:(0,cD.fZ)(r,{resourceUsageType:i})})]})})}))})},y0=(0,eO.X)({self:[ea.l0.colWithGap(4)]}),y1=eo.K.ul,y2=function(e){var n=e.topRepls,t=e.groupedRepls,r=e.groupedTotal,i=e.context,o=e.username,a=e.resourceUsageType,l=n.findIndex(function(e){return e.repl.id===i.replId});return -1===l?(0,$.tZ)(eo.G,{css:y0.self,children:(0,$.tZ)(eA.xv,{multiline:!1,children:"No storage usage"})}):(0,$.BX)(y1,{css:y0.self,children:[n.map(function(e,n){return(0,$.tZ)(yQ,{color:n===l?ea.TV.accentPrimaryDefault:ea.TV.accentPrimaryDimmer,title:e.repl.title,usage:e.usage,resourceUsageType:a,linkedRepl:e.repl,username:o},n)}),0!==t.length?(0,$.tZ)(yQ,{color:ea.TV.backgroundHighest,title:"+".concat(t.length," more"),usage:r,resourceUsageType:a,username:o}):null]})},y4=[ea.l0.width("100%"),ea.l0.rowWithGap(1),ea.l0.height(16),ea.l0.borderRadius(4),ea.l0.overflow("hidden"),ea.l0.backgroundColor.backgroundHigher],y8={small:(0,eO.X)({bar:[y4,ea.l0.height(10)]}),base:(0,eO.X)({bar:[y4,ea.l0.height(16)]})},y3=(0,eO.X)({selfPlaceholder:[ea.l0.width("100%"),ea.l0.rowWithGap(1),ea.l0.height(16),ea.l0.borderRadius(4),ea.l0.overflow("hidden"),ea.l0.backgroundColor.backgroundHigher,h6.p.backgroundPulse(ea.TV.backgroundHigher,ea.TV.backgroundRoot)],barWrapper:[ea.l0.flex.grow(1)],barAndTriggerWrapper:[ea.l0.rowWithGap(8),ea.l0.align.center],self:[ea.l0.colWithGap(8),ea.l0.flex.growAndShrink(1)]}),y5=function(e){var n=e.summary,t=e.context,r=e.username,i=e.resourceUsageType,o=e.overageSummary,a=e.small,l=a?12:24,c=(0,J._)((0,et.useState)(!1),2),u=c[0],s=c[1],d=n.lineItems,p=Math.max(n.total,n.limit),f=yF((0,ec._)(d).filter(function(e){return e.percentage>0}).sort(function(e,n){return n.usage-e.usage}),t),h=f.individualSummaries,v=f.groupedSummaries,m=f.contextReplIndex,g=h.filter(function(e){return null!==e.repl&&void 0!==e.repl}),y=v.filter(function(e){return null!==e.repl&&void 0!==e.repl}),b=y.reduce(function(e,n){return e+n.usage},0),x=0===p?0:b/p,Z=(0,yV.b)(g,x,b,y.length),w=ea.TV.backgroundHigher,C=(0,$.tZ)(cR.hU,{alt:u?"Hide Repls":"Show Repls",size:l,children:u?(0,$.tZ)(yH.Z,{onClick:function(){return s(!u)},size:l}):(0,$.tZ)(l0.Z,{onClick:function(){return s(!u)},size:l})}),_=Z.length>0;return(0,$.BX)(eo.G,{css:y3.self,children:[(0,$.BX)(eo.G,{css:y3.barAndTriggerWrapper,children:[o||(0,$.tZ)(eo.G,{css:y3.barWrapper,children:(0,$.tZ)(eo.G,{css:a?y8.small.bar:y8.base.bar,style:{backgroundColor:w},children:Z.map(function(e,n){return(0,$.tZ)(yj._,{color:n===m?ea.TV.accentPrimaryDefault:ea.TV.accentPrimaryDimmest,resourceUsageType:i,section:e},n)})})}),_?C:null]}),_&&u?(0,$.BX)($.HY,{children:[(0,$.tZ)(y2,{topRepls:g,groupedRepls:y,groupedTotal:b,context:t,username:r,resourceUsageType:i}),(0,$.tZ)(cU.R,{})]}):null]})},y6=function(){return(0,$.tZ)(eo.G,{children:(0,$.tZ)(eo.G,{css:y3.selfPlaceholder})})},y7=t(25279),y9=t(14354),be=(0,eO.X)({storageBarWrapper:[ea.l0.colWithGap(8)],summaryWrapper:[ea.l0.colWithGap(8),ea.l0.align.start],totalSummaryDot:[ea.l0.backgroundColor.backgroundHigher,ea.l0.width(8),ea.l0.height(8),{borderRadius:"50%"}],replSummaryDot:[ea.l0.backgroundColor.accentPrimaryDefault,ea.l0.width(8),ea.l0.height(8),{borderRadius:"50%"}],summaryRow:[ea.l0.rowWithGap(8),ea.l0.justify.start,ea.l0.align.center,ea.l0.fontSize(14),ea.l0.height(14)],summaryRowWrap:[ea.l0.rowWithGap(8),ea.l0.justify.start,ea.l0.align.center,ea.l0.fontSize(14),{flexWrap:"wrap"}],replSummaryText:[ea.l0.color.accentPrimaryStronger],replSummaryUsage:[ea.l0.color.accentPrimaryStrongest],replSummaryTextPlaceholder:[h6.p.backgroundPulse(ea.TV.backgroundHigher,ea.TV.backgroundRoot),{opacity:.5},ea.l0.borderRadius(4),ea.l0.height("100%"),ea.l0.width(78)],replUsagePlaceholder:[h6.p.backgroundPulse(ea.TV.backgroundHigher,ea.TV.backgroundRoot),{opacity:.5},ea.l0.borderRadius(4),ea.l0.height("100%"),ea.l0.width(64)],totalUsagePlaceholder:[h6.p.backgroundPulse(ea.TV.backgroundHigher,ea.TV.backgroundRoot),{opacity:.5},ea.l0.borderRadius(4),ea.l0.height("100%"),ea.l0.width(140)],availablePlaceholder:[h6.p.backgroundPulse(ea.TV.backgroundHigher,ea.TV.backgroundRoot),{opacity:.5},ea.l0.borderRadius(4),ea.l0.height("100%"),ea.l0.width(64)],availableText:[ea.l0.color.foregroundDimmest,(0,el._)({},ea.BC.max(390),ea.l0.pl(16))]}),bn=function(e){var n,t,r=e.data,i=(0,ef.Z)(),o=(0,J._)((0,et.useState)(!1),2),a=o[0],l=o[1];if((0,et.useEffect)(function(){var e,n,t,o;r&&(null===(n=r.currentUser)||void 0===n?void 0:null===(e=n.usageInterval)||void 0===e?void 0:e.__typename)==="UsageInterval"&&(null===(o=r.currentUser)||void 0===o?void 0:null===(t=o.usageInterval.resources.developmentStorage.usageByReplConnection.items.find(function(e){var n;return(null===(n=e.repl)||void 0===n?void 0:n.id)===i}))||void 0===t?void 0:t.__typename)==="UnitPriceReplUsageType"&&l(!0)},[r,i]),r&&(null===(t=r.currentUser)||void 0===t?void 0:null===(n=t.usageInterval)||void 0===n?void 0:n.__typename)==="UsageInterval"&&a){var c,u=r.currentUser,s=u.username,d=u.isCore,p=r.currentUser.usageInterval.resources.developmentStorage,f=p.usage,h=p.allotment,v=p.usageByReplConnection.items,m=d?sd.we:"Starter",g=(0,y9.L)(h,{resourceUsageType:"GiB",precision:0}),y=Math.max(h-f,0),b="(".concat((0,cD.fZ)(y,{precision:1,resourceUsageType:"GiB"})," available)"),x=v.map(function(e){return(0,ny._)((0,ey._)({},e),{usage:e.usage*ug.lb})}),Z=x.find(function(e){var n;return(null===(n=e.repl)||void 0===n?void 0:n.id)===i}),w=0!==h?(0,$.tZ)(eA.xv,{css:be.availableText,multiline:!1,children:b}):null;return(0,$.BX)(eo.G,{css:be.storageBarWrapper,children:[(0,$.tZ)(y5,{context:{replId:i},summary:(0,y7._)({replUsageOverview:x,usage:f,allotment:h,__typename:"UsageOverviewUnitPriceSku"}),username:s,resourceUsageType:"Bytes"}),(0,$.BX)(eo.G,{css:be.summaryWrapper,children:[(0,$.BX)(eo.G,{css:be.summaryRowWrap,children:[(0,$.BX)(eA.xv,{multiline:!1,children:["Replit ",m," storage: ",g," GiB"]}),w]}),(0,$.BX)(eo.G,{css:be.summaryRow,children:[(0,$.tZ)("div",{css:be.replSummaryDot}),(0,$.tZ)(eA.xv,{css:be.replSummaryText,multiline:!1,children:"This Repl:"}),Z?(0,$.tZ)(eA.xv,{css:be.replSummaryUsage,multiline:!1,children:(c=Z.usage)>2*ug.lb?"".concat((0,cD.$s)(c).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,cD.p6)(c)).toLocaleString()," MiB")}):(0,$.tZ)(eo.G,{css:be.replUsagePlaceholder})]})]})]})}return(0,$.tZ)(bt,{})},bt=function(){return(0,$.BX)(eo.G,{css:be.storageBarWrapper,children:[(0,$.tZ)(y6,{}),(0,$.BX)(eo.G,{css:be.summaryWrapper,children:[(0,$.BX)(eo.G,{css:be.summaryRow,children:[(0,$.tZ)(eo.G,{css:be.totalUsagePlaceholder}),(0,$.tZ)(eo.G,{css:be.availablePlaceholder})]}),(0,$.BX)(eo.G,{css:be.summaryRow,children:[(0,$.tZ)(eo.G,{css:be.replSummaryTextPlaceholder}),(0,$.tZ)(eo.G,{css:be.replUsagePlaceholder})]})]})]})},br=(0,eO.X)({content:[ea.l0.colWithGap(24)],header:[ea.l0.align.center],checkbox:[ea.l0.rowWithGap(8)],footer:[ea.l0.rowWithGap(16),ea.l0.justify.spaceBetween,ea.l0.align.center]});function bi(){var e,n,t,r=(0,eu.Z)().fs,i=(0,J._)((0,et.useState)(null),2),o=i[0],a=i[1],l=(0,ef.Z)(),c=(0,J._)((0,et.useState)(!1),2),u=c[0],s=c[1],d=(0,J._)((0,et.useState)(!1),2),p=d[0],f=d[1],h=(0,J._)((0,et.useState)(!0),2),v=h[0],m=h[1],g=(e={variables:{input:{count:yN.AX}}},n=(0,ey._)({},yL,e),ew.a(yM,n)),y=g.data,b=g.loading,x=(0,et.useId)(),Z=(0,ei.P5)({controlName:"flag-areobotany-blues",logFlagToAnalytics:!1}),w=(0,et.useRef)(!1),C=uf(),_=uv(),k=C>0?_/C:0,S=(0,ed.Z)(k),I=null==y?void 0:null===(t=y.currentUser)||void 0===t?void 0:t.id,R=(0,ed.Z)(null),G=(0,et.useCallback)(function(e){null===C||null===_||"sampling"===e&&u||(a(e),cW.kg.info("disk quota exceeded modal displayed",{replid:l,userid:I,currentReportedUtilization:1048576*_,totalReportedReplQuota:1048576*C}),(0,eh.j)(eh.U3.MODAL_VIEWED,{modalName:"disk_quota_exceeded_modal",cause:"storage",unsolicited:!0}))},[u,a,_,l,C,I]);(0,et.useEffect)(function(){var e=setTimeout(function(){m(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,et.useEffect)(function(){if(!p){var e=r.onDiskQuotaExceeded(function(){1024===C?R.current=setTimeout(function(){G("filesystem_service")},3e4):G("filesystem_service")});return function(){e()}}},[r,C,p,G,R]),(0,et.useEffect)(function(){return function(){R.current&&clearTimeout(R.current)}},[R]);var E=(0,cM.Hg)(c6);(0,et.useEffect)(function(){var e;if(!o&&!w.current&&!p&&!u&&Z&&!E)return k>.9999&&(w.current=!0,e=setTimeout(function(){w.current=!1,S.current>.9999&&G("sampling")},1e4)),function(){clearTimeout(e)}},[p,u,k,w,o,G,S,Z,E]);var T=(0,et.useCallback)(function(){"sampling"===o&&s(!0),a(null)},[o]);return v?null:(0,$.tZ)(e$.u,{isOpen:!!o,onRequestClose:T,children:(0,$.tZ)(eo.G,{css:br.content,children:(0,$.BX)(eo.G,{css:br.content,children:[(0,$.BX)(eA.h4,{css:br.header,level:3,variant:"headerDefault",children:["Your account is out of storage ",(0,$.tZ)(yz.Z,{size:20})]}),(0,$.tZ)(eA.xv,{children:"To free up space remove files until it's under the limit, delete other Repls, or upgrade your account storage."}),!b&&y?(0,$.tZ)(bn,{data:y}):(0,$.tZ)(bt,{}),"filesystem_service"===o?(0,$.BX)(eo.G,{css:br.checkbox,tag:"label",children:[(0,$.tZ)(lD.X,{id:x,checked:p,onChange:f}),(0,$.tZ)(eA.xv,{variant:"small",children:"Do not show this message again for this session."})]}):null,(0,$.tZ)(eo.G,{children:(0,$.tZ)(vn.Z,{href:"/usage#storage",text:"View Usage"})})]})})})}var bo=t(18257),ba=(0,eO.X)({content:[ea.l0.colWithGap(24)],header:[ea.l0.align.center],checkbox:[ea.l0.rowWithGap(8)]});function bl(){var e=(0,eu.Z)().fs,n=(0,J._)((0,et.useState)(!1),2),t=n[0],r=n[1],i=(0,J._)((0,et.useState)(!1),2),o=i[0],a=i[1],l=(0,et.useId)();(0,et.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var c=(0,et.useCallback)(function(){r(!1)},[r]);return(0,$.tZ)(e$.u,{isOpen:t,onRequestClose:c,children:(0,$.tZ)(eo.G,{css:ba.content,children:(0,$.BX)(eo.G,{css:ba.content,children:[(0,$.BX)(eA.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,$.tZ)(bo.Z,{color:ea.TV.accentNegativeDefault,size:20})]}),(0,$.BX)(eA.xv,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,$.tZ)(mX.Z,{})," icon on the left."]}),(0,$.tZ)(eA.xv,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,$.BX)(eo.G,{css:ba.checkbox,tag:"label",children:[(0,$.tZ)(lD.X,{id:l,checked:o,onChange:a}),(0,$.tZ)(eA.xv,{variant:"small",children:"Do not show this message again for this session."})]}),(0,$.tZ)(nf.zx,{onClick:c,text:"Close"})]})})})}function bc(){var e,n,t,r,i=(t={variables:{replId:(0,ef.Z)()}},r=(0,ey._)({},yL,t),ew.a(yW,r)),o=i.data,a=i.loading,l=(null==o?void 0:null===(e=o.repl)||void 0===e?void 0:e.__typename)==="Repl"&&(null===(n=o.repl.owner)||void 0===n?void 0:n.__typename)==="Team";return a&&!o?null:l?(0,$.tZ)(bl,{}):(0,$.tZ)(bi,{})}var bu=t(38414),bs=t(1813),bd=t(85021),bp=t(76820),bf=t(5010),bh=function(e){return(0,$.tZ)(e$.u,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24)],children:[(0,$.tZ)(eA.h4,{variant:"headerDefault",level:2,css:ea.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,$.tZ)(eA.xv,{children:"Never miss messages from your collaborators if youâ€™re in another tab or window."}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.justify.end],children:[(0,$.tZ)(nf.zx,{onClick:e.onCancel,text:"Deny",iconLeft:(0,$.tZ)(cE.Z,{})}),(0,$.tZ)(nf.zx,{text:"Allow notifications",colorway:"positive",iconLeft:(0,$.tZ)(lx.Z,{}),onClick:e.onConfirm})]})]})})},bv=(s=(0,ev._)(function(e){var n,t,r,i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:if(!(0,p0.u9)())return[2,null];return[4,(0,p0.mv)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})}),function(e){return s.apply(this,arguments)});function bm(){var e,n,t,r,i,o,a,l,c,u,s,d,p;return n=(e=(0,eu.Z)()).fs,t=e.dotReplit,r=i1(tz),i=(0,ed.Z)(r),a=(o=(0,J._)((0,et.useState)(!1),2))[0],l=o[1],c=aO(),u=(0,et.useCallback)(function(e){c((0,ny._)((0,ey._)({},e),{opener:e.path.toLowerCase().endsWith(".md")?{paneType:"markdown"}:void 0}))},[c]),s=i1(t5),d=i1(r_),p=(0,et.useRef)(!1),(0,et.useEffect)(function(){if(a&&!p.current){if(!r){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,ny._)((0,ey._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,p0.YM)({path:r}),t=window.location.hash;if(!(t.slice(1)===r||t.startsWith(n+":"))){var i=new URL(window.location.href);i.hash=n,window.history.pushState((0,ny._)((0,ey._)({},history.state),{as:i.pathname+i.hash}),"",i)}}},[a,r]),(0,et.useEffect)(function(){if(!a){var e=!1;return function(){r.apply(this,arguments)}(),function(){e=!0}}function r(){return(r=(0,ev._)(function(){var r,o;return(0,em.Jh)(this,function(a){switch(a.label){case 0:if(!s)return[2];if(i.current)return l(!0),[2];return[4,bv(n)];case 1:if(r=a.sent(),e)return[2];if(r)return u(r),l(!0),[2];if(i.current||"saved"===s||d)return l(!0),[2];return[4,(0,ym.W)({fs:n,dotReplit:t})];case 2:return o=a.sent().entrypoint,!e&&o&&u({path:o}),l(!0),[2]}})})).apply(this,arguments)}},[n,u,t,i,s,a,d]),(0,et.useEffect)(function(){if(s){var e,t=(e=(0,ev._)(function(){var e;return(0,em.Jh)(this,function(t){switch(t.label){case 0:return p.current=!0,[4,bv(n)];case 1:return(e=t.sent())&&u(e),p.current=!1,[2]}})}),function(){return e.apply(this,arguments)});return window.addEventListener("hashchange",t),function(){window.removeEventListener("hashchange",t)}}},[s,n,u]),null}var bg=t(99036),by=t(54534),bb=t(293);function bx(){var e=(0,eb._)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return bx=function(){return e},e}var bZ={},bw=(0,ex.Ps)(bx(),vj.j7),bC=t(68216),b_=t(5172),bk="video.json",bS=(0,b_.join)(sM.V,bk);function bI(){return(bI=(0,ev._)(function(e,n){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(!n.find(function(e){return e.type===iD.Tv.File&&e.filename===bk}))return[2,null];return[4,e.readFile(bS)];case 1:if((t=r.sent()).error)return[2,null];return[2,t.content.toString()]}})})).apply(this,arguments)}var bR=t(17031),bG=t(57964);function bE(){var e=(0,eb._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return bE=function(){return e},e}var bT={},bD=(0,ex.Ps)(bE()),bP=t(10948),bB=t(18063),bU=t(75706),bA=t(25150);function bO(){return(bO=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}var bX=t(10901),bL=t(46584),bM=t(28488),bW=t(367),bz=t(70617),bN=t(2993),bF=t(45098),bV=t(95420);function bH(){var e=(0,eb._)(["\n  query ReplEnvironmentServicesConnector($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return bH=function(){return e},e}var bj=(0,ex.Ps)(bH(),bV.C,bV.D);function bY(){return(bY=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){return[2,bq(e)]})})).apply(this,arguments)}function bq(e){return bK.apply(this,arguments)}function bK(){return(bK=(0,ev._)(function(e){var n,t,r=arguments;return(0,em.Jh)(this,function(i){switch(i.label){case 0:n=r.length>1&&void 0!==r[1]?r[1]:1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(e){return bJ.apply(this,arguments)}(e)];case 2:return i.sent(),[3,4];case 3:if(t=i.sent(),n>5)throw t;return setTimeout(function(){bq(e,n+1)},(Math.pow(2,n)-1)*1e3),[3,4];case 4:return[2]}})})).apply(this,arguments)}function bJ(){return(bJ=(0,ev._)(function(e){var n,t,r,i,o,a;return(0,em.Jh)(this,function(l){switch(l.label){case 0:if(n=e.replId,t=e.expectedThreads,r=(0,bN.ZP)({onUnrecoverableError:function(e){throw Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),!ry.l)throw r.destroy(),Error("Expected Apollo Client");return[4,ry.l.query({query:bj,variables:{id:n}})];case 1:if("Repl"!==(i=l.sent().data).repl.__typename)throw r.destroy(),Error("Failed to query repl info when creating temporary connection");return o=i.currentUser,a=i.repl,[2,new Promise(function(e){r.onConnectionStateChanged(function(i){if(i===bN.em.CONNECTED){try{var o=null===(a=r.getConnectionMetadata())||void 0===a?void 0:a.token;if(null!=o){var a,l,c=(0,bz.he)(o),u=null!==(l=c.resourceLimits)&&void 0!==l?l:{},s=u.memory,d=u.threads;cW.kg.info("Temporary goval connection created",{label:"replResourcesChange",replid:n,cluster:c.cluster,memory:s,threads:d}),null!=t&&d!==t&&((null!=d?d:0<t)?cW.kg.error:cW.kg.warn)("Unexpected resource limits",{label:"replResourcesChange",replid:n,expectedThreads:t,actualMemory:s,actualShares:d})}}catch(e){}r.destroy(),e()}}),r.connect({getMinimumRetryDelayMs:function(){return 0},context:(0,bF.U)({repl:a,currentUser:o})})})]}})})).apply(this,arguments)}function b$(){var e=(0,eb._)(["\n  fragment BoostMetadata on Repl {\n    id\n    devComputeOptions {\n      sku\n      status\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        userSubscriptionType\n      }\n      ... on Team {\n        id\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n    }\n  }\n"]);return b$=function(){return e},e}function bQ(){var e=(0,eb._)(["\n  query ResourceUpdatingCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return bQ=function(){return e},e}function b0(){var e=(0,eb._)(["\n  query ResourceUpdatingBoostMetadata($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return b0=function(){return e},e}var b1={},b2=(0,ex.Ps)(b$()),b4=(0,ex.Ps)(bQ()),b8=(0,ex.Ps)(b0(),b2),b3=t(97906);(d=O||(O={})).Free="free",d.Core="core",d.Team_Pro="team_pro",d.Replit_Dev_Team="replit_dev_team",d.Boost_8cpu_16ram="boost_8cpu_16ram",d.Boost_16cpu_32ram="boost_16cpu_32ram",d.Boost_32cpu_64ram="boost_32cpu_64ram";var b5={free:1,core:4,team_pro:4,boost_8cpu_16ram:8,boost_16cpu_32ram:16,boost_32cpu_64ram:32,replit_dev_team:16},b6={free:1024,core:8192,team_pro:8192,boost_8cpu_16ram:16384,boost_16cpu_32ram:32768,boost_32cpu_64ram:65536,replit_dev_team:65536};function b7(e){if(!e||"Repl"!==e.__typename||!e.owner)return null;var n=e.devComputeOptions.find(function(e){return"current"===e.status});if(!n)return null;var t=function(e){if("Team"===e.__typename){if((0,b3.v4)(e.id))return"replit_dev_team";if(e.isTeamsPro)return"team_pro"}return"User"===e.__typename&&e.userSubscriptionType===e4.HP.HackerPro?"core":"free"}(e.owner);if(n.sku===e4.Xb.Boost_4cpu_8ram)return t;var r=b5[t],i=b5[n.sku];return i&&r&&i>r?function(e){switch(e){case"boost_4cpu_8ram":return"core";case"boost_8cpu_16ram":return"boost_8cpu_16ram";case"boost_16cpu_32ram":return"boost_16cpu_32ram";case"boost_32cpu_64ram":return"boost_32cpu_64ram";default:return"free"}}(n.sku):t}var b9=t(27494),xe=t(14489);function xn(){var e=(0,eb._)(["\n  query TrackResourcesBoostMetadata($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return xn=function(){return e},e}var xt={},xr=(0,ex.Ps)(xn(),b2),xi=t(19393);function xo(){var e=(0,eb._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return xo=function(){return e},e}var xa={},xl=(0,ex.Ps)(xo()),xc=t(70316),xu=t(33530),xs=t(36136),xd=t(8252),xp=t(33980);function xf(){var e=(0,eb._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return xf=function(){return e},e}var xh={},xv=(0,ex.Ps)(xf());function xm(){var e=(0,eb._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return xm=function(){return e},e}var xg=(0,ex.Ps)(xm());function xy(){return(xy=(0,ev._)(function(e){var n,t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(null===ry.l)return[2];return[4,ry.l.query({query:xg,variables:{username:e}})];case 1:return[2,null==(t=r.sent().data)?void 0:null===(n=t.user)||void 0===n?void 0:n.image]}})})).apply(this,arguments)}function xb(){return"Notification"in window?"true"===rZ.Z.get(xw,"string")?"dismissed":window.Notification.permission:"denied"}function xx(){return(xx=(0,ev._)(function(){return(0,em.Jh)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})).apply(this,arguments)}function xZ(){return(xZ=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,function(){return xx.apply(this,arguments)}()];case 1:return e.sent(),xC(!1),[2]}})})).apply(this,arguments)}var xw="notifications/dismissedModal";function xC(e){rZ.Z.set(xw,String(e))}var x_={};function xk(){return(xk=(0,ev._)(function(e){var n,t,r,i,o,a,l,c,u,s,d;return(0,em.Jh)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,u=void 0===(c=e.cacheDuration)?0:c,!document.hidden&&document.hasFocus()||"granted"!==xb()||(s=Date.now(),a in x_&&x_[a]+u>s))return[2];if(!o)return[3,2];return[4,function(e){return xy.apply(this,arguments)}(o)];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),x_[a]=s,[2]}})})).apply(this,arguments)}function xS(){var e=(0,eb._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return xS=function(){return e},e}var xI=(0,ex.Ps)(xS());function xR(){return(xR=(0,ev._)(function(e){var n;return(0,em.Jh)(this,function(t){switch(t.label){case 0:if(!ry.l)throw Error("Expected Apollo client");return[4,ry.l.query({query:xI,variables:{id:e}})];case 1:return[2,(null==(n=t.sent().data)?void 0:n.repl.__typename)==="Repl"?n.repl.title:null]}})})).apply(this,arguments)}var xG=t(38563),xE=t(5017);function xT(){var e=(0,eb._)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return xT=function(){return e},e}var xD={},xP=(0,ex.Ps)(xT()),xB=t(91175);function xU(e,n){var t=i1(t5),r=i4(iT),i=i4(iG),o=i8(t0);(0,nU.Il)(function(){if(t)return[e,function(){var e=o().find(function(e){return(0,J._)(e,2)[1].type===n.type});if(e){i({paneId:e[0],activate:!0});return}r({pane:n,activate:!0,placement:{type:"secondary"}})}]},[t,r,i])}function xA(){var e=(0,eb._)(["\n  subscription StartTeamReplPresenceSession(\n    $input: StartTeamReplPresenceInput!\n  ) {\n    startTeamReplPresenceSession(input: $input)\n  }\n"]);return xA=function(){return e},e}function xO(){var e=(0,eb._)(["\n  mutation UpdateTeamReplPresenceSession($input: UpdateTeamReplPresenceInput!) {\n    updateTeamReplPresence(input: $input)\n  }\n"]);return xO=function(){return e},e}var xX={},xL=(0,ex.Ps)(xA()),xM=(0,ex.Ps)(xO()),xW=t(69880),xz=t(72658),xN=t(36097),xF=t(41344),xV=t(89587),xH=t(82289),xj=t(73536),xY=t(13430),xq=t(21822),xK=t(98374),xJ=t(28606),x$=t(57704);function xQ(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k,S,I,R,G,E,T,D,P,B,U,A,O,X,L,M,W,z,N,F,V,H,j,Y,q,K,$,Q,ee,en,er,eo,ea,el,ec,ep,eg,eb,ex,eZ,eC,e_,ek,eS,eI,eR,eG,eE,eT,eD,eP,eB,eU,eA,eO,eX,eL,eM,eW,ez,eN,eF,eV,eH,ej,eY,eq,eK,eJ,e$,eQ,e0,e1,e4,e5,e6,e7,e9,ne,nn,nt,nr,ni,na,nl,nc,nu,ns,nd,np,nf,nh,nv,nm,ng,nb,nx,nZ,nw,nC,n_,nk,nS,nI,nR,nG,nE,nT,nD,nP,nB,nA,nX,nL,nM,nW,nz,nN,nF,nV,nH,nj,nY,nq,nJ,n$,nQ,n0,n1,n2,n4,n8,n3,n5,n6,n7,n9,te,tn,tt,tr,ti,to,ta,tl,tc,tu,ts,td,tp,tf,th,tv,tm,tg,ty,tb,tx,tZ,tw,tC,t_,tk,tS,tI,tR,tG,tE,tT=e.repl,tD=e.currentUser,tP=(0,eu.Z)(),tB=tP.replspaceApi,tU=tP.dotReplit;r=(0,eu.Z)().lspnix,i=(0,dz.Gn)("codeIntelligence").preferences.codeIntelligence,(0,et.useEffect)(function(){if(!i){r.disable();return}r.enable()},[r,i]),o=i1(tz),a=(0,xu.Z)(o||""),l=(0,xs.K)(),c=(0,ei.P5)({controlName:"flag-lsp-userevents",logFlagToAnalytics:!1}),(0,et.useEffect)(function(){if(c&&a.length)return(0,xd.uf)(a.map(function(e){return e.onDiagnostics(function(e){l("user:lsp:textDocument/publishDiagnostics",{path:e.path,diagnostics:e.diagnostics})})}))},[c,a,l]),(0,et.useEffect)(function(){if(c&&a.length){var e=new Map,n=(0,xd.uf)(a.map(function(n){return n.onRequest(function(n){"textDocument/codeAction"!==n.data.method||e.has(n.id)||e.set(n.id,n.data)})})),t=(0,xd.uf)(a.map(function(n){return n.onResponse(function(n){if(void 0!==n.error||"undefined"===n.result||Array.isArray(n.result)&&0===n.result.length){e.delete(n.id);return}e.has(n.id)&&(l("user:lsp:textDocument/codeAction",{id:n.id,request:e.get(n.id),response:n.result}),e.delete(n.id))})}));return function(){n(),t()}}},[c,a,l]),u=(0,J._)((0,bs.qg)(),1)[0],s=i4(ii),d=(0,nO.Z)(function(){return nK()(s,1e3)},[s]),p=(0,ef.Z)(),(0,et.useEffect)(function(){var e=function(){d({replId:p,force:!1}),d.flush()};if(!u)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[d,p,u]),(0,et.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&d({replId:p,force:!1})};if(!u)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[d,p,u]),(0,et.useEffect)(function(){if(!u){var e=null;return function n(){e=setTimeout(function(){d({replId:p,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[d,p,u]),(0,et.useEffect)(function(){return function(){d({replId:p,force:!1}),d.flush()}},[d,p,u]),(0,bg.Z)(),(0,b9.Z)(),(0,bP.Z)({workspaceType:"desktop"}),g=b7((null==(m=(h={variables:{replId:f=(0,ef.Z)()}},v=(0,ey._)({},xt,h),ew.a(xr,v)).data)?void 0:m.repl.__typename)==="Repl"?m.repl:void 0),y=(0,cM.Hg)(us),b=(0,cM.Hg)(ud),x=(0,et.useRef)(0),(0,et.useEffect)(function(){var e=setInterval(function(){if(g){var e=b5[g],n=b6[g];y!==e||b!==n?(x.current++,2===x.current&&cW.kg.error("Repl Resources were less than expected for 1 minute",{replid:f,vCpusExpected:e,vCpusActual:y,ramExpected:n,ramActual:b})):(x.current>2&&cW.kg.info("Repl Resources resolved mismatch after ".concat(x.current," minutes"),{replid:f,vCpusExpected:e,vCpusActual:y,ramExpected:n,ramActual:b}),x.current=0)}},6e4);return function(){clearInterval(e)}},[f,g,y,b,x]),(0,et.useEffect)(function(){var e=function(e){"s"===e.key&&(0,pB.jh)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),w=(Z=(0,eu.Z)()).container,C=Z.presence,(0,et.useEffect)(function(){var e=C.onUserJoin(function(n){var t,r=null===(t=w.getContext())||void 0===t?void 0:t.repl;if(r){var i=n.username;return(function(e){return xR.apply(this,arguments)})(r.id).then(function(e){e&&function(e){xk.apply(this,arguments)}({title:"",body:"".concat(i," joined ").concat(e),tag:"".concat(r.id,"-").concat(i,"-joined"),iconByUsername:i,cacheDuration:9e5})}),function(){e()}}})},[C,w]),_=(0,ef.Z)(),k=(0,eu.Z)().container,S={variables:{replId:_},skip:(0,xp.Z)(k)!==bN.em.CONNECTED},I=(0,ey._)({},xh,S),bb.m(xv,I),R=(0,eu.Z)().presence,(0,et.useEffect)(function(){return R.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,eh.j)(bA.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,eh.j)(bA.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[R]),(0,xj.Z)(),E=(0,ef.Z)(),D=(T=(0,ey._)({},b1,void 0),ew.a(b4,T)).data,U=(P=(0,ey._)({},b1,{variables:{replId:E}}),B=ew.a(b8,P)).data,A=B.refetch,O=null==D?void 0:null===(G=D.currentUser)||void 0===G?void 0:G.userSubscriptionType,X=(0,et.useRef)(void 0),(0,et.useEffect)(function(){void 0!==O&&(void 0!==X.current&&X.current!==O&&A(),X.current=O)},[O,A,X]),L=b7((null==U?void 0:U.repl.__typename)==="Repl"?U.repl:void 0),M=(0,et.useRef)(null),(0,et.useEffect)(function(){null!==L&&(null!==M.current&&M.current!==L&&(cW.kg.info("Repl Resources expected value changed, creating temp goval connection",{replid:E,previousBoost:M.current,newBoost:L}),(function(e){return bY.apply(this,arguments)})({replId:E,expectedThreads:b5[L]}).catch(function(e){uX.Tb(e),cW.kg.error("Repl Resources failed to create temp goval connection",{replid:E})})),M.current=L)},[L,M,E]),W=(0,eu.Z)().presence,z=i1(tz),(0,et.useEffect)(function(){W.updateOpenFile(z)},[W,z]),F=(N=(0,lw.Z)()).showConfirm,V=N.showNotice,H=N.hideMessage,j=N.showError,Y=(0,eu.Z)().container,(0,et.useEffect)(function(){var e=Y.onToast(function(e){e.startsWith("PANIC")||V(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=Y.onConnectionStateChanged(function(e){if(n&&(H(n),n=null),e===bN.em.CONNECTED){t=!0,n=F("Connected",1500);return}if(t){if(e===bN.em.CONNECTING){n=V("Reconnecting");return}if(e===bN.em.DISCONNECTED){n=j("Disconnected");return}}});return function(){n&&H(n),e(),r()}},[Y,F,V,j,H]),q=(0,lw.Z)().showConfirm,K=(0,eu.Z)().fs,(0,et.useEffect)(function(){var e=K.registerOnFlushSuccess(function(e,n){if(n===iD.WL.MANUAL_SAVE){var t="Saved ".concat(e);q(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[K,q]),(0,bL.ZP)(),$=(0,eu.Z)().runner,Q=mo(),ee=i4(iL),en=(0,bL.Ln)(),er=i1(t5),eo=(0,xB.T)(),ea=aB(),el=(0,vT.cR)(),ec=i4(iO),ep=(0,et.useCallback)(function(){if(el){if(eo)return;ea({pane:{type:"runnerOutput"},activate:!1,commit:!0});return}if(eo){ec();return}ea({pane:{type:"runnerOutput"},activate:!1,commit:!0})},[eo,ea,ec,el]),eg=(0,ly.e$)(lm.y.Output),(0,et.useEffect)(function(){if(er&&(null==eg?void 0:eg.isActive)){var e=setInterval(function(){ep()},200);return function(){clearInterval(e)}}},[null==eg?void 0:eg.isActive,ep,er]),(0,et.useEffect)(function(){if(er)return $.onLocalRun(function(){ep()})},[$,ep,er]),(0,et.useEffect)(function(){if(er){if(!en){ee({type:"instructions"});return}Q({pane:{type:"instructions"},activate:!1,placement:{type:"secondary"}})}},[en,Q,ee,er]),xU(d2.showShell.id,{type:"shell"}),xU(d2.showDocs.id,{type:"docs"}),xU(d2.showGit.id,{type:"git"}),xU(d2.showSettings.id,{type:"preferences"}),xU(d2.showConsole.id,{type:"runnerOutput"}),xU(d2.showReplitAi.id,{type:"ghostwriterChat"}),(0,bR.Z)(),eb=(0,eu.Z)().presence,ex=aO(),(0,et.useEffect)(function(){return eb.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=eb.getFollowedUser();r&&r.id===n.id&&t&&ex({path:t})})},[eb,ex]),eC=(eZ=(0,J._)((0,et.useState)(null),2))[0],e_=eZ[1],(0,et.useEffect)(function(){return eb.onFollowedUserChanged(e_)},[eb]),(0,et.useEffect)(function(){if(eC){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){eb.unfollowUser()}},[eC]),ek=(0,e2.OM)(),eG=(null==(eR=(eS={variables:{replId:(0,ef.Z)()}},eI=(0,ey._)({},bT,eS),ew.a(bD,eI)).data)?void 0:eR.repl.__typename)==="Repl"?eR.repl:null,(0,et.useEffect)(function(){var e;eG&&(null===(e=eG.templateInfo)||void 0===e?void 0:e.label.includes("Blank Repl"))&&ek(!0)},[ek,eG]),eE=i4(ac),eT=(0,eu.Z)().fs,eD=(0,sM.Z)().isTutorial,eP=(0,ed.Z)(eE),(0,et.useEffect)(function(){if(eD){var e=!1,n=eT.watchDir(sM.V,{onChange:function(n){(function(e,n){return bI.apply(this,arguments)})(eT,n).then(function(n){if(!e){if(!n){eP.current(null);return}var t=null;try{t=bC.ku(n)}catch(e){}var r="object"==typeof t&&"string"==typeof t.embedUrl?t.embedUrl:null;eP.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){eP.current(null)},onError:function(){eP.current(null)}});return function(){e=!0,n()}}},[eT,eD,eP]),eB=(0,xE.T)(),eU=aB(),(0,et.useEffect)(function(){eB&&eU({pane:{type:"education"}})},[eB,eU]),eA=(0,sM.Z)().isTutorial,eO=i4(ad),(0,et.useEffect)(function(){eA&&eO()},[eO,eA]),eL=vK(eX=(0,ef.Z)()),eM=vJ(eX),eW=(0,xG.Z)(),ez=(0,e2.Cp)(),(0,et.useEffect)(function(){ez({paneType:"chat",indicatorType:eL>0?e3.TV.redStronger:void 0})},[ez,eL]),(0,et.useEffect)(function(){ez({paneType:"threadInbox",indicatorType:eM>0?e3.TV.redStronger:void 0})},[ez,eM]),(0,et.useEffect)(function(){ez({paneType:"envEditor",indicatorType:eW?e3.TV.redStronger:void 0})},[ez,eW]),eF={variables:{replId:eN=tT.id},onData:function(e){var n,t,r=null===(t=e.data)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.updatedThread;r&&"AnnotationAnchor"===r.__typename&&(e.client.cache.updateQuery({query:vj.yi,variables:{replId:eN}},function(e){return(0,tX.Uy)(e,function(e){null===e||"Repl"!==e.repl.__typename||e.repl.annotationAnchors.find(function(e){return e.id===r.id})||e.repl.annotationAnchors.push(r)})}),e.client.cache.updateQuery({query:by.Jq,variables:{replId:eN,path:r.path}},function(e){return(0,tX.Uy)(e,function(e){var n;e&&(null===(n=e.threadsByFile)||void 0===n?void 0:n.__typename)==="ThreadsByFileResult"&&(e.threadsByFile.threads.find(function(e){return e.id===r.id})||e.threadsByFile.threads.push((0,ny._)((0,ey._)({},r),{messageCount:r.messages.length,unreadCount:r.messages.filter(function(e){return!e.seen}).length,participants:r.messages.filter(function(e){return!!e.user}).map(function(e){return e.user})})))})}))}},eV=(0,ey._)({},bZ,eF),bb.m(bw,eV),eH=i1(tL),ej=(0,es.Xo)(),eY=(0,es.jY)(),(0,et.useEffect)(function(){eH?ej(eH):eY()},[ej,eY,eH]),eq=(0,a6.bS)(),eK=i2(af),eJ=i8(tL),e$=(0,ed.Z)(eq),eQ=(0,ei.P5)({controlName:"flag-modal-panes"})?500:0,(0,et.useEffect)(function(){var e=function(e){e&&(null!==n&&clearTimeout(n),n=setTimeout(function(){var e=eJ();e&&e$.current(e)},eQ))},n=null;e(eK.current);var t=eK.subscribe(e);return function(){null!==n&&clearTimeout(n),t()}},[eK,e$,eJ,eQ]),e0=i1(iz),e1=i4(aU),(0,et.useEffect)(function(){var e=function(){e1()};if(e0)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[e0,e1]),(0,bG.Z)(),e4=vK((0,ef.Z)()),e5=(0,et.useRef)(0),e6=(0,dz.Gn)("chatAudioNotification").preferences,(0,et.useEffect)(function(){e6.chatAudioNotification&&e4>e5.current&&new Audio("/public/sounds/pop.mp3").play(),e5.current=e4},[e4,e5,e6]),e7=i1(t5),e9=(0,a6.dr)(),ne=i8(tJ),(0,nU.Il)(function(){if(e7)return[d2.webviewRefresh.id,function(){var e=ne().filter(function(e){return"webview"===(0,J._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,J._)(i.value,1)[0],l=e9(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[e7,e9,ne]),(0,bX.Z)(),(0,xF.Z)(),(0,xV.el)(tU),(0,xY.m)(!(null===(tE=tT.org)||void 0===tE?void 0:tE.id)),(0,xJ.Z)();var tA=mo();nr=(nt={debuggest:(nn=(0,eu.Z)()).debuggest,toolchain:nn.toolchain}).toolchain,ni=nt.debuggest,(0,et.useEffect)(function(){function e(e){(null==e?void 0:e.debuggers)&&(null==e?void 0:e.debuggers.length)>0&&ni.connect()}e(nr.configs.current),nr.configs.subscribe(function(n){e(n)})},[nr,ni]),nl=na=(0,cZ.Z)(ni.mainClient),(0,et.useEffect)(function(){if(nl){var e=nl.onStarted(function(e){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"started",joined:e})}),n=nl.onPaused(function(e){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"paused",reason:e})}),t=nl.onBreakpoint(function(e){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:e,state:nl.state.current})});return function(){e(),n(),t()}}},[nl]),nu=(0,ed.Z)(function(e){tA({pane:{type:"codeEditor",data:e},placement:{type:"secondary"},activate:!1})}),np=null==(nd=null==(ns=(0,cZ.Z)(na?na.stackFrames:null))?void 0:ns[0])?void 0:null===(nc=nd.source)||void 0===nc?void 0:nc.path,nf=null==nd?void 0:nd.line,(0,et.useEffect)(function(){if(np&&nf&&na){var e=(0,bU.om)(np);e?nu.current({path:e,line:nf}):na.stepOut()}},[na,np,nf,nu]),(0,et.useEffect)(function(){return uX.YA("replId",tT.id),function(){uX.YA("replId",void 0)}},[tT.id]),nv=(nh={repl:tT,currentUser:tD}).repl,nm=nh.currentUser,ng=(0,eu.Z)().container,nb=(0,xi.S)(),nx=(0,bF.b)({repl:nv,currentUser:nm}),(0,et.useEffect)(function(){if(nx)return ng.connect({context:nx,getMinimumRetryDelayMs:nb}),function(){ng.close()}},[nx,ng,nb]),nZ=(0,ef.Z)(),nC=(nw=(0,eu.Z)()).container,n_=nw.ports,nk=i4(iA),nI=(0,J._)((nS=(0,ey._)({},xa,void 0),rR.D(xl,nS)),1)[0],nR=(0,dz.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,nG=(0,vT.cR)(),nE=(0,et.useCallback)(function(e){e.isForwarded&&(nG||nk({pane:{type:"vnc"}}),nI({variables:{input:{id:nZ,isVnc:!0}}}))},[nZ,nG,nk,nI]),nT=(0,et.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&(nR&&!nG&&nk({pane:{type:"webview",data:r}}),nI({variables:{input:{id:nZ,isServer:!0}}}))},[nk,nG,nZ,nI,nR]),(0,et.useEffect)(function(){return n_.portsState.subscribe(nK()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.configuration,c=a.isOpen;if(l.isVnc){nE({isForwarded:c});return}var u=l.type===xc.DL.FORWARDED;nT({isForwarded:u,isOpen:c,data:function(e){var n=e.configuration;if(n.localPort)return{portType:"local",path:"/",port:n.localPort};var t=(0,xc.OD)(n);if(t)return{portType:"external",path:"/",port:t}}(a)})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[nC,n_.portsState,nT,nE]),(0,xe.Z)(),nD=(0,ei.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0}),nV=(nB=(nP=(0,J._)((0,et.useState)(!1),2))[0],nA=nP[1],nL=(nX=(0,J._)((0,et.useState)(Date.now()),2))[0],nM=nX[1],nz=(nW=(0,J._)((0,et.useState)(Date.now()),2))[0],nN=nW[1],(0,et.useEffect)(function(){var e=function(){nA(!document.hidden),document.hidden?nN(Date.now()):nM(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),nF={visibility:nB,visibleTime:nL,hiddenTime:nz}).visibility,nH=nF.visibleTime,nj=nF.hiddenTime,(0,et.useEffect)(function(){nD&&nV&&(nH-nj)/1e3>60&&(0,bM.K)(bW.T0)},[nD,nV,nj,nH]),nY=(0,eu.Z)().ports,nq=(0,dz.Gn)("forwardPortsAutomatically").preferences,(0,et.useEffect)(function(){nY.setForwardPortsAutomatically(nq.forwardPortsAutomatically)},[nq.forwardPortsAutomatically,nY]),(0,bB.Z)(tT,tD);var tO=i4(tH),tM=(0,sS.T)();(0,et.useEffect)(function(){tO(!tM)},[tM,tO]),n$=(0,eu.Z)().presence,nQ=(0,ef.Z)(),n0=(0,et.useRef)(!1),n4=(n1=(0,ey._)({},xD,{variables:{replId:nQ}}),n2=ew.a(xP,n1)).data,n8=n2.loading,n3=0,(null==n4?void 0:n4.repl.__typename)==="Repl"&&(n3=n4.repl.multiplayers.length,(null===(nJ=n4.repl.owner)||void 0===nJ?void 0:nJ.__typename)==="User"&&(n3+=1)),(0,et.useEffect)(function(){if(!n8&&!n0.current){var e=n$.onActiveUsersChange(function(){n0.current=!0,e(),(0,eh.j)(eh.U3.MULTIPLAYER_REPL_OPENED,{replId:nQ,participantsCount:n3,usersOnlineCount:n$.getActiveUsers().length})});return e}},[nQ,n8,n3,n$]);var tW=(0,es.fg)();(0,et.useEffect)(function(){tB.setWaitForFileClose(tW)},[tB,tW]);var tN=(0,bs.uV)(),tF=i1(t4);(0,et.useEffect)(function(){tF&&tN(tF)},[tN,tF]),n6=(n5=(0,eu.Z)()).packager,n7=n5.toolchain,(0,et.useEffect)(function(){var e=setTimeout(function(){!function(){n.apply(this,arguments)}()},(10+5*Math.random())*1e3);function n(){return(n=(0,ev._)(function(){var e,n,t,r,i,o,a,l,c,u;return(0,em.Jh)(this,function(s){switch(s.label){case 0:if(!n7.configs.current||!n6)return[2];e=n7.configs.current.packagers,n=!0,t=!1,r=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),i=e[Symbol.iterator](),s.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,n6.listSpecfile(a.id)];case 3:return(l=s.sent()).packages&&l.packages.length>0&&(c=l.packages.map(function(e){return e.name||""})||[],cW.kg.info("packager installed packages",{packagerId:a.id,language:a.language,packages:c}),(0,eh.j)(bA.U3.PACKAGER_PACKAGES_INSTALLED,{packages:c})),[4,function(e){return bO.apply(this,arguments)}((5+5*Math.random())*1e3)];case 4:s.sent(),s.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return u=s.sent(),t=!0,r=u,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})).apply(this,arguments)}return function(){clearTimeout(e)}},[n6,n7.configs.current]),n9=(0,es.WU)(),te=(0,a6.bS)(),(0,et.useEffect)(function(){var e=function(){var e=n9();e&&te(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[te,n9]),tn=(0,eu.Z)().runner,tt=(0,e8.useRouter)(),tr=(0,et.useRef)(!!tt.query.run),(0,et.useEffect)(function(){var e=function(){tr.current=!1,tn.run()};if(tr.current){if(tn.getRunState()===sv.Ah.IDLE){e();return}var n=tn.onStateChanged(function(t){t===sv.Ah.IDLE&&(e(),n())});return function(){n()}}},[tn,tt]),ti=(0,ei.P5)({controlName:xN.r}),to=((t=(0,xW.Z)((n=(0,ev._)(function(e){var n,t,r,i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((n=o.sent()).error)return[2,n];if(t=n.type,r=null,!(t!==xz.y5.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return n.apply(this,arguments)})))&&!t.error?t.branchName:null)||null,ta=(0,ef.Z)(),tl=(0,et.useRef)(rx()()),tu=(tc=(0,J._)((0,et.useState)(""),2))[0],ts=tc[1],(0,et.useEffect)(function(){to&&""===tu&&ts(to)},[to,tu]),td=(0,eu.Z)().container,tp=(0,xp.Z)(td),th=(0,J._)((tf=(0,ey._)({},xX,void 0),rR.D(xM,tf)),1)[0],(0,et.useEffect)(function(){var e=!1;if(ti&&to&&tp===bN.em.CONNECTED){var n=null;return function t(){th({variables:{input:{sessionId:tl.current,branch:to}},onCompleted:function(){e||(n=setTimeout(t,1e4))}})}(),function(){e=!0,n&&clearTimeout(n)}}},[tp,to,tl,th,ti]),tv=!ti||tp!==bN.em.CONNECTED||""===tu,tm={variables:{input:{replId:ta,branch:tu,sessionId:tl.current}},skip:tv},tg=(0,ey._)({},xX,tm),bb.m(xL,tg),(0,xK.Z)();var tV=i4(oW),tj=i4(oz),tY=(0,eu.Z)().fs;return(0,xH.Z)({fs:tY,openMultipleFiles:tV,openMultipleURLs:tj,waitForFileClose:tW,isMobileWorkspace:!1}),(0,a5.bB)(),(0,xq.mh)({dotReplit:tU}),ty=(0,xq.QF)(),tb=aB(),(0,et.useEffect)(function(){ty&&Object.values(ty).forEach(function(e){e.tasks.forEach(function(n,t){var r=e.workflow.tasks[t];n.state===x$.PX.RUNNING&&"workspace.openWebview"===r.task&&tb({pane:{type:"webview",data:{portType:"external",port:r.args}}})})})},[ty,tb]),tx=(0,ei.P5)({controlName:"flag-pid2-resource-monitoring"}),tZ=(0,no.r)().variant,tw=(0,cM.$X)(c6),tC=(0,cM.$X)(ue),t_=(0,et.useRef)(!0),tk=(0,ed.Z)(tZ),tS=(0,et.useCallback)(function(e){tC(e),t_.current?((0,eh.j)(eh.U3.EXPERIMENT_VARIANT_ASSIGNED,{experiment_name:"flag-upsell-wonderland",variant:tk.current}),t_.current=!1):tw(!1)},[tC,tw,tk]),tI=(0,eu.Z)().container,tR=(0,cz.Z)(tI),tG=(0,ed.Z)(function(e){var n,t=e.trackingResult;if(!tx){try{n=JSON.parse(t.output||"{}")}catch(e){}var r=cF.B4.Check(c8,n)?n:null;if(null===r)throw Error("Got wrong shape for resource response");tS(r)}}),(0,et.useEffect)(function(){var e=function(){return r.apply(this,arguments)},n=!1,t=null;function r(){return(r=(0,ev._)(function(){var r,i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:if(r=!1,n)return[2];return[4,tR({args:cN})];case 1:if(i=o.sent(),n||(null!==i.error&&(cW.kg.error("Error running resource tracking command",{errorMessage:i.error}),r=!0),n))return[2];return r||tG.current({trackingResult:i}),t=setTimeout(e,2e3),[2]}})})).apply(this,arguments)}return e(),function(){n=!0,t&&clearTimeout(t)}},[tI,tR,tG]),(0,cj.L)(function(e){if(tx){var n,t=!1,r=function(){};return(n=(0,ev._)(function(){var n,i,o,a,l,c,u,s,d;return(0,em.Jh)(this,function(p){switch(p.label){case 0:return[4,e.resources.monitor.subscribe({})];case 1:if(i=(n=J._.apply(void 0,[p.sent(),2]))[0],r=n[1],t)return[2];o=!1,a=!1,p.label=2;case 2:p.trys.push([2,7,8,13]),c=(0,cL._)(i),p.label=3;case 3:return[4,c.next()];case 4:if(!(o=!(u=p.sent()).done))return[3,6];if(!(s=u.value).ok)return[3,5];tS(s.payload),p.label=5;case 5:return o=!1,[3,3];case 6:return[3,13];case 7:return d=p.sent(),a=!0,l=d,[3,13];case 8:if(p.trys.push([8,,11,12]),!(o&&null!=c.return))return[3,10];return[4,c.return()];case 9:p.sent(),p.label=10;case 10:return[3,12];case 11:if(a)throw l;return[7];case 12:return[7];case 13:return[2]}})}),function(){return n.apply(this,arguments)})(),function(){t=!0,r()}}},[tx,tS]),null}var x0=t(68568);function x1(){var e,n,t=aO(),r=(0,es.Xo)(),i=(e=(0,es.Y_)(),(0,nO.Z)(function(){return function(n){return e.subscribe(n)}},[e])),o=(0,es.pV)(),a=(0,lw.Z)(),l=i4(iT),c=mo(),u=(0,es.WU)(),s=(0,a6.c4)(),d=i8(r7),p=i4(io),f=(0,d0.Z)(),h=(0,ed.Z)(f),v=(0,et.useCallback)((n=(0,ev._)(function(e){var n;return(0,em.Jh)(this,function(t){switch(t.label){case 0:return[4,s(l({pane:{type:"shell"},activate:!0,placement:{type:"secondary"}}))];case 1:if("shell"!==(n=t.sent()).type)throw Error("Expected shell pane binding");return n.exec(e),[2]}})}),function(e){return n.apply(this,arguments)}),[l,s]),m=(0,et.useCallback)(function(e){c({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:u()}})},[c,u]);return(0,nO.Z)(function(){return{openFile:t,watchActiveFile:i,getActiveFile:o,activatePane:r,toasts:a,execInShell:v,revealOrInsertTool:m,getLayoutState:d,setLayoutState:p,getSshConfig:function(){return h.current}}},[t,i,o,r,a,v,m,d,p,h])}var x2=t(7924),x4=t(44079),x8=t(73117),x3=t(71554);(p=X||(X={})).RAW="RAW",p.PROXY="PROXY",p.THROW="THROW",p.HANDLER="HANDLER",(f=L||(L={})).GET="GET",f.SET="SET",f.APPLY="APPLY",f.CONSTRUCT="CONSTRUCT",f.ENDPOINT="ENDPOINT",f.RELEASE="RELEASE";var x5=Symbol("Comlink.proxy"),x6=Symbol("Comlink.endpoint"),x7=Symbol("Comlink.releaseProxy"),x9=Symbol("Comlink.thrown"),Ze=function(e){return"object"==typeof e&&null!==e||"function"==typeof e},Zn=new Map([["proxy",{canHandle:function(e){return Ze(e)&&e[x5]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return Zt(e,t),[r,[r]]},deserialize:function(e){return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(Zi(i),a===x7)return function(){return Zs(n,{type:L.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){Zr(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=Zs(n,{type:L.GET,path:t.map(function(e){return e.toString()})}).then(Zu);return l.then.bind(l)}return e(n,(0,ec._)(t).concat([a]))},set:function(e,r,o){Zi(i);var a=(0,J._)(Zc(o),2),l=a[0],c=a[1];return Zs(n,{type:L.SET,path:(0,ec._)(t).concat([r]).map(function(e){return e.toString()}),value:l},c).then(Zu)},apply:function(r,o,a){Zi(i);var l=t[t.length-1];if(l===x6)return Zs(n,{type:L.ENDPOINT}).then(Zu);if("bind"===l)return e(n,t.slice(0,-1));var c=(0,J._)(Zo(a),2),u=c[0],s=c[1];return Zs(n,{type:L.APPLY,path:t.map(function(e){return e.toString()}),argumentList:u},s).then(Zu)},construct:function(e,r){Zi(i);var o=(0,J._)(Zo(r),2),a=o[0],l=o[1];return Zs(n,{type:L.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(Zu)}});return o}(e,[],void 0)}}],["throw",{canHandle:function(e){return Ze(e)&&x9 in e},serialize:function(e){var n=e.value;return[n instanceof Error?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function Zt(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,ey._)({path:[]},i.data),l=a.id,c=a.type,u=a.path,s=(i.data.argumentList||[]).map(Zu);try{var d=u.slice(0,-1).reduce(function(e,n){return e[n]},e),p=u.reduce(function(e,n){return e[n]},e);switch(c){case L.GET:o=p;break;case L.SET:d[u.slice(-1)[0]]=Zu(i.data.value),o=!0;break;case L.APPLY:o=p.apply(d,s);break;case L.CONSTRUCT:var f=(0,x3._)(p,(0,ec._)(s));o=Zl(f);break;case L.ENDPOINT:var h,v=new MessageChannel,m=v.port1,g=v.port2;Zt(e,g),h=[m],Za.set(m,h),o=m;break;case L.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,el._)({value:e},x9,0)}Promise.resolve(o).catch(function(e){return(0,el._)({value:e},x9,0)}).then(function(e){var t=(0,J._)(Zc(e),2),i=t[0],o=t[1];n.postMessage((0,ny._)((0,ey._)({},i),{id:l}),o),c===L.RELEASE&&(n.removeEventListener("message",r),Zr(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),Zr(n)}}function Zr(e){"MessagePort"===e.constructor.name&&e.close()}function Zi(e){if(e)throw Error("Proxy has been released and is not useable")}function Zo(e){var n,t=e.map(Zc);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var Za=new WeakMap;function Zl(e){return Object.assign(e,(0,el._)({},x5,!0))}function Zc(e){var n=!0,t=!1,r=void 0;try{for(var i,o=Zn[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,J._)(i.value,2),l=a[0],c=a[1];if(c.canHandle(e)){var u=(0,J._)(c.serialize(e),2),s=u[0],d=u[1];return[{type:X.HANDLER,name:l,value:s},d]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:X.RAW,value:e},Za.get(e)||[]]}function Zu(e){switch(e.type){case X.HANDLER:return Zn.get(e.name).deserialize(e.value);case X.RAW:return e.value}}function Zs(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,ey._)({id:i},n),t)})}var Zd=Symbol("timeout");function Zp(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)(0,c.value)()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return n.apply(void 0,(0,ec._)(r))}}(e,n[r]));return t}function Zf(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(!t.scopes.has(c)){var u="Scope not declared in extension.json: ".concat(c);if(e.flagEnforceScopes)throw e.logger.error(u),Error(u);e.logger.warn("".concat(u,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var Zh=nJ.Dy.Record(nJ.Dy.String(),nJ.Dy.String({minLength:1}));function Zv(){var e=(0,eb._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return Zv=function(){return e},e}function Zm(){var e=(0,eb._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return Zm=function(){return e},e}function Zg(){var e=(0,eb._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return Zg=function(){return e},e}function Zy(){var e=(0,eb._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return Zy=function(){return e},e}function Zb(){var e=(0,eb._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return Zb=function(){return e},e}function Zx(){var e=(0,eb._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return Zx=function(){return e},e}function ZZ(){var e=(0,eb._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return ZZ=function(){return e},e}function Zw(){var e=(0,eb._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return Zw=function(){return e},e}function ZC(){var e=(0,eb._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n    tags {\n      id\n      isOfficial\n    }\n  }\n"]);return ZC=function(){return e},e}function Z_(){var e=(0,eb._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return Z_=function(){return e},e}function Zk(){var e=(0,eb._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return Zk=function(){return e},e}function ZS(){var e=(0,eb._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return ZS=function(){return e},e}function ZI(){var e=(0,eb._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return ZI=function(){return e},e}function ZR(){var e=(0,eb._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return ZR=function(){return e},e}function ZG(){var e=(0,eb._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return ZG=function(){return e},e}function ZE(){var e=(0,eb._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return ZE=function(){return e},e}function ZT(){var e=(0,eb._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        isOwner\n        replId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return ZT=function(){return e},e}function ZD(){var e=(0,eb._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return ZD=function(){return e},e}var ZP=(0,ex.Ps)(Zv()),ZB=(0,ex.Ps)(Zm()),ZU=(0,ex.Ps)(Zg()),ZA=(0,ex.Ps)(Zy()),ZO=(0,ex.Ps)(Zb()),ZX=(0,ex.Ps)(Zx()),ZL=(0,ex.Ps)(ZZ()),ZM=(0,ex.Ps)(Zw()),ZW=(0,ex.Ps)(ZC()),Zz=(0,ex.Ps)(Z_()),ZN=(0,ex.Ps)(Zk(),Zz),ZF=(0,ex.Ps)(ZS(),Zz),ZV=(0,ex.Ps)(ZI(),ZP,ZB,ZU,ZA),ZH=(0,ex.Ps)(ZR(),Zz,ZO,ZX,ZL),Zj=(0,ex.Ps)(ZG(),Zz,ZO,ZX,ZL),ZY=(0,ex.Ps)(ZE()),Zq=(0,ex.Ps)(ZT(),ZM,ZW,ZN,ZF),ZK=(0,ex.Ps)(ZD(),ZM,ZW,ZN,ZF),ZJ=t(99678);function Z$(){var e=(0,eb._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return Z$=function(){return e},e}var ZQ=(0,ex.Ps)(Z$()),Z0=t(31748);function Z1(e){var n,t;return{registerCommand:(n=(0,ev._)(function(n,t){var r,i,o;return(0,em.Jh)(this,function(a){switch(a.label){case 0:if(t)return[3,5];e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,sH.V)(r,e)];case 2:return o=a.sent(),[3,4];case 3:throw a.sent();case 4:if(!o.data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,9];case 5:i=n,r=t,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,(0,sH.V)(r,e)];case 7:return o=a.sent(),[3,9];case 8:throw a.sent();case 9:return e.store.set(sj._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,Z0.d)(i.commandId),contributions:i.contributions,create:(0,ev._)(function(){return(0,em.Jh)(this,function(e){return[2,o]})})}}),[2]}})}),function(e,t){return n.apply(this,arguments)}),registerCreateCommand:(t=(0,ev._)(function(n,t){var r,i;return(0,em.Jh)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in sY.Y)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(sY.Y))),i={id:(0,Z0.d)(n.commandId),contributions:n.contributions,create:(a=(0,ev._)(function(n){var r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];return[2,(0,sH.V)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(sj._K,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return t.apply(this,arguments)})}}function Z2(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var Z4=t(82891),Z8=t(38117);function Z3(e){var n;return n=(0,ev._)(function(n){var t,r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:return[4,null===ry.l||void 0===ry.l?void 0:ry.l.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})}),function(e){return n.apply(this,arguments)}}var Z5=t(41600);function Z6(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var Z7=function(e){var n=e.showMessage;return{showConfirm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"confirm",time:t>1e4?1e3:t,style:r})},showError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"error",time:t>1e4?1e3:t,style:r})},showNotice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"notice",time:t>1e4?1e3:t,style:r})},showWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"warning",time:t>1e4?1e3:t,style:r})},hideMessage:e.hideMessage,hideAllMessages:e.hideAllMessages}};function Z9(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,et.useRef)(null),c=(0,ef.Z)(),u=(0,eg.d)(),s=(0,eu.Z)(),d=(0,et.useRef)(),p=(0,ei.P5)({controlName:"flag-extensions-enforce-scopes",default:!1,type:"boolean",logFlagToAnalytics:!1}),f=(0,yc.Ld)(),h=(0,x4.r9)(null==n?void 0:n.installationId),v=(0,cX.F)(),m=(0,et.useRef)(v),g=(0,et.useRef)([]);m.current=v;var y=(0,nO.Z)(function(){return{}},[]),b=(0,xp.Z)(s.container),x=(0,J._)((0,et.useState)(!1),2),Z=x[0],w=x[1];(0,et.useEffect)(function(){b===h_.em.CONNECTED&&w(!0)},[b]),(0,et.useEffect)(function(){g.current.forEach(function(e){return e(v.theme)})},[v.theme]),(0,et.useEffect)(function(){return function(){d.current&&d.current()}},[]);var C=(0,et.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),_=(0,et.useCallback)(function(){if(l.current&&C()&&n&&h&&u){d.current&&d.current();var e={extension:n,extensionIframe:l.current,services:s,paneId:i,replId:c,flagEnforceScopes:p,getThemeContext:function(){return m.current},onThemeChange:function(e){return g.current.push(e),function(){g.current.splice(g.current.indexOf(e),1)}},store:f,extensionStateAtom:h,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:u,ghostwriter:y};d.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v=e.filePath,m=e.replId,g=e.environmentAPIs,y=e.logger.createLogger({api:"debug"});function b(){return(b=(0,ev._)(function(n){var t,r,i,o;return(0,em.Jh)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!==(t=a.sent())&&void 0!==t?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!==(i=a.sent())&&void 0!==i?i:"(unset)",(0,eh.j)(eh.U3.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,ev._)(function(){var n,t,i;return(0,em.Jh)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null===(n=t.output)||void 0===n?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})).apply(this,arguments)}return(0,ny._)((0,ey._)({filePath:v},function(e){var n=e.services.fs,t=e.logger.createLogger({api:"fs"});function r(){return(r=(0,ev._)(function(e,t){var r,i,o;return(0,em.Jh)(this,function(a){switch(a.label){case 0:if(r=(0,Z5.AH)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(t instanceof Blob))return[3,3];return o=a7.Z.from,[4,t.arrayBuffer()];case 2:return i=o.apply(a7.Z,[a.sent()]),[3,4];case 3:i=a7.Z.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,Z6(a.sent())]}})})).apply(this,arguments)}function i(){return(i=(0,ev._)(function(e){var t,r,i,o=arguments;return(0,em.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"utf8",r=(0,Z5.AH)(e),[4,n.readFile(r)];case 1:var l,c;if((i=a.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(l=i.content,"utf8"===(c=t)?l.toString():"binary"===c?l.toBuffer():l)}]}})})).apply(this,arguments)}function o(){return(o=(0,ev._)(function(e){var t,r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:return t=(0,Z5.AH)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})).apply(this,arguments)}function a(){return(a=(0,ev._)(function(e){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return t=(0,Z5.AH)(e),[4,n.createDir(t)];case 1:return[2,Z6(r.sent())]}})})).apply(this,arguments)}function l(){return(l=(0,ev._)(function(e){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return t=(0,Z5.AH)(e),[4,n.deleteDir(t)];case 1:return[2,Z6(r.sent())]}})})).apply(this,arguments)}function c(){return(c=(0,ev._)(function(e){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return t=(0,Z5.AH)(e),[4,n.deleteFile(t)];case 1:return[2,Z6(r.sent())]}})})).apply(this,arguments)}function u(){return(u=(0,ev._)(function(e,t){var r,i,o;return(0,em.Jh)(this,function(a){switch(a.label){case 0:return r=(0,Z5.AH)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==iD.Tv.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,Z6(o)]}})})).apply(this,arguments)}function s(){return(s=(0,ev._)(function(e,t){var r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:return r=(0,Z5.AH)(e),[4,n.copyFile(r,t)];case 1:return[2,Z6(i.sent())]}})})).apply(this,arguments)}return Zp([Zf(e,["read"])],(0,ey._)({readFile:function(e){return i.apply(this,arguments)},readDir:function(e){return o.apply(this,arguments)},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,Z5.AH)(e);(0,oG.Mb)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i){r.onChange(e.toString("utf8"));return}r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return Zl(function(){a()})},watchDir:function(e,t){var r=(0,Z5.AH)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,Z5.Oh)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return Zl(function(){i()})}},Zp([Zf(e,["write-exec"])],{createDir:function(e){return a.apply(this,arguments)},deleteDir:function(e){return l.apply(this,arguments)},writeFile:function(e,n){return r.apply(this,arguments)},deleteFile:function(e){return c.apply(this,arguments)},copyFile:function(e,n){return s.apply(this,arguments)},move:function(e,n){return u.apply(this,arguments)},watchTextFile:function(e,r){(0,oG.Mb)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i,o=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(Zl({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:(i=(0,ev._)(function(e){var n,t,i,o;return(0,em.Jh)(this,function(a){return n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version,r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})}),function(e){return i.apply(this,arguments)}),onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return Zl(function(){o()})}})))}(e),function(e){var n=e.services.container,t=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,ev._)(function(){var e;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})).apply(this,arguments)}function o(){return(o=(0,ev._)(function(e,i){return(0,em.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})).apply(this,arguments)}function a(){return(a=(0,ev._)(function(e){return(0,em.Jh)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})).apply(this,arguments)}function l(){return(l=(0,ev._)(function(e){var i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}function c(){return(c=(0,ev._)(function(e){var i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}return Zp([Zf(e,["repldb:read"])],(0,ey._)({getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}},Zp([Zf(e,["repldb:write"])],{setReplDbValue:function(e,n){return o.apply(this,arguments)},deleteReplDbKey:function(e){return c.apply(this,arguments)}})))}(e),{watchActiveFile:function(e){return Zl(a.environmentAPIs.watchActiveFile(e))},openFile:(a=e).environmentAPIs.openFile,getActiveFile:function(){return a.environmentAPIs.getActiveFile()}},(l=e.getThemeContext,c=e.onThemeChange,{getCurrentTheme:function(){return l().theme},getCurrentThemeValues:function(){return l().theme.values.global},onThemeChange:function(e){var n=c(e);return Zl(function(){n()})},onThemeChangeValues:function(e){var n=c(function(n){return e(n.values.global)});return Zl(function(){n()})}}),Z7(g.toasts),{currentUser:Z3(ZV),userById:Z3(Zj),userByUsername:Z3(ZH),currentRepl:function(e){return Z3(Zq)((0,ey._)({id:m},e))},replById:Z3(Zq),replByUrl:Z3(ZK)},function(e){var n=e.services.container.client(),t=e.logger.createLogger({api:"exec"});function r(){return(r=(0,ev._)(function(e){var r,i,o,a;return(0,em.Jh)(this,function(l){switch(l.label){case 0:return[4,e.args];case 1:return r=l.sent(),[4,e.env];case 2:if(i=l.sent(),t.info("exec: [".concat(r.join(", "),"]"),{environmentVariables:i}),!cF.B4.Check(Zh,i))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return o=l.sent(),a=function(){},[2,Zl({dispose:function(){a()},promise:new Promise(function(l){a=n.openChannel({service:"exec"},function(n){var c=n.channel;c.onCommand(function(n){o?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),c.request({exec:{args:r,env:i,splitStderr:!!o}}).then(function(n){if(n.ok){l({exitCode:0,error:null});return}if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),l({exitCode:null,error:t});return}if("open"===c.status&&a(),n.error){var r,i,o=Number(null===(i=n.error)||void 0===i?void 0:null===(r=i.match(/-?[0-9]+/g))||void 0===r?void 0:r[0]);l({exitCode:"number"==typeof o?o:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){t.error("exec: threw crosis error:\n".concat(String(n||"")));var r="exec() failed due to internal error. See console for details.";e.onError(r),l({error:r,exitCode:null})})})})})]}})})).apply(this,arguments)}return(0,ey._)({},Zp([Zf(e,["write-exec"])],{exec:function(e){return r.apply(this,arguments)}}))}(e),(u=e.extension,s=e.paneId,d=e.environmentAPIs,p=!1,{activatePane:function(){s&&(d.activatePane(s),p||(p=!0,(0,eh.j)(eh.U3.EXTENSION_USED,{extensionId:u.extensionId,extensionName:u.manifest.name})))}})),{commands:{registerCommand:(f=(0,ev._)(function(n,t){var r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,sH.V)(t,e)];case 2:return r=i.sent(),[3,4];case 3:throw i.sent();case 4:return e.store.set(sj._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:(0,ev._)(function(){return(0,em.Jh)(this,function(e){return[2,r]})})}}),[2]}})}),function(e,n){return f.apply(this,arguments)}),registerCreateCommand:(h=(0,ev._)(function(n,t){var r,i;return(0,em.Jh)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in sY.Y)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(sY.Y))),i={id:n.commandId,contributions:n.contributions,create:(a=(0,ev._)(function(n){var r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(Zd)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];if(r===Zd)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,sH.V)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(sj._K,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return h.apply(this,arguments)})},experimental:(0,ny._)((0,ey._)({},Zp([Z2(e)],{hasExperimentalApi:function(){return!0}})),{editor:Zp([Z2(e)],(0,ey._)({},function(){function e(){return(e=(0,ev._)(function(){var e,n,t,r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:return[4,null===ry.l||void 0===ry.l?void 0:ry.l.query({query:ZY})];case 1:if(null==(t=i.sent())?void 0:null===(n=t.data)||void 0===n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.workspacePreferences)return[2,(0,ZJ.J)(t.data.currentUser.workspacePreferences)];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})})).apply(this,arguments)}return{getPreferences:function(){return e.apply(this,arguments)}}}())),commands:Zp([Z2(e)],(0,ey._)({},Z1(e))),auth:Zp([Z2(e)],(0,ey._)({},{getAuthToken:function(){return(0,ev._)(function(){var n,t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===ry.l||void 0===ry.l?void 0:ry.l.query({query:ZQ,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:Zp([Z2(e)],(0,ey._)({},Z1(e))),execInShell:e.environmentAPIs.execInShell}),internal:(n=e).store.get(n.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},execInShell:n.environmentAPIs.execInShell,runner:(t=n.services.runner,{getRunState:function(){return t.getRunState()},onStateChanged:function(e){var n=t.onStateChanged(e);return Zl(function(){n()})}}),container:(r=n.services.container,{getConnectionState:function(){return r.getConnectionState()},onConnectionStateChanged:function(e){var n=r.onConnectionStateChanged(e);return Zl(function(){n()})}}),layout:{revealOrInsertTool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=n.logger.createLogger({api:"revealOrInsertTool"});if(!n.extension.manifest.tools){t.warn("No tools defined in extension manifest");return}if(n.extension.manifest.tools.length<e+1){t.warn("Tool index out of bounds");return}var r=n.extension.manifest.tools[e],i=r.name||n.extension.manifest.name,o=r.handler;n.environmentAPIs.revealOrInsertTool({extensionId:n.extension.extensionId,installationId:n.extension.installationId,baseUrl:n.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return n.environmentAPIs.getLayoutState()},setLayoutState:function(e){return n.environmentAPIs.setLayoutState(e)}},secrets:(i=n.services.secrets,{setSecret:function(e){var n=e.key,t=e.value;return(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,i.writeSecret({key:n,value:t})];case 1:return e.sent(),[2,(0,Z8.Ok)(!0)]}})})()},getSecret:function(e){return(0,ev._)(function(){var n,t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,i.readSecret(e.key)];case 1:return[2,Z8.Ok.apply(void 0,[null===(n=r.sent())||void 0===n?void 0:n.value])];case 2:return t=r.sent(),[2,(0,Z8.UG)(t)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,ev._)(function(){return(0,em.Jh)(this,function(n){return[2,(0,Z4.e)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(o=n.services.dotReplit).getConfig,update:o.updateDotReplit},ssh:{getSshConfig:function(){return(0,ev._)(function(){return(0,em.Jh)(this,function(e){return[2,n.environmentAPIs.getSshConfig()]})})()}},commands:Z1(n)}:null,debug:{info:function(e,n){return y.info(e,n)},warn:function(e,n){return y.warn(e,n)},error:function(e,n){return y.error(e,n)}},handshake:function(e){return b.apply(this,arguments)}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=Zt(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}(e)}},[u,m,s,C,i,p,f,h,o,c,a,n,t,r,y]);return{isValidExtensionPaneUrl:C,didConnectOnce:Z,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ny._)((0,ey._)({title:r,src:t},x8.Z,e),{ref:(0,lY.l)(l,e.ref),onLoad:function(n){_(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,et.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function we(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,x4.r9)(n.installationId),i=Z9({extension:n,sandboxUrl:(0,p2.Vh)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,$.tZ)("iframe",(0,ey._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var wn=t(52240),wt=t(17874);function wr(){var e=(0,eb._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return wr=function(){return e},e}var wi=(0,ex.Ps)(wr(),wt.R9,wt.gp),wo=(0,eO.X)({container:ea.l0.colWithGap(24),buttonContainer:[ea.l0.rowWithGap(12),ea.l0.justify.end]});function wa(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,$.BX)(eo.G,{css:wo.container,children:[(0,$.tZ)(eA.h4,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,$.BX)(eA.xv,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,$.BX)(eo.G,{css:wo.buttonContainer,children:[(0,$.tZ)(nf.zx,{onClick:function(){return t()},text:"Cancel"}),(0,$.tZ)(nf.zx,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}function wl(){var e,n,t,r=(0,ef.Z)(),i=(0,eg.d)(),o=(0,eu.Z)().container,a=(0,dI.Z)(o),l=(0,vT.cR)(),c=(0,x4.WF)(),u=aB(),s=(0,wn.Kf)(),d=(0,x4.ot)(),p=(0,wn.dI)();(0,vT.Sp)();var f=(0,x4.Mu)(),h=x1(),v=(0,J._)((0,et.useState)(!1),2),m=v[0],g=v[1];(0,et.useEffect)(function(){r&&i&&p({replId:r,userId:i})},[r,i,p]);var y=(0,sj.c_)(),b=i4(t$);(0,et.useEffect)(function(){b(y)},[y,b]);var x=i4(oX);n=(e=(0,ey._)({},oP,void 0),ew.a(oB,e)).data,t=i4(oA),(0,et.useEffect)(function(){var e;(null==n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.filetypeAssociations)&&t(n.currentUser.filetypeAssociations)},[n,t]);var Z=i1(oO),w=i4(oO),C=function(e){var n,t=e.filterUser;return n=(0,ev._)(function(e){var n,o;return(0,em.Jh)(this,function(a){switch(a.label){case 0:if(!e.active)return[2,[]];return[4,null===ry.l||void 0===ry.l?void 0:ry.l.query({query:wi,variables:{replId:r,userId:t?i:void 0}})];case 1:if(!(n=a.sent())||n.error||!(o=n.data.extensionList))return[2,[]];return[2,o.map(function(e){var n;return{match:nH.pl,data:{type:"action",label:e.name,icon:(0,$.tZ)(vE.Z,{}),description:null!==(n=e.description)&&void 0!==n?n:"",run:function(){e.url&&(e.installation?d({installationId:(0,Z0.Ad)(e.installation.id)}):c({replId:r,extensionId:(0,Z0.T8)(e.id)}))}}}})]}})}),function(e){return n.apply(this,arguments)}},_=(0,sj.s6)(sY.Y.CommandBar);return lf({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:(0,ev._)(function(){var e;return(0,em.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(_.map((t=(0,ev._)(function(n){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,sH.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})},{enabled:!0}),lf({match:nH.pl,commands:function(e){return e.active||""!==e.search?[{match:nH.pl,data:{type:"action",label:"Extension Devtools",icon:(0,$.tZ)(aj.Z,{}),description:"Manage and deploy this Repl as an extension",run:function(){u({pane:{type:"extensionDevtools"}})}}},{match:nH.pl,data:{type:"action",label:"URL",icon:(0,$.tZ)(aj.Z,{}),description:"Add an extension by URL",run:function(){g(!0)}}},{match:nH.pl,data:{type:"action",label:"From this Repl",icon:(0,$.tZ)(aj.Z,{}),description:"Load this Repl as an extension",run:function(){a&&s(a)}}},{match:nH.pl,data:{type:"context",label:"My Extensions",icon:(0,$.tZ)(vE.Z,{}),description:"Browse extensions you have created"},commands:C({filterUser:!0})},{match:nH.pl,data:{type:"action",label:"Docs",icon:(0,$.tZ)(x2.Z,{}),description:"Read the Extensions docs",run:function(){u({pane:{type:"docs",data:{url:rf.TT.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,$.tZ)(vE.Z,{}),description:"Manage extensions"}},{enabled:l}),(0,$.BX)($.HY,{children:[(0,$.tZ)(e$.u,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,$.tZ)(x0.Z,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return g(!1)},onConfirm:function(e){s(e)}})}),(0,$.tZ)(e$.u,{isOpen:!!Z,onRequestClose:function(){return w(null)},children:Z?(0,$.tZ)(wa,{fileExtension:Z.fileExtension,extensionId:Z.extensionId,fileHandlerId:Z.fileHandlerId,onCancel:function(){return w(null)},onConfirm:(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,x({fileExtension:Z.fileExtension,newAssociation:{extensionId:Z.extensionId,fileHandlerId:Z.fileHandlerId}})];case 1:return e.sent(),w(null),[2]}})})}):null}),f.map(function(e){return e.manifest.background?(0,$.tZ)(we,{environmentAPIs:h,extension:e},e.installationId):null})]})}var wc=t(54635),wu=function(e,n){var t=n.checkout,r=n.from,i=n.step;uX.Tb(e,{extra:{checkout:t,from:r,step:i},tags:{checkoutFromQueryParams:!0}})};function ws(){var e=(0,ei.P5)({controlName:xN.r}),n=(0,dw.Wd)("checkout","string"),t=(0,dw.Wd)("from","string"),r=(0,e8.useRouter)(),i=(0,et.useRef)(!1),o=(0,eu.Z)(),a=o.git,l=o.fs,c=(0,et.useRef)(null),u=(0,lw.Z)(),s=u.hideMessage,d=u.showMessage,p=u.showError,f=(0,et.useCallback)(function(){c.current&&(s(c.current),c.current=null)},[s]);return(0,et.useEffect)(function(){function o(){return(o=(0,ev._)(function(){var o,u;function s(){return(s=(0,ev._)(function(){var e;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return c.current=d({content:"Checking out ".concat(n,"..."),type:"notice",time:null}),i.current=!0,[4,a.switchBranch("refs/remotes/origin/".concat(n))];case 1:if((e=r.sent()).error)return wu(e.error,{checkout:n,step:"checkout",from:t}),f(),p("Error checking out ".concat(n,". try using the git pane.")),[2,e];return[2]}})})).apply(this,arguments)}function h(){return(h=(0,ev._)(function(){var e;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return c.current=d({content:"creating ".concat(n," from ").concat(t,"..."),type:"notice",time:null}),i.current=!0,[4,a.createBranch({name:n,startPoint:"refs/remotes/origin/".concat(t),track:!1,checkout:!0})];case 1:if((e=r.sent()).error)return wu(e.error,{checkout:n,step:"create",from:t}),f(),p("Error checking out ".concat(n,". try using the git pane.")),[2,e];return[2]}})})).apply(this,arguments)}return(0,em.Jh)(this,function(v){switch(v.label){case 0:if(!e||i.current||(i.current=!0,"undefined"===n))return[2];if(!n)return i.current=!0,[2];return c.current=d({content:"fetching...",type:"notice",time:null}),[4,a.fetch()];case 1:if(o=v.sent(),f(),o.error)return wu(o.error,{checkout:n,step:"fetch",from:t}),p("Error fetching. check the git pane for information."),[2,o];if(!t)return[3,3];return[4,function(){return h.apply(this,arguments)}()];case 2:return u=v.sent(),[3,5];case 3:return[4,function(){return s.apply(this,arguments)}()];case 4:u=v.sent(),v.label=5;case 5:if(u)return[2];return[4,l.persist()];case 6:return v.sent(),(0,dw.pg)({router:r,params:[{mode:"delete",key:"checkout"}]}),f(),d({content:"Checked out ".concat(n),type:"confirm",time:1e4}),[2]}})})).apply(this,arguments)}!function(){o.apply(this,arguments)}()},[n,r,a,d,f,p,l,e,t]),(0,$.tZ)(et.Fragment,{})}var wd=t(60477),wp=t(64780),wf=t(9016),wh=t(24857),wv=t(86858),wm=t(49345),wg=t(907),wy=t(47527),wb=t(99098),wx=t(48311),wZ=t(28266),ww=t.n(wZ),wC=t(86257),w_=t(72602),wk=t(96372),wS=et.forwardRef(function(e,n){var t,r,i,o=e.label,a=e.id,l=e.description,c=e.onChange,u=e.fontFamily,s=void 0===u?"sans-serif":u,d=e.fontSize,p=void 0===d?"medium":d,f=e.fontWeight,h=void 0===f?"regular":f,v=e.foreground,m=void 0===v?1:v,g=e.placeholder,y=e.validationResults,b=e.value,x=(0,lF._)(e,["label","id","description","onChange","fontFamily","fontSize","fontWeight","foreground","placeholder","validationResults","value"]),Z=(0,wC.Z)().ref,w=(0,lP.U)(),C=a||w("input"),_=l?w("input-description"):void 0,k=(0,J._)((0,et.useState)(!1),2),S=k[0],I=k[1];(null==y?void 0:y.some(function(e){return"loading"===e.state}))?t="loading":(null==y?void 0:y.some(function(e){return"error"===e.state}))?(t="error",i="var(--accent-negative-default)",r=(0,$.tZ)(cP.Z,{})):(null==y?void 0:y.every(function(e){return"success"===e.state}))?(t="success",i="var(--accent-positive-default)",r=(0,$.tZ)(lx.Z,{})):t="default";var R=wx.P3[t],G=(x.className?x.className+" ":"")+R;return(0,$.BX)("div",{className:ww().dynamic([["eff5a248a6706777",[i,w_.Z.fontSize[p],w_.Z.fontFamily[s],w_.Z.fontWeight[h],w_.Z.foreground[m],w_.Z.lineHeight[p]]]])+" container",children:[o?(0,$.BX)($.HY,{children:[x.required?(0,$.BX)(wh.Ug,{spacing:"2px",children:[(0,$.tZ)(eq.Z,{tag:"label",foreground:S?1:2,size:"large"===p?"small":"xsmall",htmlFor:C,children:o}),(0,$.tZ)("span",{className:ww().dynamic([["eff5a248a6706777",[i,w_.Z.fontSize[p],w_.Z.fontFamily[s],w_.Z.fontWeight[h],w_.Z.foreground[m],w_.Z.lineHeight[p]]]])+" required",children:"*"})]}):(0,$.tZ)(eq.Z,{tag:"label",foreground:S?1:2,size:"large"===p?"small":"xsmall",htmlFor:C,children:o}),(0,$.tZ)(wk.Z,{height:"4px"})]}):null,(0,$.BX)("div",{className:ww().dynamic([["eff5a248a6706777",[i,w_.Z.fontSize[p],w_.Z.fontFamily[s],w_.Z.fontWeight[h],w_.Z.foreground[m],w_.Z.lineHeight[p]]]])+" textarea-container",children:[(0,$.tZ)("textarea",(0,ny._)((0,ey._)({id:C,placeholder:void 0===g?"":g,value:b,onChange:c,"aria-busy":"loading"===t,"aria-invalid":"error"===t,"aria-describedby":_},x),{ref:function(e){if(Z(e),n){if("function"==typeof n){n(e);return}n.current=e}},onFocus:function(e){I(!0),x.onFocus&&x.onFocus(e)},onBlur:function(e){I(!1),x.onBlur&&x.onBlur(e)},className:ww().dynamic([["eff5a248a6706777",[i,w_.Z.fontSize[p],w_.Z.fontFamily[s],w_.Z.fontWeight[h],w_.Z.foreground[m],w_.Z.lineHeight[p]]]])+" "+(G||"")})),r?(0,$.tZ)("div",{onMouseEnter:function(){return I(!0)},onMouseLeave:function(){return I(!1)},className:ww().dynamic([["eff5a248a6706777",[i,w_.Z.fontSize[p],w_.Z.fontFamily[s],w_.Z.fontWeight[h],w_.Z.foreground[m],w_.Z.lineHeight[p]]]])+" icon-container right",children:r}):null]}),l?(0,$.BX)($.HY,{children:[(0,$.tZ)(wk.Z,{height:"4px"}),(0,$.tZ)(eq.Z,{id:_,tag:"span",foreground:3,size:p,children:l})]}):null,y&&S?(0,$.tZ)(wx.QE,{validationResults:y}):null,(0,$.tZ)(ww(),{id:"eff5a248a6706777",dynamic:[i,w_.Z.fontSize[p],w_.Z.fontFamily[s],w_.Z.fontWeight[h],w_.Z.foreground[m],w_.Z.lineHeight[p]],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.textarea-container.__jsx-style-dynamic-selector{position:relative}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:var(--space-8);right:var(--space-8);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(i,"}textarea.__jsx-style-dynamic-selector{resize:none;font-size:").concat(w_.Z.fontSize[p],";font-family:").concat(w_.Z.fontFamily[s],";font-weight:").concat(w_.Z.fontWeight[h],";color:").concat(w_.Z.foreground[m],";line-height:").concat(w_.Z.lineHeight[p],";background-color:transparent;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s;line-height:1.4}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-default)}textarea.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}textarea.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}textarea.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})}),wI=t(12285),wR=t(4955),wG=t(14105),wE=t(9670);function wT(e){switch(e){case e4.Fl.Match:return"The test passes if the expected output is in the actual output.";case e4.Fl.Exact:return"The test passes if the expected output is equal to the actual output.";case e4.Fl.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case e4.Fl.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var wD=function(e){(0,wR._)(t,e);var n=(0,wE._)(t);function t(){for(var e,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(0,wI._)(this,t),(e=n.call.apply(n,[this].concat((0,ec._)(i)))).name=e.constructor.name,e}return t}((0,wG._)(Error));function wP(e){var n={id:e.id},t={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":n.output={compatibility:{expected:e.output}};break;case"match":n.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":n.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":n.output={regex:{expression:e.output}}}return{id:e.id,instructions:[t,n]}}function wB(e){return wU.apply(this,arguments)}function wU(){return(wU=(0,ev._)(function(e){var n,t,r,i,o,a,l,c,u,s;return(0,em.Jh)(this,function(d){switch(d.label){case 0:return[4,e.getRunConfig()];case 1:if(!(t=d.sent()))throw new wD("unable to fetch dotreplit run config");if(t.interp){if((null==(i=null===(r=t.interp)||void 0===r?void 0:r.command)?void 0:i.args[0])==="stderred"&&("--"===i.args[1]?i.args.splice(0,2):i.args.shift()),!i||i.args.length<1)throw o=new wD("received interp without command"),uX.Tb(o,function(e){return e.setExtra("runInfo",s)}),o;if(i.args[0].match(/(^|\/)prybar/i)){var p,f,h,v,m;return[2,{execCommand:(p=i.args,f=i.env,h=p.indexOf("--ps1"),v=p.indexOf("--ps2"),m=p.indexOf("-i"),-1!==h&&null!=p[h+1]&&(p[h+1]=""),-1!==v&&null!=p[v+1]&&(p[v+1]=""),-1!==m&&p.splice(m,1),p.includes("-q")||p.unshift(p.shift(),"-q"),f.PS1="",f.PS2="",{args:p,env:f})}]}return[2,{execCommand:{args:i.args,env:i.env}}]}if(!(null===(n=t.run)||void 0===n?void 0:n.run))throw a=new wD("Bad repl run config received"),uX.Tb(a,function(e){return e.setExtra("runConfig",t)}),a;return c=(l=t.run).run,u=l.compile,c.env.PS1="",c.env.PS2="",s={execCommand:{args:c.args,env:c.env}},u&&(u.env.PS1="",u.env.PS2="",s.buildCommand={args:u.args,env:u.env}),[2,s]}})})).apply(this,arguments)}var wA=(0,eO.X)({dropdownContainer:[ea.l0.border({width:1,color:ea.TV.outlineDimmest}),ea.l0.borderRadius(4),ea.l0.width("100%"),{boxSizing:"border-box"}],dropdownAnchor:[ea.l0.display.flex,ea.l0.flex.row,ea.l0.justify.spaceBetween,ea.l0.textAlign.right,ea.l0.p(8),{".anchor":ea.l0.zIndex(1),".text":ea.l0.color.foregroundDimmer,'&[data-has-type="true"] .text':ea.l0.color.foregroundDefault}],manageTestsView:[ea.l0.display.flex,ea.l0.justify.spaceBetween,ea.l0.flex.column,ea.l0.p(16)],manageTestRow:[ea.l0.display.flex,ea.l0.justify.spaceBetween,ea.l0.flex.row,ea.l0.p(16),{"& > button":ea.l0.ml(8),"&:last-child":ea.l0.justify.end}],manageTestRowSection:[ea.l0.display.flex,ea.l0.justify.start,ea.l0.flex.column,ea.l0.my(0),ea.l0.mx(16),ea.l0.width("100%")]}),wO=function(e){var n=e.test,t=e.onSubmit,r=e.onCancel,i=e.isOpen,o=e.onRequestClose,a=(0,J._)((0,et.useState)({}),2),l=a[0],c=a[1],u=function(e){return{name:(null==e?void 0:e.name)||"",type:(null==e?void 0:e.type)||e4.Fl.Match,input:(null==e?void 0:e.input)||"",output:(null==e?void 0:e.output)||""}},s=(0,lw.Z)().showError,d=(0,J._)((0,et.useState)(u(n)),2),p=d[0],f=d[1];(0,et.useEffect)(function(){f(u(n)),c({})},[n,f]);var h=function(e,n){c(function(t){return(0,ny._)((0,ey._)({},t),(0,el._)({},e,n?void 0:[{message:e+" expected but not provided.",state:"error"}]))})};return(0,$.tZ)(e$.u,{isOpen:i,onRequestClose:o,children:(0,$.BX)("div",{css:wA.manageTestsView,children:[(0,$.tZ)("div",{children:(0,$.tZ)(eY.Z,{level:4,align:"center",children:n?"Edit test: ":"Create test"})}),(0,$.tZ)("div",{css:wA.manageTestRow,children:(0,$.tZ)(wx.ZP,{label:"Test name",placeholder:"The name of the test",value:(null==p?void 0:p.name)||"",validationResults:l.name,onChange:function(e){var n;e.persist(),f(function(n){var t;return(0,ny._)((0,ey._)({},n),{name:(null===(t=e.target)||void 0===t?void 0:t.value)||""})}),h("name",null===(n=e.target)||void 0===n?void 0:n.value)},maxLength:20})}),(0,$.tZ)("div",{css:wA.manageTestRow,children:(0,$.tZ)(wS,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:p.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),f(function(n){return(0,ny._)((0,ey._)({},n),{input:e.target.value})})}})}),(0,$.tZ)("div",{css:wA.manageTestRow,children:(0,$.tZ)(wS,{style:{height:"150px"},label:"Expected output",validationResults:l.output,placeholder:"The expected output for the test",value:p.output,fontFamily:"monospace",translate:"no",onChange:function(e){var n;e.persist(),f(function(n){return(0,ny._)((0,ey._)({},n),{output:e.target.value})}),h("output",null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,$.tZ)("div",{css:wA.manageTestRow,children:(0,$.tZ)("div",{css:wA.dropdownContainer,children:(0,$.tZ)(wb.Z,{items:[e4.Fl.Match,e4.Fl.Exact,e4.Fl.Regex,e4.Fl.Compatibility],renderItemChildComponent:function(e){return(0,$.BX)("a",{children:[e,(0,$.tZ)("br",{}),(0,$.tZ)(eq.Z,{size:"xsmall",children:wT(e)})]})},renderAnchorComponent:function(e){var n=e.innerRef,t=(0,lF._)(e,["innerRef"]);return(0,$.BX)("a",(0,ny._)((0,ey._)({ref:n},t),{css:wA.dropdownAnchor,"data-has-type":""!==p.type,children:[(0,$.tZ)(eq.Z,{children:p.type}),(0,$.tZ)(eq.Z,{children:(0,$.tZ)(sI.Z,{})})]}))},onClick:function(e){f(function(n){return(0,ny._)((0,ey._)({},n),{type:e})})}})})}),(0,$.BX)("div",{css:wA.manageTestRow,children:[(0,$.tZ)(ej.Z,{onClick:r,children:"Cancel"}),(0,$.tZ)(ej.Z,{color:"primary",filled:!0,onClick:function(){if(!p.name||!p.output){s("Test name and expected output must be provided."),p.name||h("name"),p.output||h("output");return}if(!p.type){s("A test type must be provided");return}t({testId:null==n?void 0:n.id,name:p.name,input:p.input||"",type:p.type,output:p.output}),f(u(void 0))},children:"Save"})]})]})})},wX=(0,eO.X)({test:[ea.l0.backgroundColor.backgroundHigher,ea.l0.mt(8),ea.l0.p(8),ea.l0.flex.column,ea.l0.justify.spaceBetween,ea.l0.borderRadius(8),{cursor:"pointer","&:hover":ea.l0.backgroundColor.backgroundHigher}],testRow:[ea.l0.display.flex,ea.l0.justify.start],testText:[ea.l0.width("100%"),ea.l0.py(4),ea.l0.pr(8),{wordBreak:"break-all"}],statusLabel:{'&[data-status="passed"]':ea.l0.color.accentPositiveDefault,'&[data-status="failed"]':ea.l0.color.accentNegativeDefault}}),wL=function(e){var n=e.test,t=e.onEdit,r=e.onDelete,i=e.onView,o=e.isTeacherView,a=e.status,l=e.isRunning,c=e.onShowFailed,u=e.disableButtons,s="";return a?s=a:l&&(s="Running"),(0,$.BX)("div",{css:wX.test,onClick:function(){return i()},children:[(0,$.BX)("div",{css:wX.testRow,children:[(0,$.tZ)("div",{css:wX.testText,children:(0,$.tZ)(eq.Z,{size:"large",children:n.name})}),o?(0,$.tZ)("div",{css:wX.testRow,onClick:function(e){return e.stopPropagation()},children:(0,$.BX)($.HY,{children:[(0,$.tZ)(ej.Z,{color:"primary",onClick:t,Icon:cA.Z,disabled:u}),(0,$.tZ)(wk.Z,{width:4}),(0,$.tZ)(ej.Z,{onClick:r,color:"negative",Icon:u6.Z,disabled:u})]})}):null]}),a||l?(0,$.BX)($.HY,{children:[(0,$.tZ)(wk.Z,{height:2}),(0,$.BX)("div",{css:wX.testRow,children:[(0,$.tZ)("div",{css:wX.testText,children:(0,$.tZ)(eq.Z,{css:wX.statusLabel,"data-status":null==a?void 0:a.toLowerCase(),children:s})}),(0,$.tZ)(ej.Z,{onClick:function(e){return e.stopPropagation(),c(e)},disabled:l,children:"Results"})]})]}):null]})},wM=(0,eO.X)({gutter:[ea.l0.color.foregroundDefault,ea.l0.minWidth("1.5em")],text:[ea.l0.color.foregroundDefault,ea.l0.maxWidth("80%")]}),wW=function(e){var n=e.text;if(!n)return null;var t=n.split("\n").map(function(e,n){return[e,"".concat(n+1)]});return""===t[t.length-1][0]&&t.pop(),(0,$.BX)(wh.Ug,{children:[(0,$.tZ)("code",{css:wM.gutter,children:(0,$.tZ)("pre",{children:t.map(function(e){var n=(0,J._)(e,2);return n[0],n[1]}).join("\n")})}),(0,$.tZ)("code",{css:wM.text,children:(0,$.tZ)("pre",{children:n})})]})},wz=t(33799),wN=(0,eO.X)({gutter:[ea.l0.color.foregroundDefault,ea.l0.minWidth("1.5em")],text:[ea.l0.color.foregroundDefault,ea.l0.maxWidth("80%")]}),wF=function(e){var n=e.expected,t=e.actual;if(!n||!t)return null;for(var r=t.split("\n"),i=n.split("\n"),o=[],a=Math.max(i.length,r.length),l=0;l<a;l++)!function(e){var n,t,a=null!==(n=r[e])&&void 0!==n?n:"",l=null!==(t=i[e])&&void 0!==t?t:"",c=0;o.push((0,wz.Hg)(l,a).flatMap(function(e){var n=e.fromA,t=e.fromB,r=e.toA,i=e.toB,o=[];return n>c&&o.push({chars:l.slice(c,n)}),t!==i&&o.push({chars:a.slice(t,i),style:{backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}}),n!==r&&o.push({chars:l.slice(n,r),style:{backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}}),c=r,o}).map(function(e,n){var t=e.chars,r=e.style;return(0,$.tZ)("span",{style:r,children:t},n)}))}(l);return(0,$.BX)(wh.Ug,{children:[(0,$.tZ)("code",{css:wN.gutter,children:(0,$.tZ)("pre",{children:Array.from({length:a},function(e,n){return n+1}).join("\n")})}),(0,$.tZ)("code",{css:wN.text,children:(0,$.tZ)("pre",{"data-testid":"TestTextDiffText",children:o.map(function(e,n){return(0,$.tZ)(et.Fragment,{children:e},n)})})})]})},wV=(0,Q.iv)(ea.l0.backgroundColor.backgroundHighest,ea.l0.borderRadius(4),ea.l0.p(8),ea.l0.display.inlineBlock,{cursor:"pointer",userSelect:"none"}),wH=(0,eO.X)({testInfo:[ea.l0.p(24),ea.l0.position.relative],testIoLineSpacing:{width:ea.TV.space8,flexShrink:0},testIoRow:[ea.l0.flex.row,ea.l0.justify.spaceBetween],testIoLineNumber:[ea.l0.display.inlineBlock,ea.l0.minWidth("1.5em"),ea.l0.flex.shrink(0),ea.l0.display.inlineFlex,{userSelect:"none"}],testIoLine:[ea.l0.flex.row,ea.l0.justify.start,ea.l0.font.code],testIoLineContent:ea.l0.display.inlineBlock,testIoLabel:[ea.l0.pb(8),{userSelect:"none",".text":ea.l0.color.foregroundDimmer}],testIoSection:[ea.l0.flex.column,ea.l0.justify.start,ea.l0.width("100%")],testIoBox:[ea.l0.height("100%"),ea.l0.border({color:ea.TV.outlineDimmer}),ea.l0.borderRadius(4),ea.l0.p(8),ea.l0.flex.column,ea.l0.overflowX("auto"),{boxSizing:"border-box",".text":{whiteSpace:"nowrap"}}],testType:wV,testStatus:[wV,{".text":ea.l0.color.white,'&[data-status="Passed"]':ea.l0.backgroundColor.accentPositiveDefault,'&[data-status="Failed"]':ea.l0.backgroundColor.accentNegativeDefault}],help:[ea.l0.display.inlineFlex,ea.l0.align.center,ea.l0.justify.center,ea.l0.border({color:ea.TV.backgroundHigher}),{borderRadius:"100%",width:ea.TV.space16,height:ea.TV.space16,userSelect:"none",cursor:"pointer"}]}),wj=function(e){var n=e.test,t=e.actualOutput,r=e.isOpen,i=e.isResults,o=e.onRequestClose,a=e.didFail,l=e.error,c=n?wT(n.type):"",u=null==t?void 0:t.split("\n"),s=null==n?void 0:n.output.split("\n"),d=null==n?void 0:n.output;return a=null!=a?a:(null==n?void 0:n.status)==="Failed",(0,$.tZ)(e$.u,{onRequestClose:o,isOpen:r&&void 0!==n,children:(0,$.BX)("div",{css:wH.testInfo,children:[(0,$.BX)(wh.gC,{align:"center",spacing:1,children:[(0,$.BX)(eY.Z,{level:4,children:[i?"Test results: ":null,null==n?void 0:n.name]}),(0,$.BX)(wh.Ug,{spacing:1,children:[(0,$.tZ)("div",{css:wH.testType,role:"tooltip","data-microtip-position":"top","aria-label":c,children:(0,$.tZ)(eq.Z,{align:"center",size:"small",children:null==n?void 0:n.type})}),i&&(null==n?void 0:n.status)?(0,$.tZ)("div",{css:wH.testStatus,"data-status":null==n?void 0:n.status,children:(0,$.tZ)(eq.Z,{align:"center",size:"small",children:null==n?void 0:n.status})}):null]})]}),(0,$.tZ)(wk.Z,{height:6}),(0,$.tZ)("div",{css:wH.testIoRow,children:(0,$.BX)("div",{css:wH.testIoSection,children:[(0,$.tZ)("div",{css:wH.testIoLabel,children:i?(0,$.BX)(wh.Ug,{spacing:1,align:"center",children:[(0,$.tZ)(eq.Z,{size:"medium",children:"Expected output"}),(0,$.tZ)(eq.Z,{size:"xsmall",children:(0,$.tZ)("span",{css:wH.help,"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",children:"?"})})]}):(0,$.tZ)(eq.Z,{size:"medium",children:"Output"})}),(0,$.tZ)(wk.Z,{height:8}),(0,$.tZ)("div",{css:wH.testIoBox,children:(0,$.tZ)(wW,{text:null==n?void 0:n.output})})]})}),(0,$.tZ)(wk.Z,{height:2}),(0,$.tZ)("div",{css:wH.testIoRow,children:(0,$.BX)("div",{css:wH.testIoSection,children:[(0,$.tZ)("div",{css:wH.testIoLabel,children:i?(0,$.BX)(wh.Ug,{spacing:1,align:"center",children:[(0,$.tZ)(eq.Z,{size:"medium",children:"Actual output"}),(0,$.tZ)(eq.Z,{size:"xsmall",children:(0,$.tZ)("span",{css:wH.help,"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",children:"?"})})]}):(0,$.tZ)(eq.Z,{size:"medium",children:"Input"})}),(0,$.tZ)(wk.Z,{height:8}),(0,$.tZ)("div",{css:wH.testIoBox,children:(0,$.tZ)(wW,{text:i?t:null==n?void 0:n.input})})]})}),i&&a?(0,$.tZ)($.HY,{children:l?(0,$.BX)($.HY,{children:[(0,$.tZ)(wk.Z,{height:2}),(0,$.tZ)("div",{css:wH.testIoRow,children:(0,$.BX)("div",{css:wH.testIoSection,children:[(0,$.tZ)("div",{css:wH.testIoLabel,children:(0,$.tZ)(eq.Z,{size:"medium",children:"Error(s)"})}),(0,$.tZ)(wk.Z,{height:8}),(0,$.tZ)("div",{css:wH.testIoBox,children:(0,$.tZ)(wW,{text:l.stderr||l.message})})]})})]}):(null==n?void 0:n.type)!==e4.Fl.Regex&&s&&u&&(0,$.BX)($.HY,{children:[(0,$.tZ)(wk.Z,{height:2}),(0,$.tZ)("div",{css:wH.testIoRow,children:(0,$.BX)("div",{css:wH.testIoSection,children:[(0,$.tZ)("div",{css:wH.testIoLabel,children:(0,$.BX)(wh.Ug,{spacing:1,align:"center",children:[(0,$.tZ)(eq.Z,{size:"medium",children:"Difference"}),(0,$.tZ)(eq.Z,{size:"xsmall",children:(0,$.tZ)("span",{css:wH.help,"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",children:"?"})})]})}),(0,$.tZ)(wk.Z,{height:8}),(0,$.tZ)("div",{css:wH.testIoBox,children:(0,$.tZ)(wF,{expected:d,actual:t})})]})})]})}):null]})})},wY=(0,eO.X)({errorWrapper:[ea.l0.display.flex,ea.l0.justify.center,{padding:"var(--deprecated-spacing-2)"}],testsPanel:[ea.l0.minWidth(200),ea.l0.backgroundColor.backgroundDefault,ea.l0.color.foregroundDefault,ea.l0.overflowX("hidden"),ea.l0.overflowY("auto"),{".flex-grow":[ea.l0.flex.grow(1)],".spacer-1":[ea.l0.p(4)],".section":{height:"calc(100% - 50px)"}}],testsHeader:[ea.l0.display.flex,ea.l0.align.center,ea.l0.justify.spaceBetween,ea.l0.position.relative,ea.l0.pt(4),ea.l0.pb(8),ea.l0.mb(8),ea.l0.color.foregroundDefault,ea.l0.width("100%"),ea.l0.flex.wrap,{color:e3.TV.foregroundDefault,width:"100%",flexWrap:"wrap"}],buttonBar:[ea.l0.display.flex,ea.l0.justify.start,ea.l0.flex.wrap,ea.l0.mb(8),{"& > button":[ea.l0.mr(8),ea.l0.mb(8)]}],spinner:[ea.l0.position.absolute,ea.l0.top("50%"),ea.l0.left("50%"),{transform:"translate(-50%, -50%)"}]}),wq=function(){var e,n,t,r,i,o,a,l,c=(0,eu.Z)(),u=c.iotester,s=c.dotReplit,d=c.container,p=(0,lw.Z)(),f=p.showError,h=p.showConfirm,v=(0,J._)((0,et.useState)([]),2),m=v[0],g=v[1],y=(0,J._)((0,et.useState)(),2),b=y[0],x=y[1],Z=(0,J._)((0,et.useState)(d.getConnectionState()),2),w=Z[0],C=Z[1],_=(0,J._)((0,et.useState)(u.state),2),k=_[0],S=_[1],I=(0,J._)((0,et.useState)(),2),R=I[0],G=I[1],E=(0,wg.x)();(0,et.useEffect)(function(){return d.onConnectionStateChanged(C)},[C,d]);var T=(0,ef.Z)(),D=(0,lC.CH)({variables:{replId:T}}),P=(null===(n=D.data)||void 0===n?void 0:null===(e=n.repl)||void 0===e?void 0:e.__typename)==="Repl"?D.data.repl:null,B=(null==P?void 0:null===(t=P.owner)||void 0===t?void 0:t.__typename)==="Team"&&P.owner.id||null,U=(0,J._)((0,lC.vk)({onCompleted:function(e){e&&e.saveIOTestResults&&f(e.saveIOTestResults.message)}}),1)[0];(0,et.useEffect)(function(){var e=[u.onStateChanged(function(e){S(e),B&&e===wy.Z.Idle&&g(function(e){return U({variables:{replId:T,results:Object.values(e).map(function(e){var n,t;return{testId:e.testId,status:e.status,output:(null===(n=e.error)||void 0===n?void 0:n.stderr)?(null!==(t=e.output)&&void 0!==t?t:"")+e.error:e.output}}),teamId:B}}).catch(function(n){uX.Tb(n,function(n){return n.setExtras({results:e,payload:R})})}),e})}),u.onError(function(e){f(e.message)}),u.onTestResult(function(e){g(function(n){var t=(0,ny._)((0,ey._)({},n[e.testId]),{testId:e.testId,status:"passed"===e.body?e4.kQ.Passed:e4.kQ.Failed});return"error"===e.body&&(t.error=e.error),(0,ny._)((0,ey._)({},n),(0,el._)({},e.testId,t))})}),u.onInstructionResult(function(e){g(function(n){var t,r,i,o,a,l=Math.abs(e.instructionId),c="";switch(e.body){case"passed":c+=null!==(r=e.passed.output)&&void 0!==r?r:"";break;case"failed":c+=null!==(i=e.failed.output)&&void 0!==i?i:"";break;case"timeout":c+=null!==(o=e.timeout.output)&&void 0!==o?o:"";break;case"error":c+=e.error.message}return(0,ny._)((0,ey._)({},n),(0,el._)({},l,(0,ny._)((0,ey._)({},n[l]),{testId:l,output:(null!==(a=null===(t=m[l])||void 0===t?void 0:t.output)&&void 0!==a?a:"")+c})))})})];return function(){return e.forEach(function(e){return e()})}},[m,f,S,u,T,B,R,U]),(0,et.useEffect)(function(){var e=function(e){e instanceof Error&&f(e.message),uX.Tb(e)};return wB(s).then(x).catch(e),s.watch(function(){return wB(s).then(x).catch(e)})},[s,x,f]);var A=null==P?void 0:P.ioTests,O=(0,J._)((0,lC.Ne)({onError:function(e){return f(e.message)},onCompleted:function(e){var n;(null===(n=e.deleteTemplateTest)||void 0===n?void 0:n.__typename)==="UserError"?f(e.deleteTemplateTest.message):(h("Test deleted!"),D.refetch())}}),2),X=O[0],L=O[1],M=(0,J._)((0,lC.AA)({onError:function(e){return f(e.message)},onCompleted:function(e){var n;(null===(n=e.updateTemplateTest)||void 0===n?void 0:n.__typename)==="UserError"?f(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(h("Test updated!"),E.writeFragment({fragment:lC.Gg,data:e.updateTemplateTest}))}}),2),W=M[0],z=M[1],N=(0,J._)((0,lC.pV)({onError:function(e){return f(e.message)},onCompleted:function(e){var n;(null===(n=e.createTemplateTest)||void 0===n?void 0:n.__typename)==="UserError"?f(e.createTemplateTest.message):(h("Test created!"),D.refetch())}}),2),F=N[0],V=N[1],H=D.loading||L.called&&L.loading||z.called&&z.loading||V.called&&V.loading;(0,et.useEffect)(function(){H||G(b&&A&&A.length>0?{runInfo:b,tests:A.map(wP)}:void 0)},[A,b,G,H]);var j=(0,J._)((0,et.useState)(!1),2),Y=j[0],q=j[1],K=(0,J._)((0,et.useState)(!1),2),Q=K[0],ee=K[1],en=(0,J._)((0,et.useState)(!1),2),er=en[0],ei=en[1],eo=(0,J._)((0,et.useState)(),2),ea=eo[0],ec=eo[1],es=void 0!==ea&&(null===(r=D.data)||void 0===r?void 0:r.repl.__typename)==="Repl"&&D.data.repl.ioTests[ea]||void 0,ed=(null===(i=D.data)||void 0===i?void 0:i.repl.__typename)==="Repl"&&D.data.repl.isProject;if(D.error)return(0,$.tZ)("div",{css:wY.errorWrapper,children:(0,$.tZ)(eq.Z,{align:"center",children:"Unable to fetch tests"})});var ep=function(e){var n;if((null===(n=m[e])||void 0===n?void 0:n.status)!==void 0)return m[e].status===e4.kQ.Passed?"Passed":"Failed"};return(0,$.BX)("div",{css:wY.testsPanel,children:[(0,$.tZ)("div",{css:wY.testsHeader,children:(0,$.tZ)(eY.Z,{level:4,children:"Input/Output Tests"})}),D.loading?(0,$.tZ)("div",{css:wY.spinner,children:(0,$.tZ)(eX.Z,{})}):(0,$.BX)("div",{className:"tests",children:[(0,$.BX)("div",{css:wY.buttonBar,children:[ed?(0,$.tZ)(ej.Z,{color:"green",Icon:aj.Z,className:"create-test-button",disabled:H||k!==wy.Z.Idle,onClick:function(){ec(void 0),q(!0)},children:"Create test"}):null,!ed&&A&&0===A.length?(0,$.tZ)(eq.Z,{children:"This project has no tests "}):(0,$.tZ)(ej.Z,{color:"positive",Icon:db.Z,onClick:function(){if(!R||(null==P?void 0:P.__typename)!=="Repl"||(null===(e=P.owner)||void 0===e?void 0:e.__typename)!=="Team"||u.state!==wy.Z.Idle){var e,n=Error("no tests or run info");throw uX.Tb(n,function(e){return e.setExtra("payload",R)}),n}g({}),u.run(R).catch(function(e){uX.Tb(e,function(e){return e.setExtra("payload",R)}),f(e.message)})},disabled:H||k!==wy.Z.Idle||!R||w!==bN.em.CONNECTED,children:"Run tests"})]}),null==A?void 0:A.map(function(e,n){return(0,$.tZ)(wL,{test:e,onEdit:function(){ec(n),q(!0)},onDelete:function(){X({variables:{testId:e.id}})},onView:function(){ec(n),ee(!0),ei(!1)},onShowFailed:function(){ec(n),ee(!0),ei(!0)},isRunning:k!==wy.Z.Idle&&void 0!==m[e.id]&&void 0===m[e.id].status,isTeacherView:ed,status:ep(e.id),disableButtons:H||k!==wy.Z.Idle},e.id)}),(0,$.tZ)(wO,{test:es,isOpen:Y,readOnly:!ed,onRequestClose:function(){q(!1),ec(void 0)},onCancel:function(){q(!1),ec(void 0)},onSubmit:function(e){var n,t,r,i;void 0!==e.testId?(W({variables:{input:e}}),ec(void 0)):(null===(t=D.data)||void 0===t?void 0:null===(n=t.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(i=D.data)||void 0===i?void 0:null===(r=i.repl)||void 0===r?void 0:r.template)&&F({variables:{input:(0,ny._)((0,ey._)({},e),{templateId:D.data.repl.template.id})}}),q(!1)}}),(0,$.tZ)(wj,{test:es,isOpen:Q,actualOutput:void 0!==es?null===(o=m[es.id])||void 0===o?void 0:o.output:void 0,error:es&&(null===(a=m[es.id])||void 0===a?void 0:a.error),didFail:es&&(null===(l=m[es.id])||void 0===l?void 0:l.status)===e4.kQ.Failed,isResults:er,onRequestClose:function(){ee(!1),ec(void 0)}})]})]})},wK=(0,eO.X)({loadingRoot:[ea.l0.height("100%"),ea.l0.width("100%"),ea.l0.backgroundColor.backgroundDefault,ea.l0.display.flex,ea.l0.align.center,ea.l0.justify.center],empty:[ea.l0.p(16),ea.l0.borderRadius(4),ea.l0.shadow(2),ea.l0.display.flex,ea.l0.align.center,ea.l0.justify.center],testingController:[ea.l0.overflowY("auto"),ea.l0.p(8),ea.l0.height("100%"),ea.l0.width("100%"),ea.l0.backgroundColor.backgroundDefault,ea.l0.shadow(1)],panel:[ea.l0.width("100%"),ea.l0.borderRadius(4),ea.l0.border({color:ea.TV.backgroundHigher}),ea.l0.maxWidth(200),ea.l0.display.flex,ea.l0.flex.column,ea.l0.align.center,ea.l0.cursor.pointer,ea.l0.p(8),{"&:hover":[ea.l0.backgroundColor.backgroundRoot],'&[data-disabled="true"]':{opacity:.5,pointerEvents:"none"}}]});function wJ(e){var n=(0,J._)((0,et.useState)(null),2),t=n[0],r=n[1],i=(0,et.useRef)(0),o=(0,ef.Z)(),a=(0,wm.Z)(),l=a.language,c=a.isLoading,u=(0,lC.CH)({variables:{replId:o}}),s=u.loading;return((0,et.useEffect)(function(){var e,n,t=null===(e=u.data)||void 0===e?void 0:e.repl;if((null==t?void 0:t.__typename)==="Repl"){var o=t.unitTests;r(t.ioTests.length>0?3:(null==o?void 0:o.tests)&&(null===(n=o.tests)||void 0===n?void 0:n.length)>0||(null==o?void 0:o.meta)?2:t.authorizations.writeTests.isAuthorized?0!==i.current?i.current:1:0)}},[u.data]),s||c)?(0,$.tZ)("div",{css:wK.loadingRoot,children:(0,$.tZ)(eX.Z,{size:32})}):(0,$.BX)("div",{css:wK.testingController,children:[0===t&&(0,$.tZ)("div",{css:wK.empty,children:(0,$.tZ)(eq.Z,{children:"No tests found"})}),1===t&&(0,$.BX)(wh.gC,{align:"center",spacing:2,children:[(0,$.tZ)(eY.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,$.BX)("div",{css:wK.panel,"data-disabled":!l,onClick:function(){r(2),i.current=2},children:[(0,$.tZ)(eY.Z,{level:4,children:"Unit tests"}),(0,$.tZ)(eq.Z,{align:"center",children:l?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,$.tZ)("div",{css:wK.panel,onClick:function(){r(3),i.current=3},children:(0,$.BX)(wh.gC,{spacing:1,align:"center",children:[(0,$.tZ)(eY.Z,{level:4,children:"Input output tests"}),(0,$.tZ)(eq.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),3===t&&(0,$.tZ)(wq,{}),2===t&&(0,$.tZ)(wv.Z,{onBack:function(){return r(1)},getRunnerOutput:e.getRunnerOutput})]})}(h=M||(M={}))[h.None=0]="None",h[h.Choose=1]="Choose",h[h.Unit=2]="Unit",h[h.IO=3]="IO";var w$=nJ.Dy.Object({type:nJ.Dy.Literal("autograder")}),wQ={Content:function(e){var n=e.options,t=(0,es.nC)(),r=(0,a6.dr)();function i(){var e=t().find(function(e){var n=(0,J._)(e,2);return"runnerOutput"===(n[0],n[1].type)});if(e)return e[0]}return(0,$.tZ)(wJ,{getRunnerOutput:function(){var e=i();if(e||n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=i()){var t=r(e);if((null==t?void 0:t.type)==="runnerOutput")return t}}})},Icon:function(e){var n=e.size;return(0,$.tZ)(lx.Z,{size:n})},getTitle:function(){return"Tests"},decode:function(e){return cF.B4.Decode(w$,e)}},w0=t(66548),w1=t(18060),w2=t(13033),w4=t(53785),w8=t(30470),w3=t(24090),w5=t(39885);function w6(){var e=(0,eb._)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return w6=function(){return e},e}var w7={},w9=(0,ex.Ps)(w6()),Ce=t(89284),Cn=t(77535),Ct=t(32288),Cr=t(37580),Ci={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,$.tZ)(Cn.Z,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,$.tZ)(Ce.Z,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,$.tZ)(Cr.Z,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,$.tZ)(lx.Z,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,$.tZ)(nV.Z,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,$.tZ)(Ct.Z,{})}},search:{placeholder:"Search threadsâ€¦"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You havenâ€™t started any threads yet.",secondary:function(e){return(0,$.BX)($.HY,{children:["Select code and press ",(0,$.tZ)(nU.bM,{keyCombo:e,small:!0})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},Co=t(20597),Ca=t(38672),Cl=t(78890);function Cc(e){var n=e.message,t=(0,et.useMemo)(function(){var e=n.timeCreated;return e?(0,Cl.Z)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,$.tZ)("div",{className:"resolved-message",children:(0,$.BX)(wh.Ug,{align:"center",spacing:1,children:[r?(0,$.tZ)(Ca.Z,{url:r.image,size:"m",username:r.username,fullName:r.fullName}):null,(0,$.tZ)(lx.Z,{color:"var(--foreground-default)",size:24}),(0,$.BX)(eq.Z,{size:"xsmall",children:["Resolved ",t]})]})})}var Cu=(0,Q.F4)({"0%":[ea.l0.backgroundColor.foregroundDimmest],"50%":[ea.l0.backgroundColor.foregroundDimmest],"100%":[ea.l0.backgroundColor.foregroundDimmest]}),Cs=(0,eO.X)({message:[ea.l0.backgroundColor.backgroundHigher,ea.l0.py(4),ea.l0.px(8),ea.l0.borderRadius(8),ea.l0.fontSize("default"),ea.l0.width("fit-content"),ea.l0.maxWidth("100%"),{overflowWrap:"break-word",whiteSpace:"pre-wrap","&.userhighlight":{background:"transparent"}}],typingIndicator:[ea.l0.minHeight("1em"),ea.l0.display.grid,ea.l0.align.center,{gridAutoFlow:"column",gridGap:ea.TV.space8}],dot:[ea.l0.width(6),ea.l0.height(6),ea.l0.borderRadius(6),ea.l0.display.inlineBlock,ea.l0.backgroundColor.foregroundDimmest,{animation:"".concat(Cu," 0.6s infinite"),"&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}]});function Cd(e){var n=e.message,t=e.messageStyle,r=(0,et.useMemo)(function(){return"TextMessageContentType"===n.content.__typename?(0,w3.kW)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"==typeof n.content.preview?(0,w3.kW)(n.content.preview,{}):null},[n.content]),i="PreviewMessageContentType"===n.content.__typename&&"string"!=typeof n.content.preview;return n.user&&(r||i)?(0,$.tZ)("div",{children:(0,$.BX)("div",{className:t,css:Cs.message,children:[r?(0,$.tZ)(w3.YI,{message:r,codeStyles:{color:ea.TV.orangeStronger,background:ea.TV.backgroundHighest}}):null,i?(0,$.BX)("span",{css:Cs.typingIndicator,children:[(0,$.tZ)("span",{css:Cs.dot}),(0,$.tZ)("span",{css:Cs.dot}),(0,$.tZ)("span",{css:Cs.dot})]}):null]})}):null}function Cp(e){var n=e.message,t=(0,et.useMemo)(function(){var e=n.timeCreated;return e?(0,Cl.Z)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,$.tZ)("div",{className:"resolved-message",children:(0,$.BX)(wh.Ug,{align:"center",spacing:1,children:[r?(0,$.tZ)(Ca.Z,{url:r.image,username:r.username,fullName:r.fullName,size:"m"}):null,(0,$.tZ)(lx.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,$.BX)(eq.Z,{size:"xsmall",children:["Unresolved ",t]})]})})}var Cf=function(e){var n=new Date(e),t=new Date;return 60>(0,Co.Z)(t,n)?"now":(0,dE.F)(n,!0)},Ch=(0,eO.X)({root:[ea.l0.display.grid,ea.l0.backgroundColor.backgroundDefault,ea.l0.color.foregroundDefault,ea.l0.position.relative,{gridTemplateRows:"auto auto",gridRowGap:ea.TV.space8,gridTemplateColumns:"minmax(0, 1fr)"}],messageInfo:[ea.l0.display.flex,ea.l0.align.center,ea.l0.fontSize("small")],messages:[ea.l0.display.grid,{gridRowGap:ea.TV.space4,gridTemplateColumns:"minmax(0, 1fr)"}],avatar:{marginRight:"5px"},username:[ea.l0.color.foregroundDimmer,{marginRight:"3px"}],time:[ea.l0.color.foregroundDimmest]});function Cv(e){var n=e.messageGroup,t=n.messages,r=n.user,i=n.timeCreated;return r?(0,$.BX)("div",{css:Ch.root,children:[(0,$.BX)("div",{css:Ch.messageInfo,children:[(0,$.tZ)("div",{css:Ch.avatar,children:(0,$.tZ)(Ca.Z,{username:r.username,fullName:r.fullName,url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,$.tZ)("div",{css:Ch.username,children:r.username}),(0,$.tZ)("div",{css:Ch.time,children:Cf(i)})]}),(0,$.tZ)("div",{css:Ch.messages,children:t.map(function(e){return(0,$.tZ)(Cd,{message:e},e.id)})})]}):null}function Cm(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,$.tZ)(Cv,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,$.tZ)(Cc,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,$.tZ)(Cp,{message:t})}return null}var Cg=t(21371),Cy=function(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.user&&(n[l.user.id]=l.user)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(n)};function Cb(){var e=(0,eb._)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return Cb=function(){return e},e}var Cx={},CZ=(0,ex.Ps)(Cb()),Cw=t(43816),CC=t(36397),C_=(0,eO.X)({inputGroup:{display:"grid",gridTemplateColumns:"1fr min-content",gridGap:"10px",alignItems:"center",justifyContent:"start"},inputBox:[ea.l0.backgroundColor.backgroundHigher,ea.l0.color.foregroundDefault,ea.l0.borderRadius(8),ea.l0.p(8),ea.l0.fontSize("default"),ea.l0.font.default,ea.l0.overflowY("auto"),ea.l0.maxHeight("calc(".concat(ea.TV.fontSizeDefault," * 18)")),{border:"none",outline:"none",resize:"none",lineHeight:"16px","&::placeholder":{whiteSpace:"pre"},"&:not(:empty)":{borderRadius:"6px"}}],mentionSuggestionsContainer:[ea.l0.display.grid,ea.l0.overflow("hidden"),{paddingTop:"1em",gridRowGap:ea.TV.space4}],mentionSuggestion:[ea.l0.display.grid,ea.l0.align.center,ea.l0.py(8),ea.l0.cursor.pointer,ea.l0.color.foregroundDefault,{gridTemplateColumns:"min-content max-content",gridColumnGap:ea.TV.space8,'&[data-selected="true"]':[ea.l0.backgroundColor.backgroundRoot,{"& > *":{transform:"scale(1.1)"}}]}]}),Ck=et.forwardRef(function(e,n){var t,r,i,o,a=e.annote,l=e.placeholder,c=e.onChangeMessage,u=e.onFinalizeMessage,s=function(){""!==f.trim()&&(u({messageId:x||rx()(),message:f.trim()}),Z(null),h(""))},d=null===(o=(t=(0,ey._)({},Cx,void 0),ew.a(CZ,t)).data)||void 0===o?void 0:null===(i=o.currentUser)||void 0===i?void 0:i.id,p=(0,J._)((0,et.useState)(""),2),f=p[0],h=p[1],v=(0,J._)((0,et.useState)(!1),2),m=v[0],g=v[1],y=(0,et.useRef)(null),b=(0,J._)((0,et.useState)(null),2),x=b[0],Z=b[1],w=(0,w8.Z)(),C=(0,wC.Z)().ref,_=(0,J._)((0,Cw.Z)({"@":(r=(0,ev._)(function(e){var n,t;return(0,em.Jh)(this,function(r){return n=w.filter(function(e){return e.id!==d}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,$.tZ)(Ca.Z,{fullName:e.fullName,username:e.username,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return r.apply(this,arguments)})}),2),k=_[0].suggestions,S=_[1],I=(0,Cg.Kb)({items:(null==k?void 0:k.results)||[],defaultHighlightedIndex:0,isOpen:!!(null==k?void 0:k.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(k&&n){var t=k.applySuggestion({targetValue:f,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;h(r),setTimeout(function(){y.current&&(y.current.setSelectionRange(i,i),y.current.focus())})}}}),R=I.isOpen,G=I.getInputProps,E=I.getMenuProps,T=I.getItemProps,D=I.highlightedIndex,P=I.getComboboxProps;(0,et.useEffect)(function(){var e="threads/drafts/".concat(a.id),n=rZ.Z.get(e,"string");n&&h(n);var t=y.current;return function(){if(t){var n=t.value;if(0===n.length){rZ.Z.remove(e);return}rZ.Z.set(e,n)}}},[]),(0,et.useEffect)(function(){setTimeout(function(){y.current&&y.current.focus()})},[y]);var B=Cy(a).filter(function(e){return e.id!==d}),U="Add a comment";return 1===B.length?U="Reply to @".concat(B[0].username):B.length>1&&(U="Reply"),a.isResolved&&(U="Reply to unresolve this thread"),l&&(U=l),(0,$.BX)("div",{children:[(0,$.BX)("div",(0,ny._)((0,ey._)({css:C_.inputGroup},P()),{children:[(0,$.tZ)("textarea",(0,ey._)({css:C_.inputBox},G({autoFocus:!0,placeholder:U,value:f,onCompositionStart:function(){return g(!0)},onCompositionEnd:function(){return g(!1)},onChange:function(e){var n=e.target.value,t=x||rx()();x||Z(t),h(n),c({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),!R&&(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||m||(e.preventDefault(),s()))},rows:1,ref:function(e){y.current=e,n&&"object"==typeof n&&(n.current=e),S(e),C(e)}}))),(0,$.tZ)(cR.hU,{alt:"Send message",onClick:s,disabled:0===f.length,children:(0,$.tZ)(CC.Z,{})})]})),(0,$.tZ)("div",(0,ny._)((0,ey._)({},E({})),{children:R&&k?(0,$.tZ)("div",{css:C_.mentionSuggestionsContainer,children:k.results.map(function(e,n){return(0,Q.az)("div",(0,ny._)((0,ey._)({css:C_.mentionSuggestion,"data-selected":D===n},T({item:e,index:n})),{key:e.value,children:[e.icon,(0,$.tZ)("div",{children:e.value})]}))})}):null}))]})});Ck.displayName="ThreadInputForwarded";var CS=["TextMessageContentType","PreviewMessageContentType"],CI=t(68098),CR=(0,eO.X)({generalThread:[ea.l0.pt(0),ea.l0.borderRadius(8,8,0,0),ea.l0.backgroundColor.backgroundDefault,ea.l0.flex.column,ea.l0.flex.growAndShrink(1),ea.l0.overflow("hidden"),ea.l0.height("100%"),{gridTemplateRows:"min-content 1fr min-content",gridGap:ea.TV.space8}],messageGroupContainerContainer:[ea.l0.scrollbar.thin,ea.l0.flex.column,ea.l0.height(0),ea.l0.flex.grow(1),ea.l0.overflow("hidden")],messageGroupContainer:[ea.l0.p(12),ea.l0.display.grid,ea.l0.overflowY("auto"),{gridRowGap:ea.TV.space16}],threadInputContainer:[ea.l0.width("100%"),ea.l0.border({color:ea.TV.outlineDimmer,width:1,direction:"top"}),ea.l0.py(8),ea.l0.px(12)]});function CG(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,r=e.generalThread,i=e.handleChangeMessage,o=void 0===i?function(){}:i,a=e.handleFinalizeMessage,l=void 0===a?function(){}:a,c=e.createAnnotationAnchorPlaceholder,u=void 0===c?function(){}:c,s=(0,ef.Z)(),d=(0,et.useMemo)(function(){return r?function(e){var n=[],t=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,u,s,d,p=a.value;!t||(null==p?void 0:null===(c=p.user)||void 0===c?void 0:c.id)!==(null==t?void 0:null===(u=t.user)||void 0===u?void 0:u.id)||(null==p?void 0:null===(s=p.anchor)||void 0===s?void 0:s.id)!==(null==t?void 0:t.anchorId)||!CS.includes(t.messageType)||!CS.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null==p?void 0:null===(d=p.anchor)||void 0===d?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t&&n.push(t),n}((0,ec._)(r.messages).sort(function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()})):[]},[r]);(0,et.useEffect)(function(){r||u({annotationAnchor:{id:rv()(),replId:s,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,s,u]),(0,et.useEffect)(function(){r||u({annotationAnchor:{id:rv()(),replId:s,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,s,u]);var p=(0,et.useRef)(null);(0,CI.Z)(n&&r||null);var f=function(){p.current&&(p.current.scrollTop=p.current.scrollHeight)};return((0,et.useEffect)(function(){f()},[p,r]),r)?(0,$.BX)("div",{css:CR.generalThread,onClick:function(){return t(!0)},children:[(0,$.tZ)("div",{css:CR.messageGroupContainerContainer,children:(0,$.tZ)("div",{css:CR.messageGroupContainer,ref:p,children:d.map(function(e){return(0,$.tZ)(Cm,{messageGroup:e},e.messages[0].id)})})}),(0,$.tZ)("div",{css:CR.threadInputContainer,children:(0,$.tZ)(Ck,{placeholder:"Send message",annote:r,onChangeMessage:function(e){o({anchor:r,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){l({anchor:r,message:e.message,messageId:e.messageId}),t(!0),(0,eh.j)(eh.U3.MESSAGE_SENT,{replId:s,source:"chat",newThread:0===r.messages.length})}})})]}):null}var CE=t(73173),CT=t(527),CD=t(38e3),CP=t(51727),CB=function(e){var n=(0,CP.Z)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}},CU=t(99321),CA=t(89578),CO=t(65268),CX=function(e){var n,t=e.thread,r=e.onClick,i=t.messages.filter(function(e){return!e.seen}).length,o=null===(n=(0,CT.Vy)(t.path?t:null))||void 0===n?void 0:n.snippet,a=(0,CP.Z)(t.id,null,null).thread,l=(0,w5.kM)(),c=CB(t.id).handleToggleResolved,u={jumpToCode:"Jump to code",resolveThread:"Resolve this thread",unresolveThread:"Re-open",replyCount:function(e,n){var t=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===n?"unread":""," thread"):n?"View ".concat(n," unread ").concat(t(n)):"View ".concat(e-1," ").concat(t(e-1))},threadOpened:function(e,n){return"Opened ".concat(e," by ").concat(n)}},s=t.messages[0],d=(0,et.useMemo)(function(){return(null==s?void 0:s.timeCreated)?(0,CO.Y)(s.timeCreated):"some time ago"},[s]);return t.user?(0,$.BX)(e0.Tg,{css:[nx.gU.filled,ea.l0.overflow("hidden"),l===t.id&&{borderColor:ea.TV.accentPrimaryDefault}],onClick:function(){r(t)},children:[(0,$.BX)(e0.Tg,{elevated:!0,css:[ea.l0.flex.row,ea.l0.align.center,ea.l0.justify.spaceBetween,ea.l0.flex.grow(1),ea.l0.px(8),ea.l0.py(8)],children:[(0,$.tZ)(eo.G,{css:[ea.l0.flex.row,ea.l0.align.center,ea.l0.rowWithGap(4)],children:(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",multiline:!1,children:u.threadOpened(d,t.user.username)})}),(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.align.center,ea.l0.rowWithGap(4)],children:[o&&t.path?(0,$.tZ)(cR.hU,{alt:u.jumpToCode,onClick:function(){return r(t)},children:(0,$.tZ)(CU.Z,{})}):null,t.isResolved?(0,$.tZ)(nf.zx,{text:u.unresolveThread,size:"small",colorway:"primary",onClick:function(){c(!1)}}):(0,$.tZ)(cR.hU,{alt:u.resolveThread,onClick:function(){c(!0)},children:(0,$.tZ)(lx.Z,{})})]})]}),o&&t.path?(0,$.tZ)(CD.F,{elevation:"root",path:t.path,initialDoc:o.lines.join("\n"),startLineNumber:o.startLineNumber,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,s?(0,$.tZ)(eo.G,{css:[ea.l0.p(8),ea.l0.py(12)],children:(0,$.tZ)(CA.Z,{thread:a,message:s},s.id)}):null,t.messages.length>1&&(0,$.BX)(eo.G,{css:[ea.l0.pb(12),ea.l0.px(8),ea.l0.flex.row,ea.l0.align.center,ea.l0.rowWithGap(4),ea.l0.color.foregroundDimmer],children:[(0,$.tZ)(eo.G,{css:[ea.l0.position.relative],children:(0,$.tZ)(CE.Z,{unreadDot:i>0})}),(0,$.tZ)(eA.xv,{variant:"small",multiline:!1,children:u.replyCount(t.messages.length,i)})]})]}):null},CL=function(e){var n=e.path,t=e.threads,r=e.onThreadClick,i=t.some(function(e){return e.messages.some(function(e){return!e.seen})});return(0,$.tZ)(eo.G,{css:[ea.l0.pb(8)],children:(0,$.tZ)(ho.Q,{css:[ea.TV.singleLine,ea.l0.px(8)],headerContent:(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.align.center,ea.l0.justify.spaceBetween,ea.l0.flex.growAndShrink(1),ea.l0.mr(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.align.center,ea.l0.rowWithGap(8),ea.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(aH.Z,{path:n,size:20}),(0,$.tZ)(eA.xv,{css:[ea.l0.flex.shrink(1)],multiline:!1,children:n})]}),i?(0,$.tZ)("div",{css:[ea.l0.flex.shrink(0),ea.l0.width(8),ea.l0.height(8),ea.l0.backgroundColor.redStronger,ea.l0.borderRadius("full")]}):null]}),children:(0,$.tZ)("div",{css:[ea.l0.mt(8),ea.l0.colWithGap(8)],children:t.map(function(e){return(0,$.tZ)(CX,{thread:e,onClick:r},e.id)})})})})},CM=t(28508);function CW(e){var n=e.primary,t=e.secondary;return(0,$.tZ)(eo.G,{css:[ea.l0.align.center,ea.l0.justify.center,ea.l0.flex.grow(1)],children:(0,$.BX)(eo.G,{css:[ea.l0.align.center,ea.l0.justify.center,ea.l0.flex.grow(1)],children:[(0,$.tZ)(eo.G,{css:[ea.l0.align.center,ea.l0.justify.center,{pointerEvents:"none"}],children:(0,$.tZ)(CM.Z,{art:"Cloud"})}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",css:ea.l0.mt(32),multiline:!1,children:n}),t?(0,$.tZ)("div",{css:[ea.l0.color.foregroundDimmest],children:(0,$.tZ)(eA.xv,{variant:"text",css:ea.l0.mt(8),multiline:!1,children:t})}):null]})})}(v=W||(W={})).CHRONOLOGICAL="chronological",v.CODE_ORDER="codeOrder",(m=z||(z={})).PARTICIPATING="participating",m.RESOLVED="resolved",m.UNREAD="unread",m.INBOX="inbox";var Cz=function(e){var n,t,r,i=e.isChatOnly,o=e.openFile,a=(0,ef.Z)(),l=vq(a,{onReceiveAnnotationUpdate:function(){}}),c=l.annotations,u=l.loading,s=l.generalThread,d=l.createAnnotationAnchorPlaceholder,p=l.createAnnotationMessage,f=l.updateThreadPreview,h=(n=(0,ey._)({},w7,void 0),ew.a(w9,n)),v=h.data,m=h.loading,g=u||m,y=(0,J._)((0,et.useState)(!1),2),b=y[0],x=y[1],Z=(0,w5.a9)(),w=(0,J._)((0,et.useState)(""),2),C=w[0],_=w[1],k=(0,J._)((0,et.useState)("INBOX"),2),S=k[0],I=k[1],R=(0,J._)((0,et.useState)("CHRONOLOGICAL"),2),G=R[0],E=R[1],T=(0,et.useMemo)(function(){var e,n=null==v?void 0:null===(e=v.currentUser)||void 0===e?void 0:e.id;return c.filter(function(e){if("INBOX"===S)return!e.isResolved;if("RESOLVED"===S)return e.isResolved;if("PARTICIPATING"===S){var t;return!n||(null===(t=e.user)||void 0===t?void 0:t.id)===n||e.messages.some(function(e){var t=e.user;return(null==t?void 0:t.id)===n})}return"UNREAD"!==S||e.messages.some(function(e){return!e.seen})})},[v,c,S]),D=(0,et.useMemo)(function(){return T.filter(function(e){var n,t;return 0===C.length||null!==(t=null===(n=e.path)||void 0===n?void 0:n.toLowerCase().includes(C.toLowerCase()))&&void 0!==t&&t})},[C,T]),P=(0,et.useMemo)(function(){return(0,ec._)(D).sort(function(e,n){if("CHRONOLOGICAL"===G){var t,r,i=new Date(null===(t=e.messages[0])||void 0===t?void 0:t.timeCreated),o=new Date(null===(r=n.messages[0])||void 0===r?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===G?(0,oG.IV)(e.path,n.path):0}).reduce(function(e,n){var t=n.path;return t&&void 0!==t&&(e[t]=e[t]||[],e[t].push(n)),e},{})},[D,G]),B=(0,et.useMemo)(function(){return Object.values((0,ey._)({},P)).map(function(e){return(0,ec._)(e).sort(function(e,n){if("CHRONOLOGICAL"===G){var t,r,i,o,a,l,c=new Date(null===(a=e.messages[0])||void 0===a?void 0:a.timeCreated),u=new Date(null===(l=n.messages[0])||void 0===l?void 0:l.timeCreated);if(c&&u)return c<u?1:-1}else if("CODE_ORDER"===G)return(null!==(r=null!==(t=e.indexStart)&&void 0!==t?t:e.indexEnd)&&void 0!==r?r:0)<(null!==(o=null!==(i=n.indexStart)&&void 0!==i?i:n.indexEnd)&&void 0!==o?o:0)?-1:1;return 0})}).reduce(function(e,n,t){return e[Object.keys(P)[t]]=n,e},{})},[P,G]),U=(0,w8.Z)().map(function(e){return e.username}),A=(t=(0,J._)((0,vY.n)(),1)[0],function(){t({variables:{replId:a}})}),O=(r=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){return e.path&&(o(e.path),Z(e.id)),[2]})}),function(e){return r.apply(this,arguments)}),X=(0,nU.gf)("editor.action.startThread");return i?(0,$.tZ)(CG,{generalThreadsOpen:b,setGeneralThreadsOpen:x,generalThread:s,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;f({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,i=(0,w3.kW)(t,{users:(0,ec._)(U).concat(["everyone"])});p({anchor:n,annotationMessage:{id:r,text:t,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:d}):(0,$.tZ)(e0.Tg,{className:"threads-inbox",css:[ea.l0.height("100%"),ea.l0.width("100%"),ea.l0.overflow("hidden"),ea.l0.position.relative],"aria-busy":g,children:g?(0,$.tZ)(eo.G,{css:[ea.l0.display.flex,ea.l0.align.center,ea.l0.justify.center,ea.l0.height("100%")],children:(0,$.tZ)(eX.Z,{size:24})}):(0,$.BX)($.HY,{children:[(0,$.tZ)(eo.G,{className:"threads-inbox-header",css:[ea.l0.py(12),ea.l0.px(8),ea.l0.position.sticky,ea.l0.top(0),ea.l0.backgroundColor.backgroundDefault,{zIndex:10}],children:(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.align.center,ea.l0.flex.wrap,{gap:8}],children:[(0,$.tZ)(w1.II,{placeholder:Ci.search.placeholder,value:C,onChange:function(e){return _(e.target.value)},css:[ea.l0.flex.grow(1)]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.maxWidth("100%"),{gap:8}],children:[(0,$.tZ)(eo.G,{css:[ea.l0.flex.shrink(1)],children:(0,$.tZ)(w2.ZE,{cssProps:[ea.l0.flex.shrink(1),{span:ea.l0.flex.shrink(1)}],icon:Ci.filters[z[S]].icon,suffix:(0,$.tZ)(l0.Z,{}),label:Ci.filters[z[S]].label,onAction:function(e){switch(e){case"toggle-inbox":I("INBOX");break;case"toggle-unread":I("UNREAD");break;case"toggle-participating":I("PARTICIPATING");break;case"toggle-resolved":I("RESOLVED")}},children:Object.entries(Ci.filters).map(function(e){var n=(0,J._)(e,2),t=(n[0],n[1]);return(0,$.tZ)(w4.c,{"aria-label":t.label,children:(0,$.BX)(eo.G,{css:ea.l0.rowWithGap(8),children:[t.icon,(0,$.tZ)(eA.xv,{multiline:!1,children:t.label})]})},t.key)})})}),(0,$.tZ)(eo.G,{css:[ea.l0.flex.shrink(1)],children:(0,$.tZ)(w2.ZE,{cssProps:[ea.l0.flex.shrink(1),{span:ea.l0.flex.shrink(1)}],icon:Ci.sorts[W[G]].icon,suffix:(0,$.tZ)(l0.Z,{}),label:Ci.sorts[W[G]].label,onAction:function(e){switch(e){case Ci.sorts.chronological.key:E("CHRONOLOGICAL");break;case Ci.sorts.codeOrder.key:E("CODE_ORDER")}},children:Object.entries(Ci.sorts).map(function(e){var n=(0,J._)(e,2),t=(n[0],n[1]);return(0,$.tZ)(w4.c,{"aria-label":t.label,children:(0,$.BX)(eo.G,{css:ea.l0.rowWithGap(8),children:[t.icon,(0,$.tZ)(eA.xv,{multiline:!1,children:t.label})]})},t.key)})})}),(0,$.tZ)(eo.G,{css:[ea.l0.flex.shrink(1)],children:(0,$.tZ)(nf.zx,{iconLeft:(0,$.tZ)(lx.Z,{}),text:Ci.markAsRead,onClick:A,css:{span:ea.l0.flex.shrink(1)}})})]})]})}),0===c.length?(0,$.tZ)(CW,{primary:Ci.empty.noThreadsCreated.text.primary,secondary:X?Ci.empty.noThreadsCreated.text.secondary(X):void 0}):(0,$.tZ)($.HY,{children:Object.keys(B).length>0?(0,$.tZ)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.overflowY("auto"),ea.l0.scrollbar.thin],children:Object.keys(B).map(function(e,n){return(0,$.tZ)(CL,{path:e||"-",threads:Object.values(B)[n],onThreadClick:function(e){var n=window.getSelection();(null==n?void 0:n.type)!=="Range"&&O(e)}},e)})}):(0,$.tZ)(CW,{primary:Ci.empty.noThreadsFound.text.primary,secondary:Ci.empty.noThreadsFound.text.secondary})})]})})},CN=nJ.Dy.Object({type:nJ.Dy.Literal("chat")}),CF={Content:function(e){var n=e.options;return(0,$.tZ)(e0.Tg,{background:"default",css:ea.l0.flex.growAndShrink(1),children:(0,$.tZ)(Cz,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:ea.TV.blueStronger,size:n},children:(0,$.tZ)(v$.Z,{})})},getTitle:function(){return"Chat"},decode:function(e){return cF.B4.Decode(CN,e)}},CV={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=i4(tW),a=(0,et.useRef)(null);(0,a6.Wk)(function(){return{focus:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.call(a)}}},[]);var l=(0,et.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,eh.j)(eh.U3.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),c=lc({currentPaneId:r,openPane:l});return(0,$.tZ)(nB.X,{autoFocus:i,command:c,focusRef:a})},Icon:function(){return null},getTitle:function(){return"New tab"},decode:t(14209).J},CH=t(94694),Cj=t(17074),CY=nJ.Dy.Object({type:nJ.Dy.Literal("config")}),Cq={Content:function(e){var n=e.options.paneId,t=i4(iy);return(0,$.tZ)(Cj.Z,{closeConfigPane:function(){return t(n)},useReadFile:CH.Z})},Icon:function(){return null},getTitle:function(){return"Configure Repl"},decode:function(e){return cF.B4.Decode(CY,e)}},CK=t(42385),CJ=(0,eO.X)({container:[ea.l0.height("100%"),ea.l0.p(16),ea.l0.colWithGap(16),ea.l0.center],imageTagline:[ea.l0.colWithGap(16),ea.l0.center,ea.l0.flex.shrink(1)],descriptionText:[ea.l0.textAlign.center]});function C$(){return(0,$.BX)(eo.G,{css:CJ.container,children:[(0,$.BX)(eo.G,{css:CJ.imageTagline,children:[(0,$.tZ)(CM.Z,{art:"Computer"}),(0,$.tZ)(eA.h4,{level:1,variant:"subheadDefault",multiline:!1,children:"Debugger is unavailable for this Repl"})]}),(0,$.BX)(eo.G,{children:[(0,$.tZ)(eA.xv,{css:CJ.descriptionText,children:"We are working on making more features configurable and the debugger available for more languages. Please check back again in the future."}),(0,$.tZ)(eA.xv,{css:CJ.descriptionText,children:"Meanwhile, if you're working on a website, be sure to check out our Devtools in the Webview pane."})]})]})}var CQ=(0,eO.X)({initialBreakpoint:[ea.l0.display.inlineBlock,ea.l0.backgroundColor.accentPrimaryDefault,ea.l0.borderRadius("full"),ea.l0.width(8),ea.l0.height(8)],breakpoint:[ea.l0.display.flex,ea.l0.maxWidth("100%"),ea.l0.align.center],frame:[ea.l0.display.flex,ea.l0.align.center,ea.l0.color.foregroundDimmer,ea.l0.borderRadius(4),ea.l0.fontSize("default"),{flex:"1 1 auto",height:ea.TV.space32,cursor:"pointer","&:hover":{backgroundColor:ea.TV.backgroundHigher,color:ea.TV.foregroundDefault},".frameButton":{opacity:0},"&:focus-within":{color:ea.TV.foregroundDefault},"&:hover .frameButton":{background:ea.TV.backgroundHigher,backgroundColor:ea.TV.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:ea.TV.backgroundHighest}}],circle:[ea.l0.backgroundColor.accentPrimaryDefault,ea.l0.borderRadius("full"),ea.l0.width(11),ea.l0.height(11),ea.l0.mx(8),{flex:"0 0 auto",opacity:.5,'&[data-verified="true"]':{opacity:1}}],line:[ea.l0.font.code,ea.l0.backgroundColor.backgroundHigher,ea.l0.borderRadius(2),{padding:"1px 2px"}],location:[ea.l0.font.code,ea.l0.display.flex,ea.l0.minWidth(0),ea.l0.fontSize("default"),ea.l0.px(8),{flex:"1 1 auto"}],path:[ea.l0.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function C0(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e.breakpoints[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,J._)(o.value,2),c=l[0],u=l[1],s=!0,d=!1,p=void 0;try{for(var f,h=u[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var v=f.value;n.push((0,$.tZ)(C1,{breakpoint:v,file:c,line:v.line,verified:v.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(c,":").concat(v.line,":").concat(v.pid1Id,":").concat(v.dapId)))}}catch(e){d=!0,p=e}finally{try{s||null==h.return||h.return()}finally{if(d)throw p}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return(0,$.BX)($.HY,{children:[(0,$.tZ)(eY.Z,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,$.tZ)(wh.gC,{align:"stretch",constrainWidth:!0,children:n}):(0,$.BX)(eq.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,$.tZ)("span",{css:CQ.initialBreakpoint})," by clicking on the line number."]})]})}function C1(e){var n=e.breakpoint,t=e.file,r=e.line,i=e.verified,o=e.onClick,a=e.onRemove,l=(0,bU.om)(t);return(0,$.tZ)($.HY,{children:(0,$.tZ)(wh.gC,{spacing:1,align:"stretch",children:(0,$.tZ)("div",{css:CQ.breakpoint,children:(0,$.BX)("div",{css:CQ.frame,onClick:function(){o(t,r)},children:[(0,$.tZ)("div",{css:CQ.circle,"data-verified":i}),(0,$.tZ)("div",{css:CQ.line,children:r}),(0,$.tZ)("div",{css:CQ.location,children:(0,$.tZ)("span",{css:CQ.path,children:l||t})}),(0,$.tZ)(cR.hU,{className:"frameButton",alt:"Remove breakpoint",onClick:function(){a({breakpoint:n})},children:(0,$.tZ)(cE.Z,{})})]})})})})}var C2=t(63938),C4=t(48617),C8=t(60199),C3=t(76530),C5=t(80888),C6=t(61114);function C7(e){var n=e.client,t=e.debugConfig,r=(0,cZ.Z)(null==n?void 0:n.state),i=(0,cZ.Z)(null==n?void 0:n.supportsStepBack);return(0,$.BX)(eo.G,{css:ea.l0.rowWithGap(2),children:[i?(0,$.BX)($.HY,{children:[(0,$.tZ)(cR.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null==n||n.reverseContinue()},alt:"Last Breakpoint",tooltipContents:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,$.tZ)(C2.Z,{})}),(0,$.tZ)(cR.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"stepBack"}),null==n||n.back()},alt:"Step Back",tooltipContents:"Step Back",tooltipPlacement:"bottom",children:(0,$.tZ)(C8.Z,{})})]}):null,(0,$.tZ)(_e,{stop:function(){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"stop"}),null==n||n.stop()},start:function(){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"start"}),null==n||n.start(t)},state:r}),(0,$.tZ)(cR.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"nextStep"}),null==n||n.next()},alt:"Next Step",tooltipContents:"Next Step",tooltipPlacement:"bottom",children:(0,$.tZ)(s4.Z,{})}),(0,$.tZ)(cR.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"skipStep"}),null==n||n.skip()},alt:"Skip Step",tooltipContents:"Skip Step",tooltipPlacement:"bottom",children:(0,$.tZ)(C3.Z,{rotate:90})}),(0,$.tZ)(cR.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,eh.j)(eh.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null==n||n.continue()},alt:"Next Breakpoint",tooltipContents:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,$.tZ)(C4.Z,{})})]})}var C9=(0,Q.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function _e(e){var n=e.state,t=e.start,r=e.stop;return"terminated"===n?(0,$.tZ)(cR.hU,{css:ea.l0.color.accentPrimaryDefault,size:40,onClick:t,alt:"Run",tooltipContents:"Run",tooltipPlacement:"bottom",children:(0,$.tZ)(C5.Z,{})}):"stopping"===n||null===n?(0,$.tZ)(cR.hU,{size:40,disabled:!0,alt:"Loading",tooltipContents:"Loading",tooltipPlacement:"bottom",children:(0,$.tZ)(eX.Z,{})}):(0,$.tZ)(cR.hU,{css:"initializing"===n||"preinitializing"===n?[ea.l0.color.foregroundDimmer,{animationName:C9.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:ea.l0.color.accentPrimaryDefault,size:40,onClick:r,alt:"Stop",tooltipContents:"Stop",tooltipPlacement:"bottom",children:(0,$.tZ)(C6.Z,{})})}function _n(e){return(0,$.BX)($.HY,{children:[(0,$.tZ)(eY.Z,{truncate:!0,level:5,children:"Call stack"}),(0,$.tZ)(wh.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map(function(n){return(0,$.tZ)(_r,{frame:n,onClick:e.onFrameClick},n.id)})})]})}var _t=(0,Q.iv)({"&":{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"100%",height:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-small)",fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".name":{flex:"0 0 auto",backgroundColor:"var(--background-higher)",padding:"1px 2px",borderRadius:"2px"},".path":{flex:"0 1 auto"},".line":{display:"inline-block",marginRight:"var(--space-8)",backgroundColor:"var(--background-higher)",padding:"1px 2px",borderRadius:"2px"}});function _r(e){var n,t,r=e.frame,i=e.onClick,o=null===(n=r.source)||void 0===n?void 0:n.name,a=null===(t=r.source)||void 0===t?void 0:t.path,l=o&&(0,bU.om)(o),c=a&&(0,bU.om)(a),u=a&&(0,bU.IT)(a);return(0,$.tZ)($.HY,{children:(0,$.BX)("div",{className:"frame",onClick:function(){return u&&i(u,r.line)},css:_t,children:[(0,$.tZ)("div",{className:"label name",children:r.name}),(0,$.BX)("div",{className:"label path",children:[(0,$.tZ)("span",{className:"line",children:r.line}),l||c||o||a]})]})})}var _i=t(47745),_o=t(53557),_a=t(78986),_l=(0,Q.iv)({a:{fontSize:ea.TV.fontSizeDefault,color:ea.TV.accentPrimaryDefault,fontWeight:ea.TV.fontWeightMedium}});function _c(e){var n=e.children;return(0,$.tZ)(e0.Tg,{background:"default",css:[ea.l0.height("100%"),ea.l0.width("100%"),ea.l0.p(8),ea.l0.overflow("auto"),{borderTopRightRadius:ea.TV.borderRadius4,paddingBottom:"44px"},_l],children:(0,$.BX)(wh.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,$.tZ)(wh.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:(0,$.tZ)(eY.Z,{truncate:!0,level:4,children:"Debugger"})}),n]})})}function _u(e){var n=(0,lP.U)(),t=(0,eu.Z)().debuggest,r=(0,cZ.Z)(t.mainClient),i=(0,cZ.Z)(r?r.state:null),o=(0,cZ.Z)(r?r.stackFrames:null),a=(0,cZ.Z)(r?r.variables:null),l=(0,cZ.Z)(r?r.breakpoints:null),c=(0,e2.R3)(),u=(0,es.Vu)(),s=(0,CK.T)(),d=null!=s&&!!s.debuggers&&s.debuggers.length>0,p=(0,J._)((0,et.useState)(null),2),f=p[0],h=p[1],v=(0,et.useMemo)(function(){return function(e,n,t,r){if(!(null==e?void 0:e.debuggers))return[];var i=[];if(n=n.slice(),r&&-1===n.indexOf(r)&&n.splice(0,0,r),t){var o=n.indexOf(t);-1!==o&&(n.splice(o,1),n.splice(0,0,t))}var a=!0,l=!1,c=void 0;try{for(var u,s=n[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var v,m=e.debuggers[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var g=v.value;if(g.fileParam){var y=(0,_o.rF)(g.fileTypeAttrs);null===y&&g.language&&(y=_o.$R.from(g.language)),y&&(0,_a.JW)(d,y)&&i.push({debuggerOption:g,filePath:d,title:"Debug ".concat(d," (").concat(g.name,")")})}}}catch(e){f=!0,h=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw h}}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}var b=!0,x=!1,Z=void 0;try{for(var w,C=e.debuggers[Symbol.iterator]();!(b=(w=C.next()).done);b=!0){var _=w.value;_.fileParam||i.push({debuggerOption:_,title:"Debug (".concat(_.name,")")})}}catch(e){x=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(x)throw Z}}return i}(s||null,u,c,(null==s?void 0:s.entrypoint)||"")},[c,u,s]);(0,et.useEffect)(function(){(v.length>0&&!f||f&&!v.find(function(e){return e.debuggerOption.id===f.debuggerOption.id&&e.filePath===f.filePath}))&&h(v[0])},[v]);var m=function(n,t){var r=(0,bU.om)(n);r&&e.onOpenFile({path:r,line:t})};return d?(0,$.BX)(_c,{children:[v.length>0&&(0,$.tZ)(yR.P,{id:n("debug-config"),items:v,selectedItem:f,onChange:function(e){h(e)},"aria-label":"Select a debugging configuration"}),(0,$.tZ)(C7,{client:r,debugConfig:f||void 0}),l?(0,$.tZ)(C0,{breakpoints:l,onBreakpointClick:m,onRemove:function(e){var n=e.breakpoint;r&&n.pid1Id&&r.removeBreakpoint(n.pid1Id)}}):null,a&&r&&"paused"===i?(0,$.tZ)(_i.Z,{client:r,variables:a}):null,o&&"paused"===i?(0,$.tZ)(_n,{frames:o,onFrameClick:m}):null,r?(0,$.tZ)(eo.G,{css:[ea.l0.flex.row,ea.l0.justify.end,ea.l0.position.absolute,ea.l0.bottom(0),ea.l0.right(0),ea.l0.p(8),ea.l0.backgroundColor.backgroundDefault,ea.l0.borderRadius(0,0,8,8),{width:"100%"}],children:(0,$.tZ)(nf.zx,{size:"small",variant:"outlined",onClick:function(){return function(e){if("undefined"!=typeof Blob){var n=new Blob([e],{type:"text/plain"}),t=document.createElement("a");t.download="debugger-logs.txt",t.href=URL.createObjectURL(n),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(function(){URL.revokeObjectURL(t.href)},1500)}}(r.getDebugLogs())},text:"Download Logs",iconLeft:(0,$.tZ)(p9.Z,{})})}):null]}):(0,$.tZ)(C$,{})}var _s=t(56258),_d=nJ.Dy.Object({type:nJ.Dy.Literal("debugger")}),_p=t(8465),_f={Content:function(e){var n=e.options;return(0,$.tZ)(_u,{onOpenFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})}})},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:_p.TV.orangeStronger,size:n},children:(0,$.tZ)(_s.Z,{})})},getTitle:function(){return"Debugger"},decode:function(e){return cF.B4.Decode(_d,e)}},_h={Content:function(e){var n,t=e.pane;return(0,$.tZ)(e0.Tg,{css:[ea.l0.border({color:ea.TV.outlineDimmest,width:1,style:"solid"}),{width:"100%",height:"100%",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none",overflow:"hidden"}],children:(0,$.tZ)("iframe",{title:"Replit Docs",src:(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.url)||rf.TT.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:ea.TV.yellowStrongest,size:n},children:(0,$.tZ)(x2.Z,{})})},getTitle:function(){return"Docs"},decode:t(69688).J},_v=t(4276),_m=t(9618),_g=t(54615),_y=(0,Q.iv)([ea.l0.fontSize("small"),ea.l0.px(4),ea.l0.borderRadius(4),ea.l0.color.accentNegativeDefault,{border:"1px solid",borderColor:ea.TV.accentNegativeDefault}]),_b=function(){return(0,$.tZ)(eo.G,{title:"late",css:_y,children:"late"})},_x=eo.K.a,_Z=eo.K.div;function _w(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?"submitted":!e.timeSubmitted&&e.timeLastReviewed?"reviewed":e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?"submitted":"reviewed":void 0:"started":"not-started"}(g=N||(N={})).NotStarted="not-started",g.Started="started",g.Submitted="submitted",g.Reviewed="reviewed";var _C=function(e,n){var t=e.indexOf("?"),r=new URLSearchParams(-1===t?"":e.slice(t));r.append("submissionReview","true");var i=-1===t?e:e.slice(0,t);return n?"".concat(i,"?").concat(r.toString(),"#").concat(n):"".concat(i,"?").concat(r.toString())},__=(F={},(0,el._)(F,"started",ea.TV.blueDefault),(0,el._)(F,"not-started",ea.TV.foregroundDimmest),(0,el._)(F,"reviewed",ea.TV.greenDefault),(0,el._)(F,"submitted",ea.TV.yellowDefault),F);function _k(e){var n=e.status,t=e.highlighted?ea.TV.foregroundDefault:__[n];return(0,$.tZ)(cC.u,{tooltip:function(e){var n=N.NotStarted,t=N.Started,r=N.Submitted,i=N.Reviewed;switch(e){case n:return"Not Started";case t:return"Not submitted yet";case r:return"Submitted (waiting for review)";case i:return"Reviewed";default:return""}}(n),placement:"right",children:(0,$.BX)(eo.G,{children:["submitted"===n?(0,$.tZ)(_g.Z,{color:t}):null,"reviewed"===n?(0,$.tZ)(lx.Z,{color:t}):null,"started"===n?(0,$.tZ)(nV.Z,{color:t}):null,"not-started"===n?(0,$.tZ)(pK.Z,{color:t}):null]})})}function _S(e){var n=e.result,t=e.highlighted,r=e.current,i=e.isLate,o=(0,e2.R3)(),a=!r&&n.url?_C(n.url,o):"",l=(0,$.BX)(eo.G,{css:[ea.l0.p(8),ea.l0.rowWithGap(8),ea.l0.justify.spaceBetween,ea.l0.align.center,"not-started"===n.status&&{opacity:t?1:.4},t&&{backgroundColor:nx.gU.listItem["@media (hover: hover)"][":not([disabled], [aria-disabled])"][":not(textarea):active"].backgroundColor},r&&{backgroundColor:ea.TV.accentPrimaryDimmer,color:ea.TV.foregroundDefault}],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center,ea.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(eB.q,{size:24,username:n.name,src:n.image}),(0,$.tZ)(eA.xv,{css:ea.l0.flex.growAndShrink(1),multiline:!1,children:n.name}),i?(0,$.tZ)(_b,{}):null]}),n.status?(0,$.tZ)(_k,{status:n.status,highlighted:t||r}):null]});return a?(0,$.tZ)(_x,{href:a,style:{color:"inherit"},children:l}):l}var _I=function(e){var n=e.team,t=e.submission,r=e.submissionList,i=e.template,o=(0,J._)((0,et.useState)([]),2),a=o[0],l=o[1],c=(0,J._)((0,et.useState)(""),2),u=c[0],s=c[1],d=(0,Cg.Kb)({items:a,defaultHighlightedIndex:0}),p=d.isOpen,f=d.getComboboxProps,h=d.getInputProps,v=d.getMenuProps,m=d.getItemProps,g=d.getToggleButtonProps,y=d.highlightedIndex,b=d.openMenu,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t.isGroupSubmission){var i=r;0!==e.length&&(i=i.filter(function(n){var t;return null===(t=n.submissionGroup)||void 0===t?void 0:t.users.some(function(n){var t;return null===(t=(null==n?void 0:n.fullName)||(null==n?void 0:n.username))||void 0===t?void 0:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())})}));var o=i.map(function(e){var n,t,r,i,o=(null==e?void 0:null===(n=e.submissionGroup)||void 0===n?void 0:n.users.map(function(e){return(null==e?void 0:e.fullName)||(null==e?void 0:e.username)||""}).join(", "))||"";return{image:(null==e?void 0:null===(r=e.submissionGroup)||void 0===r?void 0:null===(t=r.users[0])||void 0===t?void 0:t.image)||"",name:o,url:null===(i=e.repl)||void 0===i?void 0:i.url,status:_w(e),submissionId:e.id,timeSubmitted:null==e?void 0:e.timeSubmitted}});l((0,ec._)(o))}else{var a=n.students,c=(a=0===e.length?a.filter(function(e){return e.user}).sort(function(e,n){var t,r,i,o;return(e.nickname||(null===(t=e.user)||void 0===t?void 0:t.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"").localeCompare(n.nickname||(null===(i=n.user)||void 0===i?void 0:i.fullName)||(null===(o=n.user)||void 0===o?void 0:o.username)||"")}):a.filter(function(n){var t,r,i;return null===(t=n.nickname||(null===(r=n.user)||void 0===r?void 0:r.fullName)||(null===(i=n.user)||void 0===i?void 0:i.username))||void 0===t?void 0:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())})).map(function(e){var n,t,i,o,a=r.find(function(n){var t,r;return(null===(t=n.author)||void 0===t?void 0:t.id)===(null===(r=e.user)||void 0===r?void 0:r.id)});return{image:(null===(n=e.user)||void 0===n?void 0:n.image)||"",name:e.nickname||(null===(t=e.user)||void 0===t?void 0:t.fullName)||(null===(i=e.user)||void 0===i?void 0:i.username)||"",url:null==a?void 0:null===(o=a.repl)||void 0===o?void 0:o.url,status:_w(a),submissionId:null==a?void 0:a.id,timeSubmitted:null==a?void 0:a.timeSubmitted}});l((0,ec._)(c))}};return(0,$.BX)(eo.G,{css:[ea.l0.position.relative,{zIndex:2}],children:[(0,$.BX)(_Z,(0,ny._)((0,ey._)({css:[ea.l0.position.relative]},f()),{children:[(0,$.tZ)(w1.II,(0,ey._)({},h({value:u,placeholder:"Switch submission",onKeyDown:function(e){"Escape"===e.key&&l([])},onChange:function(e){var n=e.target.value;x(n),s(n)},onFocus:function(){x(),b()}}))),(0,$.tZ)(eo.G,{css:[ea.l0.position.absolute,ea.l0.top(0),ea.l0.right(0),ea.l0.height("100%"),ea.l0.center],children:u?(0,$.tZ)(eo.G,{css:[ea.l0.reset.button,ea.l0.cursor.pointer,ea.l0.px(8)],onClick:function(){return s("")},tag:"button",children:(0,$.tZ)(cE.Z,{})}):(0,$.tZ)(eo.G,(0,ny._)((0,ey._)({css:[ea.l0.reset.button,ea.l0.cursor.pointer,ea.l0.px(8)]},g({refKey:"innerRef"})),{tag:"button",children:(0,$.tZ)(l0.Z,{})}))})]})),(0,$.tZ)(e0.Tg,(0,ny._)((0,ey._)({tag:"ul",elevated:!0,css:[{zIndex:1,position:"absolute",overflowY:"auto",width:"100%",left:0,top:"calc(100% + ".concat(ea.TV.space8,")"),border:"1px solid",borderColor:ea.TV.outlineDimmest,listStyle:"none"},!p&&{visibility:"hidden"},ea.l0.borderRadius(8),ea.l0.maxHeight(400)]},v({refKey:"innerRef"})),{children:a.map(function(e,n){var r=e.submissionId===t.id,o=!e.url;return(0,$.tZ)(eo.G,(0,ny._)((0,ey._)({tag:"li",css:[!o&&ea.l0.cursor.pointer]},m({index:n,item:e,refKey:"innerRef",disabled:o,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{children:(0,$.tZ)(_S,{result:e,highlighted:y===n,current:r,isLate:i.dueDate&&e.timeSubmitted&&new Date(i.dueDate)<new Date(e.timeSubmitted)||!1})}),e.name)})}))]})},_R=t(97486);function _G(){var e=(0,eb._)(["\n  fragment EducationPaneRepl on Repl {\n    id\n    title\n    url\n    timeCreated\n    slug\n  }\n"]);return _G=function(){return e},e}function _E(){var e=(0,eb._)(["\n  fragment EducationPaneTemplate on ReplTemplate {\n    id\n    dueDate\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n  }\n  ","\n"]);return _E=function(){return e},e}function _T(){var e=(0,eb._)(["\n  fragment EducationPaneUser on User {\n    id\n    username\n    firstName\n    lastName\n    fullName\n    image\n  }\n"]);return _T=function(){return e},e}function _D(){var e=(0,eb._)(["\n  fragment EducationPaneReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...EducationPaneUser\n    }\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n    isGroupSubmission\n    submissionGroup {\n      users {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ","\n  ","\n"]);return _D=function(){return e},e}function _P(){var e=(0,eb._)(["\n  fragment EducationPaneTemplateWithSubmissions on ReplTemplate {\n    id\n    ...EducationPaneTemplate\n    submissions {\n      id\n      ...EducationPaneReplSubmission\n    }\n  }\n  ","\n  ","\n"]);return _P=function(){return e},e}function _B(){var e=(0,eb._)(['\n  fragment EducationPaneTeam on Team {\n    id\n    templates {\n      id\n      ...EducationPaneTemplate\n    }\n    username\n    displayName\n    image\n    students: members(permissions: "member") {\n      id\n      permissions\n      nickname\n      user {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ',"\n  ","\n"]);return _B=function(){return e},e}function _U(){var e=(0,eb._)(["\n  query EducationPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        ...EducationPaneRepl\n        owner {\n          ... on Team {\n            id\n            ...EducationPaneTeam\n          }\n        }\n        template {\n          id\n          ...EducationPaneTemplateWithSubmissions\n        }\n        submission {\n          id\n          ...EducationPaneReplSubmission\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return _U=function(){return e},e}function _A(){var e=(0,eb._)(["\n  mutation MarkSubmissionReviewed($replId: String!, $status: Boolean!) {\n    reviewRepl(replId: $replId, status: $status) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return _A=function(){return e},e}function _O(){var e=(0,eb._)(["\n  mutation UnsubmitSubmission($replId: String!) {\n    unsubmitRepl(replId: $replId) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeSubmitted\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return _O=function(){return e},e}var _X={},_L=(0,ex.Ps)(_G()),_M=(0,ex.Ps)(_E(),_L),_W=(0,ex.Ps)(_T()),_z=(0,ex.Ps)(_D(),_W,_L),_N=(0,ex.Ps)(_P(),_M,_z),_F=(0,ex.Ps)(_B(),_M,_W),_V=(0,ex.Ps)(_U(),_L,_F,_N,_z),_H=(0,ex.Ps)(_A()),_j=(0,ex.Ps)(_O()),_Y=function(e){return{short:(0,Cl.Z)(e,"do MMM"),long:(0,Cl.Z)(e,"do MMM, hh:mm a")}},_q=function(e,n){var t=e.students.find(function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===(null==n?void 0:n.id)});return(null==t?void 0:t.nickname)||(null==n?void 0:n.fullName)||"@".concat(null==n?void 0:n.username)};function _K(e){var n=e.submission,t=e.submissionList,r=(0,e2.R3)(),i=t.findIndex(function(e){return e.id===n.id}),o=t[i-1],a=t[i+1],l=t.filter(function(e){return e.timeLastReviewed}).length;return(0,$.BX)(eo.G,{css:ea.l0.rowWithGap(8),children:[t.length===l?(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(lx.Z,{color:ea.TV.greenDefault}),(0,$.BX)(eA.xv,{color:"dimmer",css:[ea.l0.flex.growAndShrink(1)],multiline:!1,children:["All ",l," submissions reviewed"]})]}):(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.flex.growAndShrink(1),ea.l0.align.center],children:[(0,$.tZ)(cC.u,{tooltip:"Reviewed",children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(lx.Z,{color:ea.TV.greenDefault}),(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:l})]})}),(0,$.tZ)(cC.u,{tooltip:"Waiting for review",children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(_g.Z,{size:12,color:ea.TV.yellowDefault}),(0,$.tZ)(eA.xv,{variant:"small",color:"dimmer",multiline:!1,children:t.length-l})]})})]}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4)],children:[(null==o?void 0:o.repl)?(0,$.tZ)(vn.Z,{size:"small",variant:"outlined",href:_C(o.repl.url,r),text:"",iconLeft:(0,$.tZ)(C8.Z,{})}):(0,$.tZ)(nf.zx,{size:"small",variant:"outlined",text:"",disabled:!0,iconLeft:(0,$.tZ)(C8.Z,{})}),(null==a?void 0:a.repl)?(0,$.tZ)(vn.Z,{size:"small",variant:"outlined",href:_C(a.repl.url,r),text:"",iconRight:(0,$.tZ)(s4.Z,{})}):(0,$.tZ)(nf.zx,{size:"small",variant:"outlined",text:"",disabled:!0,iconRight:(0,$.tZ)(s4.Z,{})})]})]})}function _J(e){var n,t=e.submission,r=e.dueDate,i=e.team,o=!!(r&&new Date(r)<new Date(t.timeSubmitted));return(0,$.BX)(e0.Tg,{css:[ea.l0.colWithGap(16),ea.l0.p(16),ea.l0.borderRadius(8)],elevated:!0,children:[t.isGroupSubmission&&t.submissionGroup?(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.maxHeight(400),ea.l0.overflow("auto")],children:t.submissionGroup.users.map(function(e){return(0,$.tZ)(eo.G,{children:(0,$.tZ)(_v.n,{src:(null==e?void 0:e.image)||null,username:_q(i,e)})},null==e?void 0:e.id)})}):(0,$.tZ)($.HY,{children:(0,$.tZ)(_v.n,{src:(null===(n=t.author)||void 0===n?void 0:n.image)||null,username:_q(i,t.author)})}),t.timeSubmitted?(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(4)],children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(lx.Z,{}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(eA.xv,{css:[ea.l0.flex.growAndShrink(1)],multiline:!1,children:"Submitted"}),o?(0,$.tZ)(_b,{}):null,t.timeLastReviewed?null:(0,$.tZ)(eA.xv,{multiline:!1,variant:"small",color:"dimmer",css:[ea.l0.flex.growAndShrink(1)],children:"(waiting for review)"})]})]})}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4)],children:[(0,$.tZ)(nV.Z,{}),(0,$.tZ)(eA.xv,{multiline:!1,children:_Y(new Date(t.timeSubmitted)).long})]})]}):(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(nV.Z,{}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(eA.xv,{css:[ea.l0.flex.growAndShrink(1)],multiline:!1,children:"In progress"}),(0,$.tZ)(eA.xv,{multiline:!1,variant:"small",color:"dimmer",css:[ea.l0.flex.growAndShrink(1)],children:"(not submitted)"})]})]}),t.repl?(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4)],children:[(0,$.tZ)(_m.Z,{}),(0,$.BX)(eA.xv,{multiline:!1,children:["Forked"," ",_Y(new Date(t.repl.timeCreated)).short]})]}):(0,$.tZ)(eA.xv,{multiline:!1,children:"Submission repl missing"})]})]})}function _$(e){var n,t,r=e.repl,i=e.submission,o=(0,lP.U)(),a=(0,lw.Z)().showError,l=(0,J._)((n=(0,ey._)({},_X,{onError:function(e){return a(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&a(e.reviewRepl.message)}}),rR.D(_H,n)),2),c=l[0],u=l[1].loading,s=(0,J._)((t=(0,ey._)({},_X,void 0),rR.D(_j,t)),1)[0],d=function(e){c({variables:{replId:r.id,status:e},optimisticResponse:{__typename:"RootMutationType",reviewRepl:(0,ny._)((0,ey._)({},r),{__typename:"Repl",submission:(0,ny._)((0,ey._)({},i),{timeLastReviewed:e?new Date().toJSON():null})})}})},p=!!i.timeLastReviewed;return(0,$.BX)(eo.G,{css:ea.l0.colWithGap(16),children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(lD.X,{id:o("reviewed-status"),disabled:u,checked:p,onChange:function(){return d(!p)}}),(0,$.tZ)("label",{htmlFor:o("reviewed-status"),children:p?"Reviewed":"Mark as reviewed"})]}),i.timeSubmitted?(0,$.tZ)(nf.zx,{css:{alignSelf:"start"},iconLeft:(0,$.tZ)(_R.Z,{}),onClick:function(){s({variables:{replId:r.id},optimisticResponse:{__typename:"RootMutationType",unsubmitRepl:(0,ny._)((0,ey._)({},r),{__typename:"Repl",submission:(0,ny._)((0,ey._)({},i),{timeLastReviewed:null})})}})},text:"Unsubmit",size:"small"}):null]})}function _Q(e){var n=e.repl,t=e.submission,r=e.team,i=e.template,o=i.submissions;return(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16),ea.l0.flex.growAndShrink(1)],children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16),ea.l0.flex.grow(1)],children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[(0,$.tZ)(_K,{submission:t,submissionList:o}),(0,$.tZ)(_I,{team:r,template:i,submission:t,submissionList:o})]}),(0,$.tZ)(_J,{team:r,submission:t,dueDate:i.dueDate}),(0,$.tZ)(_$,{repl:n,submission:t})]}),(0,$.tZ)(vn.Z,{css:[{alignSelf:"start"}],size:"small",href:"/team/".concat(r.username,"/templates/").concat(i.repl.slug),iconLeft:(0,$.tZ)(C8.Z,{}),text:"Return to submissions"})]})}function _0(){var e,n,t,r=(n={variables:{replId:(0,ef.Z)()}},t=(0,ey._)({},_X,n),ew.a(_V,t)),i=r.data,o=r.loading,a=r.error;if(o)return(0,$.tZ)(eo.G,{css:[ea.l0.center,ea.l0.flex.growAndShrink(1)],children:(0,$.tZ)(eX.Z,{size:24})});if(a)return(0,$.tZ)(eo.G,{css:ea.l0.center,children:(0,$.tZ)(eA.xv,{multiline:!1,children:"Something went wrong"})});var l=(null==i?void 0:i.repl.__typename)==="Repl"?i.repl:null,c=(null==l?void 0:null===(e=l.owner)||void 0===e?void 0:e.__typename)==="Team"?l.owner:null,u=null==l?void 0:l.template;return l&&c&&u&&l.submission?(0,$.BX)(eo.G,{css:[ea.l0.height("100%")],children:[(0,$.tZ)(eA.xv,{css:[ea.l0.p(8)],variant:"subheadBig",multiline:!1,children:"Submissions"}),(0,$.tZ)(eo.G,{css:[ea.l0.px(8),ea.l0.pb(8),ea.l0.flex.growAndShrink(1),ea.l0.overflowY("auto")],children:(0,$.tZ)(_Q,{repl:l,team:c,template:u,submission:l.submission})})]}):(0,$.tZ)(eo.G,{css:ea.l0.center,children:(0,$.tZ)(eA.xv,{multiline:!1,children:"Something went wrong"})})}var _1=nJ.Dy.Object({type:nJ.Dy.Literal("education")}),_2={Content:function(){return(0,$.tZ)(_0,{})},Icon:function(e){var n=e.size;return(0,$.tZ)(h8.Z,{size:n})},getTitle:function(){return"Submissions"},decode:function(e){return cF.B4.Decode(_1,e)}},_4=t(90029),_8=(0,Q.iv)([ea.l0.backgroundColor.backgroundDefault,ea.l0.height("100%"),ea.l0.borderRadius(4),{overflow:"hidden"}]),_3=(0,Q.iv)([ea.l0.width("100%"),ea.l0.height("100%"),ea.l0.justify.center,ea.l0.align.center,ea.l0.display.flex]);function _5(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,x4.jx)(t.installationId),o=(0,x4.r9)(t.installationId),a=Z9({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,p2.Vh)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,c=a.isValidExtensionPaneUrl,u=a.getIframeProps,s=a.reloadSandbox;return(0,a6.L5)(function(){return{actions:[{icon:(0,$.tZ)(dS.Z,{}),label:"Refresh",run:function(){s()},type:"action",description:"Refresh the extension pane",key:"refresh"}]}},[]),(0,$.tZ)(eo.G,{className:"extension-pane",css:_8,children:o&&l?(0,$.tZ)($.HY,{children:c()?(0,$.tZ)("iframe",(0,ey._)({},u({css:{width:"100%",height:"100%",border:"none"}}))):(0,$.tZ)(eo.G,{css:[ea.l0.p(12)],children:(0,$.BX)(eA.xv,{children:["Invalid url:"," ",(0,$.tZ)(_4.Z,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,$.tZ)(eo.G,{css:_3,children:(0,$.tZ)(eX.Z,{})})})}var _6=nJ.Dy.Object({extensionId:nJ.Dy.Unsafe(nJ.Dy.String()),installationId:nJ.Dy.Unsafe(nJ.Dy.String()),baseUrl:nJ.Dy.String(),path:nJ.Dy.String(),name:nJ.Dy.String(),filePath:nJ.Dy.Optional(nJ.Dy.Union([nJ.Dy.String(),nJ.Dy.Null(),nJ.Dy.Undefined()])),icon:nJ.Dy.Optional(nJ.Dy.Union([nJ.Dy.String(),nJ.Dy.Null(),nJ.Dy.Undefined()]))}),_7=nJ.Dy.Object({type:nJ.Dy.Literal("extension"),data:_6}),_9={Content:function(e){var n=e.pane,t=e.options,r=x1();return(0,$.tZ)(_5,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,$.tZ)(nb.Z,{src:(0,p2.Vh)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,$.tZ)(vE.Z,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+" â€” "+e.data.name:e.data.name},decode:function(e){return cF.B4.Decode(_7,e)}},ke=t(37841),kn=t(54501),kt=t(11906),kr=t(67161),ki=t(21556),ko=t(85352),ka=t(73789),kl=t(98512),kc=t(28167),ku=t(36084),ks=(0,eO.X)({codeBlock:[ea.l0.p(8),ea.l0.borderRadius(8),ea.l0.position.relative],codeBlockCopyButton:[ea.l0.position.absolute,ea.l0.top(4),ea.l0.right(4)],selectionContainer:[ea.l0.colWithGap(16),ea.l0.maxHeight(400),ea.l0.overflowY("scroll")],fsNode:[ea.l0.flex.row,ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.px(4),ea.l0.py(2),ea.l0.borderRadius(8),ea.l0.cursor.pointer],fsNodeActive:[ea.l0.backgroundColor.backgroundHigher],noResultsContainer:[ea.l0.p(8),ea.l0.flex.row,ea.l0.center]});function kd(e){var n=e.content,t=(0,lw.Z)().showConfirm;return(0,$.BX)(e0.Tg,{tag:"code",elevated:!0,css:ks.codeBlock,children:[n,(0,$.tZ)(cR.hU,{alt:"Copy",tooltipBehavior:"hidden",css:ks.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,$.tZ)(d$.Z,{})})]})}function kp(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,J._)((0,et.useState)([]),2),a=o[0],l=o[1],c=(0,J._)((0,et.useState)(""),2),u=c[0],s=c[1],d=(0,lP.U)(),p=(0,eu.Z)().fs,f=(0,vT.gI)(),h=(0,et.useMemo)(function(){return(0,pH.Z)(t)},[t]);return((0,et.useEffect)(function(){h&&p.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(h)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[h,f]),h)?(0,$.BX)(eo.G,{css:ks.selectionContainer,children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(12)],children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Choose an image"}),f?(0,$.tZ)(eU.E,{icon:(0,$.tZ)(ka.Z,{}),colorway:"primary",text:(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(2)],children:[(0,$.BX)(eA.xv,{children:["Images must be served from"," ",(0,$.tZ)("span",{css:[ea.l0.font.code,ea.l0.backgroundColor.accentPrimaryDimmer,ea.l0.borderRadius(4),ea.l0.px(4),ea.l0.py(2),ea.l0.mr(2),ea.l0.border({color:ea.TV.accentPrimaryDefault})],children:f.path}),"."]}),(0,$.tZ)(eA.xv,{css:[ea.l0.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,$.BX)(eA.xv,{css:[ea.l0.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,$.tZ)("span",{css:[ea.l0.font.code,ea.l0.fontSize("small"),ea.l0.backgroundColor.backgroundHigher,ea.l0.borderRadius(4),ea.l0.px(4),ea.l0.py(2),ea.l0.mr(2),ea.l0.border({color:ea.TV.outlineDefault})],children:null===(n=t.match(/\{(.*)\}/))||void 0===n?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,$.tZ)(Cg.ZP,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,$.BX)(eo.G,(0,ny._)((0,ey._)({},o({refKey:"innerRef"})),{css:[ea.l0.colWithGap(16)],children:[(0,$.tZ)(eo.G,{css:[ea.l0.position.relative],children:(0,$.tZ)(w1.II,(0,ey._)({id:d("file-search")},n({ref:null,value:u,onChange:function(e){return s(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,$.tZ)(eo.G,{children:a&&a.length?(0,$.tZ)(eo.G,(0,ny._)((0,ey._)({elevated:!0,tag:"ul",css:(ea.l0.pt(8),ea.l0.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(u)}).filter(function(e){return!f||e.path.startsWith(f.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,$.BX)(eo.G,(0,ny._)((0,ey._)({tag:"li",css:[ks.fsNode,n===i&&ks.fsNodeActive]},r({item:e,index:n,disabled:!!f&&!e.path.startsWith(f.relativePath)})),{children:[(0,$.tZ)(aH.Z,{path:e.path,size:16}),(0,$.tZ)(eA.xv,{children:e.filename}),(0,$.tZ)(eA.xv,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,$.tZ)(eo.G,{css:[ea.l0.pt(8)],children:(0,$.tZ)(eA.xv,{color:"dimmer",children:(0,$.BX)("em",{children:["No files found matching ",(0,$.tZ)("code",{children:t})]})})})})]}))}})]}):(0,$.BX)(eo.G,{css:[ea.l0.flex.column,ea.l0.colWithGap(16)],children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,$.BX)(eA.xv,{children:["The glob pattern ",(0,$.tZ)("code",{children:t})," could not be parsed."]}),(0,$.tZ)(eo.G,{css:ea.l0.border({direction:"bottom",color:ea.TV.backgroundHigher})}),(0,$.BX)(eo.G,{css:ea.l0.colWithGap(8),children:[(0,$.tZ)(eA.xv,{children:(0,$.tZ)("strong",{children:"Match all Javascript Files"})}),(0,$.tZ)(kd,{content:"**/*.js"})]}),(0,$.BX)(eo.G,{css:ea.l0.colWithGap(8),children:[(0,$.tZ)(eA.xv,{children:(0,$.tZ)("strong",{children:"Match JSON files at root level"})}),(0,$.tZ)(kd,{content:"*.json"})]}),(0,$.BX)(eo.G,{css:ea.l0.colWithGap(8),children:[(0,$.tZ)(eA.xv,{children:(0,$.tZ)("strong",{children:"Match specified file extensions"})}),(0,$.tZ)(kd,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}(y=V||(V={})).Installing="Installing",y.Loading="Loading",y.Failed="Failed",y.Success="Success";var kf={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function kh(e){var n,t=e.isOpen,r=e.close,i=e.onSubmit,o=(0,wn.I1)(),a=(0,wn.zm)(),l=(0,J._)((0,et.useState)(null),2),c=l[0],u=l[1],s=(0,J._)((0,et.useState)(!0),2),d=s[0],p=s[1],f=(0,J._)((0,et.useState)(null),2),h=f[0],v=f[1],m=(0,J._)((0,et.useState)(null),2),g=m[0],y=m[1],b=(0,et.useRef)(null),x=(0,J._)((0,et.useState)(null),2),Z=x[0],w=x[1],C=(0,J._)((0,et.useState)(null),2),_=C[0],k=C[1],S=(g||_||"").startsWith("/")?g||_:"/"+(g||_),I=(0,J._)((0,et.useState)(null),2),R=I[0],G=I[1],E=function(){k(null),u(null),y(null),w(null),G(null),v(null)},T=function(){p(!0),u(null)};(0,et.useEffect)(function(){y(_)},[_]);var D=(0,et.useCallback)((n=(0,ev._)(function(e){var n,t,r,i;return(0,em.Jh)(this,function(l){switch(l.label){case 0:var s;if(!S||!d||"Success"===c||"Failed"===c)return[2];if(s=(0,ev._)(function(e,n){var t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return u("Loading"),v(t=(0,p2.Vh)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return G(n),u("Success"),p(!1),[2,!0];return[2,!1]}})}),n=function(e,n){return s.apply(this,arguments)},t=e||a)return[3,8];u("Installing"),l.label=1;case 1:return l.trys.push([1,5,,8]),[4,o()];case 2:if(!(r=l.sent()))return[3,4];return[4,D(r)];case 3:case 6:return l.sent(),[2];case 4:case 7:return[3,8];case 5:if(l.sent(),!a)return[3,7];return[4,D(a)];case 8:if(!t)return[3,11];return i=S.replace(/^(\/public|\/static)/,""),[4,n(t,i.slice(1))];case 9:if(l.sent())return[3,11];return[4,n(t,S)];case 10:l.sent(),l.label=11;case 11:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,S,o,c,d]);(0,et.useEffect)(function(){if(Z){var e=Z.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});k((-1!==t?"/".concat(Z):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||Z),p(!0),D()}},[D,Z]);var P=Z?Z.split("/"):[],B=P[P.length-1];return(0,$.tZ)(e$.u,{isOpen:t,onRequestClose:r,children:Z?(0,$.BX)(eo.G,{css:[ea.l0.flex.column,ea.l0.colWithGap(16)],children:[(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(nf.zx,{text:"Back",size:"small",iconLeft:(0,$.tZ)(C8.Z,{}),onClick:function(){w(null),E()}}),(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(ku.Z,{}),(0,$.tZ)(eA.xv,{color:"dimmer",children:B||""})]})]}),(0,$.tZ)(eA.xv,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(4)],children:[(0,$.tZ)(w1.II,{defaultValue:g||"",ref:b,placeholder:"/icon.png",onChange:function(e){return y(e.target.value)},autoFocus:!0,disabled:"Loading"===c||"Installing"===c||"Success"===c}),h&&("Loading"===c||"Success"===c||"Failed"===c)?(0,$.tZ)("a",{href:h,target:"_blank",children:(0,$.BX)(eA.xv,{color:"dimmer",variant:"small",css:[ea.l0.rowWithGap(4),ea.l0.display.flex,{fontStyle:"italic"}],children:[(0,$.BX)("span",{css:[ea.l0.truncate],children:["Loading"===c?"Checking ":null,"Success"===c?"Found at ":null,"Failed"===c?"Failed to load ":null,h]}),(0,$.tZ)(eo.G,{css:[ea.l0.display.inlineBlock],children:(0,$.tZ)(dC.Z,{})})]})}):null]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.justify.spaceBetween,ea.l0.align.center],children:[(0,$.tZ)(eo.G,{css:[ea.l0.flex.row,ea.l0.rowWithGap(4),ea.l0.align.center],children:c?(0,$.tZ)($.HY,{children:"Loading"===c?(0,$.tZ)(eX.Z,{}):(0,$.tZ)(eU.E,{text:kf[c],colorway:"Failed"===c?"negative":"positive",icon:"Failed"===c?(0,$.tZ)(cP.Z,{}):(0,$.tZ)(lx.Z,{})})}):null}),"Failed"===c?(0,$.BX)(eo.G,{css:ea.l0.rowWithGap(8),children:[(0,$.tZ)(nf.zx,{text:"Add Anyways",onClick:function(){var e=_||Z;null!==e&&i(e),E(),r()},size:"small"}),(0,$.tZ)(nf.zx,{text:"Try Again",onClick:function(){T()},size:"small"})]}):null,R&&"Success"===c?(0,$.tZ)(nf.zx,{text:"Continue",iconLeft:(0,$.tZ)(lx.Z,{}),colorway:"primary",onClick:function(){i(R),E(),r()}}):null]})]}):(0,$.tZ)(kp,{openFile:w,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var kv=t(27901),km=(0,eO.X)({centerRowGap8:[ea.l0.rowWithGap(8),ea.l0.align.center],featureContainer:[ea.l0.flex.column,ea.l0.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[ea.l0.border({style:"dashed"}),ea.l0.borderRadius(8),ea.l0.p(16),ea.l0.colWithGap(8),ea.l0.center],featureDetails:[ea.l0.flex.column,ea.l0.colWithGap(4),ea.l0.flex.growAndShrink(1)],featureOptionsRow:[ea.l0.flex.row,ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.justify.spaceBetween],newFeatureFieldWrapper:[ea.l0.p(8),ea.l0.flex.row,ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.justify.spaceBetween,ea.l0.border({direction:"bottom",color:ea.TV.backgroundHighest})],inputCounterFlex:[ea.l0.flex.row,ea.l0.justify.spaceBetween,ea.l0.align.center]});function kg(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,J._)((0,et.useState)([]),2),a=o[0],l=o[1],c=(0,J._)((0,et.useState)(!1),2),u=c[0],s=c[1];return(0,$.BX)(eo.G,{children:[(0,$.BX)(eo.G,{css:ea.l0.pb(12),children:[(0,$.BX)(eo.G,{css:km.centerRowGap8,children:[(0,$.BX)(eo.G,{css:km.centerRowGap8,children:[(0,$.tZ)(kv.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,$.tZ)(cR.hU,{onClick:function(){s(!u)},alt:"Add a new Feature",tooltipBehavior:u?"hidden":"default",disabled:u,children:(0,$.tZ)(aj.Z,{})})]}),(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,$.BX)(eo.G,{css:ea.l0.colWithGap(8),children:[u?(0,$.tZ)(kb,{onSubmit:function(e){t(e),s(!1)},onCancel:function(){return s(!1)}}):null,(0,$.tZ)(eo.G,{css:km.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,$.tZ)(kb,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,$.tZ)(ky,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,ec._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,$.tZ)($.HY,{children:u?null:(0,$.BX)(eo.G,{css:km.noFeaturesPlaceholder,children:[(0,$.tZ)(eA.xv,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,$.tZ)(nf.zx,{variant:"outlined",text:"New Feature",iconLeft:(0,$.tZ)(aj.Z,{}),onClick:function(){return s(!0)}})]})})})]})]})}function ky(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,$.BX)(e0.Tg,{elevated:!0,css:[ea.l0.flex.row,ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.p(8),i?null:ea.l0.border({direction:"bottom",color:ea.TV.backgroundHighest})],children:[(0,$.tZ)(kx,{size:64,icon:n.image}),(0,$.BX)(eo.G,{css:km.featureDetails,children:[(0,$.BX)(eo.G,{css:km.featureOptionsRow,children:[(0,$.tZ)(eA.xv,{children:n.title}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(cR.hU,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,$.tZ)(u6.Z,{color:ea.TV.accentNegativeStronger})}),(0,$.tZ)(cR.hU,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,$.tZ)(cA.Z,{})})]})]}),(0,$.tZ)(eA.xv,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function kb(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,J._)((0,et.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],c=(0,J._)((0,et.useState)((null==r?void 0:r.body)||""),2),u=c[0],s=c[1],d=(0,J._)((0,et.useState)((null==r?void 0:r.image)||null),2),p=d[0],f=d[1],h=a.length>=3&&u.length>=16;return(0,$.BX)(e0.Tg,{css:[ea.l0.flex.column,i||r?null:ea.l0.borderRadius(8),r?ea.l0.border({color:ea.TV.outlineDefault}):[i?null:ea.l0.border({direction:"bottom",color:ea.TV.backgroundHighest})]],elevated:!0,children:[(0,$.BX)(eo.G,{css:km.newFeatureFieldWrapper,children:[(0,$.tZ)(eA.xv,{children:a||"New Feature"}),(0,$.BX)(eo.G,{css:ea.l0.rowWithGap(8),children:[(0,$.tZ)(nf.zx,{text:"Cancel",onClick:t}),(0,$.tZ)(nf.zx,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:u,image:p})},disabled:!h})]})]}),(0,$.BX)(eo.G,{css:[ea.l0.p(8),ea.l0.colWithGap(8)],children:[(0,$.BX)(eo.G,{css:ea.l0.colWithGap(4),children:[(0,$.BX)(eo.G,{css:km.inputCounterFlex,children:[(0,$.tZ)(eA.xv,{color:"dimmer",children:"Title"}),(0,$.tZ)(kZ,{value:a.length,min:3})]}),(0,$.tZ)(w1.II,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(4)],children:[(0,$.BX)(eo.G,{css:km.inputCounterFlex,children:[(0,$.tZ)(eA.xv,{color:"dimmer",children:"Body"}),(0,$.tZ)(kZ,{value:u.length,min:16})]}),(0,$.tZ)(w1.B,{value:u,onChange:function(e){return s(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,$.BX)(eo.G,{css:ea.l0.rowWithGap(8),children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(4),ea.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(eA.xv,{color:"dimmer",children:"Image (Recommended)"}),(0,$.tZ)(eA.xv,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your Repl. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,$.tZ)(kx,{size:100,icon:p,editable:!0,onSubmit:function(e){f(e)}})]})]})]})}function kx(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,eu.Z)().container,l=(0,dI.Z)(a),c=l&&t?(0,p2.Vh)(l,t):null,u=(0,J._)((0,et.useState)(!1),2),s=u[0],d=u[1];return(0,$.BX)($.HY,{children:[(0,$.tZ)(e0.Tg,{background:"default",css:[i?nx.gU.filledAndOutlined:null,ea.l0.flex.row,ea.l0.center,ea.l0.width(n),ea.l0.height(.75*n),ea.l0.maxWidth(n),ea.l0.maxHeight(.75*n),ea.l0.borderRadius(4),ea.l0.border({color:ea.TV.backgroundHighest}),ea.l0.flex.grow(1),{background:c?"".concat(ea.TV.backgroundDefault," url(").concat(c,") no-repeat center center / cover"):ea.TV.backgroundDefault}],onClick:function(){return d(!0)},children:c?null:(0,$.tZ)(ku.Z,{color:ea.TV.foregroundDimmest,size:24})}),i?(0,$.tZ)(kh,{isOpen:s,close:function(){return d(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function kZ(e){var n=e.value,t=e.min;return(0,$.BX)(eA.xv,{css:{color:n>=t?ea.TV.accentPositiveStronger:ea.TV.foregroundDimmest},children:[n,"/",t]})}var kw=function(){return(0,$.tZ)(eo.G,{css:[ea.l0.justify.center,ea.l0.align.center,ea.l0.display.flex,ea.l0.width("100%"),ea.l0.height("100%")],children:(0,$.tZ)(eX.Z,{})})};function kC(e){var n=e.children;return(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(12),ea.l0.p(16)],children:(0,$.tZ)(e0.Tg,{elevated:!0,css:[ea.l0.p(16),ea.l0.borderRadius(8),ea.l0.colWithGap(8)],children:n})})}var k_=t(18770),kk=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,$.tZ)(kC,{children:(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16),ea.l0.p(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.display.flex,ea.l0.align.center],children:[(0,$.tZ)(cP.Z,{}),(0,$.tZ)(eA.xv,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Details:"}),(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8)],children:n instanceof k_.Jg?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,$.BX)(eo.G,{css:[ea.l0.display.flex,ea.l0.flex.row,ea.l0.rowWithGap(4)],children:[(0,$.tZ)(eA.xv,{css:[ea.l0.font.code,ea.l0.color.orangeStrongest,ea.l0.backgroundColor.orangeDimmest],children:t}),(0,$.tZ)(eA.xv,{children:r})]},n)}):(0,$.tZ)(eo.G,{tag:"pre",children:n.message})}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(nf.zx,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,pQ.$E)(r)})}}),(0,$.tZ)(nf.zx,{iconLeft:(0,$.tZ)(h8.Z,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},kS=t(15843),kI=t(22897),kR=(b=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,e.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return n.sent(),[2]}})}),function(e){return b.apply(this,arguments)}),kG={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},kE=function(){var e=(0,J._)((0,et.useState)(null),2),n=e[0],t=e[1],r=(0,et.useCallback)(function(e){t(function(n){if(!n)throw Error(kG.stateUndefined);return(0,ny._)((0,ey._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},kT=function(){var e=(0,eu.Z)(),n=e.fs,t=e.dotReplit,r=kE(),i=r.state,o=r.setState,a=r.updateString,l=(0,J._)((0,et.useState)(0),2),c=l[0],u=l[1],s=(0,J._)((0,et.useState)(!1),2),d=s[0],p=s[1],f=(0,et.useCallback)((0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,kR(n)];case 1:return e.sent(),[2]}})}),[n]);(0,et.useEffect)(function(){o(null);var e=!1,r=function(){};function i(){return(i=(0,ev._)(function(){var i,l,c,u,s,d,p;return(0,em.Jh)(this,function(f){switch(f.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(c=(l=J._.apply(void 0,[f.sent(),2]))[0],u=l[1],e)return[2];if(!c.files||u.error)return o({fileReadError:kG.readFile}),[2];if(d=(0,Z5.Oh)((0,kS.AH)(null!==(s=null===(i=u.config.extension)||void 0===i?void 0:i.outputDirectory)&&void 0!==s?s:"dist")),!(p=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;if("extension.json"===s)return s;s.endsWith("/extension.json")&&i.push(s)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,v=i[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;if(!m.startsWith(r))return m}}catch(e){p=!0,f=e}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}return null!==(n=i[0])&&void 0!==n?n:null}({filePaths:c.files,outputDir:d})))return o({fileReadError:kG.noManifest}),[2];return r=n.watchTextFile(p,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:p})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:kG.removedManifest})},onError:function(){o({fileReadError:kG.readFile})}}),[2]}})})).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r(),e=!0}},[n,a,t,c,o]);var h=(0,et.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=bC.ku(i.manifestStr);return(0,p2.U4)(e)}catch(e){return{error:e,manifest:null}}},[i]),v=(0,et.useCallback)(function(e){if(!i||(null==h?void 0:h.error)||null!==i.fileReadError)throw Error(kG.parseManifest);var n=bC.r$(i.manifestStr,e);i.writeChange((0,kI.F)(i.manifestStr,n)),a(n)},[i,h,a]),m={retry:function(){u(function(e){return e+1})},creatingExtensionJson:d,setCreatingExtensionJson:p,createExtensionJson:f,updateString:a,updateManifest:v};return i?"string"==typeof i.fileReadError?(0,ny._)((0,ey._)({},m),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):h?h.manifest?(0,ny._)((0,ey._)({},m),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:h}):(0,ny._)((0,ey._)({},m),{__status:"fileParseError",state:i,parsed:{manifest:null,error:h.error}}):(0,ny._)((0,ey._)({},m),{__status:"fileReadError",state:{fileReadError:kG.noManifest},parsed:null}):(0,ny._)((0,ey._)({},m),{__status:"loading",state:null,parsed:null})};(x=H||(H={})).loading="loading",x.fileReadError="fileReadError",x.fileParseError="fileParseError",x.success="success";var kD=function(e){var n=e.message,t=kT(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,$.BX)(kC,{children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.display.flex,ea.l0.align.center],children:[(0,$.tZ)(cP.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:n})]}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(nf.zx,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,$.tZ)(eX.Z,{}):(0,$.tZ)(aj.Z,{}),onClick:(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})}),(0,$.tZ)(nf.zx,{text:"Retry",iconLeft:(0,$.tZ)(dS.Z,{}),onClick:function(){o()}})]})]})};function kP(){var e=(0,eb._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return kP=function(){return e},e}function kB(){var e=(0,eb._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return kB=function(){return e},e}var kU={};kP();var kA=(0,ex.Ps)(kB()),kO=(0,eO.X)({iconContainer:[ea.l0.position.relative,ea.l0.width(64),ea.l0.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[ea.l0.flex.column,ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0)],iconOverlay:[ea.l0.flex.column,ea.l0.colWithGap(4),ea.l0.center,ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0),ea.l0.width("100%"),ea.l0.height("100%"),ea.l0.backgroundColor.backgroundOverlay,ea.l0.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}],metadataContainer:[ea.l0.flex.row,ea.l0.rowWithGap(8),ea.l0.width("100%")],metadataWrapper:[ea.l0.flex.column,ea.l0.colWithGap(8),ea.l0.align.start,ea.l0.flex.grow(1)],listingLabel:[ea.l0.flex.row,ea.l0.align.center,ea.l0.rowWithGap(8)],metadataOptionsContainer:[ea.l0.rowWithGap(8),ea.l0.justify.spaceBetween,ea.l0.width("100%")]});function kX(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,wn.zm)(),i=(0,wn.I1)(),o=(0,wn.EO)(),a=(0,wn.bN)(),l=(0,vT.nP)(),c=(0,J._)((0,et.useState)(!1),2),u=c[0],s=c[1],d=(0,J._)((0,et.useState)(!1),2),p=d[0],f=d[1];return(0,$.tZ)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.flex.wrap,{rowGap:8}],children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[r||p?(0,$.BX)($.HY,{children:[(0,$.tZ)(nf.zx,{size:"small",text:"Reload",iconLeft:p?(0,$.tZ)(eX.Z,{}):(0,$.tZ)(dS.Z,{}),disabled:p,onClick:(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:if(!r)return[2];return f(!0),[4,o(r.installationId)];case 1:return e.sent(),f(!1),[2]}})})}),(0,$.tZ)(nf.zx,{size:"small",text:"Unload",iconLeft:(0,$.tZ)(kl.Z,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,$.tZ)(nf.zx,{size:"small",text:"Load locally",colorway:"primary",iconLeft:u?(0,$.tZ)(eX.Z,{}):(0,$.tZ)(p9.Z,{}),loading:u,onClick:(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return s(!0),[4,i()];case 1:return e.sent(),s(!1),[2]}})})}),l?(0,$.tZ)(nf.zx,{size:"small",text:"View on Store",iconLeft:(0,$.tZ)(kc.Z,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,$.tZ)(nf.zx,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,$.tZ)(cA.Z,{})})]})})}function kL(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,eu.Z)().container,i=(0,dI.Z)(r),o=kT(),a=o.parsed,l=o.state,c=o.__status;if(c===H.loading)return(0,$.tZ)(kw,{});if(c===H.fileReadError)return(0,$.tZ)(kD,{message:l.fileReadError});var u=a.manifest,s=a.error;return s?(0,$.tZ)(kk,{performPaneOperation:n,manifestPath:l.manifestPath,error:s}):(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(16),ea.l0.width("100%")],children:(0,$.BX)(e0.Tg,{elevated:!0,css:[ea.l0.p(12),ea.l0.borderRadius(8),ea.l0.colWithGap(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.rowWithGap(16),ea.l0.align.center],children:[(0,$.tZ)(eo.G,{css:[ea.l0.flex.grow(0),ea.l0.display.flex,ea.l0.flex.row],children:(0,$.tZ)(ki.I,{size:64,baseUrl:null!=i?i:null,icon:u.icon})}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1)],children:[(0,$.tZ)(wh.Ug,{align:"center",justify:"space-between",children:(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:u.name})}),(0,$.tZ)(eA.xv,{variant:"text",color:"dimmest",children:u.description})]})]}),(0,$.tZ)(kX,{setSelectedTab:t,performPaneOperation:n})]})})}function kM(e){var n,t,r,i,o,a,l,c,u,s=e.manifest,d=e.onSubmit,p=e.updateManifest,f=(0,vT.nP)(),h=(0,eg.d)(),v=(0,lP.U)(),m=(0,J._)((0,et.useState)(null!==(a=s.name)&&void 0!==a?a:""),2),g=m[0],y=m[1],b=(0,J._)((0,et.useState)(null!==(l=s.description)&&void 0!==l?l:""),2),x=b[0],Z=b[1],w=(0,J._)((0,et.useState)(null!==(c=s.longDescription)&&void 0!==c?c:void 0),2),C=w[0],_=w[1],k=(0,J._)((0,et.useState)(!1),2),S=k[0],I=k[1],R=(0,eu.Z)().container,G=(0,dI.Z)(R),E=(n=(0,ey._)({},kU,{variables:{id:f||""},skip:!f}),ew.a(kA,n)),T=E.data,D=E.loading,P=E.refetch,B=(0,J._)((0,kr.Ne)(),2),U=B[0],A=B[1].loading,O=(null==T?void 0:null===(t=T.extension)||void 0===t?void 0:t.__typename)==="Extension"&&(null==T?void 0:null===(r=T.extension)||void 0===r?void 0:r.user.id)===h,X=(null==T?void 0:null===(i=T.extension)||void 0===i?void 0:i.__typename)==="Extension"&&(null==T?void 0:null===(o=T.extension)||void 0===o?void 0:o.isListed);return(0,$.BX)(eo.G,{tag:"form",css:[ea.l0.colWithGap(16)],onSubmit:function(e){e.preventDefault(),d({name:g,description:x,longDescription:C})},children:[(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(4)],children:[(0,$.tZ)(eA.xv,{css:[ea.l0.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),D||A?(0,$.tZ)(eX.Z,{}):(0,$.BX)(uL.E,{css:ea.l0.colWithGap(8),name:"extensionListingStatus",value:X?"listed":"unlisted",disabled:!O,onChange:function(e){U({variables:{extensionId:f||"",isListed:"listed"===e.target.value}}).then(function(){return P()})},children:[O?null:(0,$.tZ)(eo.G,{css:[ea.l0.width("fit-content")],children:(0,$.tZ)(eU.E,{text:"You need to release this extension before listing it.",icon:(0,$.tZ)(ka.Z,{}),colorway:"yellow"})}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(uL.Y,{id:v("listed"),value:"listed"}),(0,$.tZ)("label",{htmlFor:v("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(uL.Y,{id:v("unlisted"),value:"unlisted"}),(0,$.tZ)("label",{htmlFor:v("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,$.tZ)(cU.R,{}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(4)],tag:"label",htmlFor:v("name"),children:[(0,$.tZ)(eA.xv,{children:"Extension Name"}),(0,$.tZ)(w1.II,{id:v("name"),placeholder:"Give your extension a name",value:g,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(4)],children:[(0,$.tZ)(eA.xv,{children:"Extension Icon"}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.align.center],children:[(0,$.BX)(eo.G,{css:kO.iconContainer,children:[(0,$.tZ)(eo.G,{css:kO.iconWrapper,children:(0,$.tZ)(ki.I,{size:64,baseUrl:null!=G?G:null,icon:s.icon})}),(0,$.BX)(eo.G,{css:kO.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return I(!0)},children:[(0,$.tZ)(cA.Z,{}),(0,$.tZ)(eA.xv,{variant:"small",children:"Edit"})]})]}),(0,$.tZ)(nf.zx,{text:"Choose from file system",iconLeft:(0,$.tZ)(ko.Z,{}),onClick:function(){return I(!0)}})]})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(4)],tag:"label",htmlFor:v("tagline"),children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(0)],children:[(0,$.tZ)(eA.xv,{children:"Tagline"}),(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,$.tZ)(w1.II,{id:v("tagline"),placeholder:"Give your extension a short tagline",value:x,onChange:function(e){Z(e.currentTarget.value)},required:!0})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(4)],tag:"label",htmlFor:v("longDescription"),children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(0)],children:[(0,$.tZ)(eA.xv,{children:"Description"}),(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,$.tZ)(w1.B,{id:v("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=C?C:"",onChange:function(e){_(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,$.tZ)(cU.R,{}),(0,$.tZ)(kg,{features:null!==(u=s.features)&&void 0!==u?u:[],onDelete:function(e){if((null===(n=s.features)||void 0===n?void 0:n.length)===1&&0===e){var n,t,r=(0,ey._)({},s);delete r.features,p(r)}else p((0,ny._)((0,ey._)({},s),{features:null===(t=s.features)||void 0===t?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;p((0,ny._)((0,ey._)({},s),{features:(0,ec._)(null!==(i=null===(t=s.features)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,ec._)(null!==(o=null===(r=s.features)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;p((0,ny._)((0,ey._)({},s),{features:(0,ec._)(null!==(n=s.features)&&void 0!==n?n:[]).concat([e])}))}}),(0,$.tZ)(eo.G,{css:[ea.l0.rowWithGap(12),{alignSelf:"end"},ea.l0.pt(8)],children:(0,$.tZ)(nf.zx,{text:"Continue",iconRight:(0,$.tZ)(dV.Z,{}),colorway:"primary",type:"submit",disabled:!g||!x||!C})}),(0,$.tZ)(kh,{isOpen:S,close:function(){return I(!1)},onSubmit:function(e){p((0,ny._)((0,ey._)({},s),{icon:e}))}})]})}function kW(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,J._)((0,et.useState)([]),2),l=a[0],c=a[1],u=(0,J._)((0,et.useState)(!1),2),s=u[0],d=u[1];return(0,$.BX)(eo.G,{children:[(0,$.BX)(eo.G,{css:[ea.l0.pb(12)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(mX.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,$.tZ)(cR.hU,{onClick:function(){return d(!s)},alt:"Add a new File Handler",tooltipBehavior:s?"hidden":"default",disabled:s,children:(0,$.tZ)(aj.Z,{})})]}),(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[s?(0,$.tZ)(kz,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,$.tZ)(kz,{initialFileHandler:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,$.BX)(e0.Tg,{css:[ea.l0.flex.row,ea.l0.justify.spaceBetween,ea.l0.align.center,ea.l0.p(8),ea.l0.borderRadius(8),ea.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,$.tZ)(eA.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.align.center],children:[(0,$.tZ)(cR.hU,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,$.tZ)(u6.Z,{})}),(0,$.tZ)(cR.hU,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){c(function(e){return(0,ec._)(e).concat([n])})},children:(0,$.tZ)(cA.Z,{})}),(0,$.tZ)(nf.zx,{iconLeft:(0,$.tZ)(ko.Z,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,$.tZ)($.HY,{children:s?null:(0,$.BX)(eo.G,{css:[ea.l0.border({style:"dashed"}),ea.l0.borderRadius(8),ea.l0.p(16),ea.l0.colWithGap(8),ea.l0.center],children:[(0,$.tZ)(eA.xv,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,$.tZ)(nf.zx,{variant:"outlined",text:"New File Handler",iconLeft:(0,$.tZ)(aj.Z,{}),onClick:function(){return d(!0)}})]})})]})]})}function kz(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,c=(0,J._)((0,et.useState)(null!==(n=null==l?void 0:l.name)&&void 0!==n?n:""),2),u=c[0],s=c[1],d=(0,J._)((0,et.useState)(null!==(t=null==l?void 0:l.icon)&&void 0!==t?t:""),2),p=d[0],f=d[1],h=(0,J._)((0,et.useState)(null!==(r=null==l?void 0:l.handler)&&void 0!==r?r:""),2),v=h[0],m=h[1],g=(0,J._)((0,et.useState)(null!==(i=null==l?void 0:l.glob)&&void 0!==i?i:""),2),y=g[0],b=g[1],x=(0,lP.U)();return(0,$.BX)(e0.Tg,{css:[ea.l0.borderRadius(8),ea.l0.border({color:ea.TV.outlineDimmest}),ea.l0.p(8),ea.l0.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:u,icon:p,handler:v,glob:y})},elevated:!0,children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(2),ea.l0.justify.spaceBetween,ea.l0.border({color:ea.TV.outlineDimmest,direction:"bottom"}),ea.l0.align.center,ea.l0.flex.wrap,{rowGap:8}],children:[(0,$.tZ)(eA.xv,{multiline:!1,children:u||"New File Viewer"}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(nf.zx,{text:"Cancel",onClick:function(){a()}}),(0,$.tZ)(nf.zx,{colorway:"primary",iconLeft:(0,$.tZ)(lx.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)],tag:"label",htmlFor:x("name"),children:[(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,$.tZ)(w1.II,{id:x("name"),placeholder:"SVG Editor",value:u,onChange:function(e){s(e.currentTarget.value)},required:!0})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)],tag:"label",htmlFor:x("handler"),children:[(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,$.tZ)(w1.II,{id:x("handler"),placeholder:"/svg-editor",value:v,onChange:function(e){m(e.currentTarget.value)},required:!0})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)],tag:"label",htmlFor:x("glob"),children:[(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,$.tZ)(w1.II,{id:x("glob"),placeholder:"*.svg",value:y,onChange:function(e){b(e.currentTarget.value)},required:!0})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)],tag:"label",htmlFor:x("icon"),children:[(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,$.tZ)(w1.II,{id:x("icon"),placeholder:"/svg-editor-logo.png",value:p,onChange:function(e){f(e.currentTarget.value)},required:!0})]})]})]})}function kN(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,J._)((0,et.useState)([]),2),l=a[0],c=a[1],u=(0,J._)((0,et.useState)(!1),2),s=u[0],d=u[1];return(0,$.BX)(eo.G,{children:[(0,$.BX)(eo.G,{css:[ea.l0.pb(12)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(aY.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,$.tZ)(cR.hU,{onClick:function(){return d(!s)},alt:"Add a new tool",disabled:s,tooltipBehavior:s?"hidden":"default",children:(0,$.tZ)(aj.Z,{})})]}),(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[s?(0,$.tZ)(kF,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,$.tZ)(kF,{initialTool:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,$.BX)(e0.Tg,{css:[ea.l0.flex.row,ea.l0.justify.spaceBetween,ea.l0.align.center,ea.l0.p(8),ea.l0.borderRadius(8),ea.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,$.tZ)(eA.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.align.center],children:[(0,$.tZ)(cR.hU,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,$.tZ)(u6.Z,{})}),(0,$.tZ)(cR.hU,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){c(function(e){return(0,ec._)(e).concat([n])})},children:(0,$.tZ)(cA.Z,{})}),(0,$.tZ)(nf.zx,{iconLeft:(0,$.tZ)(mj.Z,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,$.tZ)($.HY,{children:s?null:(0,$.BX)(eo.G,{css:[ea.l0.border({style:"dashed"}),ea.l0.borderRadius(8),ea.l0.p(16),ea.l0.colWithGap(8),ea.l0.center],children:[(0,$.tZ)(eA.xv,{color:"dimmest",children:"You haven't added any tools"}),(0,$.tZ)(nf.zx,{variant:"outlined",text:"New Tool",iconLeft:(0,$.tZ)(aj.Z,{}),onClick:function(){return d(!0)}})]})})]})]})}function kF(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,J._)((0,et.useState)(null!==(n=null==a?void 0:a.name)&&void 0!==n?n:""),2),c=l[0],u=l[1],s=(0,J._)((0,et.useState)(null!==(t=null==a?void 0:a.icon)&&void 0!==t?t:null),2),d=s[0],p=s[1],f=(0,J._)((0,et.useState)(null!==(r=null==a?void 0:a.handler)&&void 0!==r?r:""),2),h=f[0],v=f[1],m=(0,lP.U)();return(0,$.BX)(e0.Tg,{tag:"form",css:[ea.l0.borderRadius(8),ea.l0.border({color:ea.TV.outlineDimmest}),ea.l0.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:c,icon:d,handler:h})},children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(2),ea.l0.justify.spaceBetween,ea.l0.border({color:ea.TV.outlineDimmest,direction:"bottom"}),ea.l0.align.center,ea.l0.flex.wrap,{rowGap:8}],children:[(0,$.tZ)(eA.xv,{multiline:!1,children:c||"New Tool"}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8)],children:[(0,$.tZ)(nf.zx,{text:"Cancel",onClick:function(){o()}}),(0,$.tZ)(nf.zx,{colorway:"primary",iconLeft:(0,$.tZ)(lx.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)],tag:"label",htmlFor:m("name"),children:[(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,$.tZ)(w1.II,{id:m("name"),placeholder:"SQL Viewer",value:c,onChange:function(e){u(e.currentTarget.value)},required:!0})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)],tag:"label",htmlFor:m("handler"),children:[(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,$.tZ)(w1.II,{id:m("handler"),placeholder:"/sql",value:h,onChange:function(e){v(e.currentTarget.value)},required:!0})]}),(0,$.BX)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(2)],tag:"label",htmlFor:m("icon"),children:[(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,$.tZ)(w1.II,{id:m("icon"),placeholder:"/sql-logo.png",value:null!=d?d:"",onChange:function(e){p(e.currentTarget.value||null)},required:!0})]})]})]})}function kV(e){var n,t,r,i,o,a=e.manifest,l=e.performPaneOperation,c=e.update,u=(0,wn.zm)(),s=(0,wn.I1)(),d=(0,J._)((0,et.useState)(null),2),p=d[0],f=d[1];return(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24),ea.l0.width("100%")],children:[(0,$.tZ)(kW,{onOpen:(n=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){return f(e),[2]})}),function(e){return n.apply(this,arguments)}),onDelete:function(e){var n;c((0,ny._)((0,ey._)({},a),{fileHandlers:null===(n=a.fileHandlers)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,ny._)((0,ey._)({},a),{fileHandlers:(0,ec._)(null!==(i=null===(t=a.fileHandlers)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,ec._)(null!==(o=null===(r=a.fileHandlers)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;c((0,ny._)((0,ey._)({},a),{fileHandlers:(0,ec._)(null!==(n=a.fileHandlers)&&void 0!==n?n:[]).concat([e])}))},fileHandlers:null!==(i=a.fileHandlers)&&void 0!==i?i:[]}),(0,$.tZ)(kN,{onOpen:(t=(0,ev._)(function(e){var n,t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(n=u)return[3,2];return[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=e.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})}),function(e){return t.apply(this,arguments)}),onDelete:function(e){var n;c((0,ny._)((0,ey._)({},a),{tools:null===(n=a.tools)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,ny._)((0,ey._)({},a),{tools:(0,ec._)(null!==(i=null===(t=a.tools)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,ec._)(null!==(o=null===(r=a.tools)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;c((0,ny._)((0,ey._)({},a),{tools:(0,ec._)(null!==(n=a.tools)&&void 0!==n?n:[]).concat([e])}))},tools:null!==(o=a.tools)&&void 0!==o?o:[]}),(0,$.tZ)(e$.u,{isOpen:!!p,onRequestClose:function(){return f(null)},children:p?(0,$.tZ)(kp,{glob:p.glob,openFile:(r=(0,ev._)(function(e){var n,t;return(0,em.Jh)(this,function(r){switch(r.label){case 0:if(!p)throw Error("Expected pending file handler");if(n=u)return[3,2];return[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=p.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,p2.Vh)(n.baseUrl,p.handler),filePath:e}}}),f(null),[2]}})}),function(e){return r.apply(this,arguments)})}):null})]})}var kH=t(17867),kj=t(8147),kY=(0,Q.iv)(nx.gU.filled,ea.l0.position.relative,ea.l0.p(4),ea.l0.border({color:ea.TV.outlineDimmer}),ea.l0.backgroundColor.backgroundHigher,{"&[data-complete]":[ea.l0.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),kq=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,$.tZ)(eo.G,{tag:"li",css:kY,"data-complete":n,children:(0,$.BX)(eo.G,{css:[ea.l0.p(4)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(6),ea.l0.align.center],children:[n?(0,$.tZ)(lx.Z,{color:ea.TV.accentPositiveStrongest,size:16,css:[ea.l0.mr(4)]}):null!=o?o:null,(0,$.tZ)(eA.xv,{variant:"small",color:n?"dimmer":"default",css:[ea.l0.fontWeight.medium],children:i})]}),r?(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",children:r}):null,(0,$.tZ)(eo.G,{children:(0,$.tZ)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})},kK=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,sO.o)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,sO.o)("extensions-onboarding-checklist-create"),l=a.isDone,c=a.setAsDone,u=(0,sO.o)("extensions-onboarding-checklist-concepts"),s=u.isDone,d=u.setAsDone,p=(0,sO.o)("extensions-onboarding-checklist-api"),f=p.isDone,h=p.setAsDone,v=(0,sO.o)("extensions-onboarding-checklist-publish").isDone;if((0,et.useEffect)(function(){c()},[]),void 0===i||!0===i)return null;var m=[l,s,f,v].filter(Boolean).length,g=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,$.tZ)(vE.Z,{})},{name:"concepts",title:"Learn key concepts",complete:!!s,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:rf.TT.EXTENSIONS}}}),(0,eh.j)(eh.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),d()},icon:(0,$.tZ)(kH.Z,{})},{name:"learn",title:"Use the API",complete:!!f,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:rf.TT.EXTENSIONS}}}),(0,eh.j)(eh.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),h()},icon:(0,$.tZ)(CU.Z,{})},{name:"publish",title:"Publish your Extension",complete:!!v,onClick:function(){t(1)},icon:(0,$.tZ)(kj.Z,{})}];return(0,$.tZ)("section",{css:[ea.l0.width("100%")],children:(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(12)],children:[(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(2)],children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.align.center,ea.l0.flex.wrap],children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(12),ea.l0.align.center],children:[(0,$.tZ)(eo.G,{css:[ea.l0.rowWithGap(2),ea.l0.align.center,ea.l0.justify.center],children:Array.from({length:g.length}).map(function(e,n){return(0,$.tZ)(eo.G,{css:[ea.l0.borderRadius(8),ea.l0.width(12),ea.l0.height(4),n<m?ea.l0.backgroundColor.accentPositiveDefault:ea.l0.backgroundColor.backgroundHighest]},n)})}),(0,$.tZ)(eA.xv,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(m,"/").concat(g.length)}),(0,$.tZ)(cR.hU,{alt:"Hide section",onClick:o,children:(0,$.tZ)(cE.Z,{})})]})]})}),(0,$.tZ)(eo.G,{tag:"ul",css:[ea.l0.flex.row,ea.l0.flex.wrap,{listStyleType:"none",gap:ea.TV.space8}],children:g.map(function(e,n){return(0,$.tZ)(kq,(0,ey._)({},e),n)})})]})})},kJ=t(45318);function k$(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=kT(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,$.tZ)(kw,{});if("fileReadError"===i)return(0,$.tZ)(kD,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var c=o.error;return(0,$.tZ)(kk,{performPaneOperation:n,manifestPath:a.manifestPath,error:c})}var u=o.manifest;return"success"===i&&u?(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(24),ea.l0.align.center,ea.l0.pt(12),ea.l0.width("100%")],children:[(0,$.tZ)(kL,{performPaneOperation:n,setSelectedTab:t}),(0,$.tZ)(kK,{performPaneOperation:n,setSelectedTab:t}),(0,$.tZ)(eo.G,{css:[ea.l0.border({direction:"bottom",width:4,color:ea.TV.outlineDimmest}),ea.l0.width("100%")]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.width("100%")],children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(2)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(cO.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,$.BX)(eA.xv,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,$.tZ)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:rf.TT.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,$.tZ)(eo.G,{css:[ea.l0.borderRadius(4),ea.l0.border({color:ea.TV.outlineDimmest,width:1}),ea.l0.flex.row,ea.l0.align.center,ea.l0.p(8),ea.l0.flex.wrap,{gap:12},ea.l0.width("fit-content")],children:kJ.k.map(function(e){var n;return(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(6),ea.l0.align.center],children:[(0,$.tZ)(lD.X,{id:e.key,checked:null===(n=u.scopes)||void 0===n?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null===(t=u.scopes)||void 0===t?void 0:t.some(function(n){return n.name===e.key}))&&!n?bC.r$(a.manifestStr,(0,ny._)((0,ey._)({},u),{scopes:null===(r=u.scopes)||void 0===r?void 0:r.filter(function(n){return n.name!==e.key})})):bC.r$(a.manifestStr,(0,ny._)((0,ey._)({},u),{scopes:(0,ec._)(null!==(i=u.scopes)&&void 0!==i?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,kI.F)(a.manifestStr,o)),l(o)}}),(0,$.tZ)("label",{htmlFor:e.key,css:[ea.l0.fontSize(12),ea.l0.cursor.pointer],children:(0,$.tZ)("abbr",{title:e.description,css:[{textDecorationColor:ea.TV.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,$.tZ)(kV,{performPaneOperation:n,manifest:u,update:function(e){var n=bC.r$(a.manifestStr,e);a.writeChange((0,kI.F)(a.manifestStr,n)),l(n)}})]}):(0,$.tZ)("div",{children:"unknown state"})}var kQ=t(7732),k0=t(62942),k1=t(87502),k2=t(44707),k4=t(81839),k8=(0,eO.X)({logViewerTopLevel:[ea.l0.height("100%")],logsContainer:[ea.l0.scrollbar.thin,ea.l0.backgroundColor.backgroundDefault,ea.l0.overflowY("scroll"),ea.l0.flex.growAndShrink(1)],logViewerHeader:[ea.l0.p(8),ea.l0.border({direction:"bottom",width:ea.TV.borderWidthDefault}),ea.l0.display.flex,ea.l0.flex.row,ea.l0.rowWithGap(8),ea.l0.align.center],logViewerHeaderControl:[ea.l0.flex.row,ea.l0.rowWithGap(4),ea.l0.align.center],logLine:[ea.l0.p(2),ea.l0.font.code,nx.gU.listItem,ea.l0.rowWithGap(2),ea.l0.align.center],logLineIcon:[ea.l0.p(4),{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function k3(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,J._)((0,et.useState)(!1),2),a=o[0],l=o[1],c=(0,k1.Z)().ref;return(0,$.BX)(eo.G,{css:[ea.l0.flex.column,function(e){if(e===k4.i.warn)return{color:ea.TV.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===k4.i.error)return{color:ea.TV.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=ea.TV.backgroundHigher;return t===k4.i.warn?n="rgba(150, 125, 0, 0.5)":t===k4.i.error&&(n="rgba(229, 34, 34, 0.5)"),{color:ea.TV.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,$.BX)(eo.G,{css:k8.logLine,onClick:function(){return l(function(e){return!e})},children:[(0,$.tZ)(eo.G,{css:k8.logLineIcon,children:(0,$.tZ)(function(){return n.logLevel===k4.i.warn?(0,$.tZ)(cP.Z,{size:16}):n.logLevel===k4.i.error?(0,$.tZ)(kn.Z,{size:16}):(0,$.tZ)(ka.Z,{size:16,css:{opacity:0}})},{})}),(0,$.tZ)(eA.xv,{maxLines:10,css:k8.logMessage,variant:"small",children:n.message}),a?(0,$.tZ)(l0.Z,{size:16}):(0,$.tZ)(s4.Z,{size:16})]}),a?(0,$.tZ)(eo.G,{children:(0,$.tZ)(k0.ZP,{ref:c,css:k2.Mp,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}var k5=function(){var e=(0,yc.ZC)(sj.ep),n=(0,yc.E4)(sj.UB),t=(0,J._)((0,yc.OA)(sj.UT),2),r=t[0],i=t[1],o=(0,et.useRef)(null);return(0,et.useEffect)(function(){var e,n=o.current;n&&(null===(e=n.children[n.children.length-1])||void 0===e||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,$.BX)(eo.G,{css:k8.logViewerTopLevel,children:[(0,$.BX)(eo.G,{className:"log-viewer-header",css:k8.logViewerHeader,children:[(0,$.tZ)(eo.G,{css:k8.logViewerHeaderControl,style:{flexGrow:1},children:(0,$.tZ)(w1.II,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,$.BX)(eo.G,{css:k8.logViewerHeaderControl,children:[(0,$.tZ)(cR.hU,{alt:"Clear logs",onClick:function(){return n()},children:(0,$.tZ)(cE.Z,{id:"clear-logs"})}),(0,$.tZ)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,$.tZ)(eo.G,{css:k8.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,$.tZ)(k3,{log:n,prevLevel:null===(r=e[t-1])||void 0===r?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})},k6=t(13669),k7=t(29609),k9=t(65059),Se=t(86596);function Sn(){var e=(0,eb._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return Sn=function(){return e},e}function St(){var e=(0,eb._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return St=function(){return e},e}function Sr(){var e=(0,eb._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return Sr=function(){return e},e}function Si(){var e=(0,eb._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Si=function(){return e},e}function So(){var e=(0,eb._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return So=function(){return e},e}var Sa={},Sl=(0,ex.Ps)(Sn()),Sc=(0,ex.Ps)(St(),wt.R9),Su=(0,ex.Ps)(Sr()),Ss=(0,ex.Ps)(Si()),Sd=(0,ex.Ps)(So()),Sp=t(15529),Sf=t(25114),Sh=t(81541),Sv=eo.K.button;(Z=j||(j={})).Pending="pending",Z.Active="active",Z.Complete="complete",Z.Error="error";var Sm=function(){return(0,$.tZ)(eo.G,{css:[ea.l0.flex.row,ea.l0.flex.grow(1),ea.l0.border({color:ea.TV.outlineDimmest,direction:"top"})]})},Sg=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,c=(0,nf.TS)(r),u=(0,nf.m2)(r);return(0,$.tZ)(Sv,{type:"button",css:[ea.l0.reset.button,ea.l0.position.relative,o&&nx.gU.nofill,ea.l0.px(8),ea.l0.py(2),ea.l0.borderRadius(4),ea.l0.rowWithGap(4),ea.l0.align.center,{borderRadius:ea.TV.borderRadiusRound}].concat((0,ec._)("error"===i?[ea.l0.color.accentNegativeStronger]:"active"===i?[ea.l0.backgroundColor.accentPrimaryDimmer,ea.l0.color.accentPrimaryStrongest]:"complete"===i?[ea.l0.color.accentPositiveStronger]:[ea.l0.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,$.tZ)(nf.BQ,{text:n,iconSize:u,textVariant:c,iconRight:function(){if("error"===i)return(0,$.tZ)(cP.Z,{});if("active"===i){if(l)return;return(0,$.tZ)(eX.Z,{})}return"complete"===i?(0,$.tZ)(lx.Z,{}):(0,$.tZ)(cO.Z,{})}()})})};(w=Y||(Y={})).Details="Details",w.Init="Init",w.CreatingExtension="CreatingExtension",w.CreatingExtensionError="CreatingExtensionError",w.Queued="Queued",w.Deploying="Deploying",w.DeployError="DeployError",w.Success="Success";var Sy=["CreatingExtension","Deploying"];(C=q||(q={})).Details="Details",C.Init="Configure",C.Create="Create",C.Deploy="Deploy";var Sb=["Details","Configure","Deploy"];function Sx(e){var n,t,r,i,o,a,l,c,u=e.performPaneOperation,s=(0,eu.Z)(),d=s.container,p=s.fs,f=s.dotReplit,h=(0,J._)((n=(0,ey._)({},Sa,void 0),sq.t(Su,n)),1)[0],v=(0,sO.o)("extensions-onboarding-checklist-".concat("publish")).setAsDone,m=(0,J._)((0,et.useState)(null),2),g=m[0],y=m[1],b=(0,J._)((0,et.useState)("Details"),2),x=b[0],Z=b[1],w=(0,J._)((0,et.useState)(null),2),C=w[0],_=w[1],k=kT(),S=k.__status,I=k.parsed,R=k.state,G=k.updateManifest,E=(0,k7.Y)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),T=E.value,D=E.setValue,P=E.error,B=E.validate,U=(0,J._)((0,et.useState)([]),2),A=U[0],O=U[1],X=(0,et.useCallback)(function(e){return u({operation:"open",secondary:!0,pane:{type:(0,nF.Dp)(e),data:e}})},[u]),L=(0,J._)((0,Sf.Z)({openFile:X,listFiles:p.listFiles}),2),M=L[0],W=L[1],z=(0,Sh.f)();t=(0,ey._)({},Sa,{variables:{extensionId:null!=g?g:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&O(function(e){return(0,ec._)(e).concat((0,ec._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===e4.Fe.Success?Z("Success"):t.status===e4.Fe.Failed&&Z("DeployError"))}},skip:"Deploying"!==x||!g}),bb.m(Sl,t),(0,et.useEffect)(function(){M&&(M.clear(),A.forEach(function(e){M.write(e.replaceAll("\n","\r\n"))}))},[A,M]);var N=(0,et.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){y(null),_(null),D(null);return}n.buildCommand&&_(n.buildCommand),n.outputDirectory&&D(n.outputDirectory),n.extensionID&&y(n.extensionID)}},[D]);(0,et.useEffect)(function(){var e=!1;return(0,ev._)(function(){var n;return(0,em.Jh)(this,function(t){switch(t.label){case 0:return[4,f.getConfig()];case 1:if(n=t.sent(),e)return[2];return N(n),[2]}})})(),function(){e=!0}},[f,N]);var F=(0,et.useCallback)((r=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return y(e),[4,f.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return r.apply(this,arguments)}),[f]),V=(0,et.useCallback)((i=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return _(e),[4,f.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return i.apply(this,arguments)}),[f]),Y=(0,J._)((0,et.useState)(null),2),q=Y[0],K=Y[1],Q=(0,J._)((0,et.useState)(null),2),ee=Q[0],en=Q[1],er=(0,J._)((0,et.useState)(null),2),el=er[0],es=er[1],ed=(0,J._)((0,et.useState)(null),2),ep=ed[0],eg=ed[1],eb=(0,J._)((0,et.useState)(null),2),ex=eb[0],eZ=eb[1],ew=(0,J._)((o=(0,ey._)({},Sa,void 0),rR.D(Sc,o)),1)[0],eC=(0,ef.Z)(),e_=(0,J._)((a=(0,ey._)({},Sa,void 0),rR.D(Ss,a)),1)[0],ek=(0,J._)((0,et.useState)(null),2),eS=ek[0],eI=ek[1],eR=(0,ei.P5)({controlName:"flag-draft-buffers"}),eG=(0,xV.Qk)(),eE=(0,et.useCallback)((l=(0,ev._)(function(e){var n,t,r;return(0,em.Jh)(this,function(i){switch(i.label){case 0:return[4,e_({variables:{name:e.name,description:e.description}})];case 1:if((t=i.sent()).errors)return[2,{error:t.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(r=null===(n=t.data)||void 0===n?void 0:n.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===r.__typename||"UserError"===r.__typename||"UnauthorizedError"===r.__typename)return[2,{error:"Failed to create extension: "+r.message,result:null}];if("Extension"===r.__typename)return[2,{error:null,result:r}];throw Error("Unexpected response from createExtension mutation")}})}),function(e){return l.apply(this,arguments)}),[e_]),eT=(0,J._)((c=(0,ey._)({},Sa,void 0),rR.D(Sd,c)),1)[0],eD=(0,et.useCallback)((0,ev._)(function(){var e,n,t,r,i,o,a,l,c,u,s,f,m,y,b,x,w,_;return(0,em.Jh)(this,function(k){switch(k.label){case 0:return e=g,[4,B()];case 1:if(null==(n=k.sent())?void 0:n.message)return es(null==n?void 0:n.message),[2];if(!T)throw Error("expected output folder");if(t=(0,Z5.AH)(T),(r=function(){Z("Init"),O([]),eZ(null),es(null),en(null),K(null)})(),!(eG||!eR))return[3,3];return[4,p.flush()];case 2:k.sent(),k.label=3;case 3:if(!e)return[3,12];return[4,h({variables:{extensionId:e}})];case 4:if((i=k.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,6];return[4,new Promise(function(n){eI({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eI(null),n(e)}})})];case 5:case 7:if(!k.sent())return r(),[2];return e=null,[3,12];case 6:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,8];return[4,new Promise(function(n){eI({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){eI(null),n(e)}})})];case 8:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,11];if(c=null==I?void 0:null===(a=I.manifest)||void 0===a?void 0:a.name,u=null==I?void 0:null===(l=I.manifest)||void 0===l?void 0:l.description,!(c&&c!==o.name||u&&u!==o.description))return[3,10];return[4,eT({variables:{extensionId:e,description:null!=u?u:void 0,name:null!=c?c:void 0}})];case 9:k.sent(),k.label=10;case 10:return[3,12];case 11:throw Error("Encountered an unknown error. Please contact support.");case 12:if(e)return[3,14];return Z("CreatingExtension"),[4,eE({name:null!==(m=null==I?void 0:null===(s=I.manifest)||void 0===s?void 0:s.name)&&void 0!==m?m:"My extension",description:null!==(y=null==I?void 0:null===(f=I.manifest)||void 0===f?void 0:f.description)&&void 0!==y?y:"My extension's description"})];case 13:if(null!==(b=k.sent()).error)return Z("CreatingExtensionError"),eg(b.error),[2];F(e=b.result.id),k.label=14;case 14:if(!e)throw Error("expected extension id to be set");return[4,(0,Sp.r)(d,t)];case 15:k.sent(),Z("Queued"),k.label=16;case 16:return k.trys.push([16,18,,19]),[4,ew({variables:{extensionId:e,replId:eC,outputDirectory:t,buildCommand:null!=C?C:""}})];case 17:return x=k.sent(),[3,19];case 18:if(w=k.sent(),Z("DeployError"),w.message.includes("received message larger than max"))return eZ("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return eZ(w.message),[2];case 19:if(x.errors)return Z("DeployError"),eZ("Internal error. Please contact support: "+x.errors.map(function(e){return e.message}).join(", ")),[2];if(!x.data)return Z("DeployError"),eZ("Encountered an unknown error. Please contact support."),[2];if("Extension"===(_=x.data.deployExtension2).__typename)return Z("Deploying"),v(),(0,eh.j)(eh.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),K(_),[2];if("message"in _)return Z("DeployError"),eZ(_.message),[2];return Z("DeployError"),eZ("Encountered an unknown error. Please contact support."),[2]}})}),[C,d,T,B,eC,p,Z,ew,h,eT,g,eE,F,v,I,eG,eR]),eP=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(x),eB=Sb.indexOf(eP);function eO(){return ee?"Build error: ".concat(ee):el?"Validation error: ".concat(el):el?"Create extension error: ".concat(ep):ex?"Deploy error: ".concat(ex):void 0}var eL=(0,x4.Mu)().find(function(e){return e.extensionId===g}),eM=(0,J._)((0,et.useState)(!1),2),eW=eM[0],ez=eM[1],eN=(0,x4.WF)(),eF=(0,et.useMemo)(function(){return eW?(0,$.tZ)(eX.Z,{}):eL?(0,$.tZ)(lx.Z,{}):(0,$.tZ)(p9.Z,{})},[eW,eL]),eV=(0,cX.F)().values.global,eH=(0,h5.$0)().fireBurst,ej=(0,J._)((0,et.useState)(!1),2),eY=ej[0],eq=ej[1],eK=(0,et.useRef)(null);if((0,et.useEffect)(function(){eK.current&&!eY&&"Success"===x&&(eH({x:eK.current.getBoundingClientRect().left,y:eK.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,h5.hd)(300,5e3)},size:function(){return{width:(0,h5.hd)(8,16),height:(0,h5.hd)(8,16)}},color:[eV.tealStronger,eV.blurpleStronger,eV.yellowStronger]}),eH({x:eK.current.getBoundingClientRect().right,y:eK.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,h5.hd)(300,5e3)},size:function(){return{width:(0,h5.hd)(8,16),height:(0,h5.hd)(8,16)}},color:[eV.blueStronger,eV.greenStronger,eV.pinkStronger]}),eq(!0))},[x,eV,eH,eY]),S===H.loading)return(0,$.tZ)(kw,{});if(S===H.fileReadError)return(0,$.tZ)(kD,{message:R.fileReadError});var eJ=I.manifest,e$=I.error;return e$?(0,$.tZ)(kk,{performPaneOperation:u,manifestPath:R.manifestPath,error:e$}):(0,$.BX)(eo.G,{css:[ea.l0.flex.column,ea.l0.display.flex,ea.l0.height("100%"),ea.l0.justify.center,ea.l0.align.center,ea.l0.position.relative],children:[(0,$.tZ)(eo.G,{css:[ea.l0.position.absolute,ea.l0.top(0),ea.l0.left(0),ea.l0.right(0)],className:"Confetti",innerRef:eK}),(0,$.BX)(eo.G,{css:[ea.l0.p(12),ea.l0.pt(16),ea.l0.colWithGap(24),ea.l0.flex.growAndShrink(1),ea.l0.width("100%"),ea.l0.maxWidth(kQ.Y)],children:["Success"!==x?(0,$.BX)($.HY,{children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16)],children:[(0,$.tZ)(eA.xv,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,$.tZ)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:Sb.map(function(e,n){return(0,$.BX)(et.Fragment,{children:[0!==n&&(0,$.tZ)(Sm,{}),(0,$.tZ)(Sg,{state:n<eB?j.Complete:n!==eB?j.Pending:["CreatingExtensionError","DeployError"].includes(x)?j.Error:j.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===x?(0,$.tZ)(eo.G,{css:[ea.l0.flex.column,ea.l0.colWithGap(8),ea.l0.width("100%")],children:(0,$.tZ)(kM,{manifest:eJ,updateManifest:G,onSubmit:function(e){G((0,ey._)({},eJ,e)),Z("Init")}})}):null,"Details"!==x?(0,$.BX)($.HY,{children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(Se.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Build settings"}),(0,$.tZ)(eo.G,{css:[ea.l0.flex.grow(1),ea.l0.border({color:ea.TV.backgroundHighest,direction:"y"})]})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(4)],children:[(0,$.BX)("label",{htmlFor:"buildCommand",css:[ea.l0.display.flex,ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,$.tZ)(cC.u,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,$.tZ)(ka.Z,{size:12})})]}),(0,$.tZ)(w1.II,{value:null!=C?C:"",onChange:function(e){return V(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==x&&Sy.includes(x)})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(4)],children:[(0,$.BX)("label",{htmlFor:"outputFolder",css:[ea.l0.display.flex,ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(eA.xv,{color:"dimmer",variant:"small",children:"Output folder"}),(0,$.tZ)(cC.u,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,$.tZ)(ka.Z,{size:12})})]}),(0,$.tZ)(w1.II,{id:"outputFolder",value:null!=T?T:"",disabled:"Init"!==x&&Sy.includes(x),onChange:function(e){D(e.currentTarget.value),f.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),P?(0,$.tZ)(eA.xv,{css:[ea.l0.color.accentNegativeStronger],children:P.message}):null]}),(0,$.tZ)(nf.zx,{text:"Init"===x||x.endsWith("Error")?"Deploy and Release":"Deployingâ€¦",iconLeft:"Init"===x||x.endsWith("Error")?(0,$.tZ)(vU.Z,{}):(0,$.tZ)(eX.Z,{}),onClick:eD,disabled:"Init"!==x&&Sy.includes(x),colorway:"primary"}),(0,$.BX)(eA.xv,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,$.tZ)("a",{href:rf.Gu.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),A.length>0?(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(k9.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Build logs"}),(0,$.tZ)(eo.G,{css:[ea.l0.flex.grow(1),ea.l0.border({color:ea.TV.backgroundHighest,direction:"y"})]})]}),eO()?(0,$.tZ)(eU.E,{text:eO(),colorway:"red",icon:(0,$.tZ)(kn.Z,{})}):null,(0,$.tZ)(eo.G,{css:[ea.l0.display.flex,ea.l0.py(12),ea.l0.pl(16),ea.l0.borderRadius(8),ea.l0.overflow("hidden"),{border:"1px solid var(--outline-dimmest)",backgroundColor:null==z?void 0:z.background}],children:(0,$.tZ)(eo.K.div,{css:[ea.l0.width("100%"),ea.l0.maxWidth("100%")],ref:W})})]}):null,eS?(0,$.BX)(e0.Tg,{elevated:!0,css:[ea.l0.colWithGap(8),ea.l0.p(8),ea.l0.borderRadius(8)],children:[(0,$.tZ)(eA.xv,{variant:"text",multiline:!0,maxLines:3,children:eS.message}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(4),ea.l0.align.center],children:[(0,$.tZ)(nf.zx,{text:"No",css:[ea.l0.flex.grow(1)],onClick:function(){return eS.callback(!1)}}),(0,$.tZ)(nf.zx,{text:"Yes",colorway:"primary",css:[ea.l0.flex.grow(1)],onClick:function(){return eS.callback(!0)}})]})]}):null]}):null]}):null,q&&"Success"===x?(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16)],children:[(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(4)],children:[(0,$.tZ)(eA.xv,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,$.tZ)(eo.G,{css:[ea.l0.py(8)],children:(0,$.tZ)(k6.m,{showMetadata:!1,extension:q,onClick:function(){u({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,Z0.T8)(q.id)}}})}})}),(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.align.center],children:[(0,$.tZ)(kH.Z,{}),(0,$.tZ)(eA.xv,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,$.tZ)(eo.G,{css:[ea.l0.flex.grow(1),ea.l0.border({color:ea.TV.backgroundHighest,direction:"y"})]})]}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.p(12),ea.l0.border({color:ea.TV.outlineDimmest}),ea.l0.borderRadius(8)],children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:"Install your Extension"}),(0,$.tZ)(eA.xv,{color:"dimmer",children:"Once installed, you can use the extension in any of your Repls."}),(0,$.tZ)(nf.zx,{text:eL?"Already installed":"Install Extension",colorway:eL?"green":"primary",disabled:eW||!!eL,iconLeft:eF,loading:eW,onClick:(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return ez(!0),[4,eN({extensionId:(0,Z0.T8)(q.id),replId:null})];case 1:return e.sent(),ez(!1),[2]}})})})]})]}):null]})]})}function SZ(e){var n=e.performPaneOperation,t=(0,J._)((0,et.useState)(0),2),r=t[0],i=t[1];return(0,$.tZ)(eo.G,{css:[ea.l0.flex.column,ea.l0.height("100%"),ea.l0.position.relative],children:(0,$.BX)(ke.mQ,{css:[ea.l0.flex.grow(1),ea.l0.flex.column,ea.l0.align.center,ea.l0.display.flex,ea.l0.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return i(e)},children:[(0,$.tZ)(e0.Tg,{css:[ea.l0.align.center,ea.l0.top(0),ea.l0.width("100%"),ea.l0.zIndex(1)],children:(0,$.BX)(ke.td,{css:[ea.l0.align.center,ea.l0.width("100%"),ea.l0.pb(0),ea.l0.maxWidth(kQ.Y)],children:[(0,$.tZ)(ke.OK,{css:[ea.l0.p(12),ea.l0.height("100%"),ea.l0.borderRadius(0)],iconLeft:(0,$.tZ)(hY.Z,{}),children:"Home"}),(0,$.tZ)(ke.OK,{css:[ea.l0.p(12),ea.l0.height("100%"),ea.l0.borderRadius(0)],iconLeft:(0,$.tZ)(kt.Z,{}),children:"Releases"}),(0,$.tZ)(ke.OK,{css:[ea.l0.p(12),ea.l0.height("100%"),ea.l0.borderRadius(0)],iconLeft:(0,$.tZ)(kn.Z,{}),children:"Logs"}),(0,$.tZ)(eo.G,{css:ea.l0.flex.grow(1)}),(0,$.tZ)(e0.Tg,{css:[ea.l0.p(8),{boxShadow:"inset 0 -1px 0 var(--outline-dimmest)"}],children:(0,$.tZ)(nf.zx,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:rf.TT.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,$.tZ)(h8.Z,{}),css:[ea.l0.display.inlineFlex]})})]})}),(0,$.BX)(ke.nP,{css:[ea.l0.flex.grow(1),ea.l0.align.center,ea.l0.justify.center,ea.l0.width("100%"),ea.l0.display.flex,ea.l0.overflow("hidden")],children:[(0,$.tZ)(ke.x4,{css:[ea.l0.height("100%"),ea.l0.p(12),ea.l0.maxWidth(kQ.Y),ea.l0.display.flex,ea.l0.width("100%"),ea.l0.justify.center,ea.l0.overflowY("scroll")],children:(0,$.tZ)(k$,{performPaneOperation:n,setSelectedTab:i})}),(0,$.tZ)(ke.x4,{css:[ea.l0.height("100%"),ea.l0.width("100%"),ea.l0.overflowY("scroll")],children:(0,$.tZ)(Sx,{performPaneOperation:n})}),(0,$.tZ)(ke.x4,{css:[ea.l0.height("100%"),ea.l0.width("100%")],children:(0,$.tZ)(k5,{})})]})]})})}var Sw=nJ.Dy.Object({type:nJ.Dy.Literal("extensionDevtools")}),SC={Content:function(e){var n=e.options.performPaneOperation;return(0,$.tZ)(SZ,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,$.tZ)(vE.Z,{size:n})},getTitle:function(){return"Extensions Devtools"},decode:function(e){return cF.B4.Decode(Sw,e)}},S_=t(81589),Sk=t(62686);function SS(e){var n=i4(iP),t=(0,x4.WF)(),r=(0,x4.LM)(),i=(0,x4.Mu)(),o=(0,et.useCallback)(function(t,r){if("cover"===t){if(null===r){o("store",null);return}n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,c,u=null!==(c=null===(l=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))||void 0===l?void 0:l.installationId)&&void 0!==c?c:null;return(0,$.tZ)(Sk.f,{existingInstallationId:u,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:(0,ev._)(function(){var n;return(0,em.Jh)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,Z0.Ad)(n.id)]}})}),uninstallExtension:(a=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})}),function(e){return a.apply(this,arguments)})})}return(0,$.tZ)(S_.Z,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var SI=nJ.Dy.Union([nJ.Dy.Object({page:nJ.Dy.Union([nJ.Dy.Literal("store"),nJ.Dy.Literal("manage")])}),nJ.Dy.Object({page:nJ.Dy.Literal("cover"),coverPageExtensionId:nJ.Dy.Unsafe(nJ.Dy.String())})]),SR=nJ.Dy.Object({type:nJ.Dy.Literal("extensionStore"),data:SI}),SG={Content:function(e){return(0,$.tZ)(SS,(0,ny._)((0,ey._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:e3.TV.yellowStronger,size:n},children:(0,$.tZ)(vE.Z,{})})},getTitle:function(){return"Extensions"},decode:function(e){return cF.B4.Decode(SR,e)}},SE=t(77865),ST=t(50761),SD=t(4723),SP=".lesson/".concat("instructions.md"),SB=(0,eO.X)({root:[ea.l0.width("100%"),ea.l0.height("100%"),ea.l0.overflow("auto"),ea.l0.backgroundColor.backgroundDefault,ea.l0.zIndex(2),ea.l0.position.relative],content:[ea.l0.maxWidth(840),ea.l0.py(32),ea.l0.px(16),(0,el._)({margin:"0 auto"},ea.BC.min("tabletMin"),[ea.l0.py(48),ea.l0.px(32)])]}),SU=function(e){var n=e.contents,t=(0,eu.Z)().fs,r=(0,ST.l)(t,SP);return(0,$.tZ)("div",{css:SB.root,children:(0,$.tZ)("div",{css:SB.content,children:(0,$.tZ)(SE.ZP,{components:{img:r},sourcePos:!0,children:n})})})},SA=function(){var e=(0,ef.Z)(),n=(0,eu.Z)().fs,t=(0,J._)((0,et.useState)(null),2),r=t[0],i=t[1],o=(0,lw.Z)().showError;return((0,et.useEffect)(function(){n.readFile(SP).then(function(e){if(e.error){e.error===iD.Df.NotFound?o("Instructions file not found. Please contact your instructor."):e.error===iD.Df.IsDirectory?o("Instructions file is misconfigured. Please contact your instructor."):uX.$e(function(n){n.setTag("instructions-viewer",!0),uX.Tb("Error loading instructions viewer: ".concat(e.error))});return}i(e.content.toString())})},[n,o,e]),null===r)?(0,$.tZ)(SD.Z,{}):(0,$.tZ)(SU,{contents:r})},SO=nJ.Dy.Object({type:nJ.Dy.Literal("instructions")}),SX={Content:function(){return(0,$.tZ)(SA,{})},Icon:function(e){var n=e.size;return(0,$.tZ)(h8.Z,{size:n})},getTitle:function(){return"Instructions"},decode:function(e){return cF.B4.Decode(SO,e)}},SL=t(12789),SM=t(61375),SW=t(83238);function Sz(){var e=(0,SL._)(),n=e.modules,t=e.addModule,r=e.removeModule,i=e.upgradeModule,o=(0,SW.Z)();return(0,$.BX)(ke.mQ,{css:[ea.l0.pb(8),ea.l0.pt(4)],children:[(0,$.BX)(ke.td,{withDividers:!1,children:[(0,$.tZ)(ke.OK,{iconLeft:(0,$.tZ)(kc.Z,{}),children:"Store"},1),(0,$.tZ)(ke.OK,{iconLeft:(0,$.tZ)(dF.Z,{}),children:"Installed"},2)]}),(0,$.BX)(ke.nP,{children:[(0,$.tZ)(ke.x4,{children:(0,$.tZ)(SN,{registry:o,modules:n,addModule:t})}),(0,$.tZ)(ke.x4,{children:(0,$.tZ)(SH,{modules:n,registry:o,removeModule:r,upgradeModule:i})})]})]})}function SN(e){var n,t=e.registry,r=e.modules,i=e.addModule,o=(0,J._)((0,et.useState)(!1),2),a=o[0],l=o[1],c=(0,et.useMemo)(function(){var e=new Set((null==r?void 0:r.map(function(e){return e.referencedId}))||[]);return((null==t?void 0:t.modules)||[]).filter(function(n){return!e.has(SV(n))}).sort(function(e,n){return e.name===n.name?0:e.name>n.name?1:-1})},[t,r]);return(0,$.BX)(eo.G,{css:[ea.l0.pt(8),ea.l0.px(8),ea.l0.colWithGap(8)],children:[t?(0,$.tZ)(eo.G,{css:ea.l0.colWithGap(4),children:c.map(function(e){var n=e.id;return(0,$.BX)(eo.G,{css:[ea.l0.align.start,(0,el._)({},ea.nC.min("mobileMin"),[ea.l0.rowWithGap(4),ea.l0.align.center])],children:[(0,$.BX)(eA.xv,{css:ea.l0.flex.shrink(1),children:[e.name," ",(0,$.BX)(eA.xv,{color:"dimmer",children:["v",e.version," ",e.description]})]}),(0,$.tZ)(SF,{}),(0,$.tZ)(nf.zx,{size:"small",variant:"nofill",text:"Install",css:[ea.l0.color.foregroundDimmer,ea.l0.hover(ea.l0.color.foregroundDefault)],onClick:function(){i(SV(e))}})]},n)})}):null,(0,$.tZ)(nf.zx,{text:"Add by source file",onClick:function(){l(!0)}}),(0,$.tZ)(e$.u,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,$.tZ)(x0.Z,{prompt:"Add module",desc:"What's the module file path?",placeholder:"path",type:"text",onCancel:function(){return l(!1)},onConfirm:(n=(0,ev._)(function(e){return(0,em.Jh)(this,function(n){switch(n.label){case 0:return[4,i(e)];case 1:return n.sent(),l(!1),[2]}})}),function(e){return n.apply(this,arguments)})})})]})}function SF(){return(0,$.tZ)(eo.G,{css:[ea.l0.height(1),ea.l0.flex.growAndShrink(1),(0,el._)({},ea.nC.min("mobileMax"),ea.l0.backgroundColor.outlineDimmest)]})}function SV(e){return"".concat(e.id,":").concat(e.tag)}function SH(e){var n=e.registry,t=e.modules,r=e.removeModule,i=e.upgradeModule;return t?(t.sort(function(e,n){return e.name===n.name?0:e.name>n.name?1:-1}),(0,$.tZ)(eo.G,{css:ea.l0.pt(4),children:t.map(function(e){return(0,$.tZ)(Sj,{removeModule:r,upgradeModule:i,moduleId:e.id,module:e,registry:n},e.id)})})):(0,$.tZ)(eo.G,{css:[ea.l0.p(8)],children:"Loading..."})}function Sj(e){var n=e.moduleId,t=e.module,r=e.removeModule,i=e.upgradeModule,o=e.registry,a=null==o?void 0:o.recommendUpgrade[t.resolvedId],l=(0,et.useMemo)(function(){if(!o)return null;var e=o.recommendUpgrade[t.resolvedId];if(!e)return null;var n=e.to.split(":")[0];return o.modules.find(function(e){return e.id===n})},[o,t.resolvedId]);return(0,$.tZ)(ho.Q,{round:!1,css:{":not(:first-of-type)":{borderTop:"1px solid "+ea.TV.outlineDimmest}},headerContent:function(e){var r=e.isExpanded;return(0,$.BX)(eo.G,{css:[ea.l0.flex.row,ea.l0.px(4),{"[aria-selected=true]":[ea.l0.fontWeight.medium]}],children:[t.name," ",t.version,!r&&a?(0,$.tZ)(SM.Z,{alt:"Upgrade available"}):null]},n)},children:(0,$.BX)(eo.G,{css:[ea.l0.rowWithGap(8),ea.l0.p(8),ea.l0.pt(4)],children:[(0,$.tZ)(SY,{module:t}),a?(0,$.tZ)(cC.u,{tooltip:a.changelog,children:(0,$.tZ)(nf.zx,{iconRight:(0,$.tZ)(SM.Z,{}),text:"Upgrade to ".concat(null==l?void 0:l.name," v").concat(null==l?void 0:l.version),onClick:function(){i(t.referencedId,a.to)}})}):null,(0,$.tZ)(cR.hU,{alt:"Remove module",onClick:(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,r(t.referencedId)];case 1:return e.sent(),[2]}})}),children:(0,$.tZ)(u6.Z,{})})]})})}function SY(e){var n=e.module;return(0,$.BX)("ul",{css:[ea.l0.colWithGap(2),{flex:1}],children:["resolve"===n.buildType?(0,$.tZ)(Sq,{label:"Registry ID",content:n.resolvedId},"resolvedId"):null,"build"===n.buildType?(0,$.tZ)(Sq,{label:"Built from",content:n.resolvedId},"buildType"):null,n.referencedId!==n.resolvedId?(0,$.tZ)(Sq,{label:"Originally installed version",content:n.referencedId},n.referencedId):null,n.runners.map(function(e){return(0,$.tZ)(Sq,{label:"Runner",content:e.name},e.id)}),n.debuggers.map(function(e){return(0,$.tZ)(Sq,{label:"Debugger",content:e.name},e.id)}),n.languageServers.map(function(e){return(0,$.tZ)(Sq,{label:"Language server",content:e.name},e.id)}),n.packagers.map(function(e){return(0,$.tZ)(Sq,{label:"Packager",content:e.name},e.id)})]})}function Sq(e){var n=e.key,t=e.label,r=e.content;return(0,$.BX)("li",{children:[(0,$.BX)(eA.xv,{color:"dimmer",children:[t,": "]}),(0,$.tZ)(eA.xv,{children:r})]},n)}var SK=nJ.Dy.Object({type:nJ.Dy.Literal("modules")}),SJ={Content:function(){return(0,$.tZ)(Sz,{})},Icon:function(e){var n=e.size;return(0,$.tZ)(Se.Z,{size:n})},getTitle:function(){return"Modules"},decode:function(e){return cF.B4.Decode(SK,e)}},S$=t(66586),SQ={Content:function(){var e,n,t,r,i,o,a,l,c,u,s,d,p,f=(n=(e=(0,J._)((0,et.useState)(!1),2))[0],t=e[1],r=(0,ef.Z)(),o=(i=(0,eu.Z)()).dotReplit,a=i.fs,l=i4(o6),c=(0,xB.T)(),u=(0,dz.Gn)("isLayoutStacked").preferences.isLayoutStacked,s=(0,vT.cR)(),d=i1(r_),p=function(){var e=(0,et.useContext)(ya.Z);if(!e)throw Error("Expected Repl info to be in context");return e.sourceReplId}(),{reset:(0,et.useCallback)((0,ev._)(function(){var e;return(0,em.Jh)(this,function(n){switch(n.label){case 0:return t(!0),[4,(0,ym.W)({fs:a,dotReplit:o})];case 1:return e=n.sent().entrypoint,t(!0),l({replId:r,isStacked:u,isHTML:c,isExtension:s,isInPopup:d,sourceReplId:null!=p?p:"",entrypoint:e}),[2]}})}),[a,o,l,r,u,c,s,p,d]),reseting:n});return(0,$.tZ)(eo.G,{css:[ea.l0.width("100%"),ea.l0.maxWidth(640),ea.l0.overflow("auto"),{marginRight:"auto",marginLeft:"auto"}],children:(0,$.tZ)(S$.Z,{resetLayout:f,css:[{backgroundColor:"transparent"}]})})},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:ea.TV.greyStrongest,size:n},children:(0,$.tZ)(dF.Z,{})})},getTitle:function(){return"User Settings"},decode:t(61117).J},S0=t(16098),S1=t(87137),S2=t(90188),S4=t(64546),S8="Import HTML package",S3=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() </script>'}]}],S5=[{title:S8,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"></script>'}]}],S6=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],S7="Import Node package",S9=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],Ie=[{title:S7,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],In=(0,eO.X)({root:[ea.l0.colWithGap(4)],toolTipContainer:[ea.l0.rowWithGap(4),ea.l0.align.center],templateContainer:[ea.l0.rowWithGap(4),ea.l0.justify.center,ea.l0.backgroundColor.backgroundRoot,ea.l0.borderRadius(4),ea.l0.p(4),ea.l0.align.center],contentContainer:[ea.l0.colWithGap(4)],input:[ea.l0.minWidth(64),ea.l0.flex.growAndShrink(1)],codeExampleContainer:[ea.l0.borderRadius(4),ea.l0.flex.shrink(1)],codeExampleText:[ea.l0.font.code,ea.l0.color.foregroundDimmer,ea.l0.py(4),ea.l0.flex.growAndShrink(1)]}),It=function(e){var n=e.title,t=e.content,r=(0,J._)((0,et.useState)(t),2),i=r[0],o=r[1];return(0,$.BX)(eo.G,{css:In.root,children:[(0,$.BX)(eo.G,{css:In.toolTipContainer,children:[(0,$.tZ)(eA.xv,{variant:"subheadDefault",children:n}),"Get user info"===n?(0,$.tZ)(cR.hU,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,$.tZ)(ka.Z,{})}):null]}),(0,$.BX)(eo.G,{css:In.contentContainer,children:[(0,$.tZ)(eo.G,{css:In.templateContainer,children:t.map(function(e,t){var r=e.type;switch(r){case"input":return(0,$.tZ)(w1.II,{onChange:function(e){var n=(0,ec._)(i);n[t].value=e.target.value,o(n)},placeholder:e.placeholder,value:e.value||"",css:In.input},"".concat(n,"-").concat(t));case"code":return(0,$.tZ)(eo.G,{css:In.codeExampleContainer,children:(0,$.tZ)(eA.xv,{multiline:!1,css:In.codeExampleText,children:e.value})},"".concat(n,"-").concat(t));default:(0,uY.Z)(r)}})}),(0,$.tZ)(Ir,{code:i.reduce(function(e,n){return"input"===n.type?e+(n.value||n.placeholder):e+n.value},""),packageImport:n===S7||n===S8})]})]})},Ir=function(e){var n=e.code,t=e.packageImport,r=(0,e2.R3)(),i=(0,S4.Z)(r),o=(0,eu.Z)().fs,a=(0,e2.Qt)();return i?(0,$.tZ)(e0.Tg,{children:(0,$.tZ)(nf.zx,{size:"small",variant:"outlined",onClick:function(){var e,l;if(t&&r&&o){if("html"!==(0,oG.r6)(r)){i({code:n,insertAt:0});return}o.readFile(r).then(function(e){if(e.error)throw e.error;var t=a7.Z.from(e.content).toString(),r=t.indexOf("</head>")-1;-1===r&&(r=t.indexOf("<script")),-1===r&&(r=t.indexOf("</body>")),-1===r&&(r=t.length),i({code:n,insertAt:r})});return}i({code:n,insertAt:null!==(l=null===(e=a())||void 0===e?void 0:e.position.offset)&&void 0!==l?l:0})},text:t?"Auto add":"Insert",iconRight:(0,$.tZ)(dV.Z,{}),css:{width:"fit-content"}})}):(0,$.tZ)(e0.Tg,{children:(0,$.tZ)(nf.zx,{size:"small",variant:"outlined",onClick:function(){return(0,d1.Z)(n)},text:"Copy",iconLeft:(0,$.tZ)(d$.Z,{}),css:{width:"fit-content"}})})},Ii=function(e){var n=e.examples;return(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(16)],children:n.map(function(e,n){return(0,$.tZ)(It,{title:e.title,content:e.content},n)})})},Io=function(e){var n=e.langKey;return(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8)],children:[" ","html"!==n&&(0,$.tZ)(Ii,{examples:S5}),(0,$.tZ)(Ii,{examples:S6})]})},Ia=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],Il=function(){return(0,$.tZ)($.HY,{children:(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(16)],children:Ia.map(function(e,n){return(0,$.tZ)(It,{title:e.title,content:e.content},n)})})})},Ic=function(e){var n=e.langKey,t=(0,$.tZ)(Il,{});switch(n){case"html":t=(0,$.tZ)(Ii,{examples:S3});break;case"nodejs":t=(0,$.tZ)(Ii,{examples:S9})}return(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8)],children:t})},Iu=function(e){var n=e.langKey,t=null;switch(n){case"html":t=S5;break;case"nodejs":t=Ie}return t?(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8)],children:(0,$.tZ)(Ii,{examples:t})}):null};function Is(){var e=(0,eb._)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return Is=function(){return e},e}var Id={},Ip=(0,ex.Ps)(Is()),If=(0,eO.X)({root:[ea.l0.colWithGap(16),ea.l0.py(48),ea.l0.px(24)],rootContents:[ea.l0.colWithGap(16),ea.l0.overflow("auto"),ea.l0.width("100%")],link:[ea.l0.color.accentPrimaryStronger,ea.l0.cursor.pointer],errorContainer:[ea.l0.textAlign.center,ea.l0.colWithGap(4)],mainContent:[ea.l0.colWithGap(24)],usageSectionTitle:[ea.l0.colWithGap(2)],usageSection:[ea.l0.colWithGap(8)],usageSectionTitleText:[{color:ea.TV.foregroundDimmest,textTransform:"uppercase",fontWeight:ea.TV.fontWeightMedium}],divider:[ea.l0.backgroundColor.outlineDimmer],usageExamples:[ea.l0.colWithGap(12)]});function Ih(){var e,n,t,r,i,o=(0,ef.Z)(),a=(0,eu.Z)(),l=a.dotReplit,c=a.fs,u=(0,e2.R3)(),s=u?(0,oG.r6)(u):null,d=(0,S2.I)().configs,p=(0,J._)((0,et.useState)(!1),2),f=p[0],h=p[1],v=(0,J._)((0,et.useState)(!1),2),m=v[0],g=v[1],y=(0,J._)((0,et.useState)(!0),2),b=y[0],x=y[1],Z=(0,J._)((0,et.useState)(!0),2),w=Z[0],C=Z[1],_=(0,J._)((0,et.useState)(),2),k=_[0],S=_[1],I=(0,J._)((0,et.useState)(""),2),R=I[0],G=I[1],E=(e=(0,ey._)({},Id,{variables:{replID:o}}),ew.a(Ip,e)),T=E.data,D=E.error,P=E.loading,B=(null==T?void 0:T.repl.__typename)==="Repl"&&(null==T?void 0:null===(t=T.repl)||void 0===t?void 0:null===(n=t.config)||void 0===n?void 0:n.isServer),U=null!==(i=null==T?void 0:null===(r=T.currentUser)||void 0===r?void 0:r.isLoggedIn)&&void 0!==i&&i,A=f||m,O=(0,et.useCallback)((0,ev._)(function(){var e,n,t,r,i;return(0,em.Jh)(this,function(o){switch(o.label){case 0:S(void 0),x(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,l.getConfig({bypassCache:!0})];case 2:switch((i=o.sent()).error){case S1.Yt.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case S1.Yt.Disconnected:throw Error("Disconnected, cannot read .replit file.");case S1.Yt.NotFound:return C(!1),[2]}return h(!!(null==i?void 0:null===(n=i.config)||void 0===n?void 0:null===(e=n.auth)||void 0===e?void 0:e.buttonEnabled)),g(!!(null==i?void 0:null===(r=i.config)||void 0===r?void 0:null===(t=r.auth)||void 0===t?void 0:t.pageEnabled)),[3,5];case 3:return S(o.sent().message),[3,5];case 4:return x(!1),[7];case 5:return[2]}})}),[l,S,x,C,h,g]);(0,et.useEffect)(function(){var e;(e=(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:if(!c)return[2];return[4,O()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[c,O]),(0,et.useEffect)(function(){if(c){var e=c.watchTextFile(yx.l,{onChange:(0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,O()];case 1:return e.sent(),[2]}})})});return function(){e(),g(!1),h(!1),x(!1)}}},[c,g,O]),(0,et.useEffect)(function(){if(d.find(function(e){return"react"===e.language})||"jsx"===s||"tsx"===s){G("react");return}d.length>0&&G(d[0].language)},[s,R,G,d]);var X=(0,et.useCallback)((0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return x(!0),(0,eh.j)(eh.U3.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,l.updateDotReplit([(0,yZ.$0)(!0),(0,yZ.Jk)(!1)])];case 1:return e.sent().error&&(S("Couldn't enable login page, please try again"),x(!1)),[2]}})}),[x,l,S]),L=(0,et.useCallback)((0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return x(!0),(0,eh.j)(eh.U3.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,l.updateDotReplit([(0,yZ.$0)(!1),(0,yZ.Jk)(!0)])];case 1:return e.sent().error&&(S("Couldn't enable login button, please try again"),x(!1)),[2]}})}),[x,l,S]),M=(0,et.useCallback)((0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return x(!0),(0,eh.j)(eh.U3.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,l.updateDotReplit([(0,yZ.$0)(!1),(0,yZ.Jk)(!1)])];case 1:return e.sent().error&&(S("Couldn't disable Log in with Replit, please try again"),x(!1)),[2]}})}),[x,l,S]),W=(0,et.useMemo)(function(){return U?w?D?(0,$.tZ)(eo.G,{css:If.errorContainer,children:(0,$.tZ)(eU.E,{colorway:"warning",text:"An error ocurred retrieving auth for this Repl. Please try again later."})}):"html"===R||B?A?(0,$.BX)(eo.G,{css:If.mainContent,children:[(0,$.BX)(eo.G,{children:["nodejs"===R&&f?null:(0,$.tZ)(Iu,{langKey:R}),f?(0,$.tZ)(Io,{langKey:R}):null]}),(0,$.BX)(eo.G,{css:If.usageSection,children:[(0,$.BX)(eo.G,{css:If.usageSectionTitle,children:[(0,$.tZ)(eA.xv,{multiline:!1,variant:"small",css:If.usageSectionTitleText,children:"Usage"}),(0,$.tZ)(cU.R,{css:If.divider})]}),(0,$.tZ)(eo.G,{children:(0,$.BX)(eo.G,{css:If.usageExamples,children:[" ","nodejs"===R&&f?(0,$.tZ)(Iu,{langKey:R}):null,(0,$.tZ)(Ic,{langKey:R})]})})]}),(0,$.tZ)(nf.zx,{onClick:M,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:b||P})]}):(0,$.BX)(eo.G,{css:ea.l0.colWithGap(8),children:[(0,$.tZ)(nf.zx,{colorway:"primary",onClick:X,text:"Enable Login Page",loading:b||P,disabled:!!k,iconLeft:(0,$.tZ)(S0.Z,{})}),(0,$.BX)(eA.xv,{css:ea.l0.textAlign.center,variant:"small",children:["Automatically redirect users to a prebuilt login page"," ",(0,$.tZ)("span",{onClick:L,css:If.link,onKeyDown:L,role:"button",tabIndex:0,children:"or use your own custom button."})]})]}):(0,$.tZ)(eo.G,{css:If.errorContainer,children:(0,$.tZ)(eU.E,{colorway:"warning",text:"Please start your web app to use Log in with Replit"})}):(0,$.BX)(eo.G,{css:If.errorContainer,children:[(0,$.tZ)(eU.E,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,$.tZ)(eA.xv,{children:(0,$.tZ)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,$.tZ)(eo.G,{css:If.errorContainer,children:(0,$.tZ)(Iv,{})})},[b,P,w,R,f,k,D,M,L,X,A,U,B]);return(0,$.BX)(eo.G,{css:If.root,children:[(0,$.tZ)(eA.h4,{level:2,variant:"subheadBig",children:"Log in with Replit"}),(0,$.BX)(eo.G,{css:If.rootContents,children:[(0,$.tZ)(function(){var e="html"===R||"nodejs"===R,n=(0,$.tZ)(eA.xv,{color:"dimmer",children:"You can use Log in with Replit with all web Repls. We have language clients for Nodejs and HTML - switch to a Repl that uses that language to see how to use it."});return f?(0,$.BX)($.HY,{children:[(0,$.BX)(eA.xv,{color:"dimmer",children:["Your users can log in to your Repl using a custom button. Start by importing the package below"," ",(0,$.BX)("span",{onClick:X,css:If.link,onKeyDown:X,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),!e&&n]}):m?(0,$.BX)($.HY,{children:[(0,$.BX)(eA.xv,{color:"dimmer",children:["Your Repl will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,$.BX)("span",{onClick:L,css:If.link,onKeyDown:L,role:"button",tabIndex:0,children:[" ","or use your own custom button."]})]})," ",!e&&n]}):(0,$.BX)(eA.xv,{children:["Let users log in to your Repl. Use a prebuilt login page or customize your own button."," ",(0,$.tZ)("a",{href:"https://docs.replit.com/additional-resources/repl-auth-sidebar",target:"_blank",rel:"noopener",css:If.link,children:"Learn more"})]})},{}),W,k?(0,$.tZ)(eU.E,{text:k,colorway:A?void 0:"warning",icon:(0,$.tZ)(cP.Z,{})}):null]})]})}var Iv=function(){return(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(16)],children:[(0,$.BX)(eA.xv,{children:[(0,$.tZ)("a",{href:"https://docs.replit.com/additional-resources/repl-auth-sidebar",target:"_blank",rel:"noopener",css:If.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your Repl. Try it out by logging in or signing up."]}),(0,$.tZ)(vn.Z,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,$.tZ)(lg.Z,{})})]})},Im=nJ.Dy.Object({type:nJ.Dy.Literal("replAuth")}),Ig={Content:function(){return(0,$.tZ)(eo.G,{css:[ea.l0.height("100%"),ea.l0.overflowY("auto"),nF.F3],children:(0,$.tZ)(Ih,{})})},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:ea.TV.orangeStrongest,size:n},children:(0,$.tZ)(S0.Z,{})})},getTitle:function(){return"Authentication"},decode:function(e){return cF.B4.Decode(Im,e)}},Iy=nJ.Dy.Object({type:nJ.Dy.Literal("searchReplace"),data:nJ.Dy.Optional(nJ.Dy.Object({initialQuery:nJ.Dy.Optional(nJ.Dy.String()),initialReplacement:nJ.Dy.Optional(nJ.Dy.String()),initialIncludeGlob:nJ.Dy.Optional(nJ.Dy.String()),initialExcludeGlob:nJ.Dy.Optional(nJ.Dy.String())}))}),Ib={getTitle:function(e){var n,t=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},Icon:function(e){var n=e.size;return(0,$.tZ)(le.Z,{size:n})},Content:function(e){var n=e.pane,t=e.options;return(0,$.tZ)(IZ,{paneData:(null==n?void 0:n.data)||{},paneId:t.paneId,isActive:t.isActive,performPaneOperation:t.performPaneOperation})},decode:function(e){return cF.B4.Decode(Iy,e)}},Ix=(0,eO.X)({wrapper:[ea.l0.pt(6),ea.l0.height("100%"),ea.l0.width("100%")]});function IZ(e){var n=e.paneData,t=e.paneId,r=e.isActive,i=e.performPaneOperation,o=(0,et.useRef)(null),a=(0,et.useCallback)(function(){var e,n;null===(e=o.current)||void 0===e||e.select(),null===(n=o.current)||void 0===n||n.focus()},[]);(0,a6.L5)(function(){return{type:"searchReplace",focusSearchInput:a}},[a]),(0,a6.Wk)(function(){return{focus:a}},[a]);var l=(0,et.useCallback)(function(e){i({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[i]),c=(0,et.useCallback)(function(){i({operation:"commit"}),i({operation:"open",pane:{type:"searchReplace"}})},[i]),u=(0,et.useCallback)(function(e,n){i({operation:"replace",pane:{type:"searchReplace",data:(0,ey._)({},e,n)}})},[i]),s=aF().openCodeSearch,d=(0,et.useCallback)(function(e){s({initialQuery:e.query,initialReplacement:e.replacement,initialIncludeGlob:e.includeGlob,initialExcludeGlob:e.excludeGlob}),i({operation:"remove",pane:{id:t}})},[s,i,t]);return(0,$.tZ)(eo.G,{css:Ix.wrapper,children:(0,$.tZ)(hX,(0,ny._)((0,ey._)({},n),{isActive:r,searchInputRef:o,onFileLineClicked:l,onOpenSearchPane:c,onDataChanged:u,onMove:d,moveDestination:"sidebar",searchResultBackgroundColor:ea.TV.backgroundDefault}))})}var Iw=nJ.Dy.Object({type:nJ.Dy.Literal("threadInbox")}),IC={Content:function(e){var n=e.options;return(0,$.tZ)(Cz,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:ea.TV.blueStronger,size:n},children:(0,$.tZ)(Cn.Z,{})})},getTitle:function(){return"Threads"},decode:function(e){return cF.B4.Decode(Iw,e)}},I_=t(81941),Ik=t(22978),IS=t(92468),II=t(64510);function IR(){var e,n,t,r,i=(0,eu.Z)().fs,o=(e=i1(ao),n=i1(al),t=i4(au),n||!e?null:t),a=(0,ly.Do)(lm.y.Sidepane),l=(0,J._)((0,et.useState)([]),2),c=l[0],u=l[1],s=(0,J._)((0,et.useState)("LOADING"),2),d=s[0],p=s[1],f=(0,ef.Z)(),h=(0,J._)((0,IS.Z)("tutorialProgress--".concat(f),0),2),v=h[0],m=h[1],g=(0,J._)((0,et.useState)(!1),2),y=g[0],b=g[1],x=(0,et.useRef)(null),Z=(0,eg.d)(),w=Z?Z.toString():"",C=(0,e2.Qt)(),_=(0,e2.R3)(),k=(0,S4.Z)(_),S=(0,nO.Z)(function(){return k?function(e){var n,t;return k({code:e,insertAt:null!==(t=null===(n=C())||void 0===n?void 0:n.position.offset)&&void 0!==t?t:"end"})}:void 0},[k,C]),I=(0,Ik.jJ)(w,f),R=I?(0,$.tZ)(Ik.gC,{challenge:I}):null,G=(0,et.useCallback)(function(){x.current&&(x.current.scrollTop=0)},[x]);return((0,et.useEffect)(function(){var e,n=!1;return(e=(0,ev._)(function(){var e,t,r,o,a,l,c,s,d,f,h,v,m,g;return(0,em.Jh)(this,function(y){switch(y.label){case 0:return p("LOADING"),[4,i.readDir(sM.V)];case 1:if(e=y.sent(),n)return[2];if(e.error)return p("ERROR"),[2];return t=[],[4,Promise.all(e.children.filter(function(e){return e.type===iD.Tv.File&&I_.c.includes((0,oG.r6)(e.filename))}).map(function(e){var n="".concat(sM.V,"/").concat(e.filename);return Promise.all([n,i.readFile(n)])}))];case 2:if(r=y.sent(),n)return[2];o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)f=(d=(0,J._)(s.value,2))[0],(h=d[1]).error?p("ERROR"):(m=h.content.toString(),g=RegExp("^#\\s(?<title>.*)").exec(m),t.push({title:null==g?void 0:null===(v=g.groups)||void 0===v?void 0:v.title,content:m,path:f}))}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return u(t),p("READY"),[2]}})}),function(){return e.apply(this,arguments)})(),function(){n=!0}},[i]),(0,et.useEffect)(function(){c[v]||m(0)},[v,m,c]),"LOADING"===d)?(0,$.tZ)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.center],children:(0,$.tZ)(eX.Z,{})}):"ERROR"===d?(0,$.tZ)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.center],children:(0,$.BX)(eo.G,{css:[ea.l0.center,ea.l0.colWithGap(4)],children:[(0,$.tZ)(cE.Z,{color:ea.TV.accentNegativeDefault}),(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===c.length?(0,$.tZ)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.center],children:(0,$.BX)(eo.G,{css:[ea.l0.center,ea.l0.colWithGap(4)],children:[(0,$.tZ)(cE.Z,{color:ea.TV.accentNegativeDefault}),(0,$.tZ)(eA.xv,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):y?(0,$.BX)(eo.G,{css:[ea.l0.overflowY("scroll"),ea.l0.flex.growAndShrink(1),ea.l0.p(8),ea.l0.colWithGap(16)],children:[(0,$.tZ)(eA.xv,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,$.tZ)(eo.G,{css:[ea.l0.flex.growAndShrink(1),ea.l0.colWithGap(8)],children:c.map(function(e,n){return(0,$.BX)(eo.G,{css:[ea.l0.p(8),v===n?ea.l0.backgroundColor.backgroundHighest:ea.l0.backgroundColor.backgroundHigher,ea.l0.borderRadius(4),ea.l0.rowWithGap(8),ea.l0.align.center,ea.l0.cursor.pointer,v===n?{outline:"solid 2px var(--outline-dimmest)"}:{},{":hover":{outline:"solid 2px var(--outline-dimmest)"}}],onClick:function(){m(n),b(!1)},children:[(0,$.tZ)(eo.G,{css:[ea.l0.backgroundColor.backgroundHighest,ea.l0.width(20),ea.l0.height(20),ea.l0.borderRadius("full"),ea.l0.center,{outline:"solid 1px var(--outline-dimmest)"}],children:(0,$.tZ)(eA.xv,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,$.tZ)(eA.xv,{css:[ea.l0.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,$.tZ)(eo.G,{innerRef:a,css:[ea.l0.height("100%")],children:(0,$.BX)(eo.G,{dataCy:"tutorial-viewer-content",innerRef:x,css:[ea.l0.overflowY("scroll"),ea.l0.flex.growAndShrink(1),ea.l0.p(16),ea.l0.pb(48),ea.l0.colWithGap(16)],children:[o?(0,$.tZ)(nf.zx,{text:"Show tutorial video",iconLeft:(0,$.tZ)(db.Z,{}),onClick:function(){return o()}}):null,R,c.length>1&&(0,$.tZ)(nf.zx,{text:"Table of Contents",iconLeft:(0,$.tZ)(k9.Z,{}),onClick:function(){return b(!0)}}),(0,$.tZ)(II.Z,{fs:i,path:c[v].path,source:c[v].content,sourcePos:!1,onCodeInsert:S}),c.length>1&&(0,$.BX)(eo.G,{css:[ea.l0.position.absolute,ea.l0.width("100%"),ea.l0.left(0),ea.l0.bottom(0),ea.l0.overflow("hidden")],children:[(0,$.tZ)(IG,{progress:(v+1)/c.length}),(0,$.BX)(eo.G,{css:[ea.l0.width("100%"),ea.l0.height(40),ea.l0.align.center,ea.l0.flex.row],children:[(0,$.tZ)(eo.G,{tag:"button",css:[ea.l0.justify.center,ea.l0.p(8),ea.l0.backgroundColor.backgroundHigher,ea.l0.cursor.pointer,ea.l0.width(40),ea.l0.height("100%")],onClick:function(){v>0&&(m(function(e){return e-1}),G())},children:v>0&&(0,$.tZ)(C8.Z,{size:24})}),(0,$.tZ)(eo.G,{tag:"button",css:[ea.l0.rowWithGap(8),ea.l0.flex.growAndShrink(1),ea.l0.height("100%"),ea.l0.justify.spaceBetween,ea.l0.backgroundColor.backgroundHighest,ea.l0.align.center,ea.l0.p(8),ea.l0.cursor.pointer,{userSelect:"none"}],onClick:function(){v<c.length-1&&(m(function(e){return e+1}),G())},children:v<c.length-1&&(0,$.BX)($.HY,{children:[(0,$.BX)(eA.xv,{multiline:!1,css:[ea.l0.flex.growAndShrink(1),ea.l0.textAlign.left,ea.l0.fontSize(ea.TV.fontSizeSubheadDefault)],children:[(0,$.BX)("span",{css:[ea.l0.color.foregroundDimmer],children:["Next",c[v+1].title?": ":" page"]}),(0,$.tZ)("b",{children:null!==(r=c[v+1].title)&&void 0!==r?r:""})]}),(0,$.tZ)(s4.Z,{size:24})]})})]})]})]})})}(_=K||(K={})).Ready="READY",_.Loading="LOADING",_.Error="ERROR";var IG=function(e){var n=e.progress;return(0,$.tZ)(cC.u,{tooltip:"Progress: ".concat(Math.round(1e3*n)/10,"%"),children:(0,$.tZ)(eo.G,{css:[ea.l0.width("100%"),ea.l0.height(4),ea.l0.backgroundColor.backgroundHigher],children:(0,$.tZ)(eo.G,{css:[ea.l0.width("".concat(100*n,"%")),ea.l0.height("100%"),ea.l0.backgroundColor.purpleDefault]})})})},IE=nJ.Dy.Object({type:nJ.Dy.Literal("tutorial")}),IT={Content:function(){return(0,$.tZ)(IR,{})},Icon:function(e){var n=e.size;return(0,$.tZ)(h8.Z,{size:n})},getTitle:function(){return"Tutorial"},decode:function(e){return cF.B4.Decode(IE,e)}},ID=["youtube.com","vimeo.com","wistia.com","sadanandpai.github.io"],IP=function(e){try{var n=new URL(e).hostname;return ID.some(function(e){return n===e||n.endsWith("."+e)})}catch(e){return!1}},IB=nJ.Dy.Object({type:nJ.Dy.Literal("videoPlayer"),data:nJ.Dy.Object({embedUrl:nJ.Dy.String(),title:nJ.Dy.String()})}),IU={Content:function(e){var n=e.pane.data;return(0,$.tZ)(IA,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,$.tZ)(db.Z,{size:n})},getTitle:function(e){return e.data.title},decode:function(e){return cF.B4.Decode(IB,e)}};function IA(e){return IP(e.embedUrl)?(0,$.tZ)("iframe",{title:e.title,src:e.embedUrl,frameBorder:"0",css:[ea.l0.coverContainer,ea.l0.borderRadius(0,0,8,8)]}):(0,$.BX)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,$.tZ)("a",{href:rf.xz,target:"_blank",children:"Request more formats here."})]})}var IO=t(37546),IX=t(48058),IL=t(67689),IM=t(51500),IW=t(95751),Iz={Content:function(e){var n=e.pane.data,t=e.options,r=t.paneId,i=t.performPaneOperation,o=(0,eu.Z)(),a=o.container,l=o.runner,c=i4(iB),u=(0,J._)((0,et.useState)(function(){return function(){}}),2),s=u[0],d=u[1],p=(0,IX.bg)();(0,IM.Z)({container:a,runner:l,refreshWebView:s}),(0,IW.Z)({runner:l,refreshWebView:s}),(0,a6.L5)(function(){return{type:"webview",refresh:s}},[s]);var f=(0,nU.gf)(d2.webviewRefresh.id);lf({match:nH.pl,data:{type:"action",label:"Refresh",icon:(0,$.tZ)(IO.Z,{}),description:d2.webviewRefresh.name,keyboardShortcut:f,run:function(){c(r),s()}}});var h=(0,ly.Do)(lm.y.Output),v=(0,xB.T)();return(0,$.tZ)(IL.e,{initialPort:(0,IL.C)(n,p),initialPath:null==n?void 0:n.path,containerRef:v?h:void 0,openPane:function(e){i({operation:"open",pane:e})},openNetworkingTool:function(){i({operation:"open",secondary:!0,pane:{type:"networking"}})},setRefreshCb:d})},Icon:function(e){var n=e.size;return(0,$.tZ)(w0.Pd.Provider,{value:{color:e3.TV.foregroundDimmer,size:n},children:(0,$.tZ)(dk.Z,{})})},getTitle:function(){return"Webview"},decode:t(36214).J},IN=t(5142),IF=t(46180),IV=t(27526),IH=t(52623),Ij=t(67883),IY=t(6949),Iq=(0,eO.X)({root:[ea.l0.position.absolute,ea.l0.borderRadius(8),ea.l0.backgroundColor.backgroundRoot,ea.l0.pt(16),ea.l0.align.center,{border:"1px solid",borderColor:ea.TV.outlineDimmest}],content:[ea.l0.width("100%"),ea.l0.flex.growAndShrink(1),{"& > div > label + div":[ea.l0.maxWidth(600),ea.l0.width("100%"),{alignSelf:"center"}],'& [role="listbox"] > div':[ea.l0.align.center],'& [role="listbox"] > div > div':[ea.l0.maxWidth("calc(".concat(600,"px - ").concat(ea.TV.space16,")")),ea.l0.width("100%")],'& [role="option"] > div':[ea.l0.borderRadius(8)]}]});function IK(){var e,n,t,r,i,o=i1(op),a=i1(r_),l=i4(iI),c=(t=(n=(0,J._)((0,mr.L)({accept:[iD.Tv.File,pp.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){i.drag()},drop:function(e){if("nodes"===e.type){var n=(0,nF.ME)(e.nodes);n.length>0&&i.drop({panes:n})}if(e.type===pp.z.NewPane){var t=e.pane;i.drop({panes:[t]})}}}),2))[0].isOver,r=n[1],i=(e=i4(i5),(0,et.useEffect)(function(){t||e(null)},[t,e]),{drag:i4(os),drop:i4(od)}),r),u=lc({openPane:(0,et.useCallback)(function(e){(0,eh.j)(eh.U3.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),l({pane:e.pane,edge:"left"})},[l])});return(0,$.tZ)(eo.G,{style:{width:o.width,height:o.height,transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),zIndex:a?100:void 0},css:Iq.root,innerRef:c,children:(0,$.tZ)(eo.G,{css:Iq.content,children:(0,$.tZ)(nB.X,{autoFocus:!0,command:u})})})}var IJ=nJ.Dy.Number({minimum:0,exclusiveMaximum:100}),I$=nJ.Dy.Object({sidebarPercent:nJ.Dy.Optional(IJ),layout:n5,data:nJ.Dy.Record(nJ.Dy.String(),nJ.Dy.Object({type:nJ.Dy.String()}))});function IQ(e,n){var t=null;try{t=cF.B4.Decode(I$,e)}catch(e){}if(null===t)return null;var r={layout:t.layout,data:{},type:"saved",sidebarPercent:null!==(u=t.sidebarPercent)&&void 0!==u?u:15},i=new Set,o=new Set,a=!0,l=!1,c=void 0;try{for(var u,s,d=Object.entries(t.data)[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var p=(0,J._)(s.value,2),f=p[0],h=p[1];if(!to(r.layout,f)){o.add(f);continue}var v=n(h.type,h);if(!v){i.add(f);continue}r.data[f]=v}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return(0,tX.Uy)(r,function(e){var n=!0,t=!1,r=void 0;try{for(var o,a=i[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;tg(e.layout,l)}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}var c=!0,u=!1,s=void 0;try{for(var d,p=Object.entries(e.data)[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,J._)(d.value,2),h=f[0],v=f[1];"commands"!==v.type&&("codeEditor"!==v.type||v.data.path)||(delete e.data[h],tg(e.layout,h))}}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}})}var I0=t(63466),I1=t(68883),I2=t(18317),I4=t(99189),I8=t(70379);function I3(){var e=(0,e8.useRouter)(),n=(0,eH.S7)(e,"mobileBridge"),t=aF().toggle,r=(0,eu.Z)().runner,i=(0,lb.L7)(r),o=(0,I0.Z)(),a=o.isSaving,l=o.isOffline,c=(0,et.useRef)(null),u=(0,I1.T)(),s=aB(),d=ld(),p=(0,et.useCallback)((0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:if(i!==sv.Ah.IDLE)return[3,2];return[4,r.run()];case 1:return e.sent(),[2];case 2:return i===sv.Ah.RUNNING&&r.stopRun(),[2]}})}),[i,r]),f=(0,et.useCallback)(function(e){var n=function(e){switch(e){case I2.Of.OPEN_FILETREE:t();break;case I2.Of.TOGGLE_RUN_STATE:p();break;case I2.Of.TOGGLE_ALLPANES:d();break;case I2.Of.OPEN_NEW_PANE:case I2.Of.TOGGLE_DRAWER:break;default:(0,uY.Z)(e)}},r=function(e){u(e)},i=function(e){var n=e.type,t=e.messageId;try{s({pane:{type:n}})}catch(e){(0,I4.pl)(t)}};(0,I4.x6)(e,function(e){var t=e.type;switch(t){case I2.cF.SET_KEYBOARD_STATE:r(e.keyboardState);break;case I2.cF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case I2.cF.WORKSPACE_REQUEST_OPEN_PANE:i({messageId:e.id,type:e.paneType});break;default:(0,uY.Z)(t)}})},[t,p,u,s,d]);return(0,et.useEffect)(function(){if(n){var e=(0,I8.Q1)({isDrawerOpen:!1,isShowingAllPanes:!1,isSaving:a,isOffline:l,runState:i,activePaneType:null,activePaneFilePath:null}),t=c.current;return(null==t||JSON.stringify(e)!==JSON.stringify(t))&&((0,I8.H$)({payload:e}),c.current=e),window.addEventListener("message",f),function(){window.removeEventListener("message",f)}}},[n,f,i,a,l,c]),null}function I5(e){var n=e.src,t=e.autoPlay,r=e.loop,i=e.width;return(0,$.tZ)(eo.G,{css:[ea.l0.p(4),ea.l0.borderRadius(8),ea.l0.width(void 0===i?280:i),ea.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(ea.TV.outlineDimmest)}],children:(0,$.tZ)("video",{style:{width:"100%"},css:ea.l0.borderRadius(8),src:n,autoPlay:void 0===t||t,loop:void 0===r||r,playsInline:!0,muted:!0})})}var I6=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},I7={id:"workspace-desktop-new-user-tour",steps:[{id:lm.y.Welcome,isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,$.tZ)(eo.G,{"data-cy":"workspace-tour-welcome",css:[ea.l0.maxWidth(400)],children:(0,$.BX)(eA.xv,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,$.tZ)("strong",{children:"Repls."}),(0,$.tZ)("br",{}),"Let's explore around!"]})})}},{id:lm.y.Editor,title:"Code Editor",content:function(){return(0,$.BX)(eo.G,{css:[ea.l0.width("100%"),ea.l0.center,ea.l0.position.relative],children:[(0,$.tZ)(I5,{src:I6("editor"),autoPlay:!0,loop:!0}),(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.width("100%"),ea.l0.py(8)],children:(0,$.tZ)(eA.xv,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:lm.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:lm.y.Run,title:"Run Button",content:function(){return(0,$.BX)(eo.G,{css:[ea.l0.width("100%"),ea.l0.center,ea.l0.position.relative],children:[(0,$.tZ)(I5,{src:I6("run-button"),autoPlay:!0,loop:!0}),(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.width("100%"),ea.l0.py(8)],children:(0,$.tZ)(eA.xv,{children:"Tap the Run button to â€œrunâ€ your code and see its output."})})]})}},{id:lm.y.Output,title:"Output",content:function(){return(0,$.BX)(eo.G,{css:[ea.l0.width("100%"),ea.l0.center,ea.l0.position.relative],children:[(0,$.tZ)(I5,{src:I6("output"),autoPlay:!0,loop:!0}),(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.width("100%"),ea.l0.py(8)],children:(0,$.tZ)(eA.xv,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template youâ€™re using."})})]})}},{id:lm.y.Sidepane,title:"Sidebar",content:function(){return(0,$.BX)(eo.G,{css:[ea.l0.width("100%"),ea.l0.center,ea.l0.position.relative],children:[(0,$.tZ)(I5,{src:I6("sidebar"),autoPlay:!0,loop:!0}),(0,$.BX)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.width("100%"),ea.l0.p(8)],children:[(0,$.BX)(eA.xv,{children:[(0,$.tZ)("strong",{children:"Files"})," is where all of your Replâ€™s code is."]}),(0,$.BX)(eA.xv,{children:[(0,$.tZ)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,$.tZ)(eA.xv,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:lm.y.Share,title:"Invite & Collaborate",content:function(){return(0,$.BX)(eo.G,{css:[ea.l0.width("100%"),ea.l0.center,ea.l0.position.relative],children:[(0,$.tZ)(I5,{src:I6("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,$.tZ)(eo.G,{css:[ea.l0.colWithGap(8),ea.l0.width("100%"),ea.l0.py(8)],children:(0,$.tZ)(eA.xv,{children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]};function I9(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,$.tZ)($.HY,{children:n});var i="workspace-desktop-new-user-tour"===t.id;function o(e){i&&t&&(0,eh.yV)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,$.tZ)(ly.rk,{tour:t,onStep:o,onDone:o,children:n})}var Re=t(27345),Rn=t(65367),Rt=t(12517),Rr=t(31534),Ri=(0,eO.X)({container:[ea.l0.colWithGap(8)],splitContainer:[ea.l0.rowWithGap(8),ea.l0.justify.spaceBetween,ea.l0.mt(8)],group:[ea.l0.rowWithGap(8)],path:[ea.l0.rowWithGap(8),ea.l0.flex.growAndShrink(1),ea.l0.align.center],text:[ea.l0.mt(8)]}),Ro=function(e){var n=e.path;return(0,$.BX)(eo.G,{css:Ri.path,children:[(0,$.tZ)(aH.Z,{path:n}),(0,$.tZ)(eA.xv,{multiline:!1,children:(0,$.tZ)(Rr.yx,{path:n})})]})},Ra=function(){var e,n=(0,eu.Z)().fs,t=gG();if(null===t)return null;var r=t.paths,i=t.onCallback;if(0===r.length)return null;var o=function(){i("cancel")},a=(e=(0,ev._)(function(){var e,t,o,a,l,c,u,s,d;return(0,em.Jh)(this,function(p){switch(p.label){case 0:e=!0,t=!1,o=void 0,p.label=1;case 1:p.trys.push([1,7,8,9]),a=r[Symbol.iterator](),p.label=2;case 2:if(e=(l=a.next()).done)return[3,6];return c=l.value,[4,n.readFile(c,{fromDisk:!0})];case 3:if((u=p.sent()).error)throw u.error;if(!u.content)return[3,5];return[4,n.writeFile(c,u.content)];case 4:if((s=p.sent()).error)throw s.error;p.label=5;case 5:return e=!0,[3,2];case 6:return[3,9];case 7:return d=p.sent(),t=!0,o=d,[3,9];case 8:try{e||null==a.return||a.return()}finally{if(t)throw o}return[7];case 9:return i("discard"),[2]}})}),function(){return e.apply(this,arguments)});return(0,$.tZ)(e$.u,{isOpen:!0,onRequestClose:o,maxWidth:360,centered:!0,children:(0,$.BX)(eo.G,{css:Ri.container,children:[(0,$.tZ)(eA.h4,{level:2,variant:"subheadBig",children:"You have unsaved changes"}),r.map(function(e){return(0,$.tZ)(Ro,{path:e},e)}),(0,$.tZ)(eA.xv,{css:Ri.text,children:"To close this tab, please save or discard your changes to the file."}),(0,$.BX)(eo.G,{css:Ri.splitContainer,children:[(0,$.tZ)(nf.zx,{text:"Cancel",onClick:o}),(0,$.BX)(eo.G,{css:Ri.group,children:[(0,$.tZ)(nf.zx,{text:"Discard changes",onClick:a}),(0,$.tZ)(nf.zx,{text:r.length>1?"Save files":"Save file",onClick:function(){n.flush(new Set((0,ec._)(r)),iD.WL.MANUAL_SAVE),i("confirm")},colorway:"blue"})]})]})]})})};function Rl(e){var n,t,r,i,o,a,l,c=e.repl,u=e.currentUser,s=(0,e8.useRouter)(),d=s.query,p=!!d.deploymentPane,f=!!d.projectPane,h=(0,dw.Wd)("popupId","string"),v=(0,eH.Gv)(s),m=(0,J._)((0,et.useState)(function(){var e;return(0,nF.fK)({config:(e=(0,wf.U)(),(0,ny._)((0,ey._)({},e),{webview:Iz,commands:CV,debugger:_f,docs:_h,chat:CF,threadInbox:IC,tutorial:IT,videoPlayer:IU,extension:_9,extensionStore:SG,replAuth:Ig,searchReplace:Ib,modules:SJ,deployments:wd.R,education:_2,autograder:wQ,instructions:SX,config:Cq,preferences:SQ,multiplayer:wp.Z,submitEduRepl:wp.Z,extensionDevtools:SC}))})}),1)[0],g=(t=(n={repl:c,currentUser:u}).repl,r=n.currentUser,!t||!r||null!=t.lesson||r.hasSeenOldWorkspaceTour||r.hasSeenOldSidebarTour?null:I7),y=(0,dz.Gn)("isLayoutStacked").preferences,b=null;h?b=IQ(!(i=rZ.Z.get(rI(h)))||"string"==typeof i&&parseInt(i,10)<Date.now()?null:rZ.Z.get(rS(h)),m.decode):c.layoutState&&(b=IQ(c.layoutState,m.decode));var x=(0,nO.Z)(function(){return p?{type:"deployments"}:f?{type:"project"}:void 0},[p,f]);return(0,$.BX)(hj.ip,{clientName:u.username,replId:c.id,isPid2Enabled:c.flagPid2,isMuxerEnabled:c.flagWsv2Muxer,children:[(0,$.tZ)(e2.eA,{children:(0,$.tZ)(iQ,{initialPane:x,savedLayoutState:b,isHTML:c.language.startsWith("html"),isStacked:y.isLayoutStacked,isExtension:!!c.config.isExtension,sourceReplId:null===(l=c.source)||void 0===l?void 0:null===(a=l.release)||void 0===a?void 0:null===(o=a.repl)||void 0===o?void 0:o.id,popupId:h,children:(0,$.tZ)(I9,{tour:g,userId:u.id,children:(0,$.tZ)(Rc,{ui:m,repl:c,currentUser:u,isBonsaiWebview:v})})})}),(0,$.tZ)(Rn.Z,{})]})}function Rc(e){var n,t,r,i,o,a,l,c,u,s,d,p,f,h,v,m,g,y,b,x,Z,w,C,_,k=e.repl,S=e.currentUser,I=e.isBonsaiWebview,R=e.ui,G=(n=aO(),t=i4(oW),r=i4(oz),i=(0,bs.uV)(),o=(0,ei.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===k.language?"html":"outputs",c=(l=(0,J._)((0,et.useState)(!1),2))[0],u=l[1],d=(s=(0,J._)((0,et.useState)(!1),2))[0],p=s[1],h=(f=(0,J._)((0,et.useState)(!1),2))[0],v=f[1],m=(0,ng.e_)(),g=(0,ng.f)(),y=(0,ei.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0}),b=(0,ei.P5)({controlName:"flag-multi-lsp-connections"}),x=(0,ei.P5)({controlName:xN.r}),Z=(0,gT.s)(),w=(0,hj.Km)(),C=(0,nO.Z)(function(){return{connCtx:w,runnerMode:a,onPresenceCommand:m,getColorForUser:g,onUnrecoverableError:(0,IF.Z)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===IY.Gs.NotAllowed?p(!0):e===IY.Gs.FirewallDenied?u(!0):e===IY.Gs.RequiresRefresh&&v(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,onFirewallDenied:function(){return u(!0)},enableUserEvents:o,enableMultipleLSPClientsPerFile:b,openTelemetryTracing:y,enableReplspaceSshTokenPassthrough:x,shouldAutoFlushRef:Z}},[o,a,n,t,r,i,m,g,y,b,w,x,Z]),_=(0,IN.H)(C),(0,nO.Z)(function(){return{services:_,isFirewallDenied:c,isPleaseRefresh:h,isNotAllowed:d}},[_,c,h,d])),E=G.services,T=G.isFirewallDenied,D=G.isPleaseRefresh,P=G.isNotAllowed,B=aB();(0,Ij.mK)(!!k.layoutState);var U=(0,dz.Gn)("ghostwriterChatServiceEnvironment").preferences,A=(0,nO.Z)(function(){return(0,g6._)(null==S?void 0:S.keybindings.keybindings)},[S]),O=(0,ei.P5)({controlName:"flag-pid2-github-import",type:"boolean",default:!1});if(!E)return null;var X=(0,lt.QS)(U.ghostwriterChatServiceEnvironment),L=S.hasAiPro||S.userSubscriptionType===e4.HP.HackerPro;return(0,$.tZ)(lt.k1,{replId:k.id,currentUserId:S.id,hasAccessToAdvancedModel:L,endpoint:X,children:(0,$.tZ)(pO.du,{children:(0,$.BX)(ys,{services:E,ui:R,repl:k,userKeybindings:A,children:[(0,$.BX)(mi.Z,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,$.tZ)(mD,{}),(0,$.tZ)(d8,{isAdmin:S.isAdmin,isSubscribed:S.isSubscribed}),(0,$.tZ)(wc.Z,{replTitle:k.title}),I?null:(0,$.tZ)(mt,{}),I?(0,$.tZ)(I3,{}):null,(0,$.tZ)(Ra,{}),(0,$.tZ)(lv,{}),(0,$.tZ)(bm,{}),(0,$.tZ)(xQ,{repl:k,currentUser:S}),(0,$.tZ)(Re.f,{}),k.flagPid2&&O?(0,$.tZ)(yk,{}):(0,$.tZ)(yC,{}),(0,$.tZ)(ws,{}),(0,$.tZ)(Rf,{isBonsaiWebview:I}),(0,$.tZ)(yD,{}),(0,$.tZ)(bc,{}),(0,$.tZ)(bd.Z,{}),(0,$.tZ)(Rs,{isMultiplayerSession:k.multiplayers.length>0}),(0,$.tZ)(bp.Z,{isOpen:T&&!P&&!D}),(0,$.tZ)(bf.Z,{isOpen:P}),(0,$.tZ)(IH.Z,{isOpen:D}),(0,$.tZ)(yI.E,{}),(0,$.tZ)(Rt.X,{openDeploymentPane:function(){return B({pane:{type:"deployments"}})}}),(0,$.tZ)(wl,{}),(0,$.tZ)(yP,{}),(0,$.tZ)(IV.v,{})]}),(0,$.tZ)(Ru,{replId:k.id})]})})})}function Ru(e){var n,t=e.replId,r=(0,J._)((0,bs.qg)(),1)[0],i=(0,J._)((n=(0,ey._)({},rE,void 0),rR.D(rT,n)),1)[0],o=(0,et.useCallback)(function(){i({variables:{input:{replId:t,state:{}}}})},[i,t]);return(0,et.useEffect)(function(){r&&o()},[r,o]),(0,$.tZ)(bu.Z,{})}function Rs(e){var n,t,r,i,o,a=(n=e.isMultiplayerSession,r=(t=(0,J._)((0,et.useState)(!1),2))[0],i=t[1],o=(0,ly.Sr)(),(0,et.useEffect)(function(){!o&&n&&"default"===xb()&&i(!0)},[n,o]),{shouldShowModal:r,hideModal:(0,et.useCallback)(function(){xC(!0),i(!1)},[]),confirm:(0,et.useCallback)((0,ev._)(function(){return(0,em.Jh)(this,function(e){switch(e.label){case 0:return[4,function(){return xZ.apply(this,arguments)}()];case 1:return e.sent(),i(!1),[2]}})}),[])}),l=a.shouldShowModal,c=a.hideModal,u=a.confirm;return l?(0,$.tZ)(bh,{onCancel:c,onConfirm:u}):null}var Rd=(0,Q.F4)({from:{opacity:0},to:{opacity:1}}),Rp=(0,eO.X)({containerRoot:[ea.l0.width("100%"),ea.l0.left(0),ea.l0.position.absolute],main:[{opacity:1,animation:"".concat(Rd," 0.2s ease-in-out")}]});function Rf(e){var n,t,r,i,o,a,l,c=e.isBonsaiWebview,u=(n=i4(ri),t=(0,cx.Z)(),r=(0,d7.NJ)(),i=(0,d7.Cl)(),o=(r||i)&&t?er.Mz:0,a=(0,et.useRef)(null),l=(0,sU.Z)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var i=a.current.getBoundingClientRect(),l=i.top;n({width:t,height:r,x:i.left,y:l-o})}}),(0,et.useCallback)(function(e){a.current=e,l(e)},[l])),s=i1(t2),d=i1(tC),p=i1(t_),f=i1(tk),h=(0,dz.Gn)("fontSize").preferences;return(0,$.tZ)(eo.G,{innerRef:u,css:Rp.containerRoot,style:c?{height:"calc(100% - 4px)",top:6,bottom:0}:{height:"calc(100% - ".concat(er.Mz,"px)"),top:er.Mz},children:s?(0,$.BX)($.HY,{children:[(0,$.tZ)(hV,{}),(0,$.BX)("main",{id:"main-content",css:Rp.main,children:[p.map(function(e){return(0,$.tZ)(sP,{handleId:e},e)}),f.map(function(e){return(0,$.tZ)(g8,{headerId:e},e)}),d.map(function(e){return(0,$.tZ)(mS,{paneId:e},e)}),0===d.length?(0,$.tZ)(IK,{}):null]}),(0,$.tZ)(ou,{}),(0,$.tZ)(aE,{}),(0,$.tZ)(yS,{}),(0,$.tZ)(ga,{}),(0,$.tZ)(pO.xV,{fontSize:h.fontSize})]}):null})}var Rh=t(15579),Rv=t(65243),Rm=t(42673),Rg=t(20367),Ry=t(52259),Rb=t(29437);function Rx(){var e=(0,eb._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return Rx=function(){return e},e}function RZ(){var e=(0,eb._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return RZ=function(){return e},e}var Rw=(0,ex.Ps)(Rx()),RC=(0,ex.Ps)(RZ());function R_(){var e=(0,eb._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return R_=function(){return e},e}function Rk(){var e=(0,eb._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return Rk=function(){return e},e}var RS=(0,ex.Ps)(R_(),Rw),RI=(0,ex.Ps)(Rk(),vm.s,RC);function RR(){var e=(0,eb._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n    hasSeenOldSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return RR=function(){return e},e}function RG(){var e=(0,eb._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n  }\n"]);return RG=function(){return e},e}var RE=(0,ex.Ps)(RR()),RT=(0,ex.Ps)(RG());function RD(){var e=(0,eb._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    isAdmin: hasRole(role: ADMIN)\n    userSubscriptionType\n    hasAiPro\n    ...CrosisContextCurrentUser\n    workspacePreferences\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return RD=function(){return e},e}function RP(){var e=(0,eb._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    hostedUrl: hostedUrl(dotty: true)\n    isAlwaysOn\n    multiplayers {\n      id\n    }\n    origin {\n      id\n    }\n    config {\n      isVnc\n      isServer\n      isExtension\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return RP=function(){return e},e}var RB=(0,ex.Ps)(RD(),bV.D,RS,RE,vv.z),RU=(0,ex.Ps)(RP(),bV.C,RI),RA=t(69958);function RO(){var e=(0,eb._)(["\n  query ReplEnvironmentDesktop(\n    $url: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on SubscriptionExpiredError {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return RO=function(){return e},e}var RX={},RL=(0,ex.Ps)(RO(),RU,RT,RA.PZ,RA.fF,RA.FH,RB),RM=(0,Q.iv)([ea.l0.position.fixed,ea.l0.top(0),ea.l0.left(0),ea.l0.height("100%"),ea.l0.width("100%")]),RW=(0,Q.iv)([ea.l0.center,ea.l0.flex.growAndShrink(1),ea.l0.dragRegion]),Rz=function(){var e,n,t,r,i=null,o=(0,e8.useRouter)().query;if(!o.replUrl)throw Error("Expected replUrl to be set");var a=o.replUrl.toString(),l=(e={variables:{url:a,environment:(0,Rg.O)(),platform:(0,Ry.F)()},ssr:!!o.ssr},n=(0,ey._)({},RX,e),ew.a(RL,n)),c=l.data,u=l.loading,s=l.error,d=c&&"Repl"===c.repl.__typename?c.repl:null,p=(null==c?void 0:c.currentUser)||void 0,f="https://replit.com".concat(a),h=null!==(t=null==d?void 0:d.description)&&void 0!==t?t:void 0,v=(0,J._)((0,et.useState)(!1),2),m=v[0],g=v[1];return(0,et.useEffect)(function(){return g(!0)},[]),i=s?(0,$.tZ)(eo.G,{css:[ea.l0.center,ea.l0.flex.growAndShrink(1)],children:(0,$.tZ)(eA.xv,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):u||!m?(0,$.tZ)(eo.G,{css:RW,children:(0,$.tZ)(Rh.Z,{height:100})}):d&&p?(0,$.tZ)(Rl,{repl:d,currentUser:p},d.id):(0,$.tZ)(eo.G,{css:RW,children:(0,$.tZ)(Rh.Z,{height:100})}),(0,$.tZ)(ee.Z,{children:(0,$.BX)(en.Z,{dataCy:"workspace-page",title:"".concat((null==d?void 0:d.title)||""),oembedUrl:f,description:h,noHeader:!0,noFooter:!0,noMain:!0,noSidebar:!0,hideEmailVerify:!0,children:[(0,$.tZ)(bM.Y,{}),(0,$.tZ)(Rb.Z,{replResponse:null!==(r=null==c?void 0:c.repl)&&void 0!==r?r:null,replUrl:a,children:(0,$.BX)(e0.Tg,{css:RM,children:[(0,$.tZ)(Rv.g,{}),(0,$.tZ)(Rm.G,{}),i]})})]})})}},39562:function(e,n,t){"use strict";t.d(n,{Pc:function(){return x},Pu:function(){return _}});var r=t(41733),i=t(21262),o=t(71440),a=t(23409);function l(){var e=(0,i._)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),u=t(18442),s=t(58995);function d(){var e=(0,i._)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i._)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},y=(0,o.Ps)(d()),b=(0,o.Ps)(p(),y,a.Y),x=(0,o.Ps)(f(),y),Z=(0,o.Ps)(h(),c,u._,b,x),w=(0,o.Ps)(v(),a.Y,Z),C=(0,o.Ps)(m(),w);function _(e){var n=(0,r._)({},g,e);return s.a(C,n)}}},function(e){e.O(0,[8046,1604,7854,3709,6645,2100,3191,7372,8438,7474,1938,5984,6030,605,5123,1487,1649,2149,3167,1229,5657,2640,2419,5752,3879,8395,916,3891,7229,1873,1589,9087,3907,2535,176,2686,9774,2888,179],function(){return e(e.s=3172)}),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-4604a2657376111f.js.map